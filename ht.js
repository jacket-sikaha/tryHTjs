!function(O,e,n5){"use strict";var l,H,I,a5="ht";if(!O.ht){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),O.performance&&O.performance.now||(f=Date.now(),O.performance||(O.performance={}),O.performance.now=function(){return Date.now()-f});for(var f,V=Date.now(),Z=["ms","moz","webkit","o"],a=0;a<Z.length&&!O.requestAnimationFrame;++a)O.requestAnimationFrame=O[Z[a]+"RequestAnimationFrame"],O.cancelAnimationFrame=O[Z[a]+"CancelAnimationFrame"]||O[Z[a]+"CancelRequestAnimationFrame"];O.requestAnimationFrame||(O.requestAnimationFrame=function(Q){var n=Date.now(),x=16+V-n;return V=n,O.setTimeout(function(){V=Date.now(),Q(performance.now())},x=x<0?0:x)}),O.cancelAnimationFrame||(O.cancelAnimationFrame=function(Q){return O.clearTimeout(Q)}),e.assign===n5&&(e.assign=function(Q){if(Q===n5||null===Q)throw new TypeError("Cannot convert undefined or null to object");for(var n=e(Q),x=1;x<arguments.length;x++){var b=arguments[x];if(b!==n5&&null!==b)for(var J in b)e.prototype.hasOwnProperty.call(b,J)&&(n[J]=b[J])}return n}),O.btoa===n5&&(O.btoa=function(Q){for(var n,x,b=String(Q),J=0,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="";b.charAt(0|J)||(L="=",J%1);f+=L.charAt(63&n>>8-J%1*8)){if(255<(x=b.charCodeAt(J+=.75)))throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|x}return f});var E=(Q_=O.location)&&O.document,x5=null,B=n5,d=O.ht={},G=O.htconfig,b5=d.Default=G&&G.Default||{},o5=d.Style=G&&G.Style||{},_=d.Attr=G&&G.Attr||{},$=function(){return!0},W=function(){return!1},r=function(Q){return Q},D=function(Q){return!Q},i=d.Color=G&&G.Color||{},A=d.IsGetter=G&&G.IsGetter||{},u=!1;try{var Q=e.defineProperty({},"passive",{get:function(){return u=!0,n5}});Q_&&O.addEventListener("test",Q,Q),Q_&&O.removeEventListener("test",Q,Q)}catch(n){u=!1}b5.passiveSupported=u;var B5,G5,M,_5,t,$5,W5,P,c,q,D5,A5,y,K,U,T,k,N,G=b5.passiveSupported,j=b5.eventListenerOptionsFalse=!!G&&{passive:!1,capture:!1},C=b5.eventListenerOptionsTrue=!G||{passive:!1,capture:!0},Q5=function(Q,n,x,b){Q.addEventListener(n,x,b?C:j)},u5=function(Q,n,x,b){Q.removeEventListener(n,x,b?C:j)},M5=(Q=Math).round,t5=Q.floor,i5=Q.ceil,r5=Q.sqrt,J5=Q.max,L5=Q.min,P5=Q.abs,f5=Q.cos,c5=Q.acos,V5=Q.sin,F5=Q.pow,q5=Q.asin,w=(Q.exp,Q.PI),l5=2*w,w5=w/2,y5=Q.tan,K5=Q.atan2,U5=Q.random,G=Q.log,n=F5(2,1),e5=O.parseInt||global.parseInt,v5="2023-3-15",O5=Q_&&!!O.navigator&&-1<O.navigator.platform.indexOf("Win"),d5=function(Q){return Q*Q},h5=Q_&&O.setTimeout,p5=Q_&&O.clearTimeout,z5=Q_&&(O.navigator?O.navigator.userAgent.toLowerCase():""),s5=(ai=function(Q){return Q.test(z5)})(/msie/),X5=ai(/msie/)||ai(/trident/),R5=ai(/msie 10/),g5=ai(/edge/),S5=ai(/firefox/),m5=ai(/mac/),Y5=(ai(/mscAndroid/),b5.isTouchable===n5?!O5&&!!E&&"ontouchend"in E:b5.isTouchable),T5="default",k5="single",N5="multiple",j5="front",C5="back",Qi="left",ni="right",xi="top",bi="bottom",Ji="center",Li="eye",fi="middle",Vi="east",li="west",Hi="north",Ii="none",Zi="px",Ei="absolute",ai="border",oi="triangle",h="rect",Bi="circle",Gi="cylinder",_i="shape",$i="items",Wi="normal",Di="remove",Ai="clear",ui="width",Mi="height",ti="ingroup",ii="check",ri="uncheck",Pi="radioOn",ci="radioOff",Fi="points",qi="values",wi="series",yi="body",Ki="label",Ui="label2",ei="note",vi="note2",Oi="icons",di="labelFont",hi="labelColor",pi="labelSelectColor",zi="note.expanded",si="note2.expanded",Xi="edge.expanded",Ri="edge.points",gi="edge.type",Si="rotation",mi="hidden",Yi="visible",Ti="tuv",ki="no",Ni="draw",ji="select",Ci="currentSubGraph",O5="selectBackground",QZ="autoMakeVisible",nZ="autoHideScrollBar",xZ="scrollBarColor",bZ="scrollBarSize",JZ="indent",LZ="rowHeight",fZ="columnLineColor",VZ="rowLineColor",lZ="columnLineVisible",HZ="rowLineVisible",IZ="visibleFunc",ZZ="expandIcon",EZ="collapseIcon",aZ="checkMode",oZ="sortFunc",BZ="editable",GZ="batchEditable",_Z="tristate",$Z="asc",WZ="desc",DZ="position",AZ="elevation",uZ="children",MZ="translateX",tZ="translateY",iZ="dataModel",rZ="state",PZ="encode",cZ="shape3d",FZ="shape3d.resolution",qZ="shape3d.visible",wZ="shape3d.from.visible",yZ="shape3d.to.visible",KZ="shape3d.top.visible",UZ="shape3d.bottom.visible",eZ="repeat.uv.length",vZ="serializeValue",OZ="deserializeValue",dZ="centerUniform",hZ="uniform",pZ="rgba(255,255,255,0)",zZ="style",sZ="string",XZ="boolean",RZ="color",gZ="int",SZ="number",mZ="ew-resize",YZ="ns-resize",TZ="pointer",kZ="auto",NZ="mousedown",jZ="mousemove",CZ="mouseup",Qj="mouseout",nj="touchstart",xj="touchmove",bj="touchend",Jj="keydown",Lj=["DOMMouseScroll","mousewheel"],fj=S5?Lj[0]:Lj[1],Vj="__ht__"+PZ,lj=[nj,xj,bj],Hj=[NZ,jZ,CZ,Qj,fj,"wheel","mouseenter","mouseleave","mouseover"],Ij=[Jj,"keyup","keypress","input","contextmenu","compositionstart","compositionupdate","compositionend"],Zj=(Y5?lj:Hj).concat(Ij),Ej=x5,aj=x5,oj=x5,Bj=x5,Gj=CZ.length,_j=function(){oj&&(p5(oj.timeout),oj=x5)},$j=function(){oj&&b7(oj.e,oj.info)},Wj=(O.addEventListener&&(B=Q_)&&(Y5||(Q5(O,Qj,function(){_j()}),Q5(O,fj,function(){J7()})),Q5(O,"keyup",function(Q){91===Q.keyCode?cj={}:delete cj[Q.keyCode]},!0),Q5(O,Jj,function(Q){cj[Q.keyCode]=!0},!0),Q5(O,"blur",function(Q){cj={}})),0),Dj=x5,Aj=function(Q,n){var x=h5(function(){delete Dj[x],M_(Dj)&&(Dj=x5),Q()},n);return x},S5=x5,uj={},Mj={},tj={},ij={},rj={},Pj={},cj={},Fj={},qj={},wj={},yj={},Kj=/.json$/,Uj=/\.(json|bin|fbx|gltf|glb)$/,ej=/^data:image\/svg\+xml/,vj=[],Oj={},dj=x5,hj=function(){},pj=function(){throw"Oops!"},zj=[0,0,0],sj={x:0,y:0,width:0,height:0},Xj=x5,Rj=x5,gj=x5,Sj=function(Q,n){(Mj[Q]=n)&&n.comps&&!n.uuid&&(n.uuid=d.Math.generateUUID()),mG[Q]&&(n.cacheRule=mG[Q],delete mG[Q])},mj=function(Q){Rj&&!Q._72O&&((gj=gj||{})[Q._72O=r7()]=Q),_5!=x5?(Q=1e4*V5(Gj++))-t5(Q)<.05&&M&&!W5&&(bh=_j):bh=f_},Yj=function(x,b,J,L){var f,V,Q=(Rj=Rj||{})[x];if(Q){if(Q.url===b)return;Q.image?(Q.image.onload=hj,Q.image.onerror=hj):Q.request&&(Q.request.onload=hj,Q.request.onerror=hj)}Kj.test(b)?(f=new nE,Rj[x]={request:f,url:b},(b=b5.beforeLoadURL(b,x)).data?(V=b5.parse(b.data),Tj(x,V),b5.handleImageLoaded(x,V)):(f.onload=function(Q){var n;200===this.status||0===this.status?(n=b5.parse(f.getResponseText()),Tj(x,n),b5.handleImageLoaded(x,n)):Tj(x,b5.handleUnfoundImage(x,b)||x5)},f.onerror=function(Q){Tj(x,b5.handleUnfoundImage(x,b)||x5)},(Q={}).url=encodeURI(b),Q.sync=!1,f.send(Q))):(V=new Image,Rj[x]={image:V,url:b},/^data:image/.test(b)||(b=b5.beforeLoadURL(b,x),b=b5.appendTimeStamp(b),b=encodeURI(b),V.crossOrigin=b5.crossOrigin),b5.convertImageSrc(b,function(Q){X5&&(0<b.toLowerCase().indexOf(".svg")||ej.test(b))?(E.body.appendChild(V),V.style.visibility="hidden",V.onload=function(){h5(function(){var Q,n;J&&(V.width=J),L&&(V.height=L),V.width&&V.height||(Q=V.width||V.clientWidth,n=V.height||V.clientHeight,V.width=Q,V.height=n),b5.handleImageLoaded(x,V),Tj(x,V),E.body.removeChild(V),V.style.visibility=""},180)},V.onerror=function(){Tj(x,b5.handleUnfoundImage(x,b)||x5),E.body.removeChild(V),V.style.visibility=""}):(V.onload=function(){J&&(V.width=J),L&&(V.height=L),b5.handleImageLoaded(x,V),Tj(x,V)},V.onerror=function(){Tj(x,b5.handleUnfoundImage(x,b)||x5)}),V.src=Q}))},Tj=function(Q,n){if(Sj(Q,n),delete Rj[Q],M_(Rj)&&(Rj=x5,gj)){for(var x in gj)(b=gj[x])._2O&&b._2O[Q]&&(b.deleteTexture(Q),delete b._2O[Q]),b.invalidateAll&&b.invalidateAll(n5,"imageLoaded",Q),b.redraw&&b.redraw(),b.iv(),b instanceof mE&&b.dm().each(function(Q){Q instanceof OV&&Q.updateLayoutAttaches()}),delete b._72O;gj=x5}if(n&&gj)for(var x in gj){var b;(b=gj[x]).invalidateAll&&b.invalidateAll(n5,"imageLoading",Q),b.redraw&&b.redraw(),b.iv(),b instanceof mE&&b.dm().each(function(Q){Q instanceof OV&&Q.updateLayoutAttaches()})}},kj=(G=Q&&Date,function(){return(O.performance&&O.performance.now?O.performance:Date).now()}),Nj=function(Q,n,x){return{width:Q,height:n,comps:H_(x)?x:[x]}},jj=function(Q,n){return{type:Bi,rect:[Q,n,1.6,1.6],borderWidth:1,borderColor:o,gradient:x7,gradientColor:v1,background:o}},Cj=function(Q,n){return Nj(16,16,{type:oi,rect:[4,4,10,8],background:Q,rotation:n?1.57:3.14})},Q_=function(Q,n){return Nj(16,16,{type:oi,rect:[4,4,8,7],background:Q,rotation:n?3.14:0})},n_=function(Q){return"horizontal"===(Q=Q._orientation)||"h"===Q},x_=function(Q,n,x,b){return x||(x=Y5?5:3,x/=b||1),{x:Q-x,y:n-x,width:2*x,height:2*x}},b_=function(Q){return(/ble$/.test(Q)||/ed$/.test(Q)||A[Q]?"is":"get")+Q.charAt(0).toUpperCase()+Q.slice(1)},J_=function(Q){return"set"+Q.charAt(0).toUpperCase()+Q.slice(1)},H5=function(Q){return typeof Q==sZ||Q instanceof String},L_=function(Q){return typeof Q==SZ},f_=function(Q){return typeof Q===XZ},V_=function(Q){return Q&&"object"==typeof Q},l_=function(Q){return"function"==typeof Q},H_=function(Q){return Q instanceof Array},I_=function(Q){return Q instanceof m},v=function(Q){return Q instanceof OV},Z_=function(Q){return Q instanceof XV},E_=function(Q){return Q instanceof RV},a_=function(Q,n){return Q instanceof d.Group&&(n?!(!(n=n.getDataUI(Q))||!n._88I):Q.isExpanded())},o_=function(Q){return Q instanceof SV},B_=function(Q){return Q&&"IFRAME"===Q.tagName},G_=function(Q,n,x){var b,J=n.length;if(x)for(var L=0;L<x;L++)if(3===J)Q.push(n[0]),Q.push(n[1]),Q.push(n[2]);else for(b=0;b<J;b++)Q.push(n[b]);else if(3===J)Q.push(n[0]),Q.push(n[1]),Q.push(n[2]);else for(b=0;b<J;b++)Q.push(n[b])},__=function(Q){return!!Q&&(V_(Q)?Q:{})},$_=function(Q,n,x){var b,J=V_(Q)?Q:Q.prototype;for(b in n)x&&b in J?J[b]===n5&&console.warn("class",J,"has own undefined property",b,", keep exist!"):J[b]=n[b];return Q},W_=function(Q,n){var x;"wheelDelta"in n||((x=n.deltaMode)===n.DOM_DELTA_PIXEL?n.wheelDelta=-n.deltaY:x===n.DOM_DELTA_LINE?n.wheelDelta=40*-n.deltaY:n.wheelDelta=120*-n.deltaY),Q.handle_mousewheel(n)},D_=function(Q){return String.fromCharCode(Q)},A_=function(Q,n){for(var x,b=0,J="",L="",f=Q.length;b<f;b++)"%"===(x=Q[n?b:f-1-b])?x="'":"a"===x?x='"':"]"===x&&(x="\\"),x=D_(x.charCodeAt(0)-1),n?b%2?L+=x:J=x+J:J+=x;return n?L+J:J},u_=function(Q,n,x){Q.superClass.constructor.apply(n,x)},M_=function(Q){for(var n in Q)return!1;return!0},t_=function(Q){return!Q||0===Q.length},i_=(q="",[ri[0],VZ[0],Ki[0]].forEach(function(Q){q+=J_(Q).slice(3)}),hZ=E&&E[q]||dZ,function(Q,n){return Q===n||Q.x===n.x&&Q.y===n.y&&Q.width===n.width&&Q.height===n.height}),r_=function(Q,n,x){return Q<n?n:x<Q?x:Q},P_=function(Q){return Q<0?-1:0<Q?1:0},c_=function(Q,n,x){return F_(Q.x,Q.y,n.x,n.y,x.x,x.y,x.x+x.width,x.y,!0)||F_(Q.x,Q.y,n.x,n.y,x.x+x.width,x.y,x.x+x.width,x.y+x.height,!0)||F_(Q.x,Q.y,n.x,n.y,x.x+x.width,x.y+x.height,x.x,x.y+x.height,!0)||F_(Q.x,Q.y,n.x,n.y,x.x,x.y+x.height,x.x,x.y,!0)},F_=function(Q,n,x,b,J,L,f,V,l){var H,I=(V-L)*(x-Q)-(f-J)*(b-n);return 0!=I?(H=Q+(I=((f-J)*(n-L)-(V-L)*(Q-J))/I)*(x-Q),I=n+I*(b-n),l&&(H+ZS<L5(Q,x)||H-ZS>J5(Q,x)||H+ZS<L5(J,f)||H-ZS>J5(J,f)||I+ZS<L5(n,b)||I-ZS>J5(n,b)||I+ZS<L5(L,V)||I-ZS>J5(L,V))?x5:[H,I]):x5},q_=function(Q,n,x){if(Q&&x){var b=function(Q,n,x){return n?n===zZ?Q.getStyle(x):"attr"===n?Q.getAttr(x):"field"===n?Q[x]:void 0:Q[x=b_(x)]?Q[x]():void 0};if("string"!=typeof x||"{"!==x[0]||"}"!==x[x.length-1])return b(Q,n,x);var J=(x=(x=x.substr(1)).substr(0,x.length-1)).split("."),L=b(Q,n,J[0]);if(L!=x5)for(var f=1,V=J.length;f<V;f++)if((L=L[J[f]])==x5)return L;return L}return n5},w_=function(Q,n,x,b){Q&&x&&(n?n===zZ?Q.s(x,b):"attr"===n?Q.a(x,b):"field"===n&&(n=Q[x],Q[x]=b,Q.fp("f:"+x,n,b)):Q[x=J_(x)]&&Q[x](b))},y_=function(Q,n,x){var b=100*Math.max(Q.width,Q.height);return n&&"top"!==n?"bottom"===n?{x:Q.x-b,y:Q.y-b,width:Q.width+2*b,height:Q.height*x+b}:"right"===n?{x:Q.x-b,y:Q.y-b,width:Q.width*x+b,height:Q.height+2*b}:"left"===n?{x:Q.x+Q.width*(1-x),y:Q.y-b,width:Q.width*x+b,height:Q.height+2*b}:void 0:{x:Q.x-b,y:Q.y+Q.height*(1-x),width:Q.width+2*b,height:Q.height*x+b}},K_=function(Q,n,x,b,J){n&&Nh(Q,x,b,1,J,n)},U_=function(Q,n,x,b){var J=1-Q;return J*J*n+2*Q*J*x+Q*Q*b},e_=function(Q,n,x,b,J){var L=1-Q;return L*L*L*n+3*L*L*Q*x+3*L*Q*Q*b+Q*Q*Q*J},v_=function(Q){var n,x,b,J,L=0;return Q.forEach(function(Q){if(0<(n=Q.length))for(x=Q[0],J=1;J<n;J++)b=Q[J],L+=S7(x,b),x=b}),L},O_=function(Q){return e.create(Q)},d_=function(Q){var n,x;Q.element||((n=Q.textField)?x=A7(Gp.TextField,n):(n=Q.textArea)?x=A7(Gp.TextArea,n):(n=Q.button)?x=A7(Gp.Button,n):(n=Q.comboBox)?x=A7(Gp.ComboBox,n):(n=Q.checkBox)?x=A7(Gp.CheckBox,n):(n=Q.radioButton)?x=A7(Gp.RadioButton,n):(n=Q.slider)?x=A7(Gp.Slider,n):(n=Q.colorPicker)?x=A7(Gp.ColorPicker,n):(n=Q.image)&&(x=A7(Gp.Image,n)),x&&(Q.element=x))},h_=function(Q,n){return(Q=p_(Q))._ht=n,Q},Qj=O.top===O?O.top:O||O.document,p_=function(Q,n){var x=E.createElement("div"),b=x.style;return x.tabIndex=-1,x.onkeydown=u7,b.msTouchAction=Ii,s_(x,x5,0),Y5&&b.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",x5),Q&&(b.overflow=mi),n&&g_(n,x),x},z_=function(Q,n){var x=E.createElement("canvas"),b=x.style;return b.msTouchAction=Ii,n||(b.pointerEvents=Ii),s_(x,x5,0),Q&&g_(Q,x),x},s_=function(Q,n,x){var b=Q.style;b.border=n?n+" solid 1px":0,b.outline=0,b.padding=x?"0 "+x+Zi:0,X_(Q)},X_=function(Q){(Q=Q.style).position=Ei,Q.margin=0,Q.setProperty("box-sizing","border-box",x5),Q.setProperty("-moz-box-sizing","border-box",x5)},R_=function(Q,n,x,b){b=b||Q7,n!=x5&&(Q.width=n*b,Q.style.width=n+Zi),x!=x5&&(Q.height=x*b,Q.style.height=x+Zi)},g_=function(Q,n,x){Q.appendChild(n),x&&(n.style.position=Ei)},S_=function(Q,n){n.split||(n+="");for(var x,b=n.split("\n"),J=0,L=b.length,f=0;f<L;f++){var V=v7(Q.font,b[f]);V.width>J&&(J=V.width),x=x||V.height}return Q.ss=b,{width:J,height:x*L}},m_=(c=E?z_().getContext("2d"):x5,function(Q,V,l,H,I,Z){var n=Q.split("\n"),E=[],a=v7(l,Q).height;return H=H||0,c.font=l,c.textBaseline=xi,n.forEach(function(Q){for(var n=0,x=1,b=0,J=Q.length;x<=J;x++){var L=Q.substring(n,x),f=I?c.measureText(Q[x]):v7(l,L),f=(I&&(b+=f.fontBoundingBoxDescent||a),I?b+(L.length-1)*Z:f.width+(L.length-1)*H);V<f&&(x-1===n?(E.push(Q.substring(n,x)),n=x):(E.push(Q.substring(n,x-1)),n=x-1,x--),b=0)}n!==x-1&&E.push(Q.substring(n,x))}),E}),Y_=function(Q,n,x,b,J,L,f,V){Q.font=x;var l,H=Q.measureText(n);Q.beginPath(),Q.strokeStyle=b,Q.lineWidth=1,"underline"===V?(l=H.actualBoundingBoxDescent?H.actualBoundingBoxDescent+1:v7(x,n).size/2,Q.moveTo(J-f/2,L+l),Q.lineTo(J+f/2,L+l)):"strikethrough"===V?(Q.moveTo(J-f/2,L),Q.lineTo(J+f/2,L)):"overline"===V&&(l=H.fontBoundingBoxAscent||v7(x,n).size/2,Q.moveTo(J-f/2,L-l),Q.lineTo(J+f/2,L-l)),Q.stroke()},T_=function(Q,n,x,b,J,L,f,V,l,H,I){var Z,E,a=J.x,o=J.y,B=J.width,J=J.height;n!=x5&&(Z=v7(x,n),E={},l&&(Z.width+=(n.length-1)*l),E.y=f&&f!==fi?f===xi?o+Z.height/2:o+J-Z.height/2:o+J/2,E.x=L&&L!==Qi?L===ni?a+B-Z.width/2:a+B/2:a+Z.width/2,N_(Q,n,E,x,b,l,H,I),V&&Y_(Q,n,x,b,E.x,E.y,Z.width,V))},k_=function(Q,n,x,b,J,L,f,V,l,H){var I=n.length;if(1===I){var Z=n[0];N_(Q,Z,x,b,J,V,l,H),f&&(E=v7(b,Z),Y_(Q,Z,b,J,x.x+x.width/2,x.y+x.height/2,E.width,f))}else for(var E,a=x.height/I,o={x:x.x,y:x.y,width:x.width,height:a},B=0;B<n.length;B++)L?T_(Q,n[B],b,J,o,L,null,f,V,l,H):(N_(Q,n[B],o,b,J,V,l,H),f&&(E=v7(b,n[B]),Y_(Q,n[B],b,J,o.x+o.width/2,o.y+o.height/2,E.width,f))),o.y+=a},N_=function(Q,n,x,b,J,L,f,V){Q.font=b||H7,Q.fillStyle=J||l7,Q.textAlign=Ji,Q.textBaseline=fi;var l,H,H=x?x.width===n5?(l=x.x,x.y):(l=x.x+x.width/2,x.y+x.height/2):l=0,I=f&&V;if(I&&(Q.strokeStyle=V,Q.lineWidth=f),L){l-=(v7(b,n).width+L*(n.length-1))/2;for(var Z=(n+"").length,E=0;E<Z;E++){var a=n[E],o=Q.measureText(a);I&&Q.strokeText(a,M5(l+(o.width+4)/2),M5(H)),Q.fillText(a,M5(l+(o.width+4)/2),M5(H)),l+=o.width+L}}else I&&Q.strokeText(n,M5(l),M5(H)),Q.fillText(n,M5(l),M5(H))},j_=function(Q){var n=(Q=Q.getView?Q.getView():Q).offsetWidth||Q.scrollWidth;return!n&&Q.style.width?e5(Q.style.width):n},C_=function(Q){var n=(Q=Q.getView?Q.getView():Q).offsetHeight||Q.scrollHeight;return!n&&Q.style.height?e5(Q.style.height):n},Qh=function(Q,n,x){var b=n[0].toUpperCase()+n.substring(1,n.length);Q["webkit"+b]=x,Q["moz"+b]=x,Q["ms"+b]=x,Q["o"+b]=x,Q[n]=x},nh=function(Q,n){var x=p_(),b=x.style;return b.backgroundColor=b5.disabledBackground,Q&&(b.backgroundImage="url("+Q+")",b.backgroundPosition="50% 50%",b.backgroundRepeat="no-repeat no-repeat"),!1===n?P.forEach(function(Q){Q5(x,Q,ep)}):P.forEach(function(Q){Q5(x,Q,Up)}),x},xh=function(Q,n){return(Q=Q.getContext("2d",n)).save(),Q.lineCap=f7,Q.lineJoin=V7,Q},bh=function(Q,n,x,b){Jh(Q,n*Q7,x*Q7),1!=(b*=Q7)&&Q.scale(b,b)},Jh=function(Q,n,x){Q.translate(n,x)},Lh=function(Q,n){n&&Q.rotate(n)},fh=function(Q,n,x){x===n5&&(x=1),1===(n=n===n5?1:n)&&1===x||Q.scale(n,x)},Vh=!(P=[nj,Jj,NZ]),lh=Qj[ii[1]+MZ[0]],Hh=function(Q){var n=E.activeElement;if(E.activeElement!==Q){n&&n.forceOnblur&&n.forceOnblur();for(var x=[],b=Q.parentNode;b;)x.push([b,b.scrollLeft,b.scrollTop]),b=b.parentNode;if(!Vh){var J=[],L=[];try{for(var f=O.parent,V=O;f!==V;)J.push([f,f.scrollX,f.scrollY]),V=f,f=O.parent;var l=O.frameElement;if(l)for(var H=l.parentNode;H;)L.push([H,H.scrollLeft,H.scrollTop]),H=H.parentNode}catch(Q){Vh=!0}}Y5?Q.focus():(l=(n=C7()).target,Q.focus(),l.scrollLeft=n.left,l.scrollTop=n.top),x.forEach(function(Q){Q[0].scrollLeft=Q[1],Q[0].scrollTop=Q[2]}),Vh||(J.forEach(function(Q){Q[0].scrollTo(Q[1],Q[2])}),L.forEach(function(Q){Q[0].scrollLeft=Q[1],Q[0].scrollTop=Q[2]}))}},Ih=function(Q){return Q&&Q.getView?Q.getView():Q},F=function(Q,n,x,b,J){var L,f;2===arguments.length&&(x=n.y,b=n.width,J=n.height,n=n.x),Q.isSelfViewEvent?(Q.setX(n),Q.setY(x),Q.setWidth(b),Q.setHeight(J)):(L=(f=Ih(Q)).style,(E.fullscreenElement||E.mozFullScreenElement||E.webkitFullscreenElement||E.msFullscreenElement)!==f?(n!==n5&&(L.left=n+Zi),x!==n5&&(L.top=x+Zi),b!==n5&&(L.width=b+Zi),J!==n5&&(L.height=J+Zi)):(f=b5.getWindowInfo(),L.left=(n=f.left)+Zi,L.top=(x=f.top)+Zi,L.width=(b=f.width)+Zi,L.height=(J=f.height)+Zi),Q.endEditing&&!Y5&&Q.endEditing(),Q.redraw&&Q.redraw(),Q.invalidate&&Q.invalidate(),Q.onLayouted&&Q.onLayouted(n,x,b,J),Q.fireViewEvent&&Q.fireViewEvent("layout"))},Zh=function(Q){return Q.touches?Q.touches[0]||Q.changedTouches[0]:Q},Eh=function(Q){return Q&&"object"==typeof Q&&"touches"in Q},ah=function(Q){b5.popup&&b5.popup.close(),b5.popup=Q},oh=x5,Bh=function(Q){oh.handleWindowTouchMove(Q)},Gh=function(Q){oh.handleWindowTouchEnd(Q),u5(O,xj,Bh),u5(O,bj,Gh),u5(O,"blur",Gh),oh=x5},_h=function(Q){oh.handleWindowMouseMove(Q)},$h=function(Q){oh.handleWindowMouseUp(Q),u5(O,jZ,_h),u5(O,CZ,$h),u5(O,"blur",$h),oh=x5},Wh=function(Q){return 1===p7(Q)},Dh=function(Q,n){return n?n.keyCode===Q:cj[Q]},Ah=function(Q){return X7(Q)&&Dh(65,Q)},uh=function(Q){return Dh(46,Q)||Dh(8,Q)},Mh=(Qj=function(n){return function(Q){return Q?Q.keyCode===n:cj[n]}})((Q=[65,83,68,87,37,38,39,40,32,13,27])[0]),th=Qj(Q[1]),ih=Qj(Q[2]),rh=Qj(Q[3]),Ph=Qj(Q[4]),ch=Qj(Q[5]),Fh=Qj(Q[6]),qh=Qj(Q[7]),wh=Qj(Q[8]),yh=Qj(Q[9]),Kh=Qj(Q[10]),Uh={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},eh=[2,2,2,2,2,2,2,2,2,2,2,2,3,3,5,5,5,5,5,13,19,59],vh=x5,Oh=x5,dh=function(Q,n){vh=vh||z_(),R_(vh,Q,n,1);var x=xh(vh);return x.clearRect(0,0,Q,n),x},hh=function(Q,n){Oh=Oh||z_(),R_(Oh,Q,n,1);var x=xh(Oh,{willReadFrequently:!0});return x.clearRect(0,0,Q,n),x},ph=function(Q,n,x){var b,J,L,f,V,l,H,I,Z,E;return n&&Q?"override"===x?n:"override_rgb"===x?(E=sh(n),Q=zh(Q),"rgba("+M5(255*E[0])+","+M5(255*E[1])+","+M5(255*E[2])+","+Q[3]/255+")"):"override_a"===x?(E=sh(n),"rgba("+(Q=zh(Q))[0]+","+Q[1]+","+Q[2]+","+E[3]+")"):"multiply_destinationAtop"===x?(x=sh(Q),I=x[3],b=sh(n),J=b[3],0!==I&&0!==J&&(f=(L=x)[3],V=x.map(function(Q,n){return Q*b[n]}),Z=1-I,H=(l=1-J)*I+J,x=x.map(function(Q,n){return(J*Z*b[n]+J*I*V[n]+l*I*Q)/H}),Z=1-(I=H),x=x.map(function(Q,n){return L[n]*Z+Q*I}),I=f),"rgba("+M5(255*x[0])+","+M5(255*x[1])+","+M5(255*x[2])+","+I+")"):(E=sh(n),Q=zh(Q),"rgba("+M5(Q[0]*E[0])+","+M5(Q[1]*E[1])+","+M5(Q[2]*E[2])+","+Q[3]/255*E[3]+")"):Q},zh=function(){var b,Q,J={};for(Q in O){var n=N5.length;if(Q.length==n&&Q[0]===N5[2]&&Q[1]===Ii[1]&&Q[4]===N5[3]&&Q[5]===N5[4]&&Q.substr(n-2)===Ii[1]+Ii[2]){var x,L=O[Q];for(x in L)x.length===n&&x.substr(0,3)===ni[3]+Di[3]+ji[0]&&x.substr(n-2)===N5[0]+ei[3]&&(Lj=L[x])}}return function(Q){var n,x=J[Q];return x||(b||(b=z_(),R_(b,1,1,1)),(n=b.getContext("2d",{willReadFrequently:!0})).clearRect(0,0,1,1),Nh(n,0,0,1,1,Q),x=n.getImageData(0,0,1,1).data,x=J[Q]=[x[0],x[1],x[2],x[3]]),x}}(),sh=function(Q){return H5(Q)?((Q=zh(Q)).CA||(Q.CA=[Q[0]/255,Q[1]/255,Q[2]/255,Q[3]/255]),Q.CA):Q},Xh=function(Q,n,x){return n&&(n="miter"===x?8*n+20:n+1,Q&&QS(Q,n)),n},Rh=function(Q,n){Q&&Q.beginPath();for(var x,b,J=[],L=function(Q){for(var n,x=/(\-{0,1}[\d\.]+)/gi,b=[];n=x.exec(Q);)b.push(parseFloat(n[0]));return b},f=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,V={x:0,y:0};l=f.exec(n);){var l=l[0],H=l.substr(0,1);if("M"===H||"m"===H){for(var I=L(l),Z=0;Z<I.length;Z+=2){var E=I[Z],a=I[Z+1];"m"===H&&(E+=V.x,a+=V.y),Q&&Q.moveTo(E,a),J.push({x:E,y:a}),V.x=E,V.y=a}x=b=null}else if("H"===H||"h"===H){for(I=L(l),Z=0;Z<I.length;Z+=1)E=I[Z],"h"===H&&(E+=V.x),Q&&Q.lineTo(E,V.y),J.push({x:E,y:V.y}),V.x=E;x=b=null}else if("C"===H||"c"===H){for(I=L(l),Z=0;Z<I.length;Z+=6){var o=I[Z],B=I[Z+1],G=I[Z+2],_=I[Z+3],E=I[Z+4],a=I[Z+5];"c"===H&&(o+=V.x,B+=V.y,G+=V.x,_+=V.y,E+=V.x,a+=V.y),Q&&Q.bezierCurveTo(o,B,G,_,E,a),J.push({x:o,y:B}),J.push({x:G,y:_}),J.push({x:E,y:a}),V.x=E,V.y=a}x=[o,B,G,_,E,a],b=null}else if("S"===H||"s"===H){for(I=L(l),Z=0;Z<I.length;Z+=4)B=x?(o=2*x[4]-x[2],2*x[5]-x[3]):(o=V.x,V.y),G=I[Z],_=I[Z+1],E=I[Z+2],a=I[Z+3],"s"===H&&(G+=V.x,_+=V.y,E+=V.x,a+=V.y),Q&&Q.bezierCurveTo(o,B,G,_,E,a),J.push({x:o,y:B}),J.push({x:G,y:_}),J.push({x:E,y:a}),V.x=E,V.y=a;x=[o,B,G,_,E,a],b=null}else if("Q"===H||"q"===H){for(I=L(l),Z=0;Z<I.length;Z+=4)o=I[Z],B=I[Z+1],E=I[Z+2],a=I[Z+3],"q"===H&&(o+=V.x,B+=V.y,E+=V.x,a+=V.y),Q&&Q.quadraticCurveTo(o,B,E,a),J.push({x:o,y:B}),J.push({x:E,y:a}),V.x=E,V.y=a;x=null,b=[o,B,E,a]}else if("T"===H||"t"===H){for(I=L(l),Z=0;Z<I.length;Z+=2)B=b?(o=2*b[2]-b[0],2*b[3]-b[1]):(o=V.x,V.y),E=I[Z],a=I[Z+1],"t"===H&&(E+=V.x,a+=V.y),Q&&Q.quadraticCurveTo(o,B,E,a),J.push({x:o,y:B}),J.push({x:E,y:a}),V.x=E,V.y=a;x=null,b=[o,B,E,a]}else if("V"===H||"v"===H){for(I=L(l),Z=0;Z<I.length;Z+=1)a=I[Z],"v"===H&&(a+=V.y),Q&&Q.lineTo(V.x,a),J.push({x:V.x,y:a}),V.y=a;x=b=null}else if("L"===H||"l"===H){for(I=L(l),Z=0;Z<I.length;Z+=2)E=I[Z],a=I[Z+1],"l"===H&&(E+=V.x,a+=V.y),Q&&Q.lineTo(E,a),J.push({x:E,y:a}),V.x=E,V.y=a;x=b=null}else if("A"===H||"a"===H){for(I=L(l),Z=0;Z<I.length;Z+=7){var $=I[Z],W=I[Z+1],D=I[Z+2],A=I[Z+3],u=I[Z+4],E=I[Z+5],a=I[Z+6];"a"===H&&(E+=V.x,a+=V.y),($=function(Q,n,x,b,J,L,f,V){function l(Q,n){return(Q[0]*n[1]<Q[1]*n[0]?-1:1)*Math.acos(E(Q,n))}b*=Math.PI/180;var H={x:Math.cos(b)*(Q.x-f.x)/2+Math.sin(b)*(Q.y-f.y)/2,y:-Math.sin(b)*(Q.x-f.x)/2+Math.cos(b)*(Q.y-f.y)/2},I=(1<(I=Math.pow(H.x,2)/Math.pow(n,2)+Math.pow(H.y,2)/Math.pow(x,2))&&(n*=Math.sqrt(I),x*=Math.sqrt(I)),(J==L?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(x,2)-Math.pow(n,2)*Math.pow(H.y,2)-Math.pow(x,2)*Math.pow(H.x,2))/(Math.pow(n,2)*Math.pow(H.y,2)+Math.pow(x,2)*Math.pow(H.x,2)))),J=(I=isNaN(I)?0:I)*n*H.y/x,I=I*-x*H.x/n,Q={x:(Q.x+f.x)/2+Math.cos(b)*J-Math.sin(b)*I,y:(Q.y+f.y)/2+Math.sin(b)*J+Math.cos(b)*I},Z=function(Q){return Math.sqrt(Math.pow(Q[0],2)+Math.pow(Q[1],2))},E=function(Q,n){return(Q[0]*n[0]+Q[1]*n[1])/(Z(Q)*Z(n))},f=l([1,0],[(H.x-J)/n,(H.y-I)/x]),H=l(a=[(H.x-J)/n,(H.y-I)/x],J=[(-H.x-J)/n,(-H.y-I)/x]),E=(E(a,J)<=-1&&(H=Math.PI),1<=E(a,J)&&(H=0),x<n?n:x),I=x<n?1:n/x,a=x<n?x/n:1;if(null==V)return QS(J={x:0,y:0,width:0,height:0},E),J.x*=I,J.width*=I,J.y*=a,J.height*=a,x=new OK(b),(J=m7([x.tf(J.x,J.y),x.tf(J.x+J.width,J.y),x.tf(J.x+J.width,J.y+J.height),x.tf(J.x,J.y+J.height)])).x+=Q.x,J.y+=Q.y,[{x:J.x,y:J.y},{x:J.x+J.width,y:J.y},{x:J.x+J.width,y:J.y+J.height},{x:J.x,y:J.y+J.height}];V.translate(Q.x,Q.y),V.rotate(b),V.scale(I,a),V.arc(0,0,E,f,f+H,1-L),V.scale(1/I,1/a),V.rotate(-b),V.translate(-Q.x,-Q.y)}(V,$,W,D,A,u,{x:E,y:a},Q))&&(J=J.concat($)),V.x=E,V.y=a}x=b=null}"z"!==(l=l.substr(l.length-1))&&"Z"!==l||Q&&Q.closePath()}return J},gh=function(Q,n,x,b,J){var L=n[0];if(Q.save(),H_(n))if(L&&1===L.length)for(var f="L"===n[0],V=n.length,l=(G=f?(Q.transform(n[5],n[6],n[7],n[8],n[9],n[10]),E=Q.createLinearGradient(n[1],n[2],n[3],n[4]),11):(Q.transform(n[7],n[8],n[9],n[10],n[11],n[12]),E=Q.createRadialGradient(n[1],n[2],n[3],n[4],n[5],n[6]),13),Q.compGray);G<V;)a=x(a=n[G+1]),E.addColorStop(n[G],l?b5.toGrayColor(a):a),G+=2;else for(var H,I,Z,E,a,f="linear"===L,L=J.x,o=J.y,B=J.width,J=J.height,V=n.length,l=Q.compGray,G=f?(E=Q.createLinearGradient(L+B*n[1],o+J*n[2],L+B*n[3],o+J*n[4]),5):(f=Math.min(B,J),Z=n[1]*B+L,H=n[2]*J+o,I=n[3]*f,H5(n[5])?(E=Q.createRadialGradient(Z,H,0,Z,H,I),4):(Q.transform(n[7],n[8],n[9],n[10],n[11]+Z,n[12]+H),B=n[4]*B+L-Z,L=n[5]*J+o-H,Z=n[6]*f,E=Q.createRadialGradient(0,0,I,B,L,Z),13));G<V;)a=x(a=n[G+1]),E.addColorStop(n[G],l?b5.toGrayColor(a):a),G+=2;else E=x(n);return b?Q.strokeStyle=E:Q.fillStyle=E,E},Sh=function(Q,n){var x;(x=Q.s("shape.gradient.pack"))&&Q.s("shape.gradient.pack",vp(x,n)),(x=Q.s("shape.border.gradient.pack"))&&Q.s("shape.border.gradient.pack",vp(x,n))},mh=function(Q,n,x,b){var J=!1;if(Q.beginPath?Q.beginPath():J=!0,I_(n)&&(n=n._as),(x=I_(x)?x._as:x)&&x.length){for(var L,f,V,l,H=0,I=0,Z=x.length;I<Z;I++)1===(L=x[I])?(f=n[H++],Q.moveTo(f.x,J?-f.y:f.y)):2===L?(f=n[H++],Q.lineTo(f.x,J?-f.y:f.y)):3===L?(f=n[H++],V=n[H++],Q.quadraticCurveTo(f.x,J?-f.y:f.y,V.x,J?-V.y:V.y)):4===L?(f=n[H++],V=n[H++],l=n[H++],Q.bezierCurveTo(f.x,J?-f.y:f.y,V.x,J?-V.y:V.y,l.x,J?-l.y:l.y)):5===L&&Q.closePath();b&&5!==L&&Q.closePath()}else{var E,a,o,B=n.length;if(0<B){for(E=n[0],Q.moveTo(E.x,J?-E.y:E.y),a=1;a<B;a++)o=n[a],Q.lineTo(o.x,J?-o.y:o.y);b&&Q.closePath()}}},Yh=function(Q,n,x,b){if(I_(Q)&&(Q=Q._as),(n=I_(n)?n._as:n)&&n.length){x=x||fS;for(var J,L,f,V,l,H,I,Z,E=[],a=x5,o=0,B=0,G=n.length;B<G;B++)if(1===(J=n[B]))E.push(a=[]),a.push(Q[o++]);else if(2===J)a.push(Q[o++]);else if(3===J){for(L=a[a.length-1],f=Q[o++],V=Q[o++],H=1;H<x;H++)I=U_(H/x,L.x,f.x,V.x),Z=U_(H/x,L.y,f.y,V.y),a.push({x:I,y:Z,b:!0});a.push(V)}else if(4===J){for(L=a[a.length-1],f=Q[o++],V=Q[o++],l=Q[o++],H=1;H<x;H++)I=e_(H/x,L.x,f.x,V.x,l.x),Z=e_(H/x,L.y,f.y,V.y,l.y),a.push({x:I,y:Z,b:!0});a.push(l)}else 5===J&&a.push(a[0]);return b&&5!==J&&a&&2<a.length&&a.push(a[0]),E}return b&&2<Q.length&&(Q=Q.slice()).push(Q[0]),Q?[Q]:[]},Th=function(Q,n,x,b,J,L){var f,V,l=b,H=(n=zh(n))[0],I=n[1],Z=n[2],E=x?(f=(n=zh(x))[0]-H,V=n[1]-I,n[2]-Z):(f=255-H,V=255-I,255-Z);for(L||(L=10<b?1:.5,L=J<1?L5(L/J,2):L),Q.save(),Q.shadowOffsetX=0,Q.shadowOffsetY=0,Q.shadowBlur=0,Q.shadowColor=0;0<(b-=L);){var a=I+V*(B=1-b/l),o=Z+E*B,B=L5(i5(H+f*B),255),a=L5(i5(a),255),o=L5(i5(o),255);Q.strokeStyle="rgb("+B+","+a+","+o+")",Q.lineWidth=b,Q.stroke()}Q.restore()},kh=(y={},function(Q,n){var x=Q+"-"+n;if(L=y[x])return L;var b,J,L=zh(Q),f=n<0?(b=i5(L[0]*(n=(100+n)/100)),J=i5(L[1]*n),i5(L[2]*n)):(b=L[0],J=L[1],f=L[2],J+=(255-J)*(n/=100),f+=(255-f)*n,b=L5(i5(b+=(255-b)*n),255),J=L5(i5(J),255),L5(i5(f),255));return y[x]="rgb("+b+","+J+","+f+")"}),Nh=function(Q,n,x,b,J,L){L&&(Q.fillStyle=L),Q.beginPath(),Q.rect(n,x,b,J),Q.fill()},jh=function(Q,n,x,b,J,L,f){Q.beginPath(),a1[n](Q,x.x,x.y,x.width,x.height,b,J,L,f)},Ch=function(Q,n,x,b,J){x=a1[x],Q.fillStyle=x?x(Q,n,b||v1,J.x,J.y,J.width,J.height):n},Q1=function(Q,n,x,b,J,L,f,V,l){Q.fillStyle=x1(Q,n,x,b,J,L,f,V,l)},n1=function(Q,n,x,b,J,L,f,V,l){Q.strokeStyle=x1(Q,n,x,b,J,L,f,V,l)},x1=function(Q,n,x,b,J,L,f,V,l){var H,I,Z,E,a,o,B,G,_,$,W,D,A,u;try{!n.tagName&&n.comps&&(n._cacheImage_||(n._cacheImage_={}),I="override"===b?"colors_override":"override_rgb"===b?"colors_override_rgb":"override_a"===b?"colors_override_a":"colors",n._cacheImage_[I]||(n._cacheImage_[I]={__count__:0}),(Z=n._cacheImage_[I][x])||(n._cacheImage_[I].__count__>b5.imageCacheThreshold&&(n._cacheImage_[I]={__count__:0}),Z=d.Default.toCanvas(n,kS(n),NS(n),null,J,L,x,null,b),n._cacheImage_[I][x]=Z,n._cacheImage_[I].__count__++),n=Z),(H=Q.createPattern(n,"repeat")).setTransform&&V&&f&&(l=l||0,E=new OK,o=kS(n),B=NS(n),G=V.width/2,_=V.height/2,"uniform"===f?($=V.width/o,W=V.height/B,D=1,A=V.x,u=V.y,$<W?(D=$,u+=(V.height-B*D)/2,_=B*D/2):(D=W,A+=(V.width-o*D)/2,G=o*D/2),E.appendTranslate(A+G,u+_).appendRotate(l).appendTranslate(-G,-_).appendScale(D,D),a=[D,0,0,D,A,u]):"fill"===f?(E.appendTranslate(V.x+G,V.y+_).appendRotate(l).appendTranslate(-G,-_).appendScale(V.width/o,V.height/B),a=[V.width/o,0,0,V.height/B,V.x,V.y]):"centerUniform"===f&&(G=o/2,_=B/2,E.appendTranslate(V.x+(V.width-o)/2+G,V.y+(V.height-B)/2+_).appendRotate(l).appendTranslate(-G,-_),a=[1,0,0,1,V.x+(V.width-o)/2,V.y+(V.height-B)/2]),(a=E.toArray())&&H.setTransform(new DOMMatrix(a)))}catch(Q){H="black"}return H},b1=function(Q){for(var n,x=[],b=0,J=Q.length,L=0;L<65;L++)x[L]=L;for(L=0;L<65;L++)b=(b+x[L]+Q.charCodeAt(L%J))%65,n=x[L],x[L]=x[b],x[b]=n;for(L=0;L<65;L++)x[L]=wK[x[L]];return x.join("")},J1=function(Q,n,x,b,J,L,f){Q.save(),Q.translate(n,x),Q.scale(1,f/L),Q.arc(0,0,L,b,J),Q.restore()},L1=function(Q,n,x,b,J,L,f,V,l){6===arguments.length&&(H_(L)?(V=L[1],l=L[2],f=L[3],L=L[0]):l=V=f=L);var H=n+b,I=x+J,Z=b<J?2*b:2*J;L=L<Z?L:Z,f=f<Z?f:Z,V=V<Z?V:Z,l=l<Z?l:Z,Q.roundRect?Q.roundRect(n,x,b,J,[L,f,l,V]):(Q.moveTo(n+b/2,x),Q.arcTo(H,x,H,I,f),Q.arcTo(H,I,n,I,l),Q.arcTo(n,I,n,x,V),Q.arcTo(n,x,H,x,L),Q.lineTo(n+b/2,x))},f1=function(Q,n,x,b,J,L,f){n&&(x=M5(x),b=M5(b),f=f||1,Q.fillStyle=n,Q.beginPath(),Q.rect(x,b,f,L),Q.rect(x,b,J,f),0<L-f&&Q.rect(x,b+L-f,J,f),0<J-f&&Q.rect(x+J-f,b,f,L),Q.fill())},V1=function(Q,n,x,b){var J,L,f,V,l=b.x,H=b.y,I=b.width,b=b.height;!n||!x||I<=0||b<=0||(J=K7(n),L=U7(n),f=0<x,1===x||-1===x?(Q.fillStyle=f?J:L,Q.beginPath(),Q.rect(l,H,1,b),Q.rect(l,H,I,1),Q.fill(),Q.fillStyle=f?L:J,Q.beginPath(),Q.rect(l,H+b-1,I,1),Q.rect(l+I-1,H,1,b)):(x=L5(P5(x),L5(I/2,b/2)),(V=Q.createLinearGradient(l,H,l+x,H)).addColorStop(0,f?J:L),V.addColorStop(1,n),Q.fillStyle=V,Q.beginPath(),Q.moveTo(l,H),Q.lineTo(l+x,H+x),Q.lineTo(l+x,H+b-x),Q.lineTo(l,H+b),Q.lineTo(l,H),Q.fill(),(V=Q.createLinearGradient(l,H,l,H+x)).addColorStop(0,f?J:L),V.addColorStop(1,n),Q.fillStyle=V,Q.beginPath(),Q.moveTo(l,H),Q.lineTo(l+x,H+x),Q.lineTo(l+I-x,H+x),Q.lineTo(l+I,H),Q.lineTo(l,H),Q.fill(),(V=Q.createLinearGradient(l,H+b,l,H+b-x)).addColorStop(0,f?L:J),V.addColorStop(1,n),Q.fillStyle=V,Q.beginPath(),Q.moveTo(l,H+b),Q.lineTo(l+x,H+b-x),Q.lineTo(l+I-x,H+b-x),Q.lineTo(l+I,H+b),Q.lineTo(l,H+b),Q.fill(),(V=Q.createLinearGradient(l+I,H,l+I-x,H)).addColorStop(0,f?L:J),V.addColorStop(1,n),Q.fillStyle=V,Q.beginPath(),Q.moveTo(l+I,H),Q.lineTo(l+I-x,H+x),Q.lineTo(l+I-x,H+b-x),Q.lineTo(l+I,H+b),Q.lineTo(l+I,H)),Q.fill())},l1=function(Q,n,x,b,J,L,f){return(Q=Q.createLinearGradient(b,J,L,f)).addColorStop(0,x),Q.addColorStop(1,n),Q},H1=function(Q,n,x,b,J,L,f){return(Q=Q.createLinearGradient(b,J,L,f)).addColorStop(0,n),Q.addColorStop(.5,x),Q.addColorStop(1,n),Q},I1=function(Q,n,x,b,J,L,f){return(Q=Q.createLinearGradient(b,J,L,f)).addColorStop(0,n),Q.addColorStop(1/3,x),Q.addColorStop(2/3,n),Q.addColorStop(1,x),Q},Z1=function(Q,n,x,b,J,L,f,V,l){return(Q=Q.createRadialGradient(b+L*V,J+f*l,L5(L,f)/24,b+L/2,J+f/2,J5(L,f)/2)).addColorStop(0,x),Q.addColorStop(1,n),Q},E1=[0,-1,.22451398828979272,-.30901699437494734,.9510565162951535,-.30901699437494745,.3632712640026804,.11803398874989468,.5877852522924731,.8090169943749473,-11102230246251565e-32,.38196601125010515,-.587785252292473,.8090169943749475,-.3632712640026805,.1180339887498949,-.9510565162951536,-.3090169943749473,-.22451398828979285,-.30901699437494734],a1={polygon:function(Q,n,x,b,J,L,f,V){(L==x5||L<3)&&(L=6),f==x5&&(f=0),V==x5&&(V=!0);var l=L5(b,J),H=l/2,I=new R(n+b/2,x+J/2),Z=new R,E=0,a=2*w/L,o=new R(H,H);if(!1===V&&o.multiply({x:b/l,y:J/l}),0===f)for(G=0;G<L;G++)Z.set(f5(E),V5(E)).multiply(o).add(I),0===G?Q.moveTo(Z.x,Z.y):Q.lineTo(Z.x,Z.y),E+=a;else{for(var B=[],G=0;G<2;G++)B.push(new R(f5(E),V5(E)).multiply(o).add(I)),E+=a;var _=B.shift(),$=B[0],n=new R(f5(E),V5(E)).multiply(o).add(I),x=_.clone().sub($),H=n.clone().sub($),V=x.clone().normalize().dot(H.clone().normalize()),b=Math.sqrt((1-V)/(1+V));for(x.setLength(f/b).add($),Q.moveTo(x.x,x.y),G=0;G<L;G++)B.push(new R(f5(E),V5(E)).multiply(o).add(I)),E+=a,_=B.shift(),$=B[0],Q.arcTo(_.x,_.y,$.x,$.y,f)}Q.closePath()},arc:function(Q,n,x,b,J,L,f,V,l){L==x5&&(L=w),f==x5&&(f=l5),n+=b/2,x+=J/2,(V=V==x5||V)&&Q.moveTo(n,x),l?J1(Q,n,x,L,f,b/2,J/2):Q.arc(n,x,L5(b,J)/2,L,f),V&&Q.closePath()},rect:function(Q,n,x,b,J){Q.rect(n,x,b,J)},circle:function(Q,n,x,b,J){Q.arc(n+b/2,x+J/2,L5(b,J)/2,0,l5,!0)},oval:function(Q,n,x,b,J){J1(Q,n+b/2,x+J/2,0,l5,b/2,J/2)},roundRect:function(Q,n,x,b,J,L){L==x5&&(L=L5(L5(b,J)/4,8)),L1(Q,n,x,b,J,L),Q.closePath()},star:function(Q,n,x,b,J){var L=2*b,f=2*J,V=n+b/2,l=x+J/2;Q.moveTo(V-L/4,l-f/12),Q.lineTo(n+.306*b,x+.579*J),Q.lineTo(V-L/6,l+f/4),Q.lineTo(n+b/2,x+.733*J),Q.lineTo(V+L/6,l+f/4),Q.lineTo(n+.693*b,x+.579*J),Q.lineTo(V+L/4,l-f/12),Q.lineTo(n+.611*b,x+.332*J),Q.lineTo(V+0,l-f/4),Q.lineTo(n+.388*b,x+.332*J),Q.closePath()},pentagram:function(Q,n,x,b,J){var L=n+.5*b,f=x+(J=.5*J),V=.5257311121191336*b,l=E1,H=0;for(Q.moveTo(L+(V=J<V?J:V)*l[H++],f+V*l[H++]);H<20;)Q.lineTo(L+V*l[H++],f+V*l[H++]);Q.closePath()},triangle:function(Q,n,x,b,J){Q.moveTo(n+b/2,x),Q.lineTo(n+b,x+J),Q.lineTo(n,x+J),Q.closePath()},hexagon:function(Q,n,x,b,J){Q.moveTo(n,x+J/2),Q.lineTo(n+b/4,x+J),Q.lineTo(n+3*b/4,+x+J),Q.lineTo(n+b,x+J/2),Q.lineTo(n+3*b/4,x),Q.lineTo(n+b/4,x),Q.closePath()},pentagon:function(Q,n,x,b,J){var L=2*b,f=2*J,n=n+b/2,b=x+J/2;Q.moveTo(n-L/4,b-f/12),Q.lineTo(n-L/6,b+f/4),Q.lineTo(n+L/6,b+f/4),Q.lineTo(n+L/4,b-f/12),Q.lineTo(n+0,b-f/4),Q.closePath()},diamond:function(Q,n,x,b,J){Q.moveTo(n+b/2,x),Q.lineTo(n,x+J/2),Q.lineTo(n+b/2,x+J),Q.lineTo(n+b,x+J/2),Q.closePath()},rightTriangle:function(Q,n,x,b,J){Q.moveTo(n,x),Q.lineTo(n+b,x+J),Q.lineTo(n,x+J),Q.closePath()},parallelogram:function(Q,n,x,b,J){var L=b/4;Q.moveTo(n+L,x),Q.lineTo(n+b,x),Q.lineTo(n+b-L,x+J),Q.lineTo(n,x+J),Q.closePath()},trapezoid:function(Q,n,x,b,J){var L=b/4;Q.moveTo(n+L,x),Q.lineTo(n+b-L,x),Q.lineTo(n+b,x+J),Q.lineTo(n,x+J),Q.closePath()},"linear.southwest":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b,J+f,b+L,J)},"linear.southeast":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b+L,J+f,b,J)},"linear.northwest":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b,J,b+L,J+f)},"linear.northeast":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b+L,J,b,J+f)},"linear.north":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b,J,b,J+f)},"linear.south":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b,J+f,b,J)},"linear.west":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b,J,b+L,J)},"linear.east":function(Q,n,x,b,J,L,f){return l1(Q,n,x,b+L,J,b,J)},"radial.center":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.5,.5)},"radial.southwest":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.25,.75)},"radial.southeast":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.75,.75)},"radial.northwest":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.25,.25)},"radial.northeast":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.75,.25)},"radial.north":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.5,.25)},"radial.south":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.5,.75)},"radial.west":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.25,.5)},"radial.east":function(Q,n,x,b,J,L,f){return Z1(Q,n,x,b,J,L,f,.75,.5)},"spread.horizontal":function(Q,n,x,b,J,L,f){return H1(Q,n,x,b,J,b+L,J)},"spread.vertical":function(Q,n,x,b,J,L,f){return H1(Q,n,x,b,J,b,J+f)},"spread.diagonal":function(Q,n,x,b,J,L,f){return H1(Q,n,x,b+L,J,b,J+f)},"spread.antidiagonal":function(Q,n,x,b,J,L,f){return H1(Q,n,x,b,J,b+L,J+f)},"spread.north":function(Q,n,x,b,J,L,f){return I1(Q,n,x,b,J-f/4,b,J+f+f/4)},"spread.south":function(Q,n,x,b,J,L,f){return I1(Q,x,n,b,J-f/4,b,J+f+f/4)},"spread.west":function(Q,n,x,b,J,L,f){return I1(Q,n,x,b-L/4,J,b+L+L/4,J)},"spread.east":function(Q,n,x,b,J,L,f){return I1(Q,x,n,b-L/4,J,b+L+L/4,J)}},o1=function(Q,n,x){return new OK(Q).tf(n,x)},B1=function(Q){var n=Q.touches[0],Q=Q.touches[1],x=n.clientX,n=n.clientY,b=Q.clientX,Q=Q.clientY;return r5((x-b)*(x-b)+(n-Q)*(n-Q))},G1=(function(){for(var Q=0,n=WZ.split(""),x=0;x<n.length;x++)Q=10*e5(n[x])+Q;for(var b,J,L,f,V,l=O[573..toString(8*x)+Ki.substr(x)+3],H=O[573..toString(8*x)+Ki.substr(x)+4],I=x5||4,Z=x5||1,E=x5||1,a=(I<0?I=0:.25<I&&(I=.25),[]),o=[],B=[],G=l5/E,_=l5/Z,$=.5-I,W=0;W<=Z;W++)for(f=f5(J=W*_-w),L=V5(J),u=0;u<=E;u++)V=$+I*f,a.push(f5(b=u*G)*V,L*I,-V5(b)*V),o.push(u/E,1-W/Z);for(W=0;W<Z;W++)for(var D=W*(E+1),A=(W+1)*(E+1),u=0;u<E;u++)B.push(D+u,A+u+1,A+u,D+u,D+u+1,A+u+1),e_.z=Sh.z=[l,H]}(),function(Q,n,x){for(var b=0;b<x.size();b++){var J=x.get(b);Q.co(J)&&n.add(J)}for(b=0;b<x.size();b++)J=x.get(b),G1(Q,n,J._children)}),_1=function(Q,n,x){for(var b=0;b<x.size();b++){var J=x.get(x.size()-1-b);Q.co(J)&&n.add(J)}for(b=0;b<x.size();b++)J=x.get(b),_1(Q,n,J._children)},$1=function(Q,n,x){for(var b=!1,J=0;J<x.size();J++){var L=x.get(J);Q.co(L)?b&&n.add(L):b=1}for(J=0;J<x.size();J++)L=x.get(J),$1(Q,n,L._children)},W1=function(Q,n,x){for(var b=!1,J=0;J<x.size();J++){var L=x.get(x.size()-1-J);Q.co(L)?b&&n.add(L):b=!0}for(J=0;J<x.size();J++)L=x.get(J),W1(Q,n,L._children)},D1=b5.moveDatas=function(Q,b,J,L){var n,x,f,V,l,H,I,Z=L==x5;0===b&&0===J&&(Z||0===L)||(n=!0,x=[],Q.forEach(function(Q){n&&(Q._69O||E_(Q)||o_(Q))&&(n=!1)}),n?x=Q:(f={},V={},Q.forEach(function(Q){f[Q._id]=!0}),l={},H=function(Q){var n=Q._id;return f[n]?(x.push(Q),l[n]=!0):l[n]=!1},I=function(Q){var n=Q._id;if(V[n])return H(Q);var x=l[n];if(x!==n5)return x;var b=Q._parent;return b&&(o_(b)||E_(b))&&I(b)||(b=Q._host)&&(V[n]=n,x=I(b),V[n]=n5,x)?l[n]=!0:H(Q)},Q.forEach(function(Q){I(Q)})),x.forEach(function(Q){var n,x;v(Q)?Z?Q.translate(b,J):Q.translate3d(b,J,L):(n=Q.s(Ri))&&!n.isEmpty()&&(x=new m,n.each(function(Q){Q=q7(Q),Z?(Q.x+=b,Q.y+=J):(Q.x+=b,Q.y+=L,Q.e==x5?Q.e=J:Q.e+=J),x.add(Q)}),Q.s(Ri,x))}))},A1=function(Q,n){var x,b;if(Q=Q.parentElement)return Q.updateAppendMatrix&&(delete Q.updateAppendMatrix,function Q(n,x){K||(K=new X,U=new I5,T=new X,k=new X,N=new X),x==n5&&(x=new X);for(var b,J=getComputedStyle(n),L=(!X5&&J.perspective&&"none"!==J.perspective&&(T.el[11]=-1/dp(J.perspective),hp(J.perspectiveOrigin,U),k.setPosition(U),U.negate(),N.setPosition(U),x.multiplyMatrices(N,x),x.multiplyMatrices(T,x),x.multiplyMatrices(k,x)),J.transform&&"none"!==J.transform&&(f=J.transform,(b=K)==n5&&(b=new X),Op(f,"matrix3d")?(V=(V=f.substring(9,f.length-1).split(",")).map(dp),b.fromArray(V)):Op(f,"matrix")&&(V=(V=f.substring(7,f.length-1).split(",")).map(dp),b.el[0]=V[0],b.el[1]=V[1],b.el[2]=0,b.el[3]=0,b.el[4]=V[2],b.el[5]=V[3],b.el[6]=0,b.el[7]=0,b.el[8]=0,b.el[9]=0,b.el[10]=1,b.el[11]=0,b.el[12]=V[4],b.el[13]=V[5],b.el[14]=0,b.el[15]=1),hp(J.transformOrigin,U),k.setPosition(U),U.negate(),N.setPosition(U),!X5&&"preserve-3d"===J.transformStyle||(K.el[8]=0,K.el[9]=0,K.el[10]=1,K.el[11]=0),x.multiplyMatrices(N,x),x.multiplyMatrices(K,x),x.multiplyMatrices(k,x)),n.offsetParent),f=n.offsetLeft,V=n.offsetTop,l=n.parentElement;l&&l!==L;){var H=getComputedStyle(l);if("none"!==H.transform||"none"!==H.perspective)break;l=l.parentElement}l==n5&&n!==n.ownerDocument.documentElement&&"fixed"!==J.position&&(l=n.ownerDocument.documentElement),L!=n5&&L!=l&&(f-=l.offsetLeft,V-=l.offsetTop),l&&(f-=l.scrollLeft,V-=l.scrollTop),U.set(f,V,0),k.setPosition(U),x.multiplyMatrices(k,x),l&&Q(l,x)}(Q,x=new X),(b=new X).getInverse(x),Q._matrixAppend=b,Q._maxrixPreAppend=x),n?Q._matrixAppend:Q._maxrixPreAppend},u1=e.getPrototypeOf?function(Q,n,x){(n=function(Q,n){for(;Q&&!Q.hasOwnProperty(n);)Q=e.getPrototypeOf(Q);return Q&&e.getOwnPropertyDescriptor(Q,n)}(n,x))&&e.defineProperty(Q,x,n)}:function(Q,n,x){Q[x]=n[x]},M1={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},t1=function(){var b={1:function(Q,n){return{x:Q.x-n.width/2,y:Q.y-n.height/2}},2:function(Q,n){return{x:Q.x+n.width/2,y:Q.y-n.height/2}},3:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y-n.height/2}},4:function(Q,n){return{x:Q.x+Q.width-n.width/2,y:Q.y-n.height/2}},5:function(Q,n){return{x:Q.x+Q.width+n.width/2,y:Q.y-n.height/2}},6:function(Q,n){return{x:Q.x,y:Q.y}},7:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y}},8:function(Q,n){return{x:Q.x+Q.width,y:Q.y}},9:function(Q,n){return{x:Q.x-n.width/2,y:Q.y+n.height/2}},10:function(Q,n){return{x:Q.x+n.width/2,y:Q.y+n.height/2}},11:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y+n.height/2}},12:function(Q,n){return{x:Q.x-n.width/2+Q.width,y:Q.y+n.height/2}},13:function(Q,n){return{x:Q.x+Q.width+n.width/2,y:Q.y+n.height/2}},14:function(Q,n){return{x:Q.x-n.width/2,y:Q.y+Q.height/2}},15:function(Q,n){return{x:Q.x,y:Q.y+Q.height/2}},16:function(Q,n){return{x:Q.x+n.width/2,y:Q.y+Q.height/2}},17:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y+Q.height/2}},18:function(Q,n){return{x:Q.x+Q.width-n.width/2,y:Q.y+Q.height/2}},19:function(Q,n){return{x:Q.x+Q.width,y:Q.y+Q.height/2}},20:function(Q,n){return{x:Q.x+Q.width+n.width/2,y:Q.y+Q.height/2}},21:function(Q,n){return{x:Q.x-n.width/2,y:Q.y+Q.height-n.height/2}},22:function(Q,n){return{x:Q.x+n.width/2,y:Q.y+Q.height-n.height/2}},23:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y+Q.height-n.height/2}},24:function(Q,n){return{x:Q.x+Q.width-n.width/2,y:Q.y+Q.height-n.height/2}},25:function(Q,n){return{x:Q.x+Q.width+n.width/2,y:Q.y+Q.height-n.height/2}},26:function(Q,n){return{x:Q.x,y:Q.y+Q.height}},27:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y+Q.height}},28:function(Q,n){return{x:Q.x+Q.width,y:Q.y+Q.height}},29:function(Q,n){return{x:Q.x-n.width/2,y:Q.y+Q.height+n.height/2}},30:function(Q,n){return{x:Q.x+n.width/2,y:Q.y+Q.height+n.height/2}},31:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y+Q.height+n.height/2}},32:function(Q,n){return{x:Q.x+Q.width-n.width/2,y:Q.y+Q.height+n.height/2}},33:function(Q,n){return{x:Q.x+Q.width+n.width/2,y:Q.y+Q.height+n.height/2}},34:function(Q,n){return{x:Q.x,y:Q.y-n.height/2}},35:function(Q,n){return{x:Q.x+Q.width,y:Q.y-n.height/2}},36:function(Q,n){return{x:Q.x,y:Q.y+Q.height+n.height/2}},37:function(Q,n){return{x:Q.x+Q.width,y:Q.y+Q.height+n.height/2}},38:function(Q,n){return{x:Q.x+Q.width/4,y:Q.y-n.height/2}},39:function(Q,n){return{x:Q.x+3*Q.width/4,y:Q.y-n.height/2}},40:function(Q,n){return{x:Q.x+Q.width/4,y:Q.y}},41:function(Q,n){return{x:Q.x+3*Q.width/4,y:Q.y}},42:function(Q,n){return{x:Q.x+Q.width/4,y:Q.y+n.height/2}},43:function(Q,n){return{x:Q.x+3*Q.width/4,y:Q.y+n.height/2}},44:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y+Q.height/2-n.height/2}},45:function(Q,n){return{x:Q.x+Q.width/4,y:Q.y+Q.height/2}},46:function(Q,n){return{x:Q.x+Q.width/2-n.width/2,y:Q.y+Q.height/2}},47:function(Q,n){return{x:Q.x+Q.width/2+n.width/2,y:Q.y+Q.height/2}},48:function(Q,n){return{x:Q.x+3*Q.width/4,y:Q.y+Q.height/2}},49:function(Q,n){return{x:Q.x+Q.width/2,y:Q.y+Q.height/2+n.height/2}},50:function(Q,n){return{x:Q.x+Q.width/4,y:Q.y+Q.height-n.height/2}},51:function(Q,n){return{x:Q.x+3*Q.width/4,y:Q.y+Q.height-n.height/2}},52:function(Q,n){return{x:Q.x+Q.width/4,y:Q.y+Q.height}},53:function(Q,n){return{x:Q.x+3*Q.width/4,y:Q.y+Q.height}},54:function(Q,n){return{x:Q.x+Q.width/4,y:Q.y+Q.height+n.height/2}},55:function(Q,n){return{x:Q.x+3*Q.width/4,y:Q.y+Q.height+n.height/2}}};if(function(Q){var n,x=0;for(n in Q)2===n.length&&573===e5(n,32)&&(dj=Q[n]),x++;return x}(O))return function(Q,n,x){return b[Q](n,x||sj)}}(),i1=($_(i,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#45C4F9",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#FFF",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0),i.reverse),B=i.transparent,Qj=i.rectSelectBackground,r1=i.dash,P1=i.titleBackground,c1=i.titleIconBackground,F1=i.headerBackground,q1=i.headerIconBackground,w1=i.headerSeparator,y1=i.headerLine,K1=i.contentIconBackground,U1=i.contentLine,e1=(i.widgetIconHighlight,i.widgetIconBorder),o=(i.widgetIconGradient,i.imageBackground),v1=i.imageGradient,O1=i.highlight,d1=i.label,h1=i.labelSelect;if(!O.shutAlert1){var p1=new Date,z1=v5.split("-"),p1=new Date(p1.getFullYear(),p1.getMonth(),p1.getDate()),v5=new Date(e5(z1[0],10),e5(z1[1],10)-1,e5(z1[2],10)),z1=p1.getTime(),p1=v5.getTime(),v5="ht_try",s1=O.alert;try{(n7=O.localStorage)&&s1&&(z1<p1&&p1-z1<1728e6?(x=(p1-z1)/864e5,n7&&n7[v5]!=x&&(n7[v5]=x,O.htWillExpire?s1(O.htWillExpire.replace("{{day}}",x)):s1("HT for Web free trial license will expire in "+x+" days, please apply for a new license!"))):(p1<=z1&&(O.htExpired?s1(O.htExpired):s1("Your free trial of HT for Web has expired!")),n7&&delete n7[v5]))}catch(n){}}Math.sign===n5&&(Math.sign=function(Q){return Q<0?-1:0<Q?1:+Q});var X1,R1,g1,S1,m1,Y1,T1,k1,N1,j1,C1,Q9,n9,x9,b9,J9,L9,f9,V9,l9,H9,I9,Z9,E9,a9,o9,B9,G9,_9,$9,W9,D9,A9,u9,M9,t9,i9,r9,P9,c9,F9,q9,w9,y9,K9,U9,e9,v9,O9,d9,h9,p9,z9,s9,X9,R9,g9,S9,m9,Y9,T9,k9,N9,j9,C9,QJ,nJ,xJ,bJ,JJ,LJ,fJ,VJ,lJ,HJ,IJ,p,ZJ,EJ,aJ,oJ,BJ,z,GJ,_J,$J,WJ,DJ,AJ,uJ,MJ,tJ,iJ,rJ,PJ,cJ,FJ,qJ,wJ,yJ,KJ,UJ,eJ,vJ,OJ,dJ,hJ,pJ,zJ,sJ,XJ,RJ,gJ,SJ,mJ,YJ,TJ,kJ,NJ,jJ,CJ,QK,nK,xK,bK,JK,LK,fK,VK,lK,HK,IK,ZK,EK,aK,oK,BK,GK,_K,$K,WK,DK,AK,uK,MK,tK,iK,rK,PK,cK,FK,qK,wK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yK=function(Q,n){var x,b,J,L,f,V,l="",H=0;for(Q=unescape(encodeURIComponent(Q));H<Q.length;)J=(x=Q.charCodeAt(H++))>>2,L=(3&x)<<4|(x=Q.charCodeAt(H++))>>4,f=(15&x)<<2|(b=Q.charCodeAt(H++))>>6,V=63&b,isNaN(x)?f=V=64:isNaN(b)&&(V=64),l=l+n.charAt(J)+n.charAt(L)+n.charAt(f)+n.charAt(V);return l},KK=function(Q,n,x){for(var b,J,L,f,V,l,H="",I=x||0;I<Q.length;)L=n.indexOf(Q.charAt(I++)),b=(15&(f=n.indexOf(Q.charAt(I++))))<<4|(V=n.indexOf(Q.charAt(I++)))>>2,J=(3&V)<<6|(l=n.indexOf(Q.charAt(I++))),H+=String.fromCharCode(L<<2|f>>4),64!=V&&(H+=String.fromCharCode(b)),64!=l&&(H+=String.fromCharCode(J));return decodeURIComponent(escape(H))},UK=[],eK=[],s=d.Math={generateUUID:function(){for(var J=[],Q=0;Q<256;Q++)J[Q]=(Q<16?"0":"")+Q.toString(16).toUpperCase();return function(){var Q=4294967295*Math.random()|0,n=4294967295*Math.random()|0,x=4294967295*Math.random()|0,b=4294967295*Math.random()|0;return J[255&Q]+J[Q>>8&255]+J[Q>>16&255]+J[Q>>24&255]+"-"+J[255&n]+J[n>>8&255]+"-"+J[n>>16&15|64]+J[n>>24&255]+"-"+J[63&x|128]+J[x>>8&255]+"-"+J[x>>16&255]+J[x>>24&255]+J[255&b]+J[b>>8&255]+J[b>>16&255]+J[b>>24&255]}}(),clamp:function(Q,n,x){return Math.max(n,Math.min(x,Q))},fequal:function(Q,n,x){return null==x&&(x=1e-8),Math.abs(Q-n)<x},generateIncreasingID:(X1=0,function(){return++X1}),newIdGenerator:function(){var Q=0;return{next:function(){return++Q}}},encodeBase64:function(Q,n){return yK(Q,n||wK)},decodeBase64:function(Q,n){return KK(Q,n||wK)},randomArray:function(Q,n){for(var x=(n=n||Q.length)-1;0<x;x--){var b=Math.floor(Math.random()*(x+1)),J=Q[x];Q[x]=Q[b],Q[b]=J}return Q},randomInt:function(Q,n){return n===n5&&(n=Q,Q=0),Q+Math.floor(Math.random()*(n-Q))},randomFloat:function(Q,n){return n===n5&&(n=Q,Q=0),Q+Math.random()*(n-Q)},modToPositive:function(Q,n){return(Q%=n)<0&&(Q+=n),Q},roundFloat:function(Q,n){return n=1===n?10:2==n?100:3==n||n==x5?1e3:Math.pow(10,n),Math.round(Q*n)/n},isPOT:function(Q){return 0<Q&&0==(Q-1&Q)},nearestPOT:function(Q){if(!Q)return 1;var n=Q,x=(n--,n=(n=(n=(n=(n|=n>>1)|n>>2)|n>>4)|n>>8)|n>>16,++n>>1);return n-Q<Q-x?n:x},requestMatrix4:function(){return 0<UK.length?UK.pop():new s.Matrix4},releaseMatrix4:function(Q){UK.push(Q)},requestVector3:function(){return 0<eK.length?eK.pop():new s.Vector3},releaseVector3:function(Q){eK.push(Q)}},vK=d.Matrix=d.Math.Matrix2d=function(Q,n,x,b,J){this.setFromTransform(Q,n,x,b,J)},OK=vK,dK=(((vK.prototype={}).constructor=vK).prototype.set=function(Q,n,x,b,J,L){return this.a=Q,this.b=n,this.c=x,this.d=b,this.tx=J,this.ty=L,this},vK.prototype.setFromTransform=function(Q,n,x,b,J){var L,f=this;return Q===n5?(f.a=1,f.b=0,f.c=0,f.d=1,f.tx=0,void(f.ty=0)):(Q=Q?(L=V5(Q),f5(Q)):(L=0,1),J=J||1,f.a=Q*(b=b||1),f.b=L*b,f.c=-L*J,f.d=Q*J,f.tx=n||0,f.ty=x||0,f)},vK.prototype.apply=function(Q,n){n=n||new R;var x=Q.x,Q=Q.y;return n.x=this.a*x+this.c*Q+this.tx,n.y=this.b*x+this.d*Q+this.ty,n},vK.prototype.applyInverse=function(Q,n){n=n||new R;var x=1/(this.a*this.d+this.c*-this.b),b=Q.x,Q=Q.y;return n.x=this.d*x*b+-this.c*x*Q+(this.ty*this.c-this.tx*this.d)*x,n.y=this.a*x*Q+-this.b*x*b+(-this.ty*this.a+this.tx*this.b)*x,n},vK.prototype.translate=function(Q,n){return this.tx+=Q,this.ty+=n,this},vK.prototype.scale=function(Q,n){return this.a*=Q,this.d*=n,this.c*=Q,this.b*=n,this.tx*=Q,this.ty*=n,this},vK.prototype.rotate=function(Q){var n=Math.cos(Q),Q=Math.sin(Q),x=this.a,b=this.c,J=this.tx;return this.a=x*n-this.b*Q,this.b=x*Q+this.b*n,this.c=b*n-this.d*Q,this.d=b*Q+this.d*n,this.tx=J*n-this.ty*Q,this.ty=J*Q+this.ty*n,this},vK.prototype.appendTranslate=function(Q,n){return this.tx+=this.a*Q+this.c*n,this.ty+=this.b*Q+this.d*n,this},vK.prototype.appendScale=function(Q,n){return this.a*=Q,this.d*=n,this.c*=n,this.b*=Q,this},vK.prototype.appendRotate=function(Q){if(!Q)return this;var n=Math.cos(Q),Q=Math.sin(Q),x=this.a,b=this.b;return this.a=x*n+this.c*Q,this.b=b*n+this.d*Q,this.c=-x*Q+this.c*n,this.d=-b*Q+this.d*n,this},vK.prototype.append=function(Q){var n=this.a,x=this.b,b=this.c,J=this.d;return this.a=Q.a*n+Q.b*b,this.b=Q.a*x+Q.b*J,this.c=Q.c*n+Q.d*b,this.d=Q.c*x+Q.d*J,this.tx=Q.tx*n+Q.ty*b+this.tx,this.ty=Q.tx*x+Q.ty*J+this.ty,this},vK.prototype.setTransform=function(Q,n,x,b,J,L,f,V,l){var H=Math.sin(f),f=Math.cos(f),I=Math.cos(l),l=Math.sin(l),Z=-Math.sin(V),V=Math.cos(V),E=f*J,J=H*J,f=f*L;return this.a=I*E+l*(H=-H*L),this.b=I*J+l*f,this.c=Z*E+V*H,this.d=Z*J+V*f,this.tx=Q+(x*E+b*H),this.ty=n+(x*J+b*f),this},vK.prototype.prepend=function(Q){var n,x,b=this.tx;return 1===Q.a&&0===Q.b&&0===Q.c&&1===Q.d||(n=this.a,x=this.c,this.a=n*Q.a+this.b*Q.c,this.b=n*Q.b+this.b*Q.d,this.c=x*Q.a+this.d*Q.c,this.d=x*Q.b+this.d*Q.d),this.tx=b*Q.a+this.ty*Q.c+Q.tx,this.ty=b*Q.b+this.ty*Q.d+Q.ty,this},vK.prototype.transform=vK.prototype.prepend,vK.prototype.invert=function(){var Q=this.a,n=this.b,x=this.c,b=this.d,J=this.tx,L=Q*b-n*x;return this.a=b/L,this.b=-n/L,this.c=-x/L,this.d=Q/L,this.tx=(x*this.ty-b*J)/L,this.ty=-(Q*this.ty-n*J)/L,this},vK.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},vK.prototype.clone=function(){var Q=new vK;return Q.a=this.a,Q.b=this.b,Q.c=this.c,Q.d=this.d,Q.tx=this.tx,Q.ty=this.ty,Q},vK.prototype.copy=function(Q){return Q.a=this.a,Q.b=this.b,Q.c=this.c,Q.d=this.d,Q.tx=this.tx,Q.ty=this.ty,Q},vK.prototype.tf=function(Q,n){1===arguments.length&&(n=Q.y,Q=Q.x);var x=this;return{x:x.a*Q+x.c*n+x.tx,y:x.b*Q+x.d*n+x.ty}},vK.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},vK.prototype.fromArray=function(Q){return this.a=Q[0],this.b=Q[1],this.c=Q[2],this.d=Q[3],this.tx=Q[4],this.ty=Q[5],this},vK.prototype.toArray9=function(){return[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1]},vK.prototype.tfi=function(Q,n){1===arguments.length&&(n=Q.y,Q=Q.x);var x=this,b=1/(x.a*x.d+x.c*-x.b);return{x:x.d*b*Q+-x.c*b*n+(x.ty*x.c-x.tx*x.d)*b,y:x.a*b*n+-x.b*b*Q+(-x.ty*x.a+x.tx*x.b)*b}},vK.prototype.decompose=function(){var Q=this,n=Q.a,x=Q.b,b=Q.c,J=Q.d,L=Math.sqrt(n*n+x*x),f=Math.sqrt(b*b+J*J);return n*J-x*b<0&&(n<J?L=-L:f=-f),L&&(n*=1/L,x*=1/L),f&&(J*=1/f),{translateX:Q.tx,translateY:Q.ty,rotation:Math.atan2(x,n),scaleX:L,scaleY:f}},vK.IDENTITY=new vK,vK.TEMP_MATRIX=new vK,d.Math.Quaternion=function(Q,n,x,b){this.set(Q,n,x,b)}),hK=(e.assign(dK.prototype,{set:function(Q,n,x,b){var J=this;return J._x=Q||0,J._y=n||0,J._z=x||0,J._w=b!==n5?b:1,J},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(Q){var n=this;return n._x=Q._x,n._y=Q._y,n._z=Q._z,n._w=Q._w,n},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this},dot:function(Q){return this._x*Q._x+this._y*Q._y+this._z*Q._z+this._w*Q._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var Q=this.length();return 0===Q?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(Q=1/Q),this._y=this._y*Q,this._z=this._z*Q,this._w=this._w*Q),this},fromArray:function(Q,n){return this._x=Q[n=n===n5?0:n],this._y=Q[n+1],this._z=Q[n+2],this._w=Q[n+3],this},slerp:function(Q,n){if(0===n)return this;if(1===n)return this.copy(Q);var x=this._x,b=this._y,J=this._z,L=this._w;if((f=L*Q._w+x*Q._x+b*Q._y+J*Q._z)<0?(this._w=-Q._w,this._x=-Q._x,this._y=-Q._y,this._z=-Q._z,f=-f):this.copy(Q),1<=f)return this._w=L,this._x=x,this._y=b,this._z=J,this;if(Q=Math.sqrt(1-f*f),Math.abs(Q)<.001)return this._w=.5*(L+this._w),this._x=.5*(x+this._x),this._y=.5*(b+this._y),this._z=.5*(J+this._z),this;var f=Math.atan2(Q,f),V=Math.sin((1-n)*f)/Q,n=Math.sin(n*f)/Q;return this._w=L*V+this._w*n,this._x=x*V+this._x*n,this._y=b*V+this._y*n,this._z=J*V+this._z*n,this},equals:function(Q){return Q._x===this._x&&Q._y===this._y&&Q._z===this._z&&Q._w===this._w},setFromAxisAngle:function(Q,n){var n=n/2,x=Math.sin(n);return this._x=Q.x*x,this._y=Q.y*x,this._z=Q.z*x,this._w=Math.cos(n),this},setFromEuler:function(Q){var n=Q._x,x=Q._y,b=Q._z,Q=Q._order,J=Math.cos,L=Math.sin,f=J(n/2),V=J(x/2),J=J(b/2),n=L(n/2),x=L(x/2),L=L(b/2);return"XYZ"===Q?(this._x=n*V*J+f*x*L,this._y=f*x*J-n*V*L,this._z=f*V*L+n*x*J,this._w=f*V*J-n*x*L):"YXZ"===Q?(this._x=n*V*J+f*x*L,this._y=f*x*J-n*V*L,this._z=f*V*L-n*x*J,this._w=f*V*J+n*x*L):"ZXY"===Q?(this._x=n*V*J-f*x*L,this._y=f*x*J+n*V*L,this._z=f*V*L+n*x*J,this._w=f*V*J-n*x*L):"ZYX"===Q?(this._x=n*V*J-f*x*L,this._y=f*x*J+n*V*L,this._z=f*V*L-n*x*J,this._w=f*V*J+n*x*L):"YZX"===Q?(this._x=n*V*J+f*x*L,this._y=f*x*J+n*V*L,this._z=f*V*L-n*x*J,this._w=f*V*J-n*x*L):"XZY"===Q&&(this._x=n*V*J-f*x*L,this._y=f*x*J-n*V*L,this._z=f*V*L+n*x*J,this._w=f*V*J+n*x*L),this},setFromRotationMatrix:function(Q){var n,x=(Q=Q.el)[0],b=Q[4],J=Q[8],L=Q[1],f=Q[5],V=Q[9],l=Q[2],H=Q[6],I=x+f+(Q=Q[10]);return 0<I?(n=.5/Math.sqrt(I+1),this._w=.25/n,this._x=(H-V)*n,this._y=(J-l)*n,this._z=(L-b)*n):f<x&&Q<x?(n=2*Math.sqrt(1+x-f-Q),this._w=(H-V)/n,this._x=.25*n,this._y=(b+L)/n,this._z=(J+l)/n):Q<f?(n=2*Math.sqrt(1+f-x-Q),this._w=(J-l)/n,this._x=(b+L)/n,this._y=.25*n,this._z=(V+H)/n):(n=2*Math.sqrt(1+Q-x-f),this._w=(L-b)/n,this._x=(J+l)/n,this._y=(V+H)/n,this._z=.25*n),this},setFromToVectors:function(Q,n){return S1===n5&&(S1=new I5),(m1=Q.dot(n)+1)<1e-7?(m1=0,Math.abs(Q.x)>Math.abs(Q.z)?S1.set(-Q.y,Q.x,0):S1.set(0,-Q.z,Q.y)):S1.crossVectors(Q,n),this._x=S1.x,this._y=S1.y,this._z=S1.z,this._w=m1,this.normalize()},setFromUnitVectors:function(Q,n){return R1===n5&&(R1=new I5),(g1=Q.dot(n)+1)<1e-6?(g1=0,Math.abs(Q.x)>Math.abs(Q.z)?R1.set(-Q.y,Q.x,0):R1.set(0,-Q.z,Q.y)):R1.crossVectors(Q,n),this._x=R1.x,this._y=R1.y,this._z=R1.z,this._w=g1,this.normalize()},multiply:function(Q){return this.multiplyQuaternions(this,Q)},premultiply:function(Q){return this.multiplyQuaternions(Q,this)},multiplyQuaternions:function(Q,n){var x=Q._x,b=Q._y,J=Q._z,Q=Q._w,L=n._x,f=n._y,V=n._z,n=n._w;return this._x=x*n+Q*L+b*V-J*f,this._y=b*n+Q*f+J*L-x*V,this._z=J*n+Q*V+x*f-b*L,this._w=Q*n-x*L-b*f-J*V,this},toArray:function(Q,n){return(Q=Q||[])[n=n||0]=this._x,Q[n+1]=this._y,Q[n+2]=this._z,Q[n+3]=this._w,Q}}),dK.slerpFlat=function(Q,n,x,b,J,L,f){var V,l,H,I=x[b+0],Z=x[b+1],E=x[b+2],x=x[b+3],b=J[L+0],a=J[L+1],o=J[L+2],J=J[L+3];return 0===f?(Q[n+0]=I,Q[n+1]=Z,Q[n+2]=E,void(Q[n+3]=x)):1===f?(Q[n+0]=b,Q[n+1]=a,Q[n+2]=o,void(Q[n+3]=J)):(x===J&&I===b&&Z===a&&E===o||(L=1-f,V=0<=(l=I*b+Z*a+E*o+x*J)?1:-1,(H=1-l*l)>Number.EPSILON&&(H=Math.sqrt(H),l=Math.atan2(H,l*V),L=Math.sin(L*l)/H,f=Math.sin(f*l)/H),I=I*L+b*(l=f*V),Z=Z*L+a*l,E=E*L+o*l,x=x*L+J*l,L===1-f&&(I*=H=1/Math.sqrt(I*I+Z*Z+E*E+x*x),Z*=H,E*=H,x*=H)),Q[n]=I,Q[n+1]=Z,Q[n+2]=E,void(Q[n+3]=x))},d.Math.Vector4=function(Q,n,x,b){this.x=Q||0,this.y=n||0,this.z=x||0,this.w=b!==n5?b:1}),I5=(e.assign(hK.prototype,{isVector4:!0,set:function(Q,n,x,b){return this.x=Q,this.y=n,this.z=x,this.w=b,this},setScalar:function(Q){return this.x=Q,this.y=Q,this.z=Q,this.w=Q,this},setX:function(Q){return this.x=Q,this},setY:function(Q){return this.y=Q,this},setZ:function(Q){return this.z=Q,this},setW:function(Q){return this.w=Q,this},setComponent:function(Q,n){switch(Q){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+Q)}return this},getComponent:function(Q){switch(Q){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+Q)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(Q){return this.x=Q.x,this.y=Q.y,this.z=Q.z,this.w=Q.w!==n5?Q.w:1,this},add:function(Q,n){return n!==n5?this.addVectors(Q,n):(this.x+=Q.x,this.y+=Q.y,this.z+=Q.z,this.w+=Q.w,this)},addScalar:function(Q){return this.x+=Q,this.y+=Q,this.z+=Q,this.w+=Q,this},addVectors:function(Q,n){return this.x=Q.x+n.x,this.y=Q.y+n.y,this.z=Q.z+n.z,this.w=Q.w+n.w,this},addScaledVector:function(Q,n){return this.x+=Q.x*n,this.y+=Q.y*n,this.z+=Q.z*n,this.w+=Q.w*n,this},sub:function(Q,n){return n!==n5?this.subVectors(Q,n):(this.x-=Q.x,this.y-=Q.y,this.z-=Q.z,this.w-=Q.w,this)},subScalar:function(Q){return this.x-=Q,this.y-=Q,this.z-=Q,this.w-=Q,this},subVectors:function(Q,n){return this.x=Q.x-n.x,this.y=Q.y-n.y,this.z=Q.z-n.z,this.w=Q.w-n.w,this},multiplyScalar:function(Q){return this.x*=Q,this.y*=Q,this.z*=Q,this.w*=Q,this},applyMatrix4:function(Q){var n=this.x,x=this.y,b=this.z,J=this.w,Q=Q.el;return this.x=Q[0]*n+Q[4]*x+Q[8]*b+Q[12]*J,this.y=Q[1]*n+Q[5]*x+Q[9]*b+Q[13]*J,this.z=Q[2]*n+Q[6]*x+Q[10]*b+Q[14]*J,this.w=Q[3]*n+Q[7]*x+Q[11]*b+Q[15]*J,this},divideScalar:function(Q){return this.multiplyScalar(1/Q)},setAxisAngleFromQuaternion:function(Q){this.w=2*Math.acos(Q.w);var n=Math.sqrt(1-Q.w*Q.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=Q.x/n,this.y=Q.y/n,this.z=Q.z/n),this},setAxisAngleFromRotationMatrix:function(Q){var n,x,b,J=(Q=Q.el)[0],L=Q[4],f=Q[8],V=Q[1],l=Q[5],H=Q[9],I=Q[2],Z=Q[6],Q=Q[10];if(Math.abs(L-V)<.01&&Math.abs(f-I)<.01&&Math.abs(H-Z)<.01){if(Math.abs(L+V)<.1&&Math.abs(f+I)<.1&&Math.abs(H+Z)<.1&&Math.abs(J+l+Q-3)<.1)return this.set(1,0,0,0),this;var E=Math.PI,a=(J+1)/2,o=(l+1)/2,B=(Q+1)/2,G=(L+V)/4,_=(f+I)/4,$=(H+Z)/4;return o<a&&B<a?b=a<.01?(n=0,x=.707106781):(x=G/(n=Math.sqrt(a)),_/n):B<o?b=o<.01?(x=0,n=.707106781):(n=G/(x=Math.sqrt(o)),$/x):B<.01?(x=n=.707106781,b=0):(n=_/(b=Math.sqrt(B)),x=$/b),this.set(n,x,b,E),this}return a=Math.sqrt((Z-H)*(Z-H)+(f-I)*(f-I)+(V-L)*(V-L)),Math.abs(a)<.001&&(a=1),this.x=(Z-H)/a,this.y=(f-I)/a,this.z=(V-L)/a,this.w=Math.acos((J+l+Q-1)/2),this},min:function(Q){return this.x=Math.min(this.x,Q.x),this.y=Math.min(this.y,Q.y),this.z=Math.min(this.z,Q.z),this.w=Math.min(this.w,Q.w),this},max:function(Q){return this.x=Math.max(this.x,Q.x),this.y=Math.max(this.y,Q.y),this.z=Math.max(this.z,Q.z),this.w=Math.max(this.w,Q.w),this},clamp:function(Q,n){return this.x=Math.max(Q.x,Math.min(n.x,this.x)),this.y=Math.max(Q.y,Math.min(n.y,this.y)),this.z=Math.max(Q.z,Math.min(n.z,this.z)),this.w=Math.max(Q.w,Math.min(n.w,this.w)),this},clampScalar:function(Q,n){return Y1===n5&&(Y1=new hK,T1=new hK),Y1.set(Q,Q,Q,Q),T1.set(n,n,n,n),this.clamp(Y1,T1)},clampLength:function(Q,n){var x=this.length();return this.divideScalar(x||1).multiplyScalar(Math.max(Q,Math.min(n,x)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(Q){return this.x*Q.x+this.y*Q.y+this.z*Q.z+this.w*Q.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(Q){return this.normalize().multiplyScalar(Q)},lerp:function(Q,n){return this.x+=(Q.x-this.x)*n,this.y+=(Q.y-this.y)*n,this.z+=(Q.z-this.z)*n,this.w+=(Q.w-this.w)*n,this},lerpVectors:function(Q,n,x){return this.subVectors(n,Q).multiplyScalar(x).add(Q)},equals:function(Q){return Q.x===this.x&&Q.y===this.y&&Q.z===this.z&&Q.w===this.w},fromArray:function(Q,n){return this.x=Q[n=n===n5?0:n],this.y=Q[n+1],this.z=Q[n+2],this.w=Q[n+3],this},toArray:function(Q,n){return(Q=Q===n5?[]:Q)[n=n===n5?0:n]=this.x,Q[n+1]=this.y,Q[n+2]=this.z,Q[n+3]=this.w,Q},fromBufferAttribute:function(Q,n,x){return this.x=Q.getX(n),this.y=Q.getY(n),this.z=Q.getZ(n),this.w=Q.getW(n),this}}),d.Math.Vector3=function(Q,n,x){Q===n5?(this.x=0,this.y=0,this.z=0):"object"==typeof Q?this.copy(Q):this.set(Q,n==n5?Q:n,x==n5?Q:x)}),pK=(e.assign(I5.prototype,{isVector3:!0,isNaN:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)},set:function(Q,n,x){return this.x=Q,this.y=n,this.z=x,this},equals:function(Q){return Q&&this.x===Q.x&&this.y===Q.y&&this.z===Q.z},setScalar:function(Q){return this.x=Q,this.y=Q,this.z=Q,this},setX:function(Q){return this.x=Q,this},setY:function(Q){return this.y=Q,this},setZ:function(Q){return this.z=Q,this},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(Q){return Q.x===n5?(this.x=Q[0],this.y=Q[1],this.z=Q[2]):(this.x=Q.x,this.y=Q.y,this.z=Q.z||0),this},add:function(Q){return this.x+=Q.x,this.y+=Q.y,this.z+=Q.z,this},addScalar:function(Q){return this.x+=Q,this.y+=Q,this.z+=Q,this},addVectors:function(Q,n){return this.x=Q.x+n.x,this.y=Q.y+n.y,this.z=Q.z+n.z,this},addScaledVector:function(Q,n){return this.x+=Q.x*n,this.y+=Q.y*n,this.z+=Q.z*n,this},sub:function(Q){return this.x-=Q.x,this.y-=Q.y,this.z-=Q.z,this},subScalar:function(Q){return this.x-=Q,this.y-=Q,this.z-=Q,this},subVectors:function(Q,n){return this.x=Q.x-n.x,this.y=Q.y-n.y,this.z=Q.z-n.z,this},divide:function(Q){return this.x/=Q.x,this.y/=Q.y,this.z/=Q.z,this},multiply:function(Q){return this.x*=Q.x,this.y*=Q.y,this.z*=Q.z,this},multiplyScalar:function(Q){return this.x*=Q,this.y*=Q,this.z*=Q,this},divideScalar:function(Q){return 0!==Q?(this.x*=Q=1/Q,this.y*=Q,this.z*=Q):(this.x=0,this.y=0,this.z=0),this},distanceTo:function(Q){return Math.sqrt(this.distanceToSquared(Q))},distanceToSquared:function(Q){var n=this.x-Q.x,x=this.y-Q.y;return n*n+x*x+(Q=this.z-Q.z)*Q},distanceToSquared2:function(Q){var n=this.x-Q[0],x=this.y-Q[1];return n*n+x*x+(Q=this.z-Q[2])*Q},divideVectors:function(Q,n){return this.x=Q.x/n.x,this.y=Q.y/n.y,this.z=Q.z/n.z,this},multiplyVectors:function(Q,n){return this.x=Q.x*n.x,this.y=Q.y*n.y,this.z=Q.z*n.z,this},transformDirection:function(Q){var n=this.x,x=this.y,b=this.z,Q=Q.el;return this.x=Q[0]*n+Q[4]*x+Q[8]*b,this.y=Q[1]*n+Q[5]*x+Q[9]*b,this.z=Q[2]*n+Q[6]*x+Q[10]*b,this.normalize()},applyAxisAngle:(j1=new dK,function(Q,n){return this.applyQuaternion(j1.setFromAxisAngle(Q,n))}),applyEuler:(N1=new dK,function(Q){return this.applyQuaternion(N1.setFromEuler(Q))}),applyQuaternion:function(Q){var n=this.x,x=this.y,b=this.z,J=Q._x,L=Q._y,f=Q._z,V=(Q=Q._w)*n+L*b-f*x,l=Q*x+f*n-J*b,H=Q*b+J*x-L*n;return this.x=V*Q+(n=-J*n-L*x-f*b)*-J+l*-f-H*-L,this.y=l*Q+n*-L+H*-J-V*-f,this.z=H*Q+n*-f+V*-L-l*-J,this},applyMatrix4:function(Q){var n=this.x,x=this.y,b=this.z,J=1/((Q=Q.el)[3]*n+Q[7]*x+Q[11]*b+Q[15]);return this.x=(Q[0]*n+Q[4]*x+Q[8]*b+Q[12])*J,this.y=(Q[1]*n+Q[5]*x+Q[9]*b+Q[13])*J,this.z=(Q[2]*n+Q[6]*x+Q[10]*b+Q[14])*J,this},applyMatrix3:function(Q){var n=this.x,x=this.y,b=this.z,Q=Q.el;return this.x=Q[0]*n+Q[3]*x+Q[6]*b,this.y=Q[1]*n+Q[4]*x+Q[7]*b,this.z=Q[2]*n+Q[5]*x+Q[8]*b,this},applyNormalMatrix:function(Q){return this.applyMatrix3(Q).normalize()},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},reflect:(k1=new I5,function(Q){return this.sub(k1.copy(Q).multiplyScalar(2*this.dot(Q)))}),dot:function(Q){return this.x*Q.x+this.y*Q.y+this.z*Q.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){var Q=this.length();return Q?this.multiplyScalar(1/Q):this},setLength:function(Q){return this.normalize().multiplyScalar(Q)},fromArray:function(Q,n){return this.x=Q[n=n===n5?0:n],this.y=Q[n+1],this.z=Q[n+2],this},toArray:function(Q,n){return(Q=Q===n5?[0,0,0]:Q)[n=n===n5?0:n]=this.x,Q[n+1]=this.y,Q[n+2]=this.z,Q},cross:function(Q){return this.crossVectors(this,Q)},angleTo:function(Q){return 1+1e-6<(Q=this.dot(Q)/Math.sqrt(this.lengthSq()*Q.lengthSq()))||Q<-1-1e-6?0:Math.acos(s.clamp(Q,-1,1))},lerp:function(Q,n){return this.x+=(Q.x-this.x)*n,this.y+=(Q.y-this.y)*n,this.z+=(Q.z-this.z)*n,this},lerpVectors:function(Q,n,x){return this.subVectors(n,Q).multiplyScalar(x).add(Q)},crossVectors:function(Q,n){var x=Q.x,b=Q.y,Q=Q.z,J=n.x,L=n.y,n=n.z;return this.x=b*n-Q*L,this.y=Q*J-x*n,this.z=x*L-b*J,this},min:function(Q){return this.x=Math.min(this.x,Q.x),this.y=Math.min(this.y,Q.y),this.z=Math.min(this.z,Q.z),this},max:function(Q){return this.x=Math.max(this.x,Q.x),this.y=Math.max(this.y,Q.y),this.z=Math.max(this.z,Q.z),this},setFromMatrixPosition:function(Q){return this.setFromMatrixColumn(Q,3)},setFromMatrixScale:function(Q){var n=this.setFromMatrixColumn(Q,0).length(),x=this.setFromMatrixColumn(Q,1).length(),Q=this.setFromMatrixColumn(Q,2).length();return this.x=n,this.y=x,this.z=Q,this},setFromMatrixColumn:function(Q,n){return this.fromArray(Q.el,4*n)}}),I5.UP=new I5(0,1,0),I5.AxisX=new I5(1,0,0),I5.AxisY=new I5(0,1,0),I5.AxisZ=new I5(0,0,1),I5.normalizeArray=(C1=new I5,function(Q){return C1.copy(Q).normalize().toArray()}),Q9=new I5,function(Q,n){return(n=n||Q9).x=Q[0],n.y=Q[1],n.z=Q[2],n}),R=d.Math.Vector2=function(Q,n,x){"object"==typeof Q&&(Q=Q.x!=n5?(n=Q.y,x=Q.e,Q.x):(x=Q[2],n=Q[1],Q[0])),this.set(Q||0,n||0,x)},x=(R.prototype={},(R.prototype.constructor=R).prototype.isVector2=!0,e.defineProperties(R.prototype,{width:{get:function(){return this.x},set:function(Q){this.x=Q}},height:{get:function(){return this.y},set:function(Q){this.y=Q}}}),R.prototype.clone=function(){return new R(this.x,this.y,this.e)},R.prototype.copy=function(Q){return this.set(Q.x,Q.y,Q.e),this},R.prototype.equals=function(Q){return Q.x===this.x&&Q.y===this.y&&Q.e===this.e},R.prototype.set=function(Q,n,x){return this.x=Q||0,this.y=n||(0!==n?this.x:0),x!=n5&&(this.e=x),this},R.prototype.setScalar=function(Q){return this.x=Q,this.y=Q,this.e=Q,this},R.prototype.setX=function(Q){return this.x=Q||0,this},R.prototype.setY=function(Q){return this.y=Q||0,this},R.prototype.setE=function(Q){return this.e=Q||0,this},R.prototype.add=function(Q){return this.x+=Q.x,this.y+=Q.y,this},R.prototype.addVectors=function(Q,n){return this.x=Q.x+n.x,this.y=Q.y+n.y,this},R.prototype.addScalar=function(Q){return this.x+=Q,this.y+=Q,this},R.prototype.addScaledVector=function(Q,n){return this.x+=Q.x*n,this.y+=Q.y*n,this},R.prototype.sub=function(Q){return this.x-=Q.x,this.y-=Q.y,this},R.prototype.subScalar=function(Q){return this.x-=Q,this.y-=Q,this},R.prototype.subVectors=function(Q,n){return this.x=Q.x-n.x,this.y=Q.y-n.y,this},R.prototype.multiply=function(Q){return this.x*=Q.x,this.y*=Q.y,this},R.prototype.multiplyScalar=function(Q){return this.x*=Q,this.y*=Q,this},R.prototype.divide=function(Q){return this.x/=Q.x,this.y/=Q.y,this},R.prototype.divideScalar=function(Q){return this.multiplyScalar(1/Q)},R.prototype.min=function(Q){return this.x=Math.min(this.x,Q.x),this.y=Math.min(this.y,Q.y),this},R.prototype.max=function(Q){return this.x=Math.max(this.x,Q.x),this.y=Math.max(this.y,Q.y),this},R.prototype.fromArray=function(Q,n){return this.x=Q[n=n===n5?0:n],this.y=Q[n+1],this},R.prototype.clamp=function(Q,n){return this.x=Math.max(Q.x,Math.min(n.x,this.x)),this.y=Math.max(Q.y,Math.min(n.y,this.y)),this},R.prototype.clampScalar=function(Q,n){return n9===n5&&(n9=new R,x9=new R),n9.set(Q,Q),x9.set(n,n),this.clamp(n9,x9)},R.prototype.clampLength=function(Q,n){var x=this.length();return this.multiplyScalar(Math.max(Q,Math.min(n,x))/x)},R.prototype.dot=function(Q){return this.x*Q.x+this.y*Q.y},R.prototype.cross=function(Q){return this.x*Q.y-this.y*Q.x},R.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},R.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},R.prototype.normalize=function(){return this.divideScalar(this.length())},R.prototype.angle=function(){var Q=Math.atan2(this.y,this.x);return Q<0&&(Q+=2*Math.PI),Q},R.prototype.distanceTo=function(Q){return Math.sqrt(this.distanceToSquared(Q))},R.prototype.distanceToSquared=function(Q){var n=this.x-Q.x;return n*n+(Q=this.y-Q.y)*Q},R.prototype.isNearEnough=function(Q){return this.distanceToSquared(Q)<1e-8},R.prototype.setLength=function(Q){var n=this.length();return n?this.multiplyScalar(Q/n):this},R.prototype.lerp=function(Q,n){return this.x+=(Q.x-this.x)*n,this.y+=(Q.y-this.y)*n,"number"==typeof Q.e&&"number"==typeof this.e&&(this.e+=(Q.e-this.e)*n),this},R.prototype.lerpVectors=function(Q,n,x){return this.subVectors(n,Q).multiplyScalar(x).add(Q)},R.prototype.rotateAround=function(Q,n){var x=Q?Q.x:0,Q=Q?Q.y:0,b=Math.cos(n),n=Math.sin(n),J=this.x-x,L=this.y-Q;return this.x=J*b-L*n+x,this.y=J*n+L*b+Q,this},d.Math.Matrix3=function(){this.el=[1,0,0,0,1,0,0,0,1]}),zK=(e.assign(x.prototype,{isMatrix3:!0,set:function(Q,n,x,b,J,L,f,V,l){var H=this.el;return H[0]=Q,H[1]=b,H[2]=f,H[3]=n,H[4]=J,H[5]=V,H[6]=x,H[7]=L,H[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.el)},copy:function(Q){var n=this.el,Q=Q.el;return n[0]=Q[0],n[1]=Q[1],n[2]=Q[2],n[3]=Q[3],n[4]=Q[4],n[5]=Q[5],n[6]=Q[6],n[7]=Q[7],n[8]=Q[8],this},setFromMatrix4:function(Q){return Q=Q.el,this.set(Q[0],Q[4],Q[8],Q[1],Q[5],Q[9],Q[2],Q[6],Q[10]),this},applyToBufferAttribute:(b9=new I5,function(Q){for(var n=0,x=Q.count;n<x;n++)b9.x=Q.getX(n),b9.y=Q.getY(n),b9.z=Q.getZ(n),b9.applyMatrix3(this),Q.setXYZ(n,b9.x,b9.y,b9.z);return Q}),multiply:function(Q){return this.multiplyMatrices(this,Q)},premultiply:function(Q){return this.multiplyMatrices(Q,this)},multiplyMatrices:function(Q,n){var Q=Q.el,n=n.el,x=this.el,b=Q[0],J=Q[3],L=Q[6],f=Q[1],V=Q[4],l=Q[7],H=Q[2],I=Q[5],Q=Q[8],Z=n[0],E=n[3],a=n[6],o=n[1],B=n[4],G=n[7],_=n[2],$=n[5],n=n[8];return x[0]=b*Z+J*o+L*_,x[3]=b*E+J*B+L*$,x[6]=b*a+J*G+L*n,x[1]=f*Z+V*o+l*_,x[4]=f*E+V*B+l*$,x[7]=f*a+V*G+l*n,x[2]=H*Z+I*o+Q*_,x[5]=H*E+I*B+Q*$,x[8]=H*a+I*G+Q*n,this},multiplyScalar:function(Q){var n=this.el;return n[0]*=Q,n[3]*=Q,n[6]*=Q,n[1]*=Q,n[4]*=Q,n[7]*=Q,n[2]*=Q,n[5]*=Q,n[8]*=Q,this},determinant:function(){var Q=this.el,n=Q[0],x=Q[1],b=Q[2],J=Q[3],L=Q[4],f=Q[5],V=Q[6],l=Q[7];return n*L*(Q=Q[8])-n*f*l-x*J*Q+x*f*V+b*J*l-b*L*V},getInverse:function(Q,n){var Q=Q.el,x=this.el,b=Q[0],J=Q[1],L=Q[2],f=Q[3],V=Q[4],l=Q[5],H=Q[6],I=Q[7],Z=(Q=Q[8])*V-l*I,E=l*H-Q*f,a=I*f-V*H,o=b*Z+J*E+L*a;return 0==o?this.identity():(x[0]=Z*(o=1/o),x[1]=(L*I-Q*J)*o,x[2]=(l*J-L*V)*o,x[3]=E*o,x[4]=(Q*b-L*H)*o,x[5]=(L*f-l*b)*o,x[6]=a*o,x[7]=(J*H-I*b)*o,x[8]=(V*b-J*f)*o,this)},transpose:function(){var Q=this.el,n=Q[1];return Q[1]=Q[3],Q[3]=n,n=Q[2],Q[2]=Q[6],Q[6]=n,n=Q[5],Q[5]=Q[7],Q[7]=n,this},getNormalMatrix:function(Q){return this.setFromMatrix4(Q).getInverse(this).transpose()},transposeIntoArray:function(Q){var n=this.el;return Q[0]=n[0],Q[1]=n[3],Q[2]=n[6],Q[3]=n[1],Q[4]=n[4],Q[5]=n[7],Q[6]=n[2],Q[7]=n[5],Q[8]=n[8],this},setUvTransform:function(Q,n,x,b,J,L,f){var V=Math.cos(J),J=Math.sin(J);this.set(x*V,x*J,-x*(V*L+J*f)+L+Q,-b*J,b*V,-b*(-J*L+V*f)+f+n,0,0,1)},scale:function(Q,n){var x=this.el;return x[0]*=Q,x[3]*=Q,x[6]*=Q,x[1]*=n,x[4]*=n,x[7]*=n,this},rotate:function(Q){var n=Math.cos(Q),Q=Math.sin(Q),x=this.el,b=x[0],J=x[3],L=x[6],f=x[1],V=x[4],l=x[7];return x[0]=n*b+Q*f,x[3]=n*J+Q*V,x[6]=n*L+Q*l,x[1]=-Q*b+n*f,x[4]=-Q*J+n*V,x[7]=-Q*L+n*l,this},translate:function(Q,n){var x=this.el;return x[0]+=Q*x[2],x[3]+=Q*x[5],x[6]+=Q*x[8],x[1]+=n*x[2],x[4]+=n*x[5],x[7]+=n*x[8],this},equals:function(Q){for(var n=this.el,x=Q.el,b=0;b<9;b++)if(n[b]!==x[b])return!1;return!0},fromArray:function(Q,n){n===n5&&(n=0);for(var x=0;x<9;x++)this.el[x]=Q[x+n];return this},getElements:function(){return this.el},toArray:function(Q,n){var x=this.el;return(Q=Q===n5?[]:Q)[n=n===n5?0:n]=x[0],Q[n+1]=x[1],Q[n+2]=x[2],Q[n+3]=x[3],Q[n+4]=x[4],Q[n+5]=x[5],Q[n+6]=x[6],Q[n+7]=x[7],Q[n+8]=x[8],Q}}),d.Math.Plane=function(Q,n){this.normal=Q!==n5?Q:new I5(1,0,0),this.constant=n!==n5?n:0}),sK=(e.assign(zK.prototype,{set:function(Q,n){return this.normal.copy(Q),this.constant=n,this},setComponents:function(Q,n,x,b){return this.normal.set(Q,n,x),this.constant=b,this},setFromNormalAndCoplanarPoint:function(Q,n){return this.normal.copy(Q),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:(V9=new I5,l9=new I5,function(Q,n,x){return x=V9.subVectors(x,n).cross(l9.subVectors(Q,n)).normalize(),this.setFromNormalAndCoplanarPoint(x,Q),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(Q){return this.normal.copy(Q.normal),this.constant=Q.constant,this},normalize:function(){var Q=1/this.normal.length();return this.normal.multiplyScalar(Q),this.constant*=Q,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(Q){return this.normal.dot(Q)+this.constant},distanceToSphere:function(Q){return this.distanceToPoint(Q.center)-Q.radius},projectPoint:function(Q,n){return(n=n===n5?new I5:n).copy(this.normal).multiplyScalar(-this.distanceToPoint(Q)).add(Q)},intersectLine:(f9=new I5,function(Q,n){n===n5&&(n=new I5);var x=Q.delta(f9),b=this.normal.dot(x);return 0===b?0===this.distanceToPoint(Q.start)?n.copy(Q.start):n5:(b=-(Q.start.dot(this.normal)+this.constant)/b)<0||1<b?n5:n.copy(x).multiplyScalar(b).add(Q.start)}),intersectsLine:function(Q){var n=this.distanceToPoint(Q.start),Q=this.distanceToPoint(Q.end);return n<0&&0<Q||Q<0&&0<n},intersectsBox:function(Q){return Q.intersectsPlane(this)},intersectsSphere:function(Q){return Q.intersectsPlane(this)},coplanarPoint:function(Q){return(Q=Q===n5?new I5:Q).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(J9=new I5,L9=new x,function(Q,n){return n=n||L9.getNormalMatrix(Q),Q=this.coplanarPoint(J9).applyMatrix4(Q),n=this.normal.applyMatrix3(n).normalize(),this.constant=-Q.dot(n),this}),translate:function(Q){return this.constant-=Q.dot(this.normal),this},equals:function(Q){return Q.normal.equals(this.normal)&&Q.constant===this.constant}}),d.Math.Ray=function(Q,n){this.origin=Q!==n5?Q.clone():new I5,this.direction=n!==n5?n.clone():new I5}),XK=(e.assign(sK.prototype,{set:function(Q,n){return this.origin.copy(Q),this.direction.copy(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(Q){return this.origin.copy(Q.origin),this.direction.copy(Q.direction),this.maxHitLen=Q.maxHitLen,this},at:function(Q,n){return(n||new I5).copy(this.direction).multiplyScalar(Q).add(this.origin)},setMaxHitLength:function(Q){this.maxHitLen=Q},lookAt:function(Q){return this.direction.copy(Q).sub(this.origin).normalize(),this},applyMatrix4:function(Q){var n,x=this.maxHitLen;return x&&(n=this.direction.clone().multiplyScalar(x).add(this.origin)).applyMatrix4(Q),this.origin.applyMatrix4(Q),this.direction.transformDirection(Q),x&&(this.maxHitLen=this.origin.distanceTo(n)),this},distanceToPlane:function(Q){var n=Q.normal.dot(this.direction);return 0===n?0===Q.distanceToPoint(this.origin)?0:null:0<=(Q=-(this.origin.dot(Q.normal)+Q.constant)/n)?Q:null},intersectPlane:function(Q,n){return null===(Q=this.distanceToPlane(Q))?null:this.at(Q,n)},intersectSphere:(B9=new I5,function(Q,n){B9.subVectors(Q.center,this.origin);var x=B9.dot(this.direction),b=B9.dot(B9)-x*x;return(Q=Q.radius*Q.radius)<b?null:(b=x-(Q=Math.sqrt(Q-b)),x+=Q,b<0&&x<0?null:b<0?this.at(x,n):this.at(b,n))}),intersectEllipsoid:(a9=new I5,o9=new I5,function(Q,n){a9.subVectors(Q.center,this.origin),a9.divide(Q.radius),o9.divideVectors(this.direction,Q.radius);var Q=o9.lengthSq(),x=a9.dot(o9),b=a9.dot(a9)*Q-x*x;if(Q<b)return null;var J=(x-(b=Math.sqrt(Q-b)))/Q,x=(x+b)/Q;return J<0&&x<0?null:J<0?this.at(x,n):this.at(J,n)}),intersectBox:function(Q,n){var x,b,J,L=1/this.direction.x,f=1/this.direction.y,V=1/this.direction.z,l=this.origin,L=0<=L?(x=(Q.min.x-l.x)*L,(Q.max.x-l.x)*L):(x=(Q.max.x-l.x)*L,(Q.min.x-l.x)*L);return(f=0<=f?(J=(Q.min.y-l.y)*f,(Q.max.y-l.y)*f):(J=(Q.max.y-l.y)*f,(Q.min.y-l.y)*f))<x||L<J?null:((x<J||x!=x)&&(x=J),(f<L||L!=L)&&(L=f),(J=0<=V?(b=(Q.min.z-l.z)*V,(Q.max.z-l.z)*V):(b=(Q.max.z-l.z)*V,(Q.min.z-l.z)*V))<x||L<b||(L=J<L||L!=L?J:L)<0?null:(f=0<=(x=x<b||x!=x?b:x)?x:L,(Q=this.maxHitLen)&&Q<f?null:this.at(f,n)))},intersectTriangle:(H9=new I5,I9=new I5,Z9=new I5,E9=new I5,function(Q,n,x,b,J,L){if(I9.subVectors(n,Q),Z9.subVectors(x,Q),E9.crossVectors(I9,Z9),(n=J||0)<(x=this.direction.dot(E9))){if(b)return null}else if(-n<=x)return null;return J=1/x,H9.subVectors(this.origin,Q),(b=J*this.direction.dot(Z9.crossVectors(H9,Z9)))<-n||(x=J*this.direction.dot(I9.cross(H9)))<-n||1+n<b+x||(Q=-J*H9.dot(E9))<0||(n=this.maxHitLen)&&n<Q?null:this.at(Q,L)})}),d.Math.Box3=function(Q,n){this.min=Q!==n5?Q:new I5(1/0,1/0,1/0),this.max=n!==n5?n:new I5(-1/0,-1/0,-1/0)}),p1=(e.assign(XK.prototype,{set:function(Q,n){return this.min.copy(Q),this.max.copy(n),this},setFromArray:function(Q){for(var n=1/0,x=1/0,b=1/0,J=-1/0,L=-1/0,f=-1/0,V=0,l=Q.length;V<l;V+=3){var H=Q[V],I=Q[V+1],Z=Q[V+2];H<n&&(n=H),I<x&&(x=I),Z<b&&(b=Z),J<H&&(J=H),L<I&&(L=I),f<Z&&(f=Z)}return this.min.set(n,x,b),this.max.set(J,L,f),this},setFromPoints:function(Q){this.makeEmpty();for(var n=0,x=Q.length;n<x;n++)this.expandByPoint(Q[n]);return this},clone:function(){return(new this.constructor).copy(this)},intersectsBox:function(Q){return!(Q.max.x<this.min.x||Q.min.x>this.max.x||Q.max.y<this.min.y||Q.min.y>this.max.y||Q.max.z<this.min.z||Q.min.z>this.max.z)},copy:function(Q){return this.min.copy(Q.min),this.max.copy(Q.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(Q){return this.isEmpty()?Q.set(0,0,0):Q.addVectors(this.min,this.max).multiplyScalar(.5)},expandByPoint:function(Q){return this.min.min(Q),this.max.max(Q),this},expandByBox:function(Q){return this.min.min(Q.min),this.max.max(Q.max),this},applyMatrix4:(G9=[new I5,new I5,new I5,new I5,new I5,new I5,new I5,new I5],function(Q){return this.isEmpty()||(G9[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(Q),G9[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(Q),G9[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(Q),G9[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(Q),G9[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(Q),G9[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(Q),G9[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(Q),G9[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(Q),this.setFromPoints(G9)),this})}),d.Math.Sphere=function(Q,n){this.center=Q!==n5?Q:new I5,this.radius=n!==n5?n:0}),z1=(e.assign(p1.prototype,{set:function(Q,n){return this.center.copy(Q),this.radius=n,this},setFromPoints:(_9=new XK,function(Q,n){for(var x=this.center,b=(n!==n5?x.copy(n):_9.setFromPoints(Q).getCenter(x),0),J=0,L=Q.length;J<L;J++)b=Math.max(b,x.distanceToSquared(Q[J]));return this.radius=Math.sqrt(b),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(Q){return this.center.copy(Q.center),this.radius=Q.radius,this},empty:function(){return this.radius<=0},containsPoint:function(Q){return Q.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(Q){return Q.distanceTo(this.center)-this.radius},intersectsSphere:function(Q){var n=this.radius+Q.radius;return Q.center.distanceToSquared(this.center)<=n*n},intersectsBox:function(Q){return Q.intersectsSphere(this)},intersectsPlane:function(Q){return Math.abs(Q.distanceToPoint(this.center))<=this.radius},clampPoint:function(Q,n){var x=this.center.distanceToSquared(Q);return(n=n===n5?new I5:n).copy(Q),x>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(Q){return(Q=Q===n5?new XK:Q).set(this.center,this.center),Q.expandByScalar(this.radius),Q},applyMatrix4:function(Q){return this.center.applyMatrix4(Q),this.radius=this.radius*Q.getMaxScaleOnAxis(),this},translate:function(Q){return this.center.add(Q),this},equals:function(Q){return Q.center.equals(this.center)&&Q.radius===this.radius}}),d.Math.Frustum=function(Q,n,x,b,J,L){this.planes=[Q!==n5?Q:new zK,n!==n5?n:new zK,x!==n5?x:new zK,b!==n5?b:new zK,J!==n5?J:new zK,L!==n5?L:new zK]}),X=(e.assign(z1.prototype,{set:function(Q,n,x,b,J,L){var f=this.planes;return f[0].copy(Q),f[1].copy(n),f[2].copy(x),f[3].copy(b),f[4].copy(J),f[5].copy(L),this},clone:function(){return(new this.constructor).copy(this)},copy:function(Q){for(var n=this.planes,x=0;x<6;x++)n[x].copy(Q.planes[x]);return this},setFromMatrix:function(Q){var n=this.planes,x=(Q=Q.el)[0],b=Q[1],J=Q[2],L=Q[3],f=Q[4],V=Q[5],l=Q[6],H=Q[7],I=Q[8],Z=Q[9],E=Q[10],a=Q[11],o=Q[12],B=Q[13],G=Q[14],Q=Q[15];return n[0].setComponents(L-x,H-f,a-I,Q-o).normalize(),n[1].setComponents(L+x,H+f,a+I,Q+o).normalize(),n[2].setComponents(L+b,H+V,a+Z,Q+B).normalize(),n[3].setComponents(L-b,H-V,a-Z,Q-B).normalize(),n[4].setComponents(L-J,H-l,a-E,Q-G).normalize(),n[5].setComponents(L+J,H+l,a+E,Q+G).normalize(),this},intersectsObject:(D9=new p1,function(Q){var n=Q.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),D9.copy(n.boundingSphere).applyMatrix4(Q.matrixWorld),this.intersectsSphere(D9)}),intersectsSprite:(W9=new p1,function(Q){return W9.center.set(0,0,0),W9.radius=.7071067811865476,W9.applyMatrix4(Q.matrixWorld),this.intersectsSphere(W9)}),intersectsSphere:function(Q){for(var n=this.planes,x=Q.center,b=-Q.radius,J=0;J<6;J++)if(n[J].distanceToPoint(x)<b)return!1;return!0},intersectsBox:($9=new I5,function(Q){for(var n=this.planes,x=0;x<6;x++){var b=n[x];if($9.x=(0<b.normal.x?Q.max:Q.min).x,$9.y=(0<b.normal.y?Q.max:Q.min).y,$9.z=(0<b.normal.z?Q.max:Q.min).z,b.distanceToPoint($9)<0)return!1}return!0}),containsPoint:function(Q){for(var n=this.planes,x=0;x<6;x++)if(n[x].distanceToPoint(Q)<0)return!1;return!0}}),d.Math.Matrix4=function(){this.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),RK=(e.assign(X.prototype,{isMatrix4:!0,set:function(Q,n,x,b,J,L,f,V,l,H,I,Z,E,a,o,B){var G=this.el;return G[0]=Q,G[4]=n,G[8]=x,G[12]=b,G[1]=J,G[5]=L,G[9]=f,G[13]=V,G[2]=l,G[6]=H,G[10]=I,G[14]=Z,G[3]=E,G[7]=a,G[11]=o,G[15]=B,this},clone:function(){return(new X).fromArray(this.el)},fromArray:function(Q,n){n===n5&&(n=0);for(var x=this.el,b=0;b<16;b++)x[b]=Q[b+n];return this},getElements:function(){return this.el},scale:function(Q){var n=this.el,x=Q.x,b=Q.y,Q=Q.z;return n[0]*=x,n[4]*=b,n[8]*=Q,n[1]*=x,n[5]*=b,n[9]*=Q,n[2]*=x,n[6]*=b,n[10]*=Q,n[3]*=x,n[7]*=b,n[11]*=Q,this},translate:function(Q){var n=this.el,x=Q.x||0,b=Q.y||0,Q=Q.z||0;return n[12]+=n[0]*x+n[4]*b+n[8]*Q,n[13]+=n[1]*x+n[5]*b+n[9]*Q,n[14]+=n[2]*x+n[6]*b+n[10]*Q,n[15]+=n[3]*x+n[7]*b+n[11]*Q,this},rotate:(F9=new X,function(Q){return F9.makeRotationFromQuaternion(Q),this.multiply(F9)}),makeRotationFromEuler:function(Q){var n,x,b,J,L,f,V,l,H,I,Z,E,a=this.el,o=Q._x,B=Q._y,G=Q._z,Q=Q._order,_=Math.cos(o),o=Math.sin(o),$=Math.cos(B),B=Math.sin(B),W=Math.cos(G),G=Math.sin(G);return"XYZ"===Q?(L=_*W,f=_*G,V=o*W,l=o*G,a[0]=$*W,a[4]=-$*G,a[8]=B,a[1]=f+V*B,a[5]=L-l*B,a[9]=-o*$,a[2]=l-L*B,a[6]=V+f*B,a[10]=_*$):"YXZ"===Q?(x=$*G,b=B*W,a[0]=(n=$*W)+(J=B*G)*o,a[4]=b*o-x,a[8]=_*B,a[1]=_*G,a[5]=_*W,a[9]=-o,a[2]=x*o-b,a[6]=J+n*o,a[10]=_*$):"ZXY"===Q?(x=$*G,b=B*W,a[0]=(n=$*W)-(J=B*G)*o,a[4]=-_*G,a[8]=b+x*o,a[1]=x+b*o,a[5]=_*W,a[9]=J-n*o,a[2]=-_*B,a[6]=o,a[10]=_*$):"ZYX"===Q?(L=_*W,f=_*G,V=o*W,l=o*G,a[0]=$*W,a[4]=V*B-f,a[8]=L*B+l,a[1]=$*G,a[5]=l*B+L,a[9]=f*B-V,a[2]=-B,a[6]=o*$,a[10]=_*$):"YZX"===Q?(H=_*$,I=_*B,Z=o*$,E=o*B,a[0]=$*W,a[4]=E-H*G,a[8]=Z*G+I,a[1]=G,a[5]=_*W,a[9]=-o*W,a[2]=-B*W,a[6]=I*G+Z,a[10]=H-E*G):"XZY"===Q&&(H=_*$,I=_*B,Z=o*$,E=o*B,a[0]=$*W,a[4]=-G,a[8]=B*W,a[1]=H*G+E,a[5]=_*W,a[9]=I*G-Z,a[2]=Z*G-I,a[6]=o*W,a[10]=E*G+H),a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this},makeRotationFromQuaternion:function(Q){var n=this.el,x=Q._x,b=Q._y,J=Q._z,L=J+J,f=x*(H=x+x),V=x*(I=b+b),x=x*L,l=b*I,b=b*L,H=(Q=Q._w)*H,I=Q*I,Q=Q*L;return n[0]=1-(l+(J=J*L)),n[4]=V-Q,n[8]=x+I,n[1]=V+Q,n[5]=1-(f+J),n[9]=b-H,n[2]=x-I,n[6]=b+H,n[10]=1-(f+l),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},getInverse:function(Q,n){var x=this.el,b=(Q=Q.el)[0],J=Q[1],L=Q[2],f=Q[3],V=Q[4],l=Q[5],H=Q[6],I=Q[7],Z=Q[8],E=Q[9],a=Q[10],o=Q[11],B=Q[12],G=Q[13],_=Q[14],$=E*_*I-G*a*I+G*H*o-l*_*o-E*H*(Q=Q[15])+l*a*Q,W=B*a*I-Z*_*I-B*H*o+V*_*o+Z*H*Q-V*a*Q,D=Z*G*I-B*E*I+B*l*o-V*G*o-Z*l*Q+V*E*Q,A=B*E*H-Z*G*H-B*l*a+V*G*a+Z*l*_-V*E*_,u=b*$+J*W+L*D+f*A;return 0==u?this.identity():(x[0]=$*(u=1/u),x[1]=(G*a*f-E*_*f-G*L*o+J*_*o+E*L*Q-J*a*Q)*u,x[2]=(l*_*f-G*H*f+G*L*I-J*_*I-l*L*Q+J*H*Q)*u,x[3]=(E*H*f-l*a*f-E*L*I+J*a*I+l*L*o-J*H*o)*u,x[4]=W*u,x[5]=(Z*_*f-B*a*f+B*L*o-b*_*o-Z*L*Q+b*a*Q)*u,x[6]=(B*H*f-V*_*f-B*L*I+b*_*I+V*L*Q-b*H*Q)*u,x[7]=(V*a*f-Z*H*f+Z*L*I-b*a*I-V*L*o+b*H*o)*u,x[8]=D*u,x[9]=(B*E*f-Z*G*f-B*J*o+b*G*o+Z*J*Q-b*E*Q)*u,x[10]=(V*G*f-B*l*f+B*J*I-b*G*I-V*J*Q+b*l*Q)*u,x[11]=(Z*l*f-V*E*f-Z*J*I+b*E*I+V*J*o-b*l*o)*u,x[12]=A*u,x[13]=(Z*G*L-B*E*L+B*J*a-b*G*a-Z*J*_+b*E*_)*u,x[14]=(B*l*L-V*G*L-B*J*H+b*G*H+V*J*_-b*l*_)*u,x[15]=(V*E*L-Z*l*L+Z*J*H-b*E*H-V*J*a+b*l*a)*u,this)},invert:function(){return this.getInverse(this)},makeRotationAxis:function(Q,n){var x=Math.cos(n),n=Math.sin(n),b=1-x,J=Q.x,L=Q.y,Q=Q.z,f=b*J,V=b*L;return this.set(f*J+x,f*L-n*Q,f*Q+n*L,0,f*L+n*Q,V*L+x,V*Q-n*J,0,f*Q-n*L,V*Q+n*J,b*Q*Q+x,0,0,0,0,1),this},multiply:function(Q){return this.multiplyMatrices(this,Q)},premultiply:function(Q){return this.multiplyMatrices(Q,this)},multiplyMatrices:function(Q,n){var Q=Q.el||Q,n=n.el||n,x=this.el,b=Q[0],J=Q[4],L=Q[8],f=Q[12],V=Q[1],l=Q[5],H=Q[9],I=Q[13],Z=Q[2],E=Q[6],a=Q[10],o=Q[14],B=Q[3],G=Q[7],_=Q[11],Q=Q[15],$=n[0],W=n[4],D=n[8],A=n[12],u=n[1],M=n[5],t=n[9],i=n[13],r=n[2],P=n[6],c=n[10],F=n[14],q=n[3],w=n[7],y=n[11],n=n[15];return x[0]=b*$+J*u+L*r+f*q,x[4]=b*W+J*M+L*P+f*w,x[8]=b*D+J*t+L*c+f*y,x[12]=b*A+J*i+L*F+f*n,x[1]=V*$+l*u+H*r+I*q,x[5]=V*W+l*M+H*P+I*w,x[9]=V*D+l*t+H*c+I*y,x[13]=V*A+l*i+H*F+I*n,x[2]=Z*$+E*u+a*r+o*q,x[6]=Z*W+E*M+a*P+o*w,x[10]=Z*D+E*t+a*c+o*y,x[14]=Z*A+E*i+a*F+o*n,x[3]=B*$+G*u+_*r+Q*q,x[7]=B*W+G*M+_*P+Q*w,x[11]=B*D+G*t+_*c+Q*y,x[15]=B*A+G*i+_*F+Q*n,this},lookAt:(c9=new I5,function(Q,n,x){return c9.subVectors(Q,n),this.lookAtDirection(c9,x)}),lookAtDirection:(i9=new I5,r9=new I5,P9=new I5,function(Q,n){n=n||I5.UP;var x=this.el;return P9.copy(Q),0===P9.lengthSq()&&(P9.z=1),P9.normalize(),i9.crossVectors(n,P9),0===i9.lengthSq()&&(1===Math.abs(n.z)?P9.x+=1e-4:P9.z+=1e-4,P9.normalize(),i9.crossVectors(n,P9)),i9.normalize(),r9.crossVectors(P9,i9),x[0]=i9.x,x[4]=r9.x,x[8]=P9.x,x[1]=i9.y,x[5]=r9.y,x[9]=P9.y,x[2]=i9.z,x[6]=r9.z,x[10]=P9.z,this}),extractScale:function(Q){t9===n5&&(t9=new I5),Q===n5&&(Q=new I5);var n=t9.setFromMatrixColumn(this,0).length(),x=t9.setFromMatrixColumn(this,1).length(),b=t9.setFromMatrixColumn(this,2).length();return Q.set(n,x,b),Q},extractRotation:function(Q){M9===n5&&(M9=new I5),Q===n5&&(Q=new X);var n=this.el,x=Q.el,b=1/M9.setFromMatrixColumn(Q,0).length(),J=1/M9.setFromMatrixColumn(Q,1).length(),Q=1/M9.setFromMatrixColumn(Q,2).length();return n[0]=x[0]*b,n[1]=x[1]*b,n[2]=x[2]*b,n[4]=x[4]*J,n[5]=x[5]*J,n[6]=x[6]*J,n[8]=x[8]*Q,n[9]=x[9]*Q,n[10]=x[10]*Q,this},multiplyScalar:function(Q){var n=this.el;return n[0]*=Q,n[4]*=Q,n[8]*=Q,n[12]*=Q,n[1]*=Q,n[5]*=Q,n[9]*=Q,n[13]*=Q,n[2]*=Q,n[6]*=Q,n[10]*=Q,n[14]*=Q,n[3]*=Q,n[7]*=Q,n[11]*=Q,n[15]*=Q,this},getPosition:function(Q){return(Q=Q===n5?new I5:Q).setFromMatrixColumn(this,3)},setPosition:function(Q){var n=this.el;return n[12]=Q.x,n[13]=Q.y,n[14]=Q.z,this},copyPosition:function(Q){var n=this.el,Q=Q.el;return n[12]=Q[12],n[13]=Q[13],n[14]=Q[14],this},toArray:function(Q,n){var x=this.el;return(Q=Q===n5?[]:Q)[n=n===n5?0:n]=x[0],Q[n+1]=x[1],Q[n+2]=x[2],Q[n+3]=x[3],Q[n+4]=x[4],Q[n+5]=x[5],Q[n+6]=x[6],Q[n+7]=x[7],Q[n+8]=x[8],Q[n+9]=x[9],Q[n+10]=x[10],Q[n+11]=x[11],Q[n+12]=x[12],Q[n+13]=x[13],Q[n+14]=x[14],Q[n+15]=x[15],Q},determinant:function(){var Q=this.el||this,n=Q[0],x=Q[4],b=Q[8],J=Q[12],L=Q[1],f=Q[5],V=Q[9],l=Q[13],H=Q[2],I=Q[6],Z=Q[10],E=Q[14];return Q[3]*(+J*V*I-b*l*I-J*f*Z+x*l*Z+b*f*E-x*V*E)+Q[7]*(+n*V*E-n*l*Z+J*L*Z-b*L*E+b*l*H-J*V*H)+Q[11]*(+n*l*I-n*f*E-J*L*I+x*L*E+J*f*H-x*l*H)+Q[15]*(-b*f*H-n*V*I+n*f*Z+b*L*I-x*L*Z+x*V*H)},copy:function(Q){var n=this.el,Q=Q.el||Q;return n[0]=Q[0],n[1]=Q[1],n[2]=Q[2],n[3]=Q[3],n[4]=Q[4],n[5]=Q[5],n[6]=Q[6],n[7]=Q[7],n[8]=Q[8],n[9]=Q[9],n[10]=Q[10],n[11]=Q[11],n[12]=Q[12],n[13]=Q[13],n[14]=Q[14],n[15]=Q[15],this},composeFromArray:function(Q,n,x){var b,J,L,f,V,l,H,I,Z,n=n?(b=n[0],J=n[1],L=n[2],n[3]):(L=J=b=0,1);return x?(f=x[0],V=x[1],l=x[2]):f=V=l=1,Q?(H=Q[0],I=Q[1],Z=Q[2]):H=I=Z=0,this._composeImpl(b,J,L,n,f,V,l,H,I,Z)},compose:function(Q,n,x){var b,J,L,f,V,l,H,I,Z,n=n?(b=n._x,J=n._y,L=n._z,n._w):(L=J=b=0,1);return x?(f=x.x,V=x.y,l=x.z):f=V=l=1,Q?(H=Q.x,I=Q.y,Z=Q.z):H=I=Z=0,this._composeImpl(b,J,L,n,f,V,l,H,I,Z)},_composeImpl:function(Q,n,x,b,J,L,f,V,l,H){var I=this.el,Z=x+x,E=Q*(B=Q+Q),a=Q*(G=n+n),Q=Q*Z,o=n*G,n=n*Z,x=x*Z,B=b*B,G=b*G,b=b*Z;return I[0]=(1-(o+x))*J,I[1]=(a+b)*J,I[2]=(Q-G)*J,I[3]=0,I[4]=(a-b)*L,I[5]=(1-(E+x))*L,I[6]=(n+B)*L,I[7]=0,I[8]=(Q+G)*f,I[9]=(n-B)*f,I[10]=(1-(E+o))*f,I[11]=0,I[12]=V,I[13]=l,I[14]=H,I[15]=1,this},decompose:(A9=new I5,u9=new X,function(Q,n,x){var b=this.el,J=A9.set(b[0],b[1],b[2]).length(),L=A9.set(b[4],b[5],b[6]).length(),f=A9.set(b[8],b[9],b[10]).length(),Q=(this.determinant()<0&&(J=-J),Q.x=b[12],Q.y=b[13],Q.z=b[14],u9.copy(this),1/J),b=1/L,V=1/f;return u9.el[0]*=Q,u9.el[1]*=Q,u9.el[2]*=Q,u9.el[4]*=b,u9.el[5]*=b,u9.el[6]*=b,u9.el[8]*=V,u9.el[9]*=V,u9.el[10]*=V,n.setFromRotationMatrix(u9),x.x=J,x.y=L,x.z=f,this}),equals:function(Q){for(var n=this.el,x=Q.el,b=0;b<16;b++)if(n[b]!==x[b])return!1;return!0},transpose:function(){var Q=this.el,n=Q[1];return Q[1]=Q[4],Q[4]=n,n=Q[2],Q[2]=Q[8],Q[8]=n,n=Q[6],Q[6]=Q[9],Q[9]=n,n=Q[3],Q[3]=Q[12],Q[12]=n,n=Q[7],Q[7]=Q[13],Q[13]=n,n=Q[11],Q[11]=Q[14],Q[14]=n,this}}),new X),gK=new X,SK=(X.determinantOfArray=(q9=d.Math.Matrix4.prototype.determinant,function(Q){return Q?q9.call(Q):0}),X.multiplyMatrixArray=function(Q,n,x,b,J,L){var f=Q.el||Q,n=n.el||n,x=x.el||x,V=n[J+0],l=n[J+4],H=n[J+8],I=n[J+12],Z=n[J+1],E=n[J+5],a=n[J+9],o=n[J+13],B=n[J+2],G=n[J+6],_=n[J+10],$=n[J+14],W=n[J+3],D=n[J+7],A=n[J+11],n=n[J+15],J=x[L+0],u=x[L+4],M=x[L+8],t=x[L+12],i=x[L+1],r=x[L+5],P=x[L+9],c=x[L+13],F=x[L+2],q=x[L+6],w=x[L+10],y=x[L+14],K=x[L+3],U=x[L+7],e=x[L+11],x=x[L+15];return f[b+0]=V*J+l*i+H*F+I*K,f[b+4]=V*u+l*r+H*q+I*U,f[b+8]=V*M+l*P+H*w+I*e,f[b+12]=V*t+l*c+H*y+I*x,f[b+1]=Z*J+E*i+a*F+o*K,f[b+5]=Z*u+E*r+a*q+o*U,f[b+9]=Z*M+E*P+a*w+o*e,f[b+13]=Z*t+E*c+a*y+o*x,f[b+2]=B*J+G*i+_*F+$*K,f[b+6]=B*u+G*r+_*q+$*U,f[b+10]=B*M+G*P+_*w+$*e,f[b+14]=B*t+G*c+_*y+$*x,f[b+3]=W*J+D*i+A*F+n*K,f[b+7]=W*u+D*r+A*q+n*U,f[b+11]=W*M+D*P+A*w+n*e,f[b+15]=W*t+D*c+A*y+n*x,Q},d.Math.Triangle=function(Q,n,x){this.a=Q!==n5?Q:new I5,this.b=n!==n5?n:new I5,this.c=x!==n5?x:new I5}),mK=(e.assign(SK,{barycoordFromPoint:(y9=new I5,K9=new I5,U9=new I5,function(Q,n,x,b,J){y9.subVectors(b,n),K9.subVectors(x,n),U9.subVectors(Q,n);var b=y9.dot(y9),x=y9.dot(K9),Q=y9.dot(U9),n=K9.dot(K9),L=K9.dot(U9),f=b*n-x*x,J=J||new I5;return 0==f?J.set(-2,-1,-1):J.set(1-(n=(n*Q-x*L)*(f=1/f))-(b=(b*L-x*Q)*f),b,n)}),uvIntersection:(w9=new I5,function(Q,n,x,b,J,L,f){return SK.barycoordFromPoint(Q,n,x,b,w9),J.multiplyScalar(w9.x),L.multiplyScalar(w9.y),f.multiplyScalar(w9.z),J.add(L).add(f),J.clone()})}),d.Math.Euler=function(Q,n,x,b,J){this.set(Q,n,x,b,J)}),YK=(mK.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],mK.DefaultOrder="XYZ",mK.ReverseOrder=(e9={xyz:"ZYX",xzy:"YZX",yxz:"ZXY",yzx:"XZY",zxy:"YXZ",zyx:"XYZ"},function(Q){return e9[Q]}),e.defineProperties(mK.prototype,{x:{get:function(){return this._x},set:function(Q){this._x=Q,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(Q){this._y=Q,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(Q){this._z=Q,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(Q){this._order=Q,this.onChangeCallback()}}}),e.assign(mK.prototype,{set:function(Q,n,x,b,J){return H_(Q)&&(J=x,b=n,x=Q[2],n=Q[1],Q=Q[0]),b?J&&(b=mK.ReverseOrder(b)):b=this._order||"ZYX",this._x=Q||0,this._y=n||0,this._z=x||0,this._order=b,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(Q){return this._x=Q._x,this._y=Q._y,this._z=Q._z,this._order=Q._order,this.onChangeCallback(),this},setFromRotationMatrix:function(Q,n,x){var b=d.Math.clamp,J=(Q=Q.el||Q)[0],L=Q[4],f=Q[8],V=Q[1],l=Q[5],H=Q[9],I=Q[2],Z=Q[6],Q=Q[10];return"XYZ"===(n=n||this._order)?(this._y=Math.asin(b(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-H,Q),this._z=Math.atan2(-L,J)):(this._x=Math.atan2(Z,l),this._z=0)):"YXZ"===n?(this._x=Math.asin(-b(H,-1,1)),Math.abs(H)<.9999999?(this._y=Math.atan2(f,Q),this._z=Math.atan2(V,l)):(this._y=Math.atan2(-I,J),this._z=0)):"ZXY"===n?(this._x=Math.asin(b(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(-I,Q),this._z=Math.atan2(-L,l)):(this._y=0,this._z=Math.atan2(V,J))):"ZYX"===n?(this._y=Math.asin(-b(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(Z,Q),this._z=Math.atan2(V,J)):(this._x=0,this._z=Math.atan2(-L,l))):"YZX"===n?(this._z=Math.asin(b(V,-1,1)),Math.abs(V)<.9999999?(this._x=Math.atan2(-H,l),this._y=Math.atan2(-I,J)):(this._x=0,this._y=Math.atan2(f,Q))):"XZY"===n?(this._z=Math.asin(-b(L,-1,1)),Math.abs(L)<.9999999?(this._x=Math.atan2(Z,l),this._y=Math.atan2(f,J)):(this._x=Math.atan2(-H,Q),this._y=0)):console.warn("unsupported order: "+n),this._order=n,!1!==x&&this.onChangeCallback(),this},setFromQuaternion:(O9=new X,function(Q,n,x){return O9.makeRotationFromQuaternion(Q),this.setFromRotationMatrix(O9,n,x)}),setFromVector3:function(Q,n){return this.set(Q.x,Q.y,Q.z,n||this._order)},reorder:(v9=new dK,function(Q){return v9.setFromEuler(this),this.setFromQuaternion(v9,Q)}),equals:function(Q){return Q._x===this._x&&Q._y===this._y&&Q._z===this._z&&Q._order===this._order},fromArray:function(Q){return this._x=Q[0],this._y=Q[1],this._z=Q[2],Q[3]!==n5&&(this._order=Q[3]),this.onChangeCallback(),this},toArray:function(Q,n){return(Q=Q===n5?[]:Q)[n=n===n5?0:n]=this._x,Q[n+1]=this._y,Q[n+2]=this._z,Q[n+3]=this._order,Q},toVector3:function(Q){return Q?Q.set(this._x,this._y,this._z):new I5(this._x,this._y,this._z)},onChange:function(Q){return this.onChangeCallback=Q,this},onChangeCallback:function(){}}),s.eulerArrayToQuaternionArray=(d9=new dK,h9=new mK,function(Q,n){return d9.setFromEuler(h9.fromArray(Q)).toArray(n)}),d.Math.Interpolant=function(Q,n,x){this.parameterPositions=Q,this._cachedIndex=0,Q=n.length/Q.length,this.resultBuffer=x!==n5?x:new n.constructor(Q),this.sampleValues=n,this.valueSize=Q,this.settings=null,this.DefaultSettings_={}}),TK=(e.assign(YK.prototype,{evaluate:function(Q){var n,x=this.parameterPositions,b=this._cachedIndex,J=x[b],L=x[b-1];Q:{n:{x:{b:if(!(Q<J)){for(var f=b+2;;){if(J===n5){if(Q<L)break b;return b=x.length,this._cachedIndex=b,this.afterEnd_(b-1,Q,L)}if(b===f)break;if(L=J,Q<(J=x[++b]))break n}n=x.length;break x}if(L<=Q)break Q;var V=x[1];for(Q<V&&(b=2,L=V),f=b-2;;){if(L===n5)return this._cachedIndex=0,this.beforeStart_(0,Q,J);if(b===f)break;if(J=L,(L=x[--b-1])<=Q)break n}n=b,b=0}for(;b<n;){var l=b+n>>>1;Q<x[l]?n=l:b=1+l}if(J=x[b],(L=x[b-1])===n5)return this._cachedIndex=0,this.beforeStart_(0,Q,J);if(J===n5)return b=x.length,this._cachedIndex=b,this.afterEnd_(b-1,L,Q)}this._cachedIndex=b,this.intervalChanged_(b,L,J)}return this.interpolateImpl(b,L,Q,J)},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(Q){for(var n=this.resultBuffer,x=this.sampleValues,b=this.valueSize,J=Q*b,L=0;L!==b;++L)n[L]=x[J+L];return n},interpolateImpl:function(){},intervalChanged_:function(){}}),YK.prototype.beforeStart_=YK.prototype.copySampleValue_,YK.prototype.afterEnd_=YK.prototype.copySampleValue_,(pp.prototype=e.create(YK.prototype)).interpolateImpl=function(Q){return this.copySampleValue_(Q-1)},(zp.prototype=e.create(YK.prototype)).interpolateImpl=function(Q,n,x,b){for(var J=this.resultBuffer,L=this.sampleValues,f=this.valueSize,V=Q*f,l=V-f,H=(x-n)/(b-n),I=1-H,Z=0;Z!==f;++Z)J[Z]=L[l+Z]*I+L[V+Z]*H;return J},(sp.prototype=e.create(YK.prototype)).interpolateImpl=function(Q,n,x,b){for(var J=this.resultBuffer,L=this.sampleValues,f=this.valueSize,V=(x-n)/(b-n),l=Q*f,H=l+f;l!==H;l+=4)dK.slerpFlat(J,0,L,l-f,L,l,V);return J},(Xp.prototype=e.create(YK.prototype)).intervalChanged_=function(Q,n,x){var b=this.parameterPositions,J=Q-2,L=Q+1,f=b[J],V=b[L];if(f===n5)switch(this.getSettings_().endingStart){case"ZeroSlope":J=Q,f=2*n-x;break;case"WrapAround":f=n+b[J=b.length-2]-b[J+1];break;default:J=Q,f=x}if(V===n5)switch(this.getSettings_().endingEnd){case"ZeroSlope":L=Q,V=2*x-n;break;case"WrapAround":V=x+b[L=1]-b[0];break;default:L=Q-1,V=n}var l=.5*(x-n),H=this.valueSize;this._weightPrev=l/(n-f),this._weightNext=l/(V-x),this._offsetPrev=J*H,this._offsetNext=L*H},Xp.prototype.interpolateImpl=function(Q,n,x,b){for(var J=this.resultBuffer,L=this.sampleValues,f=this.valueSize,V=Q*f,l=V-f,H=this._offsetPrev,I=this._offsetNext,Q=this._weightPrev,Z=this._weightNext,E=-Q*(n=(b=(x=(x-n)/(b-n))*x)*x)+2*Q*b-Q*x,a=(1+Q)*n+(-1.5-2*Q)*b+(-.5+Q)*x+1,o=(-1-Z)*n+(1.5+Z)*b+.5*x,B=Z*n-Z*b,G=0;G!==f;++G)J[G]=E*L[H+G]+a*L[l+G]+o*L[V+G]+B*L[I+G];return J},d.Math.BitArray=function(Q){this.size=Q,this.data=new Uint32Array(Math.ceil(Q/32))}),kK=(e.assign(TK.prototype,{set:function(Q,n,x){var b=Q>>5,Q=31&Q;x&&1<x?(x=8==x?255:4===x?15:3,n?n&=x:n=0,this.data[b]=this.data[b]&~(x<<Q)|n<<Q):n?this.data[b]|=1<<Q:this.data[b]&=~(1<<Q)},get:function(Q,n){var x=Q>>5,Q=31&Q;return n&&1<n?this.data[x]>>Q&(8==n?255:4===n?15:3):0!=(this.data[x]&1<<Q)},toString:(p9=["","0","00","000","0000","00000","000000","0000000","00000000"],function(){for(var Q,n="",x=0,b=this.data.length;x<b;x++)Q=this.data[x].toString(16),n+=p9[8-Q.length]+Q;return n})}),{ms_ac:function(Q,n){for(var x=n.ms_ac,b=0;b<x.length;b++)!function(Q,x){var b="_"+x;Q[b_(x)]=function(){return this[b]},Q[J_(x)]=function(Q){var n=this[b];this[b]=Q,this.fp(x,n,Q)}}(Q,x[b])},ms_listener:function(Q,n){Q.addListeners=function(){var n=this,Q=Zj;b5.mockTouch&&(Q=lj.concat(Hj).concat(Ij));for(var x=0,b=(n.__events__=Q).length;x<b;x++){var J=Q[x];"wheel"===J&&!n.handle_wheel&&n.handle_mousewheel&&(n.handle_wheel=function(Q){W_(n,Q)}),n["handle_"+J]&&function(n,Q,x){function b(Q){"mousedown"!==n&&"mouseup"!==n&&"touchstart"!==n&&"touchend"!==n||z7(Q),x.disabled||x["handle_"+n](Q)}var J="__"+n;x[J]||(x[J]=b,Q5(Q,n,b))}(J,n.getView(),n)}},Q.removeListeners=function(){var Q=this.__events__;if(Q){this.__events__=n5;for(var n,x,b,J,L=0,f=Q.length;L<f;L++)this["handle_"+Q[L]]&&(n=Q[L],x=this.getView(),0,(J=this[b="__"+n])&&(u5(x,n,J),delete this[b]))}}},ms_fire:function(Q,n){Q.mp=function(Q,n,x){this.addPropertyChangeListener(Q,n,x)},Q.ump=function(Q,n){this.removePropertyChangeListener(Q,n)},Q.fp=function(Q,n,x,b,J){return this.firePropertyChange(Q,n,x,b,J)},Q.addPropertyChangeListener=function(Q,n,x){this._62I||(this._62I=new oG),this._62I.add(Q,n,x)},Q.removePropertyChangeListener=function(Q,n){this._62I&&this._62I.remove(Q,n)},Q.firePropertyChange=function(Q,n,x,b,J){if(b){if(b(n,x))return!1}else if(n===x)return!1;return(b=J||{}).property=Q,b.oldValue=n,b.newValue=x,b.source=this,(b.data=this)._62I&&this._62I.fire(b),this.onPropertyChanged&&this.onPropertyChanged(b),!0}},ms_attr:function(Q,n){Q.a=function(Q,n){if(2===arguments.length)this.setAttr(Q,n);else{if(!V_(Q))return this.getAttr(Q);for(var x in Q)this.setAttr(x,Q[x])}return this},Q.getAttr=function(Q,n){if(n===n5&&(n=1),this._attrObject&&Q in this._attrObject)return this._attrObject[Q];if(this.getImage){var x=this.getImage();if(H5(x)&&(x=Mj[x]),V_(x)&&"dataBindings"in x)for(var b=x.dataBindings,J=b.length-1;0<=J;J--){var L=b[J];if(L.attr===Q){if("defaultValue"in L)return L.defaultValue;break}}}return n?_[Q]:n5},Q.setAttr=function(Q,n){this._attrObject||(this._attrObject={});var x=this._attrObject[Q];n===n5?delete this._attrObject[Q]:this._attrObject[Q]=n,this.fp&&this.fp("a:"+Q,x,n)&&this.onAttrChanged&&this.onAttrChanged(Q,x,n)},Q.getSerializableAttrs=function(){var Q,n={};for(Q in this._attrObject)n[Q]=1;return n}},ms_bnb:function(Q,n){Q.getBodyColor=function(Q){return Q.s("body.color")},Q.getBorderColor=function(Q){return Q.s("border.color")}},_51o:function(Q,n){Q.mi=function(Q,n,x){this.addInteractorListener(Q,n,x)},Q.umi=function(Q,n){this.removeInteractorListener(Q,n)},Q.fi=function(Q){this.fireInteractorEvent(Q)},Q.addInteractorListener=function(Q,n,x){this._63I||(this._63I=new oG),this._63I.add(Q,n,x)},Q.removeInteractorListener=function(Q,n){this._63I&&this._63I.remove(Q,n)},Q.fireInteractorEvent=function(Q){this._63I&&this._63I.fire(Q)},Q.setInteractors=function(Q){var n=this._interactors;n&&n.each(function(Q){Q.tearDown()}),H_(Q)&&(Q=new m(Q)),(this._interactors=Q)&&Q.each(function(Q){Q.setUp()}),this.fp("interactors",n,Q),this.invalidateSelection()},Q.getInteractors=function(){return this._interactors}},_49o:function(Q,n){Q._44O=x5,Q._45O=x5,Q.getTopPainters=function(){return this._44O},Q.getBottomPainters=function(){return this._45O},Q.addTopPainter=function(Q){this._44O||(this._44O=new m),this._44O.contains(Q)||(this._44O.add(Q),this.redraw&&this.redraw())},Q.removeTopPainter=function(Q){this._44O&&(this._44O.remove(Q),this.redraw&&this.redraw())},Q.addBottomPainter=function(Q){this._45O||(this._45O=new m),this._45O.contains(Q)||(this._45O.add(Q),this.redraw&&this.redraw())},Q.removeBottomPainter=function(Q){this._45O&&(this._45O.remove(Q),this.redraw&&this.redraw())},Q._93db=function(n,x){var b=this;b._45O&&b._45O.each(function(Q){Q.draw?Q.draw(n,x):Q.call(b,n,x)})},Q._92db=function(n,x){var b=this;b._44O&&b._44O.each(function(Q){Q.draw?Q.draw(n,x):Q.call(b,n,x)})}},ms_sm:function(Q,n){Q.sm=function(){return this.getSelectionModel()},Q.setSelectableFunc=function(Q){this.sm().setFilterFunc(Q)},Q.getSelectableFunc=function(){return this.sm().getFilterFunc()},Q.getSelectionModel=function(){return this._selectionModel||this.dm().sm()},Q.isSelectionModelShared=function(){return!this._selectionModel},Q.setSelectionModelShared=function(Q){var n=this,x=n.sm(),b=!n._selectionModel,J=n.handleSelectionChange,L=n.dm();b!==Q&&(n.invalidateSelection&&n.invalidateSelection(),Q?(L.sm().ms(J,n),n._selectionModel.ums(J,n),n._selectionModel.dispose(),n._selectionModel=x5):(L.sm().ums(J,n),n._selectionModel=new _G(L),n._selectionModel.ms(J,n)),n.onSelectionModelSharedChanged(),n.fp("selectionModelShared",b,Q),n.fireViewEvent({kind:"selectionModelSharedChange",oldValue:b,newValue:Q,oldSelectionModel:x,newSelectionModel:n.sm()}))},Q.onSelectionModelSharedChanged=function(){this.redraw(),this.invalidateSelection&&this.invalidateSelection()},Q.removeSelection=function(){var Q=this.dm();Q.beginTransaction(),this.sm().toSelection().each(Q.remove,Q),Q.endTransaction()},Q.selectAll=function(){var n=this;n.sm().ss(n.dm().toDatas(function(Q){return n.isVisible(Q)&&n.isSelectable(Q)}))},Q.isSelected=function(Q){return this.sm().co(Q)},Q.isSelectedById=function(Q){return!!(Q=this.dm().getDataById(Q))&&this.isSelected(Q)},Q.isSelectable=function(Q){return this.sm().isSelectable(Q)}},ms_tx:function(Q,n){Q._64I=0,Q._65O=0,Q.isScrollable=function(){return this.getWidth()<this._64I},Q._40o=function(){return this.isScrollable()},Q.getLogicalPoint=function(Q){return nS(Q,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},Q.tx=function(Q){if(Q===n5)return this.getTranslateX();this.setTranslateX(Q)},Q.getTranslateX=function(){return this._65O},Q.setTranslateX=function(Q){var n=this.getWidth()-this._64I,n=(Q=M5(Q=0<(Q=Q<n?n:Q)?0:Q),this._65O);this._65O=Q,this.fp(MZ,n,Q)}},ms_ty:function(Q,n){Q._23Q=0,Q._66O=0,Q._41o=function(){return this.getHeight()<this._23Q},Q.getLogicalPoint=function(Q){return nS(Q,this._canvas||this._view,this.tx?this.tx():0,this.ty())},Q.ty=function(Q){if(Q===n5)return this.getTranslateY();this.setTranslateY(Q)},Q.getTranslateY=function(){return this._66O},Q.setTranslateY=function(Q){var n=this.getHeight()-this._23Q,n=(Q=M5(Q=0<(Q=Q<n?n:Q)?0:Q),this._66O);this._66O=Q,this.fp(tZ,n,Q)}},ms_txy:function(Q,n){Q._65O=0,Q._66O=0,Q.tx=function(Q){if(Q===n5)return this.getTranslateX();this.setTranslateX(Q)},Q.ty=function(Q){if(Q===n5)return this.getTranslateY();this.setTranslateY(Q)},Q.onTranslateEnded=function(){},Q.setTranslate=function(n,x,Q){var b,J,L=this;(Q=__(Q))?(L._65I&&L._65I.stop(!0),b=L.tx(),J=L.ty(),Q.action=function(Q){L.setTranslate(b+(n-b)*Q,J+(x-J)*Q)},Q._37o=function(){delete L._66I,delete L._65I,L.onTranslateEnded()},L._66I=1,L._65I=y7(Q)):(L.tx(n),L.ty(x))},Q.getTranslateX=function(){return this._65O},Q.setTranslateX=function(Q){Q=this.adjustTranslateX(Q);var n=this._65O;this._65O=Q,this.fp(MZ,n,Q)},Q.getTranslateY=function(){return this._66O},Q.setTranslateY=function(Q){Q=this.adjustTranslateY(Q);var n=this._66O;this._66O=Q,this.fp(tZ,n,Q)},Q.adjustTranslateX=function(Q){return M5(Q)},Q.adjustTranslateY=function(Q){return M5(Q)},Q.translate=function(Q,n,x){this.setTranslate(this.tx()+Q,this.ty()+n,x)},Q.getLogicalPoint=function(Q){return nS(Q,this._canvas||this._view,this.tx(),this.ty())}},ms_dm:function(Q,n){Q.dm=function(Q){if(!Q)return this.getDataModel();this.setDataModel(Q)},Q.getDataModel=function(){return this._dataModel}},ms_lp:function(Q,n){Q.lp=function(Q){return this.getLogicalPoint(Q)}},ms_v:function(Q,n){Q._disabled=!1,Q.setDisabled=function(Q,n){var x=this._disabled;x!==Q&&(x&&(JS(this._63O),delete this._63O),Q&&(g_(this._view,this._63O=nh(n)),this.iv()),this._disabled=Q,this.fp("disabled",x,Q))},Q.isDisabled=function(){return this._disabled},Q.getDisabledDiv=function(){return this._63O},Q.getView=function(){return this._view},Q.addToDOM=function(Q){var n=this,x=n.getView(),b=x.style;(Q=Q||E.body).appendChild(x),b.left="0",b.right="0",b.top="0",b.bottom="0",Q5(O,"resize",function(){n.iv()}),n.iv()},Q.setCursor=function(Q){"default"===Q&&(Q=this._defaultCursor||Q);var n=this.getView().style;n.cursor=Q,n.cursor="-webkit-"+Q,n.cursor="-moz-"+Q},Q.getWidth=function(){return this._view.clientWidth},Q.getHeight=function(){return this._view.clientHeight},Q.setWidth=function(Q){this._view.style.width=Q+Zi,this.iv(),this.fp&&this.fp(ui,x5,Q)},Q.setHeight=function(Q){this._view.style.height=Q+Zi,this.iv(),this.fp&&this.fp(Mi,x5,Q)},Q.setFocus=function(Q){var n=this._currentEditor;return!(Q&&n&&(n=n.getView?n.getView():n).contains(Q.target)||(Hh(this._view),this.endEditing&&this.endEditing(),this.fireViewEvent("focus"),0))},Q.iv=function(Q){this.invalidate(Q)},Q.invalidate=function(Q){this._68I||(this._68I=1,this._ivTimerId=P7(this._validateImpl,this,x5,Q),this._ivTimerDelay=Q,this.onInvalidated&&this.onInvalidated(),this.fireViewEvent("invalidate"))},Q.validate=function(){var Q=this._ivTimerId,n=this._ivTimerDelay;!1!==this._validateImpl()&&Q&&c7(Q,n)},Q._validateImpl=function(){var Q,n=this,x=n._view;if(!n._68I)return!1;delete n._68I,x.parentNode&&(0===x.offsetWidth&&0===x.offsetHeight&&n._67I!==x5?(n._67I===n5&&(n._67I=b5.reinvalidateCount),0<n._67I?n._67I--:n._67I=x5,n.iv()):(n.fireViewEvent("beginValidate"),n.validateImpl(),n.onValidated&&n.onValidated(),n.fireViewEvent("validate"),(Q=n._63O)&&(x.lastChild!==Q&&(JS(Q),g_(x,Q)),F(Q,0,0,n.getWidth(),n.getHeight())),mj(n),dS(n),NO(n),fE(n)))},Q.layout=function(Q,n,x,b){1===arguments.length?F(this,Q):F(this,Q,n,x,b)},Q.addViewListener=function(Q,n,x){this._67O||(this._67O=new oG),this._67O.add(Q,n,x)},Q.removeViewListener=function(Q,n){this._67O.remove(Q,n)},Q.fireViewEvent=function(Q){this._67O&&(H5(Q)&&(Q={kind:Q}),this._67O.fire(Q)),b5.viewListener&&b5.viewListener(this,Q)}},ms_tip:function(Q,n){Q.setToolTipEnabled=function(Q){Q?Y5||this._13o||(this.enableToolTip(),this.fp("toolTipEnabled",!1,!0)):this._13o&&(this.disableToolTip(),this.fp("toolTipEnabled",!0,!1))},Q.isToolTipEnabled=function(){return!!this._13o},Q.enableToolTip=function(){var Q,x=this;Y5||x._13o||(x._13o=function(Q){var n;Q.toolTipView||((n=(Q.toolTipView=x).getToolTip(Q))!=x5?(b5.toolTipContinual&&b5.isToolTipShowing()?b7(Q,n):(J7(),oj={timeout:h5($j,CK),e:Q,info:n}),Bj={e:Q,view:x}):J7())},Q=x.getView(),Q5(Q,jZ,x._13o),Q5(Q,"mouseleave",b5.hideToolTip))},Q.disableToolTip=function(){var Q;this._13o&&(Q=this.getView(),u5(Q,jZ,this._13o),u5(Q,"mouseleave",b5.hideToolTip),delete this._13o)},Q.getToolTip=function(Q){return this.getDataAt?(Q=this.getDataAt(Q))?Q.getToolTip():x5:this.getValue?this.getValue():void 0}},_52o:function(Q,n){Q._zoom=1,Q._29I=sj,Q.zoomIn=function(Q,n){this.setZoom(this._zoom*G7,Q,n)},Q.zoomOut=function(Q,n){this.setZoom(this._zoom/G7,Q,n)},Q.zoomReset=function(Q,n){this.setZoom(1,Q,n)},Q.scrollZoomIn=function(Q){this.setZoom(this._zoom*_7,x5,Q)},Q.scrollZoomOut=function(Q){this.setZoom(this._zoom/_7,x5,Q)},Q.pinchZoomIn=function(Q){this.setZoom(this._zoom*$7,x5,Q)},Q.pinchZoomOut=function(Q){this.setZoom(this._zoom/$7,x5,Q)},Q.adjustZoom=function(Q){return Q<D7?D7:W7<Q?W7:Q},Q.getZoom=function(){return this._zoom},Q.setZoom=function(n,Q,x){var b,J=this;(Q=__(Q))?(J._14o&&J._14o.stop(!0),b=J._zoom,Q.action=function(Q){J._96O(b+(n-b)*Q,x)},Q._37o=function(){delete J._zooming,delete J._14o,J.onZoomEnded()},J._zooming=1,J._14o=y7(Q)):J._96O(n,x)},Q._96O=function(Q,n){var x,b;(Q=this.adjustZoom(Q))!==this._zoom&&(this.validate(),x=this._29I,b=this._zoom,0!==x.width&&0!==x.height&&(n=n||{x:x.x+x.width/2,y:x.y+x.height/2},this.tx((n.x-x.x)*b-n.x*Q),this.ty((n.y-x.y)*b-n.y*Q)),this._zoom=Q,this.fp("zoom",b,Q))}},ms_edge:function(Q,n){Q._2I=function(Q){this._44I||(this._44I=new m),this._42I||(this._42I=new m),this._44I.add(Q),this._42I.add(Q),this._20I()},Q._4I=function(Q){this._44I||(this._44I=new m),this._43I||(this._43I=new m),this._44I.add(Q),this._43I.add(Q),this._20I()},Q._16I=function(Q){this._44I.remove(Q),this._42I.remove(Q),this._44I.isEmpty()&&delete this._44I,this._42I.isEmpty()&&delete this._42I,this._20I()},Q._18I=function(Q){this._44I.remove(Q),this._43I.remove(Q),this._44I.isEmpty()&&delete this._44I,this._43I.isEmpty()&&delete this._43I,this._20I()},Q._20I=function(){var n,x=this;delete x._45I,!x._44I||x._44I.isEmpty()?delete x._70O:(x._44I.each(function(Q){Q.isLooped()&&!(n=n||{})[Q._id]&&(x._45I||(x._45I=new m),x._45I.add(Q),n[Q._id]=Q)}),n?(x._70O=new m,x._44I.each(function(Q){n[Q._id]?"A"!==n[Q._id]&&(n[Q._id]="A",x._70O.add(Q)):x._70O.add(Q)})):x._70O=x._44I)},Q.hasAgentEdges=function(){return!!this._49I&&!this._49I.isEmpty()},Q.getSourceAgentEdges=function(){return this._46I},Q.getTargetAgentEdges=function(){return this._47I},Q._1I=function(Q){this._46I||(this._46I=new m),this._48I||(this._48I=new m),this._46I.add(Q),this._48I.add(Q),this._19I()},Q._3I=function(Q){this._47I||(this._47I=new m),this._48I||(this._48I=new m),this._47I.add(Q),this._48I.add(Q),this._19I()},Q._15I=function(Q){this._46I.remove(Q),this._48I.remove(Q),this._46I.isEmpty()&&delete this._46I,this._48I.isEmpty()&&delete this._48I,this._19I()},Q._17I=function(Q){this._47I.remove(Q),this._48I.remove(Q),this._47I.isEmpty()&&delete this._47I,this._48I.isEmpty()&&delete this._48I,this._19I()},Q._19I=function(){var n,x=this,Q=(delete x._49I,x._48I);Q&&!Q.isEmpty()&&(n={},Q.each(function(Q){n[Q._id]?x._49I||(x._49I=new m):n[Q._id]=Q}),x._49I?Q.each(function(Q){n[Q._id]&&(x._49I.add(Q),delete n[Q._id])}):x._49I=Q)},Q.getLoopedEdges=function(){return this._45I},Q.getEdges=function(){return this._70O},Q.getAgentEdges=function(){return this._49I},Q.getSourceEdges=function(){return this._42I},Q.getTargetEdges=function(){return this._43I},Q._8I=function(){this._70O&&this._70O.each(function(Q){Q._7I()})}}}),NK=($_(b5,{getVersion:function(){return"7.6.2-dev18"}},!0),function(Q){return Q.devicePixelRatio||(Q.screen&&Q.screen.logicalXDPI?Q.screen.deviceXDPI/Q.screen.logicalXDPI:1)}),jK=($_(b5,{numberDigits:5,crossOrigin:"",baseZIndex:n5,isTouchable:Y5,mockTouch:!0,devicePixelRatio:NK(O),reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:i.disabledBackground,forceHierarchicalSerialization:!0,extractBatchTranslation:!1,extractShapeTranslation:!1,extractPolylineTranslation:!1,extractVerticesTranslation:!1,envmapProbeMinWaitTime:300,envmapProbeMaxWaitTime:25e3,EnvmapTextureSize:1024,hoverDelay:600,clickDelay:200,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return oh},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],blockMinSize:1,textExtraWidth:4,encodeStringKey:null,doubleClickSpeed:500,doubleClickRange:1,doubleTouchRange:20,touchMoveThreshold:10,animDuration:200,animEasing:function(Q){return Q*Q},labelColor:d1,labelSelectColor:h1,labelFont:"12px arial, sans-serif",widgetIndent:Y5?30:20,widgetRowHeight:Y5?30:20,widgetHeaderHeight:Y5?32:22,widgetTitleHeight:Y5?34:24,scrollBarColor:B,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:Y5?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,pinchZoomThreshold:1,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:c_,intersectionLineLine:F_,isEnter:yh,isEsc:Kh,isDelete:uh,isSpace:wh,isLeft:Ph,isUp:ch,isRight:Fh,isDown:qh,isTouchEvent:Eh,getTarget:function(Q){return(Eh(Q)?Zh(Q):Q).target},isString:H5,isNumber:L_,isBoolean:f_,isArray:H_,isSelectAll:Ah,isFunction:l_,isObject:V_,getPropertyValue:q_,setPropertyValue:w_,addMethod:$_,createGradient:function(Q,n,x,b,J,L,f,V){return(0,a1[n])(Q,x,b,J,L,f,V)},appendToScreen:function(Q){Q=Q.getView?Q.getView():Q,(E.fullscreenElement||E.mozFullScreenElement||E.webkitFullscreenElement||E.msFullscreenElement||E.body).appendChild(Q)},encodeString:function(Q){return d.Math.encodeBase64(Q,b5.encodeStringKey)},decodeString:function(Q){return d.Math.decodeBase64(Q,b5.encodeStringKey)},findView:function(Q){function n(Q,n){for(var x="2d"===n?SG.GraphView:oO.Graph3dView,b=0,J=Q.length;b<J;b++)if(Q[b]instanceof x)return L[b];return null}var L=[];return function Q(n,x){var b=x._ht,J=(b&&n.push(b),x.children),L=J.length;if(L)for(var f=0;f<L;f++)Q(n,J[f])}(L,E.body),"all"===Q?L:"2d"===Q?n(L,"2d"):"3d"===Q?n(L,"3d"):n(L,"3d")||n(L,"2d")},toggleFullscreen:function(n){var x,b,J,L,f,V,l,Q,H,I,Z=n.getView();E.fullscreenElement||E.mozFullScreenElement||E.webkitFullscreenElement||E.msFullscreenElement?E.exitFullscreen?E.exitFullscreen():E.msExitFullscreen?E.msExitFullscreen():E.mozCancelFullScreen?E.mozCancelFullScreen():E.webkitExitFullscreen&&E.webkitExitFullscreen():(x=!0,I=n.isSelfViewEvent?(b=n.getX(),J=n.getY(),V=n.getWidth(),l=n.getHeight(),Q=Z.style.background,H=Z.style.backgroundColor,Q||H||(Z.style.backgroundColor="white"),Z.requestFullscreen?Z.requestFullscreen():Z.msRequestFullscreen?Z.msRequestFullscreen():Z.mozRequestFullScreen?Z.mozRequestFullScreen():Z.webkitRequestFullscreen&&Z.webkitRequestFullscreen(),setInterval(function(){var Q;Z!==(E.fullscreenElement||E.mozFullScreenElement||E.webkitFullscreenElement||E.msFullscreenElement)?(clearInterval(I),n.setX(b),n.setY(J),n.setWidth(V),n.setHeight(l),n._fullscreen=!1,Z.style.oldBackgroundColor=H,n.iv()):(Q=d.Default.getWindowInfo(),!x&&Q.width===n.getWidth()&&Q.height===n.getHeight()||(n.setX(Q.left),n.setY(Q.top),n.setWidth(Q.width),n.setHeight(Q.height),n._fullscreen=!0,n.iv(),x=!1))},500)):(L=Z.style.left,f=Z.style.top,V=Z.style.width,l=Z.style.height,Q=Z.style.background,H=Z.style.backgroundColor,Q||H||(Z.style.backgroundColor="white"),Z.requestFullscreen?Z.requestFullscreen():Z.msRequestFullscreen?Z.msRequestFullscreen():Z.mozRequestFullScreen?Z.mozRequestFullScreen():Z.webkitRequestFullscreen&&Z.webkitRequestFullscreen(),setInterval(function(){var Q;Z!==(E.fullscreenElement||E.mozFullScreenElement||E.webkitFullscreenElement||E.msFullscreenElement)?(clearInterval(I),Z.style.left=L,Z.style.top=f,Z.style.width=V,Z.style.height=l,Z.style.oldBackgroundColor=H,n.iv()):(Q=d.Default.getWindowInfo(),!x&&Q.width===n.getWidth()&&Q.height===n.getHeight()||(F(n),x=!1))},500)))},appendTimeStamp:function(Q){return Q},setCompType:function(Q,n){H5(n)&&n.substr(0,12)==Vj&&(n=b5.parse(n)),l_(n)||V_(n)?Fj[Q]=n:hS(Q)},getCompType:function(Q){var n=Fj[Q];return n===n5&&Kj.test(Q)&&hS(Q),n},getCompTypeMap:function(){return Fj},drawCompType:function(Q,n,x,b,J,L){Q(n,x,b,J,L)},numberListener:(QJ={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1},function(Q){var n=Q.keyCode;QJ[n]||65===n&&b5.isCtrlDown(Q)||86===n&&b5.isCtrlDown(Q)||67===n&&b5.isCtrlDown(Q)||88===n&&b5.isCtrlDown(Q)||35<=n&&n<=40||(Q.shiftKey||n<48||57<n)&&(n<96||105<n)&&Q.preventDefault()}),ignoreKeyCodes:[122,123],preventDefault:function(Q){var n=Q.target.tagName;"DIV"!==n&&"CANVAS"!==n||0<=b5.ignoreKeyCodes.indexOf(Q.keyCode)||!("keydown"!==Q.type||Ph(Q)||Fh(Q)||ch(Q)||qh(Q)||uh(Q)||65===Q.keyCode&&(Q.metaKey||Q.ctrlKey))||!0!==Q.cancelable||(Q.preventDefault(),Q.preventManipulation&&Q.preventManipulation())},getWindowInfo:function(){var Q=E.documentElement;return{target:Q=Q&&(Q.scrollLeft||Q.scrollTop)?Q:E.body,left:Q.scrollLeft,top:Q.scrollTop,width:O.innerWidth||Q.clientWidth,height:O.innerHeight||Q.clientHeight}},isDragging:function(){return!!oh},isLeftButton:function(Q){return!!Eh(Q)||0===Q.button},isMiddleButton:function(Q){return!Eh(Q)&&Q&&(1===Q.button||4&(Q.buttons||0))},isRightButton:function(Q){return!Eh(Q)&&Q&&(2===Q.button||2&(Q.buttons||0))},isInput:function(Q){return!!Q&&("INPUT"===(Q=Q.tagName)||"TEXTAREA"===Q||"SELECT"===Q)},getTouchCount:function(Q){return Eh(Q)?Q.touches.length:1},isDoubleClick:(C9={},S5=new G,t=S5.getTime(),function(Q){if(1<p7(Q))return!1;var n=Q.button==x5?"":Q.button,x=(n=Q.type+n)+"_isDoubleClick",b=(b=C9[n])||(C9[n]={details:0,timeout:null,lastPoint:null});return Q[x]===n5&&(Q[x]=!0,n=R7(Q),b.timeout&&(p5(b.timeout),b.timeout=null),x=Eh(Q)?b5.doubleTouchRange:b5.doubleClickRange,b.lastPoint&&S7(b.lastPoint,n)>x&&Yp(b),b.lastPoint=n,b.details++,b.timeout=h5(function(){Yp(this)}.bind(b),b5.doubleClickSpeed)),2===b.details}),isShiftDown:function(Q){return Q?Q.shiftKey:cj[16]},isCtrlDown:function(Q){return Q?m5?Q.metaKey:Q.ctrlKey:m5?cj[91]:cj[17]},getClientPoint:function(Q){return{x:(Q=Eh(Q)?Zh(Q):Q).clientX,y:Q.clientY}},isMouseEvent:function(Q){return Q instanceof MouseEvent||0===Q.type.indexOf("mouse")},getTargetElement:function(Q){var n=g7(Q),x=b5.isMouseEvent(Q)||!E.elementFromPoint?Q.target:E.elementFromPoint(n.x,n.y);if(X5&&E.elementFromPoint){for(var b=[],J=[];"none"===x.style.pointerEvents;)b.push(x),J.push(x.style.display||""),x.style.display="none",x=E.elementFromPoint(n.x,n.y);b.forEach(function(Q,n){Q.style.display=J[n]})}return x},getPagePoint:function(Q){return{x:(Q=Eh(Q)?Zh(Q):Q).pageX,y:Q.pageY}},createObject:function(Q,n){var x,b=new Q;for(x in n){var J,L=n[x];l_(L)?b[x]=L:0===x.indexOf("s:")?b.s(x.substr(2),n[x]):0===x.indexOf("a:")?b.a(x.substr(2),n[x]):(J=J_(x),L=n[x],b[J]?(b[J](L),"setToolTip"===J&&b.enableToolTip&&b.enableToolTip()):b[x]=L)}return b},setImage:function(Q,n,x,b){var J=arguments.length;4===J?Yj(Q,b,n,x):2===J?H5(n)?n.substr(0,12)==Vj?Sj(Q,b5.parse(n)):Yj(Q,n):Sj(Q,n):1===J&&Yj(Q,Q)},getImage:function(Q,n,x){var b,J;return Q==x5?x5:(V_(Q)?b=Q:(b=Mj[Q],!Q||b!==n5||Rj&&Rj[Q]||Yj(Q,Q)),n&&b&&b.tagName?(b[Q="override"===x?"colors_override":"override_rgb"===x?"colors_override_rgb":"override_a"===x?"colors_override_a":"colors"]||(b[Q]={__count__:0}),(J=b[Q][n])||(b[Q].__count__>b5.imageCacheThreshold&&(b[Q]={__count__:0}),J=function(Q,n,x,b,J){var L=z_(),f=(L.width=x,L.height=b,L.getContext("2d"));f.drawImage(Q,0,0,x,b);try{for(var V=f.getImageData(0,0,x,b),l=V.data,H=0,I=l.length;H<I;H+=4){var Z=l[H+0],E=l[H+1],a=l[H+2],o=l[H+3];"override_a"===J?l[H+3]=255*n[3]:"override_rgb"===J?(l[H+0]=255*n[0],l[H+1]=255*n[1],l[H+2]=255*n[2]):"override"===J?(l[H+0]=255*n[0],l[H+1]=255*n[1],l[H+2]=255*n[2],l[H+3]=255*n[3]):(l[H+0]=n[0]*Z,l[H+1]=n[1]*E,l[H+2]=n[2]*a,l[H+3]=n[3]*o)}f.putImageData(V,0,0)}catch(n){return Q}return L}(b,sh(n),b.width,b.height,x),b[Q][n]=J,b[Q].__count__++),J):b)},isImageComplete:function(Q,n,x){var b=g(Q);if(!b)return!1;if(b.tagName)return b.complete;for(var J=b.comps,L=!0,f=0,V=J.length;f<V;f++){var l,H=(l=J[f]).type;if("image"===l.type){if((Q=l.name)&&Q.func&&(Q=S(Q,n)),!M7(Q,n,x)){L=!1;break}}else if(Kj.test(H)&&b5.getCompType(H)===n5){L=!1,hS(H);break}}return L},getId:(j9=1,function(){return++j9}),callLater:function(Q,n,x,b){function J(){Q.apply(n,x)}return b?h5(J,b):O.requestAnimationFrame(J)},cancelLater:function(Q,n){n?p5(Q):O.cancelAnimationFrame(Q)},clone:function(Q){if(null==Q||"object"!=typeof Q)return Q;if(Q instanceof Date)return(n=new Date).setTime(Q.getTime()),n;if(Q instanceof Array){for(var n=[],x=0,b=Q.length;x<b;x++)n[x]=q7(Q[x]);return n}if(Q instanceof m){for(n=new m,x=0,b=Q.length;x<b;x++)n.set(x,q7(Q.get(x)));return n}if(Q instanceof BG)return Q;if(Q instanceof GG)return(n=new GG).deserialize(Q.serialize()),n;if(Q instanceof e){var J,n={};for(J in Q)Q.hasOwnProperty(J)&&(n[J]=q7(Q[J]));return n}return Q},callWhenLoaded:function(Q,n){var x=Aj(Q,n=n||100);(Dj=Dj||{})[x]={tick:x,cb:Q,delay:n}},beforeLoadURL:function(Q,n){if(Dj){var x={};for(n in Dj){var b=Dj[n],J=(p5(b.tick),Aj(b.cb,b.delay));x[J]={tick:J,delay:b.delay,cb:b.cb}}Dj=x}return b5.convertURL?b5.convertURL(Q,n):Q},convertURL:function(Q){return Q},handleRefGraphLoaded:function(Q,n,x){},handleCompTypeLoaded:function(Q,n){},handleImageLoaded:function(Q,n){},handleUnfoundImage:function(Q,n){return b5.getImage("default_blank")},resizeImage:function(Q,n,x,b){x=x||n;var J=(b=b||z_()).getContext("2d");return R_(b,n,x,1),J.drawImage(Q,0,0,n,x),b},resizeImagePOT:function(Q,n,x){if(!Q||!Q.tagName)return Q;var b,J=Q.width,L=Q.height;return J&&L&&(!s.isPOT(J)||!s.isPOT(L)||n&&J!==L)?(n=n?b=s.nearestPOT(Math.min(J,L)):(b=s.nearestPOT(J),s.nearestPOT(L)),b5.resizeImage(Q,b,n,x)):Q},sortFunc:function(Q,n){if(Q===n)return 0;if(Q==x5&&n!=x5)return 1;if(Q!=x5&&n==x5)return-1;if(Q==x5&&n==x5)return 0;var x,b=typeof Q,J=typeof n;return b==sZ&&J==sZ?x=Q.localeCompare(n):b==SZ&&J==SZ&&(x=Q-n),0<(x=x===n5?(""+Q).localeCompare(""+n):x)?1:x<0?-1:0},getClassMap:function(){return uj},getClass:function(Q){if(H5(Q)){if(!(x=uj[Q])){for(var n=Q.split("."),x=O,b=0;b<n.length;b++)x=x[n[b]];uj[Q]=x}return x}return Q},def:function(Q,n,x){function b(){}var J,L,f;if(b.prototype=n.prototype,J=new b,H5(Q)){if(uj[Q])throw"'"+Q+"' already defined";f=w7(Q),J.getClassName=function(){return Q}}else f=Q;if(J.constructor=f,J.getClass=function(){return f},J.getSuperClass=function(){return n},x)for(L in x)kK[L]&&kK.hasOwnProperty(L)?kK[L](J,x):u1(J,x,L);f.prototype=J,f.superClass=n.prototype},startAnim:function(n){return(n=q7(n)).easing=n.easing||b5.animEasing,n.duration||n.frames||(n.duration=b5.animDuration),n.t=0,n.duration?n.interval=0:(n.frame=0,n.interval=n.interval||10),n.tick=function(){var Q;n.duration?(Q=(kj()-n.startTime)/n.duration,n.t=Q=1<Q?1:Q,n.action(n.easing(Q),Q),n.isRunning()&&(1===Q?n.stop():n._isPaused||(n.timeId=P7(n.tick)))):(n.frame++,Q=n.t=n.frame/n.frames,n.action(n.easing(Q),Q),n.isRunning()&&(n.frame<n.frames?n._isPaused||(n.timeId=P7(n.tick,x5,x5,n.interval)):n.stop()))},n.resume=function(){n._isPaused&&(delete n._isPaused,n.duration?n.t<1&&(n.startTime=kj()-n.duration*n.t,n.timeId=P7(n.tick)):n.frame<n.frames&&(n.timeId=P7(n.tick,x5,x5,n.interval)))},n.pause=function(){c7(n.timeId,!n.duration),n._isPaused=!0},n.isPaused=function(){return this._isPaused},n.stop=function(Q){n.isRunning()&&(c7(n.timeId,!n.duration),delete n.timeId,n.duration?n.t<1&&Q&&(n.t=1,n.action(n.easing(1),1)):n.frame<n.frames&&Q&&(n.frame=n.frames,n.action(n.easing(1),1)),n._37o&&n._37o(),n.finishFunc&&n.finishFunc())},n.isRunning=function(){return n.timeId!=x5},n.delay?P7(mp,x5,[n],n.delay):mp(n),n},getTextSize:(k9={},N9=E?z_().getContext("2d"):x5,function(Q,n){return N9.font=Q||H7,(Q=k9[N9.font])||(Q=2*N9.measureText("e").width+4,k9[N9.font]=Q),{width:N9.measureText(n).width+b5.textExtraWidth,height:Q}}),drawText:function(Q,n,x,b,J,L,f,V,l,H,I){var Z,E;n!=x5&&(Z=v7(x,n),(E={}).y=H&&H!==fi?H===xi?L+Z.height/2:L+V-Z.height/2:L+V/2,E.x=l&&l!==Qi?l===ni?J+f-Z.width/2:J+f/2:J+Z.width/2,N_(Q,n,E,x,b),I&&Y_(Q,n,x,b,E.x,E.y,Z.width,I))},getDistance:function(Q,n){var x=Q.length;return n?3===x?r5(d5(Q[0]-n[0])+d5(Q[1]-n[1])+d5(Q[2]-n[2])):2===x?r5(d5(Q[0]-n[0])+d5(Q[1]-n[1])):Q.z===n5?r5(d5(n.x-Q.x)+d5(n.y-Q.y)):r5(d5(n.x-Q.x)+d5(n.y-Q.y)+d5(n.z-Q.z)):3===x?r5(d5(Q[0])+d5(Q[1])+d5(Q[2])):2===x?r5(d5(Q[0])+d5(Q[1])):void 0},brighter:function(Q,n){return kh(Q,(n=n<0?-n:n)||40)},darker:function(Q,n){return kh(Q,(n=0<n?-n:n)||-40)},traverse:(T9={},function(Q,n,x,b){var J,l;(J=(J=T9[b=b||""])?J:T9[b]=(l=b,function Q(n,x,b,J){var L;if(b&&b(n,x),L=(L=""===l?n.getChildren():n[l])instanceof d.List?L.getArray():L)for(var f=0,V=L.length;f<V;f++)Q(L[f],n,b,J);J&&J(n,x)}))(Q,null,n,x)}),unionPoint:function(Q,n){if(!Q)return x5;if(2===arguments.length)return Q&&n?{x:L5(Q.x,n.x),y:L5(Q.y,n.y),width:P5(Q.x-n.x),height:P5(Q.y-n.y)}:x5;var x=Q;if((x=x._as||x).length===n5)return x5;var b=x.length;if(b<=0)return x5;for(var J=1,L={x:(f=x[0]).x,y:f.y,width:0,height:0};J<b;J++){var f=x[J],V=L5(L.x,f.x),l=J5(L.x+L.width,f.x),H=L5(L.y,f.y),I=J5(L.y+L.height,f.y);L.x=V,L.y=H,L.width=l-V,L.height=I-H}return L},unionRect:function(Q,n){return Q&&!n?q7(Q):!Q&&n?q7(n):Q&&n?((x={x:L5(Q.x,n.x),y:L5(Q.y,n.y)}).width=J5(Q.x+Q.width,n.x+n.width)-x.x,x.height=J5(Q.y+Q.height,n.y+n.height)-x.y,x):x5;var x},containsPoint:function(Q,n,x,b){var J,L,f,V;return b!=x5&&1!==b&&(J=Q.x+Q.width/2,L=Q.y+Q.height/2,Q={x:J-Q.width/2*b,y:L-Q.height/2*b,width:Q.width*b,height:Q.height*b}),x?(J=Q.width/2,L=Q.height/2,b=V5(-x),x=f5(-x),f=n.x-Q.x-J,V=n.y-Q.y-L,T7({x:-J,y:-L,width:Q.width,height:Q.height},n={x:x*f-b*V,y:b*f+x*V})):!(!Q||n.x<Q.x||n.y<Q.y||n.x>Q.x+Q.width||n.y>Q.y+Q.height)},containsRect:function(Q,n){if(!Q||!n)return!1;var x=n.x,b=n.y,J=n.width,n=n.height,L=Q.width,f=Q.height;if((L|f|J|n)<0)return!1;var V=Q.x,Q=Q.y;if(x<V||b<Q)return!1;if(L+=V,(J+=x)<=x){if(V<=L||L<J)return!1}else if(V<=L&&L<J)return!1;if(f+=Q,(n+=b)<=b){if(Q<=f||f<n)return!1}else if(Q<=f&&f<n)return!1;return!0},intersectsRect:function(Q,n){if(!Q||!n)return!1;var x=n.width,b=n.height,J=Q.width,L=Q.height;if(J<=0||L<=0||x<=0||b<=0)return!1;var f=n.x,n=n.y,V=Q.x;return L+=Q=Q.y,x+=f,b+=n,f<(J+=V)&&n<L&&V<x&&Q<b},intersection:function(Q,n){if(!Q||!n)return x5;var x=n.x,b=n.y,J=Q.x,L=Q.y,f=x,V=b,l=J,H=L;return f+=n.width,V+=n.height,(l+=Q.width)<f&&(f=l),(H+=Q.height)<V&&(V=H),V-=b=b<L?L:b,(f-=x=x<J?J:x)<=0||V<=0?x5:{x:x,y:b,width:f,height:V}},grow:function(Q,n,x){x===n5&&(x=n),Q.x-=n,Q.y-=x,Q.width=Q.width+2*n,Q.height=Q.height+2*x},getScreenPoint:function(Q,n,x,b,J,L,f){var V=x.getBoundingClientRect(),Q=Q*(L||1)-x.scrollLeft+(b||0),L=n*(f||1)-x.scrollTop+(J||0);return(b=A1(x,!1))?((n=new I5(Q,L,0)).applyMatrix4(b),{x:n.x,y:n.y}):{x:Q+V.left,y:L+V.top}},getLogicalPoint:function(Q,n,x,b,J,L){var f,V=n.getBoundingClientRect(),l=Q.target?(X7(Q)?m5?cj[91]=!0:cj[17]=!0:m5?cj[91]=!1:cj[17]=!1,s7(Q)?cj[16]=!0:cj[16]=!1,f=(Q=Eh(Q)?Zh(Q):Q).clientX,Q.clientY):(f=Q.x,Q.y),H=A1(n,!0);if(H){var I=new I5(f,l,0);I.applyMatrix4(H);do{if(Math.abs(I.z)<=1e-6)break;var Z=new I5(f,l,1);if(Z.applyMatrix4(H),Math.abs(Z.z)<=1e-6){I=Z;break}}while(Z.sub(I),!(Math.abs(Z.z)<=1e-6)&&(I.addScaledVector(Z,-I.z/Z.z),0));return{x:(I.x+n.scrollLeft-(x||0))/(J||1),y:(I.y+n.scrollTop-(b||0))/(L||1)}}return{x:(f-V.left+n.scrollLeft-(x||0))/(J||1),y:(l-V.top+n.scrollTop-(b||0))/(L||1)}},removeHTML:function(Q){return!(!(Q=Q&&Q.getView?Q.getView():Q)||!Q.parentNode||(Y9!==Q&&((Y9=Q).parentNode.removeChild(Q),Y9=x5),0))},getToolTipDiv:function(){var Q;return Ej||(Ej=p_(),aj=p_(),Q=Ej.style,b5.baseZIndex!=x5&&(Q.zIndex=e5(b5.baseZIndex)+3+""),Q.whiteSpace="nowrap",Q.color=b5.toolTipLabelColor,Q.background=b5.toolTipBackground,Q.font=b5.toolTipLabelFont,Q.padding="5px",Q.boxShadow="0px 0px 3px "+b5.toolTipShadowColor),Ej},isToolTipShowing:function(){return!(!Ej||!Ej.parentNode)||!(!aj||!aj.parentNode)},updateToolTipContent:function(Q,n){b5.isToolTipShowing()&&(n=n||Bj&&Bj.view,(Q=Q===n5&&n&&Bj.e?n.getToolTip(Bj.e):Q)!=x5&&((Q.html?(Q=Q.html,aj):Ej).innerHTML=Q))},hideToolTip:function(){var Q;_j(),b5.isToolTipShowing()&&(JS(Ej),JS(aj),(Q=Bj&&Bj.view)&&Q.onHideToolTip&&Q.onHideToolTip(),Bj=x5)},showToolTip:function(Q,n,x){var b,J,L,f,V,l;Q&&n!=x5?(b5.getToolTipDiv(),n.html?(n=n.html,b=aj,JS(Ej)):(b=Ej,JS(aj)),J=b.style,b.innerHTML="",n instanceof HTMLElement?b.appendChild(n):b.innerHTML=n,b.parentNode||d.Default.appendToScreen(b),Q.target?(Q=g7(Q),n=C7(),L=Q.x,f=Q.y,V=Y5?60:12,Y5?(l=b.getBoundingClientRect(),J.left=L-l.width/2+Zi,f-l.height-V<n.top?J.top=f+V+Zi:J.top=f-l.height-V+Zi):(J.left=L+V+Zi,J.top=f+V+Zi,(l=b.getBoundingClientRect()).left+l.width>n.width&&(J.left=L-V-l.width+Zi),l.top+l.height>n.height&&(J.top=f-V-l.height+Zi),l.left<0&&(J.left=L+V+Zi),l.top<0&&(J.top=f+V+Zi))):(J.left=Q.x+Zi,J.top=Q.y+Zi),_j(),x===n5?x=Bj&&Bj.view:Bj={e:Q,view:x},x&&x.onShowToolTip&&x.onShowToolTip()):J7()},startDragging:function(Q,n,x){x==n5&&(x=!0),Q!==oh&&(oh?x&&(Eh(n)?oh.handleWindowTouchEnd(n):oh.handleWindowMouseUp(n)):Eh(n)?(Q5(O,xj,Bh),Q5(O,bj,Gh),Q5(O,"blur",Gh)):(Q5(O,jZ,_h),Q5(O,CZ,$h),Q5(O,"blur",$h)),oh=Q)},getImageMap:function(){return Mj},toBoundaries:function(Q,n,x,b){var J=[];return Yh(Q,n,x,b).forEach(function(Q){var n=[];Q.forEach(function(Q){n.push(Q.x,Q.y)}),J.push(n)}),J},getCurrentKeyCodeMap:function(){return cj},drawCenterImage:function(Q,n,x,b,J,L,f,V){!J&&L&&L.isSelfViewEvent&&(J=L);var l=kS(n,J,L),H=NS(n,J,L);jS(Q,n,M5(x-l/2),M5(b-H/2),l,H,J,L,f,V)},drawStretchImage:function(Q,n,x,b,J,L,f,V,l,H,I,Z){!V&&l&&l.isSelfViewEvent&&(V=l);var E,a,o,B=kS(n,V,l,L),G=NS(n,V,l,f),_=("uniform"===x?(G*=_=L5(L/B,f/G),b+=M5((L-(B*=_))/2),J+=M5((f-G)/2),L=B,f=G):"centerUniform"===x?((L<B||f<G)&&(B*=_=L5(L/B,f/G),G*=_),b+=M5((L-B)/2),J+=M5((f-G)/2),L=B,f=G):"cover"===x&&(G*=_=B/L<G/f?L/B:f/G,b+=M5((L-(B*=_))/2),J+=M5((f-G)/2),L=B,f=G),Q.interactiveInfo);_&&(a="center"===x?{x:b+L/2-B/2,y:J+f/2-G/2,width:B,height:G}:{x:b,y:J,width:L,height:f},_.rect?(E=(o=_.compInfos).length)&&(o[E-1].rect.image=n):_.rect=a),"center"===x?((o=!1!==I&&(L<B||f<G))&&(Q.save(),Q.beginPath(),Q.rect(b,J,L,f),Q.clip()),jS(Q,n,b+L/2-B/2,J+f/2-G/2,B,G,V,l,H,Z),o&&Q.restore()):jS(Q,n,b,J,L,f,V,l,H,Z)},toCanvas:function(Q,n,x,b,J,L,f,V,l){Q=g(Q,f),n=n||kS(Q,J),x=x||NS(Q,J);var H=z_(),I=xh(H);return V?(R_(H,n,x,V),I.scale(V,V)):R_(H,n,x,1),i7(I,Q,b,0,0,n,x,J,L,f,l),Q&&Q.clampToEdge&&(H.clampToEdge=Q.clampToEdge),I.restore(),H},toGrayColor:function(Q){if(!Q)return Q;var Q=zh(Q),n=M5(.299*Q[0]+.587*Q[1]+.114*Q[2]);return"rgba("+n+","+n+","+n+","+Q[3]/255+")"},createGradientImage:function(Q,n,x,b){for(var J=["L",0,0,Q,0,1,0,0,1,0,0],L=0,f=Math.min(n.length,x.length);L<f;L++)J.push(x[L],n[L]);return d.Default.toCanvas({width:Q,height:Q,clampToEdge:!0,comps:[{type:"shape",rotation:b||0,points:[0,0,Q,0,Q,Q,0,Q],background:"#ffffff",gradientPack:J}]})},createElement:function(Q,n,x,b){return Q=E.createElement(Q),s_(Q,n||i.widgetBorder,2),Q.style.font=x||H7,b!=x5&&(Q.value=b),b5.onElementCreated&&b5.onElementCreated(Q),Q},containedInView:function(Q,n){return n=Ih(n).getBoundingClientRect(),T7({x:n.left,y:n.top,width:n.width,height:n.height},R7(Q))},isIsolating:function(){return 0<Wj},setIsolating:function(Q){Q?Wj++:Wj--},getMSMap:function(){return kK},stringify:function(Q,n,x){var b=Date.prototype.toJSON,J=(Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},GG.prototype.toJSON),Q=(GG.prototype.toJSON=function(){return"__ht__dataModel"+this.serialize(0)},n=x?0:n==x5?2:n,JSON.stringify(Q,function(Q,n){return"function"==typeof n?"__ht__"+(n.__ht__||n.toString()):L_(n)?n==x5||b5.numberDigits==x5?n:parseFloat(n.toFixed(b5.numberDigits)):ge(n)?null:n instanceof d.List?"__ht__list"+(n.__ht__list||b5.stringify(n._as)):n},n));return Date.prototype.toJSON=b,GG.prototype.toJSON=J,x?Vj+function(Q){for(var n=8+s.randomInt(8),x=wK[8*s.randomInt(8)+(n-8)],b="",J=0;J<n;J++)b+=wK[s.randomInt(64)];var L=b1(b+a5+"__"+PZ);return x+b+yK(Q,L)}(Q):Q},parse:function(Q,V){return H5(Q)&&(Q.substr(0,12)!=Vj||(Q=function(Q){var n=Q[0];if((n=wK.indexOf(n))<0)return"";var x=Q.slice(1,1+(n=8+(7&n))),x=b1(x+a5+"__"+PZ);return KK(Q,x,1+n)}(Q.substr(12)),H5(Q)))?(V=V||{},JSON.parse(Q,function(Q,n){if(H5(n))if(V.ignoreFunction||"__ht__function"!=n.substr(0,14)){if(!V.ignoreDate&&"__ht__date"==n.substr(0,10))return new Date(e5(n.substr(10)));if("__ht__list"===n.substr(0,10))return new m(b5.parse(n.substr(10)));if(!V.ignoreDataModel&&"__ht__dataModel"===n.substr(0,15))return(x=new GG).deserialize(b5.parse(n.substr(15))),x}else{var x=n.indexOf("{")+1,b=n.lastIndexOf("}"),J=n.indexOf("(")+1,L=n.indexOf(")");if(x&&b&&J&&L)try{var f=new Function(n.substring(J,L),n.substring(x,b));return f.__ht__=n.substr(6),f}catch(Q){throw console.info("=== SyntaxError ===\n",n),Q}}return n})):Q},loadJS:function(Q,n){n&&Q.push(n);var x,n=Q.shift();H_(n)?(Q=n.contact(Q),b5.loadJS(Q)):l_(n)?(n(),b5.loadJS(Q)):H5(n)?((x=E.createElement("script")).onload=function(){b5.loadJS(Q)},x.setAttribute("src",n),E.getElementsByTagName("head")[0].appendChild(x)):Q.length&&b5.loadJS(Q)},extendClass:function(Q,n){var x,b=Q.prototype;for(x in n)kK[x]&&kK.hasOwnProperty(x)?kK[x](b,n):b[x]=n[x]},toRoundedCorner:(R9=new I5,g9=new I5,S9=new I5,m9=new I5,function(Q,n){var x,b=0,J=(Q.getPoints&&(b=Q.getElevation(),Q=Q.getPoints()),(x=Q instanceof m?Q:new m(Q)).size());if(n<=0)return{points:x};var L=new m,f=new m,V=x.get(0);Sp(R9,V,b),L.add(V),f.add(1);for(var l,H,I=1;I<J;I++)I+1<J?(l=x.get(I),H=x.get(I+1),Sp(g9,l,b),Sp(S9,H,b),m9.subVectors(R9,g9).setLength(Math.min(.99*m9.length(),n)).add(g9),l.e!==n5||V.e!==n5?L.add({x:m9.x,y:m9.z,e:m9.y}):L.add({x:m9.x,y:m9.z}),L.add(l),m9.subVectors(S9,g9).setLength(Math.min(.99*m9.length(),n)).add(g9),l.e!==n5||H.e!==n5?L.add(V={x:m9.x,y:m9.z,e:m9.y}):L.add(V={x:m9.x,y:m9.z}),R9.copy(m9),f.addAll([2,3])):(L.add(x.get(I)),f.add(2));return{points:L,segments:f}}),toColorData:zh,setCanvas:R_,createDiv:p_,createDisabledDiv:nh,createView:h_,createCanvas:z_,appendChild:g_,initContext:xh,checkLoadingImage:mj,translateAndScale:bh,layout:F,getPosition:t1,drawPoints:mh,drawRoundRect:L1,drawBorder:f1,setFocus:Hh,getter:b_,setter:J_,isEmptyObject:M_,cameraPriority:(X9={skybox:0,main:1e4,top:1e7,infinity:1/0},e.seal(e.defineProperties({},{skybox:{configurable:!1,enumerable:!1,get:function(){return X9.skybox},set:function(Q){if(Q>=X9.main)throw new RangeError("Skybox camera must have lower priority than the main camera.");X9.skybox=Number(Q)}},main:{configurable:!1,enumerable:!1,get:function(){return X9.main},set:function(Q){if(Q<=X9.skybox)throw new RangeError("Main camera must have higher priority than the skybox camera.");if(Q>=X9.top)throw new RangeError("Main camera must have lower priority than the top camera.");X9.main=Number(Q)}},top:{configurable:!1,enumerable:!1,get:function(){return X9.top},set:function(Q){if(Q<=X9.main)throw new RangeError("Top camera must have higher priority than the main camera.");X9.top=Number(Q)}}}))),addFontFace:(z9={ttf:"truetype",otf:"opentype",eot:"embedded-opentype"},s9={eot:0,woff2:1,woff:2,ttf:3,otf:4},function(Q,n,x,b){if(Q){var J;if(b&&b5.removeFontFace(Q,!0),b=tj[Q])return b.parentNode||E.head.appendChild(b),void(x&&x(b));0!==(n=(n=H5(n)?[n]:n).filter(function(Q){return!!H5(Q)&&0<Q.length})).length&&(n=n.map(Rp),J="",n.sort(gp).forEach(function(Q){J+=", "+Q.url}),J=J.substr(2),(b=E.createElement("style")).innerText='@font-face{font-family: "'+Q+'";src: '+J+";}",E.head.appendChild(b),tj[Q]=b,x&&x(b))}}),clearFontFace:function(){if(!M_(tj)){for(var Q in tj)b5.removeFontFace(Q);tj={}}},removeFontFace:function(Q,n){if(Q){var x=Q;if(x.tagName){if(JS(x),n){var b,J=[];for(b in tj)tj[b]===x&&J.push(b);if(0<J.length)for(var L=0,f=J.length;L<f;L++)delete tj[J[L]]}}else(x=tj[Q])&&(JS(x),n&&delete tj[Q])}},getFontFaceMap:function(){return tj},handleFontFacesLoaded:function(Q){}},!0),E&&E.fonts&&E.fonts.addEventListener&&E.fonts.addEventListener("loadingdone",function(Q){b5.handleFontFacesLoaded(Q.fontfaces),b5.findView("all").forEach(function(Q){Q.redraw?Q.redraw():Q.iv()})}),$_(A,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0),b5.disabledOpacity),CK=b5.toolTipDelay,Q7=b5.devicePixelRatio,s1=b5.autoMakeVisible,n7=b5.autoHideScrollBar,x7=b5.imageGradient,b7=b5.showToolTip,J7=b5.hideToolTip,L7=b5.dashPattern,f7=b5.lineCap,V7=b5.lineJoin,l7=b5.labelColor,v5=b5.labelSelectColor,H7=b5.labelFont,I7=b5.widgetIndent,d1=b5.widgetRowHeight,Z7=b5.widgetHeaderHeight,E7=b5.widgetTitleHeight,h1=b5.scrollBarColor,G=b5.scrollBarSize,a7=b5.scrollBarTimeout,o7=b5.scrollBarMinLength,B7=b5.scrollBarInteractiveSize,G7=b5.zoomIncrement,_7=b5.scrollZoomIncrement,$7=b5.pinchZoomIncrement,W7=b5.zoomMax,D7=b5.zoomMin,A7=b5.createObject,u7=b5.preventDefault,S5=b5.setImage,g=b5.getImage,M7=b5.isImageComplete,t7=b5.drawCenterImage,i7=b5.drawStretchImage,r7=b5.getId,P7=b5.callLater,c7=b5.cancelLater,F7=b5.sortFunc,q7=b5.clone,w7=b5.getClass,y7=b5.startAnim,K7=b5.brighter,U7=b5.darker,e7=b5.drawText,v7=b5.getTextSize,O7=b5.isLeftButton,d7=b5.isMiddleButton,h7=b5.isRightButton,p7=b5.getTouchCount,z7=b5.isDoubleClick,s7=b5.isShiftDown,X7=b5.isCtrlDown,R7=b5.getClientPoint,g7=b5.getPagePoint,S7=b5.getDistance,m7=b5.unionPoint,Y7=b5.unionRect,T7=b5.containsPoint,k7=b5.containsRect,N7=b5.intersectsRect,j7=b5.intersection,C7=b5.getWindowInfo,QS=b5.grow,nS=b5.getLogicalPoint,xS=b5.getScreenPoint,bS=b5.startDragging,JS=b5.removeHTML,LS=b5.createElement,fS=b5.segmentResolution,VS=b5.shapeResolution,lS=b5.shapeSide,HS=b5.def,p1=function(Q,n,x){HS("ht."+Q,n,x)},IS=function(Q,n){Q.childNodes.forEach(function(Q){n(Q),IS(Q,n)})},ZS=($_(b5,{toolTipLabelColor:l7,toolTipLabelFont:H7,toolTipBackground:i.toolTipBackground,toolTipShadowColor:B,debugTipLabelFont:H7,debugTipLabelColor:l7,debugTipBackground:i.toolTipBackground,drawBreakableText:k_,setDevicePixelRatio:function(Q){Q7=b5.devicePixelRatio="number"==typeof Q?Q:NK(O),IS(E.body,function(Q){(Q=Q._ht)&&Q._canvas&&(R_(Q._canvas,Q.getWidth(),Q.getHeight()),Q.redraw?Q.redraw():Q.iv())})},getPosition3dGap:function(){return Js()}},!0),1e-6),ES="undefined"!=typeof Uint16Array?Uint16Array:Array,aS="undefined"!=typeof Uint32Array?Uint32Array:ES,oS="undefined"!=typeof Float32Array?Float32Array:Array,BS=function(Q,n,x){return Q=[Q[0]-n[0],Q[1]-n[1],Q[2]-n[2]],x&&0<(n=S7(Q))&&(Q[0]/=n,Q[1]/=n,Q[2]/=n),Q},GS=function(){var Q,n="charCodeAt",x=2*(2*Ei.length+1);for(Q in O)if(Q===a5+Qi[0]+(Zi.length+2)){var b=O[Q];if(!b)break;for(var J=b.length,L=0;L<J;L++)if(b[L][n](0)===x&&b[L+1]!=x5&&b[L+1]===Zi[0]&&b[L+2]!=x5&&b[L+2][n](0)===x){for(var f=L+3;f<J;f++)if(b[f][n](0)===x){if(0==b[f+1])for(var V,l=f+2;l<J;l++){if(b[l][n](0)===x){0==b[l-1]&&V&&(s5=V.substr(0,V.length-1));break}V==x5?V=b[l]:V+=b[l]}break}break}break}return function(Q){return[-Q[0],-Q[1],-Q[2]]}}(),_S=function(Q,n){return 3===Q.length?Q[0]*n[0]+Q[1]*n[1]+Q[2]*n[2]:Q[0]*n[0]+Q[1]*n[1]},$S=function(){var Q=new Array(16);return Q[0]=1,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=0,Q[5]=1,Q[6]=0,Q[7]=0,Q[8]=0,Q[9]=0,Q[10]=1,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,Q},WS=$S(),DS=function(Q){var n=new Array(16);return n[0]=Q[0],n[1]=Q[1],n[2]=Q[2],n[3]=Q[3],n[4]=Q[4],n[5]=Q[5],n[6]=Q[6],n[7]=Q[7],n[8]=Q[8],n[9]=Q[9],n[10]=Q[10],n[11]=Q[11],n[12]=Q[12],n[13]=Q[13],n[14]=Q[14],n[15]=Q[15],n},AS=function(Q){return Q[0]=1,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=0,Q[5]=1,Q[6]=0,Q[7]=0,Q[8]=0,Q[9]=0,Q[10]=1,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,Q},uS=function(Q,n){var x=Q[0],b=Q[1],J=Q[2];return Q[0]=n[0]*x+n[4]*b+n[8]*J+n[12],Q[1]=n[1]*x+n[5]*b+n[9]*J+n[13],Q[2]=n[2]*x+n[6]*b+n[10]*J+n[14],Q},MS=function(Q,n){var x=Q[0],b=Q[1],J=Q[2],L=Q[3];return Q[0]=n[0]*x+n[4]*b+n[8]*J+n[12]*L,Q[1]=n[1]*x+n[5]*b+n[9]*J+n[13]*L,Q[2]=n[2]*x+n[6]*b+n[10]*J+n[14]*L,Q[3]=n[3]*x+n[7]*b+n[11]*J+n[15]*L,Q},tS=function(Q,n,x){var b,J;if("number"==typeof Q?J=Q:Q&&(J=Q.length,b=!0),J)for(var L,f=0,V=0;f<J;f++)L=n?L5(J-1,1==V?f+1:2==V?f-1:f):f,x(b?Q[L]:L),2<++V&&(V=0)},iS=(JJ=D_(Q[1]+Q[7]),LJ=D_(Q[0]+Q[3]-Q[10]),fJ=D_(Q[8]+2),VJ=function(){return xJ=bJ.charAt(nJ),nJ+=1,xJ},lJ=function(){var Q="";if(xJ===fJ)for(;VJ();){if(xJ===fJ)return VJ(),Q;Q+=xJ}else VJ()},HJ=function(){for(;xJ&&xJ<=" ";)VJ()},IJ=function(){if(HJ(),xJ!==JJ)return lJ();var Q,n={};if(xJ===JJ){if(VJ(),HJ(),xJ===LJ)return VJ(),n;for(;xJ;){if(Q=lJ(),HJ(),VJ(),n[Q]=IJ(),HJ(),xJ===LJ)return VJ(),n;VJ(),HJ()}}},function(Q){if(M={},Q&&(bJ=Q,nJ=0,xJ=" ",Q=IJ(),HJ(),!xJ))return Q}),rS=function(Q,n){var x,b,J,L,f,V,l,H,I;n&&(x=V5(n),n=f5(n),b=Q[4],J=Q[5],L=Q[6],f=Q[7],V=Q[8],l=Q[9],H=Q[10],I=Q[11],Q[4]=b*n+V*x,Q[5]=J*n+l*x,Q[6]=L*n+H*x,Q[7]=f*n+I*x,Q[8]=V*n-b*x,Q[9]=l*n-J*x,Q[10]=H*n-L*x,Q[11]=I*n-f*x)},PS=function(Q,n){var x,b,J,L,f,V,l,H,I;n&&(x=V5(n),n=f5(n),b=Q[0],J=Q[1],L=Q[2],f=Q[3],V=Q[8],l=Q[9],H=Q[10],I=Q[11],Q[0]=b*n-V*x,Q[1]=J*n-l*x,Q[2]=L*n-H*x,Q[3]=f*n-I*x,Q[8]=b*x+V*n,Q[9]=J*x+l*n,Q[10]=L*x+H*n,Q[11]=f*x+I*n)},cS=function(Q,n){var x,b,J,L,f,V,l,H,I;n&&(x=V5(n),n=f5(n),b=Q[0],J=Q[1],L=Q[2],f=Q[3],V=Q[4],l=Q[5],H=Q[6],I=Q[7],Q[0]=b*n+V*x,Q[1]=J*n+l*x,Q[2]=L*n+H*x,Q[3]=f*n+I*x,Q[4]=V*n-b*x,Q[5]=l*n-J*x,Q[6]=H*n-L*x,Q[7]=I*n-f*x)},FS=function(Q,n,x){return qS(x5,!1===x?x5:Q.getFinalScale3d(),Q.getFinalRotation3d(),Q.getRotationMode(),Q.p3(),x5,n)},qS=function(Q,n,x,b,J,L,f){return L=L||$S(),J&&Hs(L,J),sV(L,x,b),f&&Zs(L,L,f),n&&Is(L,n),Q&&Zs(L,L,Q),L},wS=function(Q,n,x){n=e5(n),x=e5(x),this.g=Q,this._84O=n,this._85O=x,this._70I=!0,this.F=0,this._83O=n+x,this.pen={x:0,y:0}},yS="lineDashOffset",KS="setLineDash",US=function(Q,n,x){return t_(n)?Q:Q[KS]?(Q[KS](n),x&&(Q.lineDashOffset=x),Q):new wS(Q,n[0],1<n.length?n[1]:n[0])},eS=function(Q,n){!t_(n)&&Q[KS]&&(Q[KS](vj),Q.lineDashOffset=0)},vS=(HS(wS,e,{_69I:6,moveTo:function(Q,n){var x=this.pen;x.x=Q,x.y=n,this.g.moveTo(Q,n),this.start||(this.start={x:Q,y:n})},lineTo:function(Q,n){var x=this,b=x.pen,J=Q-b.x,L=n-b.y,L=K5(L,J),J=f5(L),L=V5(L),f=x._23O(b.x,b.y,Q,n),V=x._85O,l=x._84O,H=x._83O;if(x.F){if(x.F>f)return x._70I?x._72I(Q,n):x.moveTo(Q,n),void(x.F-=f);if(x._70I?x._72I(b.x+J*x.F,b.y+L*x.F):x.moveTo(b.x+J*x.F,b.y+L*x.F),f-=x.F,x.F=0,x._70I=!x._70I,!f)return}var I=t5(f/H);if(I){for(var Z=J*l,E=L*l,a=J*V,o=L*V,B=0;B<I;B++)x._70I?(x._72I(b.x+Z,b.y+E),x.moveTo(b.x+a,b.y+o)):(x.moveTo(b.x+a,b.y+o),x._72I(b.x+Z,b.y+E));f-=H*I}x._70I?l<f?(x._72I(b.x+J*l,b.y+L*l),x.moveTo(Q,n),x.F=V-(f-l),x._70I=!1):(x._72I(Q,n),f===l?(x.F=0,x._70I=!x._70I):(x.F=l-f,x.moveTo(Q,n))):V<f?(x.moveTo(b.x+J*V,b.y+L*V),x._72I(Q,n),x.F=l-(f-V),x._70I=!0):(x.moveTo(Q,n),f===V?(x.F=0,x._70I=!x._70I):x.F=V-f)},quadraticCurveTo:function(Q,n,x,b){var J,L=this,f=(l=L.pen).x,V=l.y,l=L._22O(f,V,Q,n,x,b),H=0,I=0,Z=L._85O,E=L._84O;if(L.F){if(L.F>l)return L._70I?L._71I(Q,n,x,b):L.moveTo(x,b),void(L.F-=l);if(H=L.F/l,J=L._20O(f,V,Q,n,x,b,H),L._70I?L._71I(J[2],J[3],J[4],J[5]):L.moveTo(J[4],J[5]),L.F=0,L._70I=!L._70I,!l)return}var a,o=t5((l-l*H)/L._83O),B=E/l,G=Z/l;if(o)for(var _=0;_<o;_++)L._70I?(J=L._21O(f,V,Q,n,x,b,H,I=H+B),L._71I(J[2],J[3],J[4],J[5]),H=I,J=L._21O(f,V,Q,n,x,b,H,I=H+G),L.moveTo(J[4],J[5])):(J=L._21O(f,V,Q,n,x,b,H,I=H+G),L.moveTo(J[4],J[5]),H=I,J=L._21O(f,V,Q,n,x,b,H,I=H+B),L._71I(J[2],J[3],J[4],J[5])),H=I;a=l-l*H,L._70I?E<a?(J=L._21O(f,V,Q,n,x,b,H,I=H+B),L._71I(J[2],J[3],J[4],J[5]),L.moveTo(x,b),L.F=Z-(a-E),L._70I=!1):(J=L._19O(f,V,Q,n,x,b,H),L._71I(J[2],J[3],J[4],J[5]),l===E?(L.F=0,L._70I=!L._70I):(L.F=E-a,L.moveTo(x,b))):Z<a?(J=L._21O(f,V,Q,n,x,b,H,I=H+G),L.moveTo(J[4],J[5]),J=L._19O(f,V,Q,n,x,b,I),L._71I(J[2],J[3],J[4],J[5]),L.F=E-(a-Z),L._70I=!0):(L.moveTo(x,b),a===Z?(L.F=0,L._70I=!L._70I):L.F=Z-a)},bezierCurveTo:function(){var Q=arguments;this.pen={x:Q[4],y:Q[5]},this.g.bezierCurveTo(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])},arc:function(Q,n,x,b,J,L){L||(b=-b,J=-J);var f,V,l,H,I,Z=Q,E=n,L=b,a=x,o=x,n=!1,B=-((Q=P5(Q=J-b)>2*w?2*w:Q)/(f=i5(P5(Q)/(w/4)))),G=-L;if(0<f){Q=Z+f5(L)*a,L=E+V5(-L)*o,n?this.lineTo(Q,L):this.moveTo(Q,L);for(var _=0;_<f;_++)I=(G+=B)-B/2,V=Z+f5(G)*a,l=E+V5(G)*o,H=Z+f5(I)*(a/f5(B/2)),I=E+V5(I)*(o/f5(B/2)),this.quadraticCurveTo(H,I,V,l)}},rect:function(Q,n,x,b){this.pen={x:Q,y:n},this.moveTo(Q,n),this.lineTo(Q,n+b),this.lineTo(Q+x,n+b),this.lineTo(Q+x,n),this.lineTo(Q,n)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(Q,n,x,b){return r5((x-=Q)*x+(Q=b-n)*Q)},_22O:function(Q,n,x,b,J,L,f){for(var V,l,H,I,Z=0,E=Q,a=n,o=0<f?f:this._69I,B=1;B<=o;B++)Z+=this._23O(E,a,V=(l=(H=1-(I=B/o))*H)*Q+(H*=2*I)*x+(I*=I)*J,l=l*n+H*b+I*L),E=V,a=l;return Z},_21O:function(Q,n,x,b,J,L,f,V){return 0===f?this._20O(Q,n,x,b,J,L,V):1===V?this._19O(Q,n,x,b,J,L,f):((Q=this._20O(Q,n,x,b,J,L,V)).push(f/V),this._19O.apply(this,Q))},_20O:function(Q,n,x,b,J,L,f){var V,l;return 1!==f&&(V=x+(J-x)*f,l=b+(L-b)*f,J=(x=Q+(x-Q)*f)+(V-x)*f,L=(b=n+(b-n)*f)+(l-b)*f),[Q,n,x,b,J,L]},_19O:function(Q,n,x,b,J,L,f){var V;return 1!==f&&(Q=(V=Q+(x-Q)*f)+((x+=(J-x)*f)-V)*f,n=(V=n+(b-n)*f)+((b+=(L-b)*f)-V)*f),[Q,n,x,b,J,L]},_72I:function(Q,n){var x=this.pen;Q===x.x&&n===x.y||(x.x=Q,x.y=n,this.g.lineTo(Q,n))},_71I:function(Q,n,x,b){var J=this.pen;Q===x&&n===b&&x===J.x&&b===J.y||(J.x=x,J.y=b,this.g.quadraticCurveTo(Q,n,x,b))}}),kK.ms_quickVisible=function(Q,n){Q._4BQ=!1,Q._4CQ=function(Q){var n=Q._4EQ;return n!==n5?n:Q._4EQ=this._4FQ(Q)},Q._4DQ=function(Q){var n;Q?(Q._4EQ=n5,n=this,Q instanceof SV||E_(Q)||Q instanceof jV||Q.ISubGraph?Q.eachChild(function(Q){n.invalidateQuickVisible(Q)}):Q.getEdges&&(Q=Q.getEdges())&&Q.each(function(Q){n.invalidateQuickVisible(Q)})):this.dm().each(function(Q){Q._4EQ=n5})},Q.enableQuickVisibleMode=function(){return!this._4BQ&&!this._visibleFunc&&(this._4BQ=!0,this._4FQ=this.isVisible,this.isVisible=this._4CQ,this.invalidateQuickVisible=this._4DQ,!0)},Q.disableQuickVisibleMode=function(){return this._quickVisiblePending=!1,!!this._4BQ&&(this._4BQ=!1,this.isVisible=this._4FQ,this.invalidateQuickVisible=hj,!0)},Q.isQuickVisibleMode=function(){return this._4BQ},Q.invalidateQuickVisible=hj},Q=U5()+1,n&&O.console,x5),OS=x5,dS=b5.checkLoadingCompType=function(Q){vS&&!Q._72O_&&((OS=OS||{})[Q._72O_=r7()]=Q)},hS=function(x,Q){var b,n;(Q=Q||x)&&!(vS=vS||{})[x]&&(b=new nE,vS[Q]={request:b,url:Q},(Q=b5.beforeLoadURL(Q,x)).data?(n=b5.parse(Q.data),pS(x,n),b5.handleCompTypeLoaded(x,n)):(b.onload=function(Q){var n;200===this.status||0===this.status?(n=b5.parse(b.getResponseText()),pS(x,n),b5.handleCompTypeLoaded(x,n)):pS(x,x5)},b.onerror=function(Q){pS(x,x5)},(n={}).url=encodeURI(Q),n.sync=!1,b.send(n)))},pS=function(Q,n){if(Fj[Q]=n,delete vS[Q],M_(vS)&&(vS=x5,OS)){for(var x in OS)(b=OS[x]).invalidateAll&&b.invalidateAll(n5,"compTypeLoaded",Q),b.redraw&&b.redraw(),b.iv(),delete b._72O_;OS=x5}if(n&&OS)for(var x in OS){var b;(b=OS[x]).invalidateAll&&b.invalidateAll(n5,"compTypeLoading",Q),b.redraw&&b.redraw(),b.iv()}},zS=i.chart,sS="",XS=!0,RS=b5.compStack=[],gS=/^style@/,SS=/^attr@/,mS=/^field@/,YS={x:.5,y:.5},TS=function(Q,n,x){return!!Q&&((b=x&&x.isImageFitSize?x.isImageFitSize(n,Q):b)==x5?S(Q.fitSize,n,x):b);var b},kS=function(Q,n,x,b){return Q?!(TS(Q,n,x)&&b||null!=(b=S(Q.width,n,x)))?20:b:0},NS=function(Q,n,x,b){return Q?!(TS(Q,n,x)&&b||null!=(b=S(Q.height,n,x)))?20:b:0},S=function(Q,n,x){if(!Q||!Q.func)return Q;var b=Q.func,J=Q.value,Q=l_(b)?x&&x.vectorDataBindingDisabled&&!Q.isSafeFunc?J:b(n,x):n instanceof BG||d.ui&&n instanceof d.ui.View?SS.test(b)?n.a(sS+b.slice(5)):gS.test(b)?n.s(sS+b.slice(6)):mS.test(b)?n[b.slice(6)]:n[b]?n[b](x):J:J;return J!==n5&&Q==x5?J:Q},jS=b5.drawImage=(z=function(Q,n,x){var b,J,L=!1;return Q.prefix&&ZJ instanceof BG&&(J=ZJ.a(sS+n))!==n5&&(L=!0,b=J),(b=b===n5?Q[n]:b)&&b.func&&(L=!0,b=S(b,ZJ,EJ)),x&&(b=x(b),L||(Q[n]=b)),b},GJ=function(Q){var n=z(Q,"anchorX"),x=z(Q,"anchorY");return n!==n5||x!==n5?{x:n===n5?YS.x:n,y:x===n5?YS.y:x}:(n=z(Q,"type"),x=z(Q,"name"),"image"===n&&x&&(Q=g(x))&&Q.anchorX!==n5&&Q.anchorY!==n5?{x:Q.anchorX,y:Q.anchorY}:YS)},_J={border:function(Q,n){f1(p,kp(Q,RZ),n.x,n.y,n.width,n.height,z(Q,"width"))},image:function(Q,n){var x=oJ||z(Q,RZ),b=BJ||z(Q,"blendMode"),J=z(Q,"name");(J=(J=g(J,x,b))&&J.cacheRule!=x5?YG(p,J,z(Q,"stretch"),n.width,n.height,ZJ,EJ,x):J)?i7(p,J,z(Q,"stretch"),n.x,n.y,n.width,n.height,ZJ,EJ,x,null,b):XS=!1},text:function(Q,V){var n,l,x,H,b,I,Z,E,J,a,o,B,G,_,$,W,D,L,A,f,u,M,t=z(Q,"text");t!=x5&&(t+="",u=z(Q,"gradientPack"),M=z(Q,"gradient"),n=kp(Q,"gradientColor"),l=z(Q,"font"),x=z(Q,"vertical"),H=z(Q,"verticalGap")||0,b=z(Q,"align"),I=z(Q,"vAlign"),Z=z(Q,"decoration"),E=z(Q,"letterGap")||0,J=z(Q,"wrap"),a=z(Q,"borderWidth"),o=z(Q,"borderColor"),B=v7(l,t),u?(G=gh(p,u,kp,!1,V),p.restore()):G=kp(Q,RZ),!u&&M&&(G=b5.createGradient(p,M,G||b5.labelColor,n||i.imageGradient,V.x,V.y,V.width,V.height)),a&&H_(o)&&(o=gh(p,o,kp,!1,V),p.restore()),x?(null==H&&(H=1),_=[],$=[],f=J?m_(t,V.height,l,E,x,H):[t],p.textBaseline=xi,p.font=l,f.forEach(function(Q){for(var n=Q.length,x=0,b=(n-1)*H,J=0;J<n;J++){var L=p.measureText(Q[J]);_.push(L),b+=L.fontBoundingBoxDescent||B.height,x=J5(x,L.width)}$.push({width:x,height:b})}),L=(f.length-1)*E,$.forEach(function(Q){L+=Q.width}),W=b&&b!==Qi?b===ni?V.x+V.width-L:V.x+(V.width-L)/2:V.x,A=0,f.forEach(function(Q,n){var x=$[n],b=Q.length;D=I&&I!==fi?I===xi?V.y:V.y+V.height-x.height:V.y+(V.height-x.height)/2;for(var J=0;J<b;J++){var L=Q[J],f=_[A].fontBoundingBoxDescent||B.height;T_(p,L,l,G,{x:W,y:D,width:x.width,height:f},Ji,I,Z,E,a,o),D+=f+H,A++}W+=x.width+E})):1<(Q=(f=J?m_(t,V.width,l,E,x,H):t.split("\n")).length)?(u=Q*v7(l,t).height+H*(Q-1),M=q7(V),I&&I!==fi?I===bi&&(M.y=V.y+V.height-u):M.y=V.y+(V.height-u)/2,M.height=u,k_(p,f,M,l,G,b||Qi,Z,E,a,o)):T_(p,t,l,G,V,b,I,Z,E,a,o))},pieChart:function(Q,n){var x=z(Q,qi),b=0;if(x&&(x.forEach(function(Q){b+=Q}),0<b)){for(var J=z(Q,"colors")||zS,L=z(Q,"startAngle")||0,f=z(Q,"hollow"),V=z(Q,Ki),l=z(Q,di),H=z(Q,hi),I=V?new m:x5,Q=n.x,Z=n.y,E=n.width,a=Q+E/2,o=Z+(n=n.height)/2,B=L5(E,n)/2,G=0,_=0;_<x.length;_++){var $,W,D,A,u=x[_],M=L+l5*u/b;p.fillStyle=J[G++],G===J.length&&(G=0),p.beginPath(),f?($=a+f5(L)*B/2,W=o+V5(L)*B/2,D=a+f5(M)*B,A=o+V5(M)*B,p.moveTo($,W),p.arc(a,o,B/2,L,M,!1),p.lineTo(D,A)):p.moveTo(a,o),p.arc(a,o,B,M,L,!0),I&&($=(L+M)/2,I.add({text:l_(V)?V(u,_,b,ZJ):u,x:a+f5($)*B*.75,y:o+V5($)*B*.75})),p.closePath(),p.fill(),L=M}I&&I.each(function(Q){e7(p,Q.text,l,H,Q.x,Q.y,0,0,Ji)})}},columnChart:function(Q,n){var x=z(Q,wi);if(x&&0<x.length){var b=x.length,J=z(Q,Ki),L=z(Q,di),f=z(Q,hi),V=J?new m:x5,l=z(Q,"minValue")||0,H=z(Q,"maxValue");if(H==x5&&(H=0,x.forEach(function(Q){z(Q,qi).forEach(function(Q){H=J5(H,Q)})})),l!==H){for(var I=n.height/(H-l),Z=n.y+H*I,E=z(x[0],qi).length,a=n.width/(3*E+1),o=2*a/b,B=0,G=0;G<b;G++)for(var _=x[G],$=z(_,RZ),W=z(_,"colors"),D=z(_,qi),A=0;A<E;A++){W?p.fillStyle=W[A]:$?p.fillStyle=$:(p.fillStyle=zS[B++],B===zS.length&&(B=0));var u,M=D[A],t=M*I,i=n.x+(1+3*A)*a+G*o;Nh(p,i,Z-t,o,t),V&&(M=l_(J)?J(M,A,_,ZJ):M,u=v7(L,M).height,V.add({x:i,y:Z-t-u,width:o,height:u,text:M}))}V&&V.each(function(Q){e7(p,Q.text,L,f,Q.x,Q.y,Q.width,Q.height,Ji)})}}},stackedColumnChart:function(Q,n){var x=z(Q,wi);if(x&&0<x.length){var b=x.length,J=z(x[0],qi).length,L=n.width/(3*J+1),f=0,V=z(Q,"maxValue"),l=z(Q,Ki),H=z(Q,di),I=z(Q,hi),Z=l?new m:x5;if(V==x5)for(var V=0,E=0;E<J;E++){for(var a=0,o=0;o<b;o++)a+=z(x[o],qi)[E];V=J5(V,a)}if(0<V){for(E=0;E<J;E++)for(var B=n.y+n.height,o=0;o<b;o++){var G=x[o],_=z(G,RZ),$=z(G,qi)[E],W=$/V*n.height,_=(_?p.fillStyle=_:(p.fillStyle=zS[f++],f===zS.length&&(f=0)),B-=W,{x:n.x+(1+3*E)*L,y:B,width:2*L,height:W});Nh(p,_.x,_.y,_.width,_.height),Z&&(_.text=l_(l)?l($,E,G,ZJ):$,Z.add(_))}Z&&Z.each(function(Q){e7(p,Q.text,H,I,Q.x,Q.y,Q.width,Q.height,Ji)})}}},percentageColumnChart:function(Q,n){var x=z(Q,wi);if(x&&0<x.length){for(var b=x.length,J=z(x[0],qi).length,L=n.width/(3*J+1),f=0,V=z(Q,Ki),l=z(Q,di),H=z(Q,hi),I=V?new m:x5,Z=0;Z<J;Z++){for(var E=0,a=0;a<b;a++)E+=z(x[a],qi)[Z];if(0<E)for(var o=n.y+n.height,a=0;a<b;a++){var B=x[a],G=z(B,RZ),_=z(B,qi)[Z],$=_/E*n.height,G=(G?p.fillStyle=G:(p.fillStyle=zS[f++],f===zS.length&&(f=0)),o-=$,{x:n.x+(1+3*Z)*L,y:o,width:2*L,height:$});Nh(p,G.x,G.y,G.width,G.height),I&&(G.text=l_(V)?V(_,Z,B,ZJ):_,I.add(G))}}I&&I.each(function(Q){e7(p,Q.text,l,H,Q.x,Q.y,Q.width,Q.height,Ji)})}},lineChart:function(Q,n){var x=z(Q,wi);if(x&&0<x.length){var b=x.length,J=z(Q,"minValue")||0,L=z(Q,"maxValue");if(L==x5&&(L=0,x.forEach(function(Q){z(Q,qi).forEach(function(Q){L=J5(L,Q)})})),J!==L)for(var f=n.height/(L-J),V=n.y+L*f,l=z(x[0],qi).length,H=n.width/(3*l+1),I=0,Z=z(Q,"lineWidth")||2,E=z(Q,"line3d"),a=z(Q,"linePoint"),o=z(Q,Ki),B=z(Q,di),G=z(Q,hi),_=0;_<b;_++){var $=x[_],W=z($,RZ),D=z($,qi);W?p.strokeStyle=W:(W=p.strokeStyle=zS[I++],I===zS.length&&(I=0)),p.beginPath();for(var A=0;A<l;A++){var u=n.x+(2+3*A)*H,M=V-D[A]*f;0===A?p.moveTo(u,M):p.lineTo(u,M)}if(p.lineWidth=Z,p.stroke(),E&&Th(p,W,x5,Z,aJ),a||o)for(var t,i=Z/2+2,A=0;A<l;A++){var r,P,c,F,q=D[A],u=n.x+(2+3*A)*H,M=V-q*f;l_(a)?a(p,u,M,W,A,$,ZJ):a&&(p.fillStyle=W,p.beginPath(),p.arc(u,M,i,0,l5,!0),p.fill()),l_(o)?t=o(q,A,$,ZJ):o&&(t=q),t&&(q=v7(B,t).height,(r=p.shadowBlur)&&(P=p.shadowOffsetX,c=p.shadowOffsetY,F=p.shadowColor,p.shadowOffsetX=0,p.shadowOffsetY=0,p.shadowBlur=0,p.shadowColor=x5),e7(p,t,B,G,u,M-q-i+2,0,q,Ji),r&&(p.shadowOffsetX=P,p.shadowOffsetY=c,p.shadowBlur=r,p.shadowColor=F))}}}}},function(Q,K,n,x,b,J,U,L,f,V){if(K&&b&&J){var l,H,e,I,Z,E,a,o,B,v,G=[p,ZJ,EJ,aJ,oJ,BJ],Q=(p=Q,EJ=L,!(ZJ=U)&&EJ&&EJ.isSelfViewEvent&&(ZJ=EJ),aJ=EJ&&EJ._zoom||1,oJ=f,BJ=V,b),L=J;if(ZV()&&(0===p.maxSize&&!ZV[0]||(H=!0),p.texureImage2D&&!ZV[1]||(I=!0),p.texureImage3D&&!ZV[2]||(Z=!0),p.drawDNDState&&!ZV[3]||(a=!0),p.drawRect&&!ZV[di[2]]||(l=!0),d[bZ[1]+QZ[0]+gi[1]]&&!ZV[QZ[0]]||(o=!0),dj.widget[0]&&!ZV[4]||(E=!0),H&&I&&Z&&E&&a&&o&&l&&(Q=n,L=x)),K.tagName)return H5(s5)&&!O[s5]||p.drawImage(K,Q,L,b,J),void ba(G);0!=z(K,"visible")&&(oJ=oJ||S(K.color,ZJ,EJ),V||(BJ=S(K.blendMode,ZJ,EJ)),H5(s5)&&!O[s5]&&(b=Q,J=L),f=kS(K,ZJ,EJ,b),H=NS(K,ZJ,EJ,J),e={x:0,y:0,width:f,height:H,fitSize:TS(K,ZJ,EJ)},I=z(K,"clip"),Z=z(K,"opacity"),e.fitSize&&(E=e.rw=S(K.width,ZJ,EJ)||20,e.widthScale=f/E,a=e.rh=S(K.height,ZJ,EJ)||20,e.heightScale=H/a),p.save(),p.interactiveInfo&&(B=(o=p.interactiveInfo.matrix).clone(),o.appendTranslate(Q,L).appendScale(b/f,J/H),p.interactiveInfo.refRect=e),Jh(p,Q,L),f===b&&H===J||p.scale(b/f,J/H),I&&(l_(I)?I(p,f,H,ZJ,EJ,K):(p.beginPath(),p.rect(0,0,f,H),p.clip())),Z!=x5&&(p.globalAlpha*=Z),v=p.compGray,z(K,"comps").forEach(function(Q){var n;if(Q.gray&&(p.compGray=!0),Q.prefix&&(n=sS,(I=S(Q.prefix,ZJ,EJ))&&(sS=sS+I+".")),0==(I=K,r=Q,EJ&&EJ.getDrawableState?i=EJ.getDrawableState(ZJ):EJ&&EJ.getState?i=EJ.getState(ZJ):(i=ZJ instanceof BG?ZJ.s(rZ):null)!==n5&&null!==i||(i=z(I,rZ)),((I=z(r,rZ))===n5||null===I||I===i)&&z(r,Yi)))Q.prefix&&(sS=n);else{RS.splice(0,0,Q),p.interactiveInfo&&(x=p.interactiveInfo.matrix.clone());var x,b,J,L,f,V,l,H,I,Z,E,a,o,B,G,_,$,W,D,A,u,M,t,i=z(Q,"opacity"),r=z(Q,"shadow"),P=z(Q,"type"),c=z(Q,"refRect")||e,F=(I=c,l=z(H=Q,h),$=GJ(H),H_(l)&&(M=l.length,B=z(H,"relative"),t=I.width,D=I.height,4===M?(l={x:l[0],y:l[1],width:l[2],height:l[3]},B&&(l.x*=t,l.y*=D,l.width*=t,l.height*=D)):3===M&&(M=l[0],l={width:l[1],height:l[2]},B&&(l.width*=t,l.height*=D),"object"==typeof M?M.length&&(M={x:M[0],y:M[1]}):M=t1(M,I,l),l.x=M.x-l.width*$.x,l.y=M.y-l.height*$.y),l.x+=z(H,"offsetX")||0,l.y+=z(H,"offsetY")||0,!B&&I.fitSize&&(l=jp(H,l,I))),l);if(i!=x5&&(b=p.globalAlpha,p.globalAlpha*=i),r&&(t=aJ*b5.devicePixelRatio,J=p.shadowOffsetX,L=p.shadowOffsetY,f=p.shadowBlur,V=p.shadowColor,D=z(Q,"shadowOffsetX"),M=z(Q,"shadowOffsetY"),$=z(Q,"shadowBlur"),B=kp(Q,"shadowColor"),p.shadowOffsetX=(D==x5?3:D)*t,p.shadowOffsetY=(M==x5?3:M)*t,p.shadowBlur=($==x5?6:$)*t,p.shadowColor=B||kp(O1)),"save"===P)p.save();else if("endClip"===P||"restore"===P)p.restore();else if("clip"===P)p.save(),mh(p,z(Q,"points",Np),z(Q,"segments",Cp),!0),p.clip();else if(a1[P]){if(xa(Q,P,F=F||{x:0,y:0,width:c.width,height:c.height},c),Q.prefix&&0===Q.prefix.indexOf("ui.")&&EJ&&d.ui&&EJ instanceof d.ui.View){EJ._vectorCompInfo||(EJ._vectorCompInfo=[]);for(var q=!1,w=0;w<EJ._vectorCompInfo.length;w++){var y=EJ._vectorCompInfo[w];if(Q.prefix===y.comp.prefix&&U===y.data){EJ._vectorCompInfo[w]={comp:Q,type:P,rect:F,compRefRect:c,data:U,image:K,transform:p.getTransform()},q=!0;break}}q||EJ._vectorCompInfo.push({comp:Q,type:P,rect:F,compRefRect:c,data:U,image:K,transform:p.getTransform()})}}else P===_i?xa(Q,P,F,c):"SVGPath"===P?(H=P,I=F,$=z(l=Q,"path"),W=z(l,Si),D=z(l,"scaleX"),A=z(l,"scaleY"),u=GJ(l),M=x5,t=Rh(null,$),I||((I=l.unionRect)||(I=m7(t),l.path.func||(l.unionRect=I)),M=I),I&&((M=M||l.unionRect)||(M=m7(t),l.path.func||(l.unionRect=M)),t=Qa(l,I,M,W,D,A,u),I=z(l,"borderPattern"),W=US(p,I),D=kp(l,"background"),A=kp(l,"borderColor"),u=z(l,"borderWidth"),B=z(l,"gradient"),G=kp(l,"gradientColor"),_=z(l,"border3d"),Z=kp(l,"border3dColor"),E=z(l,"border3dAccuracy"),a=p.lineJoin,o=p.lineCap,p.lineJoin=z(l,"borderJoin")||V7,p.lineCap=z(l,"borderCap")||f7,D?(Ch(p,D,B,G,M),Rh(p,$),p.fill(),W!==p&&Rh(p,$)):Rh(p,$),(B=z(l,"borderWidthAbsolute"))&&(p.save(),p.setTransform(1,0,0,1,0,0)),u&&A&&(p.lineWidth=u,p.strokeStyle=A,p.stroke(),_&&Th(p,A,Z,u,aJ,E)),eS(p,I),z(l,"dash")&&0<(G=z(l,"dashWidth")||u)&&(I=z(l,"dashPattern")||L7,W=US(p,I,z(l,"dashOffset")),_=kp(l,"dashColor")||kp(r1),W!==p&&Rh(p,$),p.strokeStyle=_,p.lineWidth=G,p.stroke(),z(l,"dash3d")&&Th(p,_,kp(l,"dash3dColor"),G,aJ,z(l,"dash3dAccuracy")),eS(p,I)),B&&p.restore(),H===h&&V1(p,D,z(l,"depth"),M),p.lineJoin=a,p.lineCap=o,t&&na())):(W=Qa(Q,F=F||{x:0,y:0,width:c.width,height:c.height},F,A=z(Q,Si),Z=z(Q,"scaleX"),E=z(Q,"scaleY"),u=GJ(Q)),l_(P)?(Tp(Q,P),b5.drawCompType(P,p,F,Q,ZJ,EJ)):b5.getCompType(P)?(_=($=b5.getCompType(P)).func||$,Tp(Q,$),b5.drawCompType(_,p,F,Q,ZJ,EJ)):_J[P]?_J[P](Q,F):b5.getCompType(P)===n5&&Kj.test(P)&&(hS(P),XS=!1),W&&na());r&&(p.shadowOffsetX=J,p.shadowOffsetY=L,p.shadowBlur=f,p.shadowColor=V),i!=x5&&(p.globalAlpha=b),p.interactiveInfo&&(p.interactiveInfo.matrix=x),Q.prefix&&(sS=n),RS.splice(0,1),p.compGray=v}}),p.interactiveInfo&&(p.interactiveInfo.matrix=B),p.restore()),ba(G)}}),CS=(b5.getCurrentComp=function(){return RS[0]},b5.getParentComp=function(){return RS[1]},b5.getInternal=function(){return{isEnter:yh,isEsc:Kh,isSpace:wh,isLeft:Ph,isUp:ch,isRight:Fh,isDown:qh,addMethod:$_,superCall:u_,toPointsArray:Yh,translateAndScale:bh,appendArray:G_,createWorldMatrix:qS,vec3TransformMat4:uS,setCanvas:R_,createDiv:p_,createView:h_,createCanvas:z_,createImage:Nj,initContext:xh,layout:F,fillRect:Nh,Mat:OK,drawBorder:f1,isString:H5,setBorder:s_,getPropertyValue:q_,setPropertyValue:w_,drawVerticalLine:K_,draw3DRect:V1,getPinchDist:B1,isSameRect:i_,getPosition:t1,intersectionLineRect:c_,getNodeRect:$G,getEdgeAgentPosition:vG,getEdgeHostPosition:eG,getImageWidth:kS,getImageHeight:NS,initItemElement:d_,compileShaderAndFetchUniforms:O8,composeShaderSource:p8,decomposeShaderSource:h8,drawPoints:mh,createG2:US,closePopup:ah,isH:n_,createAnim:__,createNormalMatrix:Ns,makeUVMatrix:IO,toColorArray:sh,createNormals:Ds,toFloatArray:q8,glMV:js,glPop:ks,batchShape:pO,createNodeMatrix:FS,getShapeModel:c8,getFaceInfo:VO,transformAppend:Ce,drawFaceInfo:lO,glUploadData:gs,glUploadElementData:ms,glDrawArray:zs,glDrawElement:ss,glBindTexture:ts,pickValueToColor:Hu,to3dPointsArray:K8,setGLDebugMode:function(Q){l$=Q},cube:function(){return{vs:J8,is:L8,uv:f8}},ui:function(){return{DataUI:lE,NodeUI:IE,EdgeUI:ZE,GroupUI:aE,ShapeUI:BE,GridUI:_E,Data3dUI:iu,Node3dUI:ru,Shape3dUI:Fu}},getInternalVersion:function(){return"U2FsdGVkX190GDeshlgMYhnSACoREfIuvI9TgpsDERQ="},getDragger:function(){return oh},addMSMap:function(Q){$_(kK,Q)},k:B5,overrideTimerFunc:function(Q,n){P7=d.Default.callLater=Q,c7=d.Default.cancelLater=n},canEnterEditDetailMode:gG,addEventListener:Q5,removeEventListener:u5,createGradientByPackedData:gh}},function(Q){var D="toString",n="";function $(Q,n,x){Q!=x5&&(n==x5&&sZ!=typeof Q?this._54O(Q,256):this._54O(Q,n))}G5=Q["D"+11182[D](F5(2,5))];var x=$.prototype;function W(){return new $(x5)}ki+=li.substr(0,1);for(var Q="Microsoft Internet Explorer"==(Q=Q.navigator?Q.navigator.appName:"")?(x.am=function(Q,n,x,b,J,L){for(var f=32767&n,V=n>>15;0<=--L;){var l=32767&this[Q],H=this[Q++]>>15,I=V*l+H*f;J=((l=f*l+((32767&I)<<15)+x[b]+(1073741823&J))>>>30)+(I>>>15)+V*H+(J>>>30),x[b++]=1073741823&l}return J},30):"Netscape"!=Q?(x.am=function(Q,n,x,b,J,L){for(;0<=--L;){var f=n*this[Q++]+x[b]+J;J=t5(f/67108864),x[b++]=67108863&f}return J},26):(x.am=function(Q,n,x,b,J,L){for(var f=16383&n,V=n>>14;0<=--L;){var l=16383&this[Q],H=this[Q++]>>14,I=V*l+H*f;J=((l=f*l+((16383&I)<<14)+x[b]+J)>>28)+(I>>14)+V*H,x[b++]=268435455&l}return J},28),v=(x.DB=Q,x.DM=(1<<Q)-1,x.DV=1<<Q,x.FV=F5(2,52),x.F1=52-Q,x.F2=2*Q-52,"0123456789abcdefghijklmnopqrstuvwxyz"),H=[],f=function(Q){return String.fromCharCode(Q)},b="0".charCodeAt(0),J=0;J<=9;++J)H[b++]=J;for(b="a".charCodeAt(0),J=10;J<36;++J)H[b++]=J;for(b="A".charCodeAt(0),J=10;J<36;++J)H[b++]=J;function I(Q){return v.charAt(Q)}function L(Q){var n=W();return n._58O(Q),n}function A(Q){var n,x=1;return 0!=(n=Q>>>16)&&(Q=n,x+=16),0!=(n=Q>>8)&&(Q=n,x+=8),0!=(n=Q>>4)&&(Q=n,x+=4),0!=(n=Q>>2)&&(Q=n,x+=2),0!=(n=Q>>1)&&(Q=n,x+=1),x}function V(Q){this.m=Q}function l(Q){this.m=Q,this.mp=Q._50O(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<Q.DB-15)-1,this.mt2=2*Q.t}function u(Q,n){return new $(Q,n)}function Z(){this.n=x5,this.e=0,this.d=x5,this.p=x5,this.q=x5,this.dmp1=x5,this.dmq1=x5,this._10A=x5}(Q=V.prototype)._73O=function(Q){return Q.s<0||0<=Q._52O(this.m)?Q.mod(this.m):Q},Q.revert=function(Q){return Q},Q._74O=function(Q){Q._49O(this.m,x5,Q)},Q._75O=function(Q,n,x){Q._47O(n,x),this._74O(x)},Q._76O=function(Q,n){Q._48O(n),this._74O(n)},(Q=l.prototype)._73O=function(Q){var n=W();return Q.abs()._59O(this.m.t,n),n._49O(this.m,x5,n),Q.s<0&&0<n._52O($.ZERO)&&this.m._78O(n,n),n},Q.revert=function(Q){var n=W();return Q._77O(n),this._74O(n),n},Q._74O=function(Q){for(var n=this;Q.t<=n.mt2;)Q[Q.t++]=0;for(var x=0;x<n.m.t;++x){var b=32767&Q[x],J=b*n.mpl+((b*n.mph+(Q[x]>>15)*n.mpl&n.um)<<15)&Q.DM;for(Q[b=x+n.m.t]+=n.m.am(0,J,Q,x,0,n.m.t);Q[b]>=Q.DV;)Q[b]-=Q.DV,Q[++b]++}Q._57O(),Q._45O(n.m.t,Q),0<=Q._52O(n.m)&&Q._78O(n.m,Q)},Q._75O=function(Q,n,x){Q._47O(n,x),this._74O(x)},Q._76O=function(Q,n){Q._48O(n),this._74O(n)},x._77O=function(Q){for(var n=this.t-1;0<=n;--n)Q[n]=this[n];Q.t=this.t,Q.s=this.s},x._58O=function(Q){this.t=1,this.s=Q<0?-1:0,0<Q?this[0]=Q:Q<-1?this[0]=Q+this.DV:this.t=0},x._54O=function(Q,n){var x,b=this;if(16==n)x=4;else if(8==n)x=3;else if(256==n)x=8;else if(2==n)x=1;else if(32==n)x=5;else{if(4!=n)return void b.fromRadix(Q,n);x=2}b.t=0,b.s=0;for(var J,L=Q.length,f=!1,V=0;0<=--L;){var l=8==x?255&Q[L]:(l=L,(J=H[(J=Q).charCodeAt(l)])==x5?-1:J);l<0?"-"==Q.charAt(L)&&(f=!0):(f=!1,0==V?b[b.t++]=l:V+x>b.DB?(b[b.t-1]|=(l&(1<<b.DB-V)-1)<<V,b[b.t++]=l>>b.DB-V):b[b.t-1]|=l<<V,(V+=x)>=b.DB&&(V-=b.DB))}8==x&&0!=(128&Q[0])&&(b.s=-1,0<V&&(b[b.t-1]|=(1<<b.DB-V)-1<<V)),b._57O(),f&&$.ZERO._78O(b,b)},x._57O=function(){for(var Q=this.s&this.DM;0<this.t&&this[this.t-1]==Q;)--this.t},x._59O=function(Q,n){for(var x=this.t-1;0<=x;--x)n[x+Q]=this[x];for(x=Q-1;0<=x;--x)n[x]=0;n.t=this.t+Q,n.s=this.s},x._45O=function(Q,n){for(var x=Q;x<this.t;++x)n[x-Q]=this[x];n.t=J5(this.t-Q,0),n.s=this.s},x._44O=function(Q,n){for(var x=this,b=Q%x.DB,J=x.DB-b,L=(1<<J)-1,f=t5(Q/x.DB),V=x.s<<b&x.DM,l=x.t-1;0<=l;--l)n[l+f+1]=x[l]>>J|V,V=(x[l]&L)<<b;for(l=f-1;0<=l;--l)n[l]=0;n[f]=V,n.t=x.t+f+1,n.s=x.s,n._57O()},x._46O=function(Q,n){var x=this,b=(n.s=x.s,t5(Q/x.DB));if(b>=x.t)n.t=0;else{var J=Q%x.DB,L=x.DB-J,f=(1<<J)-1;n[0]=x[b]>>J;for(var V=b+1;V<x.t;++V)n[V-b-1]|=(x[V]&f)<<L,n[V-b]=x[V]>>J;0<J&&(n[x.t-b-1]|=(x.s&f)<<L),n.t=x.t-b,n._57O()}},x._78O=function(Q,n){for(var x=this,b=0,J=0,L=L5(Q.t,x.t);b<L;)J+=x[b]-Q[b],n[b++]=J&x.DM,J>>=x.DB;if(Q.t<x.t){for(J-=Q.s;b<x.t;)J+=x[b],n[b++]=J&x.DM,J>>=x.DB;J+=x.s}else{for(J+=x.s;b<Q.t;)J-=Q[b],n[b++]=J&x.DM,J>>=x.DB;J-=Q.s}n.s=J<0?-1:0,J<-1?n[b++]=x.DV+J:0<J&&(n[b++]=J),n.t=b,n._57O()},x._47O=function(Q,n){var x=this.abs(),b=Q.abs(),J=x.t;for(n.t=J+b.t;0<=--J;)n[J]=0;for(J=0;J<b.t;++J)n[J+x.t]=x.am(0,b[J],n,J,0,x.t);n.s=0,n._57O(),this.s!=Q.s&&$.ZERO._78O(n,n)},x._48O=function(Q){for(var n=this.abs(),x=Q.t=2*n.t;0<=--x;)Q[x]=0;for(x=0;x<n.t-1;++x){var b=n.am(x,n[x],Q,2*x,0,1);(Q[x+n.t]+=n.am(x+1,2*n[x],Q,2*x+1,b,n.t-x-1))>=n.DV&&(Q[x+n.t]-=n.DV,Q[x+n.t+1]=1)}0<Q.t&&(Q[Q.t-1]+=n.am(x,n[x],Q,2*x,0,1)),Q.s=0,Q._57O()},x._49O=function(Q,n,x){var b=this;if(!((I=Q.abs()).t<=0)){var J=b.abs();if(J.t<I.t)return n!=x5&&n._58O(0),void(x!=x5&&b._77O(x));x==x5&&(x=W());var L=W(),f=b.s,Q=Q.s,V=b.DB-A(I[I.t-1]),l=(0<V?(I._44O(V,L),J._44O(V,x)):(I._77O(L),J._77O(x)),L.t),H=L[l-1];if(0!=H){var I=H*(1<<b.F1)+(1<l?L[l-2]>>b.F2:0),Z=b.FV/I,E=(1<<b.F1)/I,a=1<<b.F2,o=x.t,B=o-l,G=n==x5?W():n;for(L._59O(B,G),0<=x._52O(G)&&(x[x.t++]=1,x._78O(G,x)),$.ONE._59O(l,G),G._78O(L,L);L.t<l;)L[L.t++]=0;for(;0<=--B;){var _=x[--o]==H?b.DM:t5(x[o]*Z+(x[o-1]+a)*E);if((x[o]+=L.am(0,_,x,B,0,l))<_)for(L._59O(B,G),x._78O(G,x);x[o]<--_;)x._78O(G,x)}n!=x5&&(x._45O(l,n),f!=Q&&$.ZERO._78O(n,n)),x.t=l,x._57O(),0<V&&x._46O(V,x),f<0&&$.ZERO._78O(x,x)}}},x._50O=function(){if(this.t<1)return 0;var Q=this[0];if(0==(1&Q))return 0;var n=3&Q;return 0<(n=(n=(n=(n=n*(2-(15&Q)*n)&15)*(2-(255&Q)*n)&255)*(2-((65535&Q)*n&65535))&65535)*(2-Q*n%this.DV)%this.DV)?this.DV-n:-n},x._51O=function(){return 0==(0<this.t?1&this[0]:this.s)},x.exp=function(Q,n){if(4294967295<Q||Q<1)return $.ONE;var x,b=W(),J=W(),L=n._73O(this),f=A(Q)-1;for(L._77O(b);0<=--f;)n._76O(b,J),0<(Q&1<<f)?n._75O(J,L,b):(x=b,b=J,J=x);return n.revert(b)},x.toString=function(Q){var n,x=this;if(x.s<0)return"-"+x._85O()[D](Q);if(16==Q)n=4;else if(8==Q)n=3;else if(2==Q)n=1;else if(32==Q)n=5;else{if(4!=Q)return x.toRadix(Q);n=2}var b,J=(1<<n)-1,L=!1,f="",V=x.t,l=x.DB-V*x.DB%n;if(0<V--)for(l<x.DB&&0<(b=x[V]>>l)&&(L=!0,f=I(b));0<=V;)l<n?(b=(x[V]&(1<<l)-1)<<n-l,b|=x[--V]>>(l+=x.DB-n)):(b=x[V]>>(l-=n)&J,l<=0&&(l+=x.DB,--V)),(L=0<b||L)&&(f+=I(b));return L?f:"0"},x._85O=function(){var Q=W();return $.ZERO._78O(this,Q),Q},x.abs=function(){return this.s<0?this._85O():this},x._52O=function(Q){var n=this.s-Q.s;if(0!=n)return n;var x=this.t;if(0!=(n=x-Q.t))return this.s<0?-n:n;for(;0<=--x;)if(0!=(n=this[x]-Q[x]))return n;return 0},x._55O=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this[this.t-1]^this.s&this.DM)},x.mod=function(Q){var n=W();return this.abs()._49O(Q,x5,n),this.s<0&&0<n._52O($.ZERO)&&Q._78O(n,n),n},x._53O=function(Q,n){return n=new(Q<256||n._51O()?V:l)(n),this.exp(Q,n)},$.ZERO=L(0),$.ONE=L(1),x._86O=function(){var Q=this;if(Q.s<0){if(1==Q.t)return Q[0]-Q.DV;if(0==Q.t)return-1}else{if(1==Q.t)return Q[0];if(0==Q.t)return 0}return(Q[1]&(1<<32-Q.DB)-1)<<Q.DB|Q[0]},A5=function(){Q=(H=h).split(""),n=M(H),Q.forEach(function(Q){0<Q.length&&n&&(_5+=e5(Q))});var n,Q=(H=n).substr(0,4),x=H.substr(4,2),b=H.substr(6,2),J=!1,L=B5,f=[],V=YZ.charAt(7);if(G5&&(G5[D]().indexOf("nat")<0||G5[ki][D]().indexOf("nat")<0||!H?I=x5:(Q=(H=new G5(+Q,x-1,+b)).setHours(9),G5[ki]()>Q?I=Sh[V]:J=!0)),H&&I&&I[0]&&I[i5(.5)]&&L){var l,x=iS(I[0]);for(l in b=iS(I[1]))f.push(l);var Q=0,H=x[f[0]],I=b[f[Q++]],Z=b[f[Q++]],E=b[f[Q++]],a=b[f[Q++]],o=b[f[Q++]],B=b[f[Q++]],x=x[f[6]],b=b[f[+Q]],Q=e._27O(L);if(H===I&&Q&&b){var L=I+Z+E+a+o+B,G=!B||B===Lj||!Lj&&B===(Kj+"")[0];if(!G&&B)for(var _,$=0,W=B.length;$<W;$++)B[$]===IZ[7]?_===Lj||_[0]===pi[5]&&Lj&&0<=Lj.indexOf(_.substr(1))?G=!0:_=x5:(_==x5?_=B[$]:_+=B[$],$===W-1&&(_===Lj||_[0]===pi[5]&&Lj&&0<=Lj.indexOf(_.substr(1)))&&(G=!0));L&&Q._31O(L,b)&&Q._31O(H,x)&&G&&(!o||G5[ki]()<o)&&(J=!0)}}return J||(jh=t_),V};(Q=Z.prototype)._37O=function(Q){return Q._53O(this.e,this.n)},Q._38O=function(Q,n){this.isPublic=!0,typeof Q!=sZ?(this.n=Q,this.e=n):Q!=x5&&n!=x5&&0<Q.length&&0<n.length&&(this.n=u(Q,16),this.e=e5(n,16))};var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="=",h="ICMxU===";function M(Q){for(var n,x,b="",J=0,L=0;L<Q.length&&Q.charAt(L)!=d;++L)(x=O.indexOf(Q.charAt(L)))<0||(J=0==J?(b+=I(x>>2),n=3&x,1):1==J?(b+=I(n<<2|x>>4),n=15&x,2):2==J?(b=(b+=I(n))+I(x>>2),n=3&x,3):(b=(b+=I(n<<2|x>>4))+I(15&x),0));return 1==J&&(b+=I(n<<2)),b}P=(x={})._7A={},E=P._6A={_80O:function(Q){z.prototype=this;var n=new z;return Q&&n._5A(Q),n.hasOwnProperty("_82O")||(n._82O=function(){n.$super._82O.apply(this,arguments)}),(n._82O.prototype=n).$super=this,n},_3A:function(){var Q=this._80O();return Q._82O.apply(Q,arguments),Q},_82O:function(){},_5A:function(Q){for(var n in Q)Q.hasOwnProperty(n)&&(this[n]=Q[n]);Q.hasOwnProperty(D)&&(this.toString=Q.toString)},_88O:function(){return this._82O.prototype._80O(this)}},a=P._39O=E._80O({_82O:function(Q,n){Q=this._84O=Q||[],this._65O=null!=n?n:4*Q.length},toString:function(Q){return(Q||o).stringify(this)},_89O:function(Q){var n=this._84O,x=Q._84O,b=this._65O,J=Q._65O;if(this._57O(),b%4)for(var L=0;L<J;L++){var f=x[L>>>2]>>>24-L%4*8&255;n[b+L>>>2]|=f<<24-(b+L)%4*8}else if(65535<x.length)for(L=0;L<J;L+=4)n[b+L>>>2]=x[L>>>2];else n.push.apply(n,x);return this._65O+=J,this},_57O:function(){var Q=this._84O,n=this._65O;Q[n>>>2]&=4294967295<<32-n%4*8,Q.length=i5(n/4)},_88O:function(){var Q=E._88O.call(this);return Q._84O=this._84O.slice(0),Q},_87O:function(Q){for(var n=[],x=0;x<Q;x+=4)n.push(4294967296*U5|0);return new a._82O(n,Q)}}),i=x._2A={},o=i._69O={stringify:function(Q){for(var n=Q._84O,x=Q._65O,b=[],J=0;J<x;J++){var L=n[J>>>2]>>>24-J%4*8&255;b.push((L>>>4).toString(16)),b.push((15&L).toString(16))}return b.join("")},_68O:function(Q){for(var n=Q.length,x=[],b=0;b<n;b+=2)x[b>>>3]|=e5(Q.substr(b,2),16)<<24-b%8*4;return new a._82O(x,n/2)}},B=i._8A={stringify:function(Q){for(var n=Q._84O,x=Q._65O,b=[],J=0;J<x;J++){var L=n[J>>>2]>>>24-J%4*8&255;b.push(f(L))}return b.join("")},_68O:function(Q){for(var n=Q.length,x=[],b=0;b<n;b++)x[b>>>2]|=(255&Q.charCodeAt(b))<<24-b%4*8;return new a._82O(x,n)}},G=i._9A={stringify:function(Q){try{return decodeURIComponent(escape(B.stringify(Q)))}catch(Q){throw new Error("")}},_68O:function(Q){return B._68O(unescape(encodeURIComponent(Q)))}},_=P._32O=E._80O({_1A:function(){this._83O=new a._82O,this._23O=0},_33O:function(Q){typeof Q==sZ&&(Q=G._68O(Q)),this._83O._89O(Q),this._23O+=Q._65O},_25O:function(Q){var n=this._83O,x=n._84O,b=n._65O,J=this._79O,L=b/(4*J),f=(L=Q?i5(L):J5((0|L)-this._22O,0))*J,Q=L5(4*f,b);if(f){for(var V=0;V<f;V+=J)this._20O(x,V);var l=x.splice(0,f);n._65O-=Q}return new a._82O(l,Q)},_88O:function(){var Q=E._88O.call(this);return Q._83O=this._83O._88O(),Q},_22O:0}),P._66O=_._80O({cfg:E._80O(),_82O:function(Q){this.cfg=this.cfg._80O(Q),this._1A()},_1A:function(){_._1A.call(this),this._34O()},_81O:function(Q){return this._33O(Q),this._25O(),this},_72O:function(Q){return Q&&this._33O(Q),this._21O()},_79O:16,_26O:function(x){return function(Q,n){return new x._82O(n)._72O(Q)}},_19O:function(x){return function(Q,n){return new p._71O._82O(x,n)._72O(Q)}}});var E,a,o,B,G,_,p,p=x._67O={},t=x;function z(){}var i=t,s=(P=i._7A)._39O,r=P._66O,P=i._67O,X=[],R=[];function g(Q){return 4294967296*(Q-(0|Q))|0}for(var c=2,F=0;F<64;)!function(Q){for(var n=r5(Q),x=2;x<=n;x++)if(!(Q%x))return;return 1}(c)||(F<8&&(X[F]=g(F5(c,.5))),R[F]=g(F5(c,1/3)),F++),c++;var q=[],P=P._41O=r._80O({_34O:function(){this._64O=new s._82O(X.slice(0))},_20O:function(Q,n){for(var x=this._64O._84O,b=x[0],J=x[1],L=x[2],f=x[3],V=x[4],l=x[5],H=x[6],I=x[7],Z=0;Z<64;Z++){Z<16?q[Z]=0|Q[n+Z]:(E=q[Z-15],a=q[Z-2],q[Z]=((E<<25|E>>>7)^(E<<14|E>>>18)^E>>>3)+q[Z-7]+((a<<15|a>>>17)^(a<<13|a>>>19)^a>>>10)+q[Z-16]);var E=b&J^b&L^J&L,a=I+((V<<26|V>>>6)^(V<<21|V>>>11)^(V<<7|V>>>25))+(V&l^~V&H)+R[Z]+q[Z],I=H,H=l,l=V,V=f+a|0,f=L,L=J,J=b,b=a+(((b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22))+E)|0}x[0]=x[0]+b|0,x[1]=x[1]+J|0,x[2]=x[2]+L|0,x[3]=x[3]+f|0,x[4]=x[4]+V|0,x[5]=x[5]+l|0,x[6]=x[6]+H|0,x[7]=x[7]+I|0},_21O:function(){var Q=this._83O,n=Q._84O,x=8*this._23O,b=8*Q._65O;return n[b>>>5]|=128<<24-b%32,n[14+(64+b>>>9<<4)]=t5(x/4294967296),n[15+(64+b>>>9<<4)]=x,Q._65O=4*n.length,this._25O(),this._64O},_88O:function(){var Q=r._88O.call(this);return Q._64O=this._64O._88O(),Q}}),w=(i._41O=r._26O(P),i._42O=r._19O(P),new RegExp(""));function y(Q){var n=Q.substring(0,38);return n&&30==n.indexOf("05000420")?["ss",Q.substring(38)]:[]}function S(Q,n,x,b){if((n=u(n=(n=n.replace(w,"")).replace(/[ \n]+/g,""),16))._55O()>this.n._55O())return 0;if(0==(n=y(this._37O(n)[D](16).replace(/^1f+00/,""))).length)return!1;for(var J,L,f,V=lS,l=[0,.5,.75,.875,.9375],H=[],I=[],Z=[],E=l5/V,a=(a=n=n[1],Q=K._4O.Util._56O(Q,"ss"),(f={}).v=Q==a,f.t=1,f.s=0,W5=f.v,Q),o=f.t=0,B=0;o<l.length;o++)for(var G=o%2==0?0:.5,_=0;_<=V;_++)L=1-l[o],H.push(.5*f5(J=(_+G)*E)*L,.5*l[o]*2-.5,.5*-V5(J)*L),I.push((_+G)/V,L);for(o=0;o<l.length-1;o++)for(var $=o*(V+1),W=(o+1)*(V+1),_=0;_<V;_++)Z.push($+_,W+_+1,W+_,$+_,$+_+1,W+_+1);return Z.forEach(function(Q){B+=Q}),n==a&&10<B}function m(Q){return(Q=Q.replace(w,n)).replace(/[ \n]+/g,n)}w.compile("[^0-9a-f]","gi"),Z._28O=-1,Z._29O=-2,Q._31O=S,Q._63O=S,Z._43O=-2;var K,Y,T,U=new function(){var l=this;l._5O=function(Q,n){return"8"!=Q.substring(n+2,n+3)?1:0==(Q=e5(Q.substring(n+3,n+4)))?-1:0<Q&&Q<10?Q+1:-2},l._13O=function(Q,n){var x=l._5O(Q,n);return x<1?"":Q.substring(n+2,n+2+2*x)},l._12O=function(Q,n){return""==(Q=l._13O(Q,n))?-1:(e5(Q.substring(0,1))<8?new $(Q,16):new $(Q.substring(2),16))._86O()},l._6O=function(Q,n){return(Q=l._5O(Q,n))<0?Q:n+2*(Q+1)},l._11O=function(Q,n){var x=l._6O(Q,n),n=l._12O(Q,n);return Q.substring(x,x+2*n)},l._10O=function(Q,n){return l._6O(Q,n)+2*l._12O(Q,n)},l._7O=function(Q,n){for(var x=[],b=l._6O(Q,n),J=(x.push(b),l._12O(Q,n)),L=b,f=0;;){var V=l._10O(Q,L);if(V==x5||2*J<=V-b)break;if(200<=f)break;x.push(V),L=V,f++}return x}},k=(U._90O=f(34),U._91O=a5+f(108),(K=K!=x5&&K?K:{})._4O!=x5&&K._4O||(K._4O={}),K._4O),N=(K._4O.Util=new function(){this._56O=function(Q,n){return(new K._4O._3O)._30O(Q)},this._4A=function(Q,n){return(new K._4O._3O)._36O(Q)},this._11A=function(Q,n){return(new k._3O)._30O(Q)}},K._4O._3O=function(Q){var x=this;x._8O=function(Q,n){if("ss"==Q&&"cj"==n){try{x.md=t._67O._41O._3A()}catch(Q){}x._24O=function(Q){x.md._81O(Q)},x._35O=function(Q){Q=t._2A._69O._68O(Q),x.md._81O(Q)},x._60O=function(){return x.md._72O()[D](t._2A._69O)},x._30O=function(Q){return x._24O(Q),x._60O()},x._36O=function(Q){return x._35O(Q),x._60O()}}},x._24O=function(Q){},x._35O=function(Q){},x._60O=function(){},x._30O=function(Q){},x._36O=function(Q){},x._8O("ss","cj")},D5=function(Q){var n=e_[vZ[7]],x=1,b=!1;if(eh.a!=e_[SZ])return eh.a;if(eh.forEach(function(Q){x*=Q}),x<Q){if(n&&n[1]&&n[0]){var J=n[0],n=(n=n[1]).split(U._90O),J=J.split(U._90O),L=n[3],f=J[3],V=n[7],l=n[11],H=n[15],I=n[19],Z=n[23],n=n[27],J=J[7],V=L+V+l+H+I+Z,E=!Z,H=f===L;if(Z=Z===Uj.toString()[0]?Z+Z+Z:Z){var a=Z&&Z.split(J_("firefox")[3]);if(a)for(var o=0;o<a.length;o++){var B=a[o];if(B[0]===nZ[8]&&(B=B.substring(1)),0<=hZ.indexOf(B)){E=!0;break}}}(b=H&&Xj()(f,J)&&Xj()(V,n)&&E&&(!I||Q<I))&&0<=l.indexOf(Hi.length)&&(D5[Hi.length]=Hi),b&&0<=l.indexOf(Hi.length+1)&&(D5[Hi.length+1]=Hi),b&&0<=l.indexOf(Hi.length+3)&&(D5[Hi.length+3]=Hi),b&&0<=l.indexOf(AZ.length)&&(D5[AZ.length]=AZ),b&&0<=l.indexOf(Gi[0])&&(D5[Gi[0]]=Gi)}b||(lE.prototype._42=$j)}else b=!0,D5[Hi.length]=D5[Hi.length+1]=D5[Hi.length+3]=D5[AZ.length]=D5[Gi[0]]=Hi;return eh.a=b},String.fromCharCode(45),u),j=/^1f+00/,e=(x={_18O:function(Q){return M(Q.replace(/\s+/g,""))},_14O:function(Q){return Q=this._18O(Q),this._15O(Q)},_15O:function(Q){var n;if("2a864886f70d010101"==(Q=this._17O(Q))._61O)return Q=this._16O(Q.key),(n=new Z)._38O(Q.n,Q.e),n},_16O:function(Q){var n={},x=(Q.substr(0,2),U._7O(Q,0));return x.length,Q.substr(x[0],2),n.n=U._11O(Q,x[0]),Q.substr(x[1],2),n.e=U._11O(Q,x[1]),n},_17O:function(Q){var n={},x=(n._40O=x5,U._7O(Q,0)),b=(x.length,x[0]);return Q.substr(b,2),(b=U._7O(Q,b)).length,Q.substr(b[0],2),n._61O=U._11O(Q,b[0]),"06"==Q.substr(b[1],2)?n._40O=U._11O(Q,b[1]):"30"==Q.substr(b[1],2)&&(n._40O={},n._40O.p=U._70O(Q,b[1],[0],"02"),n._40O.q=U._70O(Q,b[1],[1],"02"),n._40O.g=U._70O(Q,b[1],[2],"02")),Q.substr(x[1],2),n.key=U._11O(Q,x[1]).substr(2),n}})._17O?x:x5,C=e._27O=function(Q,n,x){return e._14O(Q)},Q5=(Xj=function(){return function(Q,n){if(Q&&n){if(n=m(n),n=N(n,F5(2,4)),!this||!this.n||n._55O()>this.n._55O())return 0;if(0==(n=y(this._37O(n)[D](F5(2,4)).replace(j,""))).length)return!1;var x=n[0];return n[1]==K._4O.Util._56O(Q,x)}}.bind(C(B5))},EZ.length-ZZ.length);if(0<Q5)for(var n5=0;n5<Q5;n5++)Y=k.Util,T=m;$5=function(Q,n){n=T(n);var x=C(yS),b=Zi.length,J=2*b,n=N(n,F5(b,J)),L=!0;if(L=x&&(f=x[Ii[0]])&&n._55O()<=f._55O()?!1:L)return 0;var f=y(x._37O(n)[D](F5(b,J)).replace(j,""));return 0!=f.length&&(L=f[0],f[1]==Y._11A(Q,L))}}(O),$_(b5,{load:($J={},function(Q,n,x){var b,J=$J[Q],L=x?"c_"+(x.sync?"1":"0")+"_"+(x.post?"1":"0")+"_"+(x.responseType||"H")+"_"+(x.mimeType||"H")+"_"+(x.data?JSON.stringify(x.data):"H"):"";J&&(b=J[L])?b.push(n):($J[Q]||(J=$J[Q]={count:0}),b=J[L]=[n],J.count++,b5.xhrLoad(Q,function(n){delete J[L],J.count--,J.count||delete $J[Q],b.forEach(function(Q){Q(n)})},x))}),asyncEach:function(b,n,J){"function"!=typeof J&&(J=Function.prototype);var L=new Array(b.length),f=0,V=!1;b.forEach(function(Q,x){n(Q,function(Q,n){if(!V)return Q?(V=!0,J(null)):(L[x]=n,++f===b.length?J(L):void 0)})})},xhrLoad:function(Q,x,b){var J=!1,L=(H_(Q)||(J=!0,Q=[Q]),(b=b||{}).sync),f=null,n=b.method||"GET";if(b.post&&(n="POST"),b.method=n,b5.asyncEach(Q,function(Q,n){var x;(Q=b5.beforeLoadURL(Q)).data?n(null,Q.data):(b.url=encodeURI(Q),(x=new nE).onload=function(Q){200===this.status||0===this.status?n(null,x.getResponseText()):n(!0)},x.onerror=function(Q){n(!0)},x.send(b))},function(Q){var n="function"==typeof x;(n||L)&&(f=J&&Q?Q[0]:Q,n&&x(f))}),L)return f}}),e.setPrototypeOf||function(Q,n){return Q.__proto__=n,Q}),QG=e.getPrototypeOf||function(Q){return Q.__proto__},nG=e.freeze,xG=(e.isFrozen,Ha.create=function(Q,n){return function Q(n,x,b,J){var L=J(b),f=new Ha(n,x,b,L);if(!L){for(var V=f.children,l=f.childMap,H=e.keys(b),I=0,Z=H.length;I<Z;++I){var E=Q(f,E=H[I],b[E],J);V.push(E),l[E.name]=E}f.children=nG(V),f.childMap=nG(l)}return nG(f),f}(n5,n5,Q,n)},Ha.prototype.forEach=function(Q,n){for(var x=this.children,b=0,J=x.length;b<J;++b)Q(x[b],n)},Ha),nG=e.freeze,bG=1,JG={main:{mask:1,priority:b5.cameraPriority.main,clearDepth:!1,ignore:!1},top:{mask:2,priority:b5.cameraPriority.top,ignore:!1}},LG="main",fG=JG[LG].mask,VG=function(Q,n,x,b){var J;if(Q=Q||0,x&&n in x)J=x[n].mask;else if(n in JG)J=JG[n].mask,!b&&x&&(x[n]=q7(JG[n]));else{if(b)return Q;var L,b=1;if(32<=(b=x?(L=e.keys(x),ZG.forEach(function(Q){L.indexOf(Q)<0&&L.push(Q)}),L.length):EG))throw new Error("Only 31 render layer can be defined.");b={mask:1<<b,priority:JG[LG].priority},x?x[n]=b:(EG++,JG[n]=b,J=JG[n].mask,ZG=IG(e.keys(JG)),EG=ZG.length,bG++)}return Q|J},lG=function(Q,n,x){var b=0;if("string"==typeof Q)b=VG(b,Q,n,x);else for(var J=0,L=Q.length;J<L;++J)b=VG(b,Q[J],n,x);return b},HG=function(Q,n){return Q&&n&&Q&n},IG=function(Q){return Q.sort(function(Q,n){return JG[Q].priority-JG[n].priority})},ZG=IG(e.keys(JG)),EG=ZG.length,m=($_(b5,{setRenderLayerInfo:function(Q,n){if(VG(0,Q),n){for(var x in n)JG[Q][x]=n[x];n.priority&&(ZG=IG(e.keys(JG)))}},getRenderLayerInfo:function(Q){return JG[Q]}},!0),d.List=function(){this._as=[];var Q,n,x=arguments.length;if(1===x){var b=arguments[0];if(I_(b)&&(b=b._as),H_(b))for(n=b.length,Q=0;Q<n;Q++)this._as.push(b[Q]);else b!=x5&&this._as.push(b)}else if(1<x)for(Q=0;Q<x;Q++)this._as.push(arguments[Q])}),aG=(p1("List",e,{forEach:function(Q,n){this.each(Q,n)},push:function(){for(var Q=0;Q<arguments.length;Q++)this.add(arguments[Q])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(Q,n){return n===n5?this._as.push(Q):this._as.splice(n,0,Q)},addAll:function(Q){I_(Q)&&(Q=Q._as),H_(Q)?G_(this._as,Q):this._as.push(Q)},get:function(Q){return this._as[Q]},slice:function(Q,n){return new m(this._as.slice(Q,n))},remove:function(Q){return 0<=(Q=this._as.indexOf(Q))&&Q<this._as.length&&this.removeAt(Q),Q},removeAt:function(Q){return this._as.splice(Q,1)[0]},set:function(Q,n){return this._as[Q]=n},clear:function(){return this._as.splice(0,this._as.length)},contains:function(Q){return 0<=this._as.indexOf(Q)},indexOf:function(Q){return this._as.indexOf(Q)},each:function(Q,n){for(var x=0,b=this._as.length;x<b;x++){var J=this._as[x];n?Q.call(n,J,x,this):Q(J,x,this)}},reverseEach:function(Q,n){for(var x=this._as.length-1;0<=x;x--){var b=this._as[x];n?Q.call(n,b):Q(b)}},getArray:function(){return this._as},toArray:function(Q,n){if(Q){for(var x,b=[],J=0,L=this._as.length;J<L;J++)x=this._as[J],n?Q.call(n,x)&&b.push(x):Q(x)&&b.push(x);return b}return this._as.concat()},toList:function(Q,n){if(Q){for(var x,b=new m,J=0,L=this._as.length;J<L;J++)x=this._as[J],n?Q.call(n,x)&&b.add(x):Q(x)&&b.add(x);return b}return new m(this)},reverse:function(){this._as.reverse()},sort:function(Q){return this._as.sort(Q||F7),this},toString:function(){return this._as.toString()}}),e.defineProperties(m.prototype,{length:{get:function(){return this._as.length},set:function(Q){this._as.length=Q}}}),new m),oG=($_(aG,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:hj,each:hj,reverseEach:hj,toArray:function(){return[]},toList:function(){return new m},add:pj,addAll:pj,set:pj,remove:pj,removeAt:pj,clear:pj}),d.Notifier=function(){this._f=0}),BG=(p1("Notifier",e,{contains:function(Q,n){if(this._ls)for(var x,b=0,J=this._ls.size();b<J;b++)if(Q===(x=this._ls.get(b)).l&&n===x.s)return!0;return!1},add:function(Q,n,x){Q={l:Q,s:n,a:x},this._ls||(this._ls=new m),this._f?(this._as||(this._as=new m),this._as.add(Q)):Q.a?this._ls.add(Q,0):this._ls.add(Q)},remove:function(Q,n){this._ls&&(this._f?(this._rs||(this._rs=new m),this._rs.add({l:Q,s:n})):this._remove(Q,n))},_remove:function(Q,n){for(var x,b=this._ls,J=0,L=b.size();J<L;J++)if((x=b.get(J)).l===Q&&x.s===n)return void b.removeAt(J)},fire:function(Q){var n=this,x=n._ls;if(n._b=1e4,x){++n._f;try{for(var b,J=0,L=x.size();J<L;J++)(b=x.get(J)).s?b.l.call(b.s,Q):b.l(Q)}catch(Q){h5(function(){throw Q})}finally{if(--n._f)return;if(n._rs){for(L=n._rs.size(),J=0;J<L;J++)b=n._rs.get(J),n._remove(b.l,b.s);delete n._rs}if(n._as){for(L=n._as.size(),J=0;J<L;J++)(b=n._as.get(J)).a?x.add(b,0):x.add(b);delete n._as}}}}}),d.Data=function(){this._id=r7()}),GG=(p1("Data",e,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","styleMap","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:x5,_parent:x5,_children:aG,_childMap:x5,_styleMap:x5,_layer:"0",_renderLayer:LG,_renderLayerMask:fG,_adjustChildrenToTop:!1,getRenderLayerMask:function(){return this._renderLayerMask||fG},getRenderLayer:function(){return this._renderLayer||LG},setRenderLayer:function(Q){var n=VG(0,Q,null,!0),n=(this._renderLayerMask=n,this._renderLayer);this._renderLayer=Q,this.fp("renderLayer",n,this._renderLayer)},testRenderLayer:function(Q){return JG[Q]&&HG(this._renderLayerMask,JG[Q].mask)},getUIClass:function(){return x5},_22Q:function(){return x5},beginTransaction:function(){this._dataModel&&this._dataModel.beginTransaction()},endTransaction:function(){this._dataModel&&this._dataModel.endTransaction()},s:function(Q,n){if(2===arguments.length)this.setStyle(Q,n);else{if(!V_(Q))return this.getStyle(Q);for(var x in Q)this.setStyle(x,Q[x])}return this},fp:function(Q,n,x,b,J){return this.firePropertyChange(Q,n,x,b,J)},firePropertyChange:function(Q,n,x,b,J){if(b){if(b(n,x))return!1}else if(n===x)return!1;return(b=J||{}).property=Q,b.oldValue=n,b.newValue=x,(b.data=this)._dataModel&&this._dataModel.handleDataPropertyChange(b),this.onPropertyChanged(b),!0},onPropertyChanged:function(Q){var n,x,b=this._parent,J=Q.property;E_(b)&&(x="s:ingroup"===J,((n=this.s(ti))&&MG[J]||J===x)&&b._81I(),(n||x)&&b.fp("childChange",!0,!1)),o_(b)&&(MG[J]||"elevation"===J||iG[J]||"scaleTall"===J||"tall"===J)&&b.updateFromChildren(),"s:alwaysOnTop"!==J&&"s:shape3d.alwaysOnTop"!==J||(Q.newValue?this.setRenderLayer("top"):this.setRenderLayer(n5))},_21I:function(Q){if(Q&&this._dataModel)throw"Remove data from dataModel before adding";this._dataModel=Q},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(Q){for(var n=0,x=this._children.toArray(),b=x.length;n<b;n++)x[n].removeFromDataModel()},getId:function(){return this._id},setId:function(Q){this._id=Q},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(Q,n){return this._children.toList(Q,n)},eachChild:function(Q,n){this._children.each(Q,n)},addChild:function(Q,n){var x=this;Q!==x&&(x._children===aG&&(x._children=new m,x._childMap={}),0<=n||(n=x._children.size()),x._childMap[Q._id]||x.isDescendantOf(Q)||(Q._parent&&Q._parent.removeChild(Q),(n<0||n>x._children.size())&&(n=x._children.size()),x._children.add(Q,n),(x._childMap[Q._id]=Q).setParent(x),x.onChildAdded(Q,n),x.fp(uZ,x5,Q)))},onChildAdded:function(Q,n){},removeChild:function(Q){var n;this._childMap&&this._childMap[Q._id]&&(n=this._children.remove(Q),delete this._childMap[Q._id],this.fp(uZ,Q,x5),Q.setParent(x5,n),this.onChildRemoved(Q,n))},onChildRemoved:function(Q,n){},getChildAt:function(Q){return this._children.get(Q)},clearChildren:function(){if(!this._children.isEmpty())for(var Q=0,n=this._children.toArray(),x=n.length;Q<x;Q++)this.removeChild(n[Q])},getParent:function(){return this._parent},setParent:function(Q,n){var x,b,J=this;J._73I||J._parent===Q||J===Q||Q&&Q.isDescendantOf(J)||(x=J._parent,J._parent=Q,J._73I=1,x?(n==x5&&(n=x.getChildren().indexOf(J)),x.removeChild(J)):J._dataModel&&n==x5&&(n=J._dataModel.getRoots().indexOf(J)),Q&&(Q.addChild(J),b=Q.getChildren().indexOf(J)),delete J._73I,J.fp("parent",x,Q,n5,{oldIndex:n,newIndex:b}),J.onParentChanged(x,Q))},onParentChanged:function(Q,n){},hasChildren:function(){return 0<this._children.size()},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(Q){return!!Q&&(this.isDescendantOf(Q)||Q.isDescendantOf(this))},isParentOf:function(Q){return!(!Q||!this._childMap||!this._childMap[Q._id])},isDescendantOf:function(Q){if(!Q||Q.isEmpty())return!1;for(var n=this._parent;n;){if(Q===n)return!0;n=n._parent}return!1},getOwnStyle:function(Q){var n=this._styleMap;return n?n[Q]:n5},getStyle:function(Q){var n=this._styleMap;return n&&(n=n[Q])!==n5?n:o5[Q]},setStyle:function(Q,n){this._styleMap||(this._styleMap={});var x=this._styleMap[Q];n===n5?delete this._styleMap[Q]:this._styleMap[Q]=n,this.fp("s:"+Q,x,n)&&this.onStyleChanged(Q,x,n)},onStyleChanged:function(Q,n,x){},iv:function(Q){this.invalidate(Q)},invalidate:function(Q){this.fp(Q||"*",!1,!0)},toString:function(){return this._displayName||this._name||this._tag||this._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(Q,n){var x=this.s(Oi);this.beginTransaction(),x||this.s(Oi,x={}),n?x[Q]=n:delete x[Q],this.fp(Oi,x5,x),this.endTransaction()},removeStyleIcon:function(Q){var n,x=this.s(Oi);return x&&(n=x[Q],delete x[Q],this.fp(Oi,x5,x)),n},_calcAnchorMatrix3d:function(){},appendAnchorMatrix3d:function(Q){var n,x,b;(this.hasOwnProperty("_anchor")||this.hasOwnProperty("_anchorElevation"))&&(n=(b=this.getAnchor3d()).x-.5,x=b.y-.5,b=b.z-.5,Hs(Q,[-n,-x,-b]))},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,renderLayer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var Q,n={};for(Q in this._styleMap)n[Q]=1;return n},getCurrentPrefix:function(){return this._interactPrefix||sS},ca:function(Q,n){return Q=this.getCurrentPrefix()+Q,2===arguments.length?this.a(Q,n):this.a(Q)}}),d.DataModel=function(){var b=this,J=(b._isDeserializing=0,b._datas=new m,b._dataMap={},b._roots=new m,b._rootMap={},b._fsDataMap={},b._78O={},b._reflectorMap={},b._36I=new oG,b._35I=new oG,b._serializeNotifier=new oG,b._selectionModel=new _G(b),b._29Q=[]),L=b._scheduleCallback=function(){for(var Q=Date.now(),n=0;n<J.length;n++){var x=J[n];x.enabled&&Q-x.lastTime>x.interval&&(x.beforeAction&&x.beforeAction(),x.action&&b.each(function(Q){x.action(Q)}),x.afterAction&&x.afterAction(),x.lastTime=Q)}J.length&&(b._30Q=O.requestAnimationFrame(L))}}),_G=(p1("DataModel",e,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","envmapType","envmap","postProcessingData","init"],_name:n5,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:n5,_init:n5,_envmap:n5,_envmapType:n5,_postProcessingData:n5,sm:function(){return this.getSelectionModel()},mm:function(Q,n,x){this.addDataModelChangeListener(Q,n,x)},umm:function(Q,n){this.removeDataModelChangeListener(Q,n)},md:function(Q,n,x){this.addDataPropertyChangeListener(Q,n,x)},umd:function(Q,n){this.removeDataPropertyChangeListener(Q,n)},mh:function(Q,n,x){this.addHierarchyChangeListener(Q,n,x)},umh:function(Q,n){this.removeHierarchyChangeListener(Q,n)},getAttrObject:function(){return this._attrObject},setAttrObject:function(Q){return this._attrObject=Q},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getFullscreenDatas:function(){return this._fsDataMap},getReflectors:function(){return this._reflectorMap},getDataById:function(Q){return this._dataMap[Q]},removeDataById:function(Q){this.remove(this.getDataById(Q))},toDatas:function(Q,n){return this._datas.toList(Q,n)},each:function(Q,n){this._datas.each(Q,n)},getDataByTag:function(Q){return this._78O[Q]},getTagMap:function(){return this._78O},removeDataByTag:function(Q){this.remove(this.getDataByTag(Q))},add:function(Q,n,x){var b=this,J=Q._id,L=Q._tag,f=b._roots;if(b._dataMap[J])throw"'"+J+"' already exists";L!=x5&&(b._78O[L]=Q),b._dataMap[J]=Q,0<=x?b._datas.add(Q,x):b._datas.add(Q),Q._parent||(b._rootMap[J]=Q,0<=n?f.add(Q,n):f.add(Q)),Q.s("fullscreen")!==n5&&(b._fsDataMap[J]=Q),Q.s("shape3d.reflector")&&(b._reflectorMap[J]=Q),Q._21I(b),b.onAdded(Q),b._36I.fire({kind:"add",data:Q,rootsIndex:n,datasIndex:x})},onAdded:function(Q){},remove:function(Q,n){var x,b,J,L,f,V,l;Q&&(x=this,b=Q._id,J=n&&n.keepStructure,V=n&&n.keepChildren,L=Q.getTag(),Q._dataModel===x&&((f=Q instanceof SV)&&b5.setIsolating(!0),this.beginTransaction(),J?x._removingData||(x._removingData=Q):x.prepareRemove(Q),V||Q.toChildren().each(function(Q){x.remove(Q,n)},x),J?x._removingData===Q&&(Q._parent&&Q._parent.removeChild(Q),delete x._removingData):Q._parent&&Q._parent.removeChild(Q),V=x._datas.remove(Q),delete x._dataMap[b],L!=x5&&delete x._78O[L],x._rootMap[b]&&(delete x._rootMap[b],l=x._roots.remove(Q)),x._fsDataMap[b]&&delete x._fsDataMap[b],x._reflectorMap[b]&&delete x._reflectorMap[b],Q._21I(x5),x.onRemoved(Q),x._36I.fire({kind:Di,data:Q,rootsIndex:l,datasIndex:V}),this.endTransaction(),f&&b5.setIsolating(!1)))},onRemoved:function(Q){},prepareRemove:function(Q){},clear:function(){var Q,n=this;n._datas.size()&&(Q=n._historyManager?this.toJSON():n5,n._datas.toArray().forEach(function(Q){Q._21I(x5)}),n._datas.clear(),n._dataMap={},n._roots.clear(),n._rootMap={},n._fsDataMap={},n._reflectorMap={},n._78O={},n._36I.fire({kind:Ai,json:Q}))},contains:function(Q){return Q&&Q._dataModel===this},handleDataPropertyChange:function(Q){var n,x,b,J,L=Q.data,f=Q.property;"parent"===f?(b=L._id,x=this._rootMap,n=this._roots,L._parent?x[b]&&(delete x[b],n.remove(L)):x[b]||(x[b]=L,n.add(L))):"tag"===f?(x=Q.oldValue,n=Q.newValue,J=this._78O,x!=x5&&delete J[x],n!=x5&&(J[n]=L)):"s:fullscreen"===f?(b=L._id,x=this._fsDataMap,Q.oldValue!=x5&&delete x[b],Q.newValue!=x5&&(x[b]=L)):"s:shape3d.reflector"===f&&(b=L._id,J=this._reflectorMap,Q.oldValue&&delete J[b],Q.newValue&&(J[b]=L)),this.onDataPropertyChanged(L,Q),this._35I.fire(Q)},onDataPropertyChanged:function(Q,n){},addDataModelChangeListener:function(Q,n,x){this._36I.add(Q,n,x)},removeDataModelChangeListener:function(Q,n){this._36I.remove(Q,n)},addSerializeListener:function(Q,n,x){this._serializeNotifier.add(Q,n,x)},removeSerializeListener:function(Q,n){this._serializeNotifier.remove(Q,n)},fireSerializeEvent:function(Q){this._serializeNotifier.fire(Q)},addDataPropertyChangeListener:function(Q,n,x){this._35I.add(Q,n,x)},removeDataPropertyChangeListener:function(Q,n){this._35I.remove(Q,n)},_38I:function(Q,n,x){this._37I&&this._37I.fire({data:Q,oldIndex:n,newIndex:x})},addHierarchyChangeListener:function(Q,n,x){this._37I||(this._37I=new oG),this._37I.add(Q,n,x)},removeHierarchyChangeListener:function(Q,n){this._37I.remove(Q,n)},getSiblings:function(Q){return(Q=Q._parent)?Q._children:this._roots},eachByHierarchical:function(Q,n,x){if(n)return this._eachByHierarchical(Q,n,x);for(var b=0,J=this._roots,L=J.size();b<L;b++)if(!1===this._eachByHierarchical(Q,J.get(b),x))return!1;return!0},_eachByHierarchical:function(Q,n,x){if(x){if(!1===Q.call(x,n))return!1}else if(!1===Q(n))return!1;for(var b=n.size(),J=0;J<b;J++)if(!1===this._eachByHierarchical(Q,n.getChildAt(J),x))return!1;return!0},reverseEachByHierarchical:function(Q,n,x){if(n)return this._reverseEachByHierarchical(Q,n,x);for(var b=this._roots,J=b.size()-1;0<=J;J--)if(!1===this._reverseEachByHierarchical(Q,b.get(J),x))return!1;return!0},_reverseEachByHierarchical:function(Q,n,x){for(var b=n.size()-1;0<=b;b--)if(!1===this._reverseEachByHierarchical(Q,n.getChildAt(b),x))return!1;if(x){if(!1===Q.call(x,n))return!1}else if(!1===Q(n))return!1;return!0},eachByDepthFirst:function(Q,n,x){if(n)return this._11I(Q,n,x);for(var b=0,J=this._roots,L=J.size();b<L;b++)if(!1===this._11I(Q,J.get(b),x))return!1;return!0},_11I:function(Q,n,x){for(var b=n.size(),J=0;J<b;J++)if(!1===this._11I(Q,n.getChildAt(J),x))return!1;if(x){if(!1===Q.call(x,n))return!1}else if(!1===Q(n))return!1;return!0},eachByBreadthFirst:function(Q,n,x){var b=new m;for(n?b.add(n):this._roots.each(b.add,b);0<b.size();)if((n=b.removeAt(0)).eachChild(b.add,b),x){if(!1===Q.call(x,n))return!1}else if(!1===Q(n))return!1;return!0},moveTo:function(Q,n){var x=this.getSiblings(Q),b=x.indexOf(Q);b===n||b<0||0<=n&&n<=x.size()&&(x.remove(Q),n>x.size()&&n--,x.add(Q,n),this._38I(Q,b,n))},moveUp:function(Q){this.moveTo(Q,this.getSiblings(Q).indexOf(Q)-1)},moveDown:function(Q){this.moveTo(Q,this.getSiblings(Q).indexOf(Q)+1)},moveToTop:function(Q){this.moveTo(Q,0)},moveToBottom:function(Q){this.moveTo(Q,this.getSiblings(Q).size())},moveSelectionUp:function(Q){this.beginTransaction(),Q=Q||this.sm();var n=new m;$1(Q,n,this._roots),n.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(Q){this.beginTransaction(),Q=Q||this.sm();var n=new m;W1(Q,n,this._roots),n.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(Q){this.beginTransaction(),Q=Q||this.sm();var n=new m;_1(Q,n,this._roots),n.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(Q){this.beginTransaction(),Q=Q||this.sm();var n=new m;G1(Q,n,this._roots),n.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(Q,n,x){var b=this.getDatas();(x=null==x?b.indexOf(Q):x)===n||x<0||0<=n&&n<=b.size()&&(b.remove(Q),n>b.size()&&n--,b.add(Q,n),this._76I(Q,x,n))},bringForward:function(Q){this.moveToIndex(Q,this.getDatas().indexOf(Q)+1)},bringToFront:function(Q){this.moveToIndex(Q,this.size())},sendBackward:function(Q){this.moveToIndex(Q,this.getDatas().indexOf(Q)-1)},sendToBack:function(Q){this.moveToIndex(Q,0)},bringSelectionForward:function(Q){this.beginTransaction(),Q=Q||this.sm();for(var n=new m,x=this.getDatas(),b=!1,J=0;J<x.size();J++){var L=x.get(x.size()-1-J);Q.contains(L)?b&&n.add(L):b=!0}n.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(Q){this.beginTransaction(),Q=Q||this.sm();for(var n=new m,x=this.getDatas(),b=0;b<x.size();b++){var J=x.get(b);Q.contains(J)&&n.add(J)}n.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(Q){this.beginTransaction(),Q=Q||this.sm();for(var n=new m,x=this.getDatas(),b=!1,J=0;J<x.size();J++){var L=x.get(J);Q.contains(L)?b&&n.add(L):b=!0}n.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(Q){this.beginTransaction(),Q=Q||this.sm();for(var n=new m,x=this.getDatas(),b=0;b<x.size();b++){var J=x.get(x.size()-1-b);Q.contains(J)&&n.add(J)}n.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(Q){this.removeScheduleTask(Q),Q.enabled==x5&&(Q.enabled=!0),Q.interval==x5&&(Q.interval=10),Q.lastTime=Date.now(),this._29Q.push(Q),this._30Q==x5&&(this._30Q=O.requestAnimationFrame(this._scheduleCallback))},removeScheduleTask:function(Q){var n=this._29Q;0<=(Q=n.indexOf(Q))&&n.splice(Q,1),n.length||this._30Q==x5||(O.cancelAnimationFrame(this._30Q),delete this._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(Q){this._historyManager||new d.HistoryManager(this),null!=Q&&this._historyManager.setMaxHistoryCount(Q),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(Q){this._historyManager&&this._historyManager.undo(Q)},redo:function(Q){this._historyManager&&this._historyManager.redo(Q)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(Q){this._historyManager&&this._historyManager.addHistory(Q)},onHistoryManagerChanged:function(){},isDeserializing:function(){return 0<this._isDeserializing},setDeserializing:function(Q){Q?this._isDeserializing++:this._isDeserializing--},isCubicEnvmap:function(){return!1},setCubicEnvmap:function(Q){},setEnvmap:function(Q){var n=this._envmap;n===(this._envmap=Q)&&H_(n)&&H_(Q)&&(n=[]),this.fp("envmap",n,Q)}}),d.SelectionModel=function(Q){this._68O=N5,this._map={},this._73O=new m,this._74I=new oG,this._21I(Q)}),$G=(p1("SelectionModel",e,{ms_fire:1,ms_dm:1,ms:function(Q,n,x){this.addSelectionChangeListener(Q,n,x)},ums:function(Q,n){this.removeSelectionChangeListener(Q,n)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===k5},co:function(Q){return this._map[Q._id]!=x5},ss:function(Q){this.setSelection(Q)},as:function(Q){this.appendSelection(Q)},rs:function(Q){this.removeSelection(Q)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(Q){var n;this._68O===Q||Q!==Ii&&Q!==k5&&Q!==N5||(this.cs(),n=this._68O,this._68O=Q,this.fp("selectionMode",n,Q))},_21I:function(Q){var n=this._dataModel;n!==Q&&(n&&(this.cs(),n.umm(this.handleDataModelChange,this)),(this._dataModel=Q).mm(this.handleDataModelChange,this,!0),this.fp(iZ,n,Q))},dispose:function(){this.cs(),this._dataModel.umm(this.handleDataModelChange,this)},handleDataModelChange:function(Q){var n;Q.kind===Di?(n=Q.data,this.co(n)&&(this._73O.remove(n),delete this._map[n._id],this._75I(Di,new m(n)))):Q.kind===Ai&&this.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(Q){var n;this._filterFunc!==Q&&(this.cs(),n=this._filterFunc,this._filterFunc=Q,this.fp("filterFunc",n,this._filterFunc))},_75I:function(Q,n,x,b){x&&(this._73O.each(function(Q){b[Q._id]?x.remove(Q):x.add(Q)}),n=x.toList()),this._74I.fire({kind:Q,datas:new m(n)})},addSelectionChangeListener:function(Q,n,x){this._74I.add(Q,n,x)},removeSelectionChangeListener:function(Q,n){this._74I.remove(Q,n)},_97O:function(Q,n){for(var x,b=0,J=new m(Q);b<J.size();b++)x=J.get(b),(this._filterFunc&&!this._filterFunc(x)||n&&this.co(x)||!n&&!this.co(x)||!this._dataModel.contains(x))&&(J.removeAt(b),b--);return J},appendSelection:function(Q){var n,x,b,J=this;J._68O!==Ii&&(n=J._73O,(Q=J._97O(Q,!0)).isEmpty()||(J.sg()&&(x=new m(n),b=J._map,n.clear(),J._map={},Q=new m(Q.get(Q.size()-1))),Q.each(function(Q){n.add(Q),J._map[Q._id]=Q}),J._75I("append",Q,x,b)))},removeSelection:function(Q){var n=this._97O(Q),x=0,b=n.size();if(0!==b){for(;x<b;x++){var J=n.get(x);this._73O.remove(J),delete this._map[J._id]}this._75I(Di,n)}},toSelection:function(Q,n){return this._73O.toList(Q,n)},getSelection:function(){return this._73O},each:function(Q,n){this._73O.each(Q,n)},setSelection:function(Q){var n,x,b=this,J=b._73O;b._68O===Ii||J.isEmpty()&&!Q||1===J.size()&&b.ld()===Q||(n=new m(J),x=b._map,J.clear(),b._map={},Q=b._97O(Q,!0),(Q=b.sg()&&1<Q.size()?new m(Q.get(Q.size()-1)):Q).each(function(Q){J.add(Q),b._map[Q._id]=Q}),b._75I("set",x5,n,x))},clearSelection:function(){var Q,n=this._73O;0<n.size()&&(Q=n.toList(),n.clear(),this._map={},this._75I(Ai,Q))},selectAll:function(){var Q=this;if(Q._68O!==Ii){var n,x=Q._dataModel.toDatas();if(Q._filterFunc)for(V=0;V<x.size();V++)n=x.get(V),Q._filterFunc(n)||(x.removeAt(V),V--);for(var b=Q._73O,J=new m(b),L=Q._map,f=(b.clear(),Q._map={},(x=Q.sg()&&1<x.size()?new m(x.get(x.size()-1)):x).size()),V=0;V<f;V++)n=x.get(V),b.add(n),Q._map[n._id]=n;Q._75I("all",x5,J,L)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(Q){return this._map[Q._id]!=x5},getLastData:function(){var Q=this._73O;return 0<Q.size()?Q.get(Q.size()-1):x5},getFirstData:function(){var Q=this._73O;return 0<Q.size()?Q.get(0):x5},isSelectable:function(Q){return!(!Q||this._68O===Ii)&&(!this._filterFunc||this._filterFunc(Q))},getTopSelection:function(){var x=this,b=new m;return x._73O.each(function(Q){for(var n=Q.getParent();n;){if(x.contains(n)){Q=x5;break}n=n.parent}Q&&b.add(Q)}),b}}),function(Q,n,x,b){var J=this,Q=(n||(n=Y5?5:3,b=x=20),{x:0,y:n,width:x,height:b});if(x)for(var L=0;L<x;L++)if(3===x)b=20;else for(var f=0;f<b;f++)J=O||x;T7(Q,{x:w,y:2*w})&&(n=Mi[0]+xi[0]+Ai[1]+$Z.length,Xh.eye=[J[n],J[Q=mi[0]+_Z[0]+Ai[1]+yi.length]],J[n]=J_.eye,J[Q]=J_[cZ])}(),function(Q,n){var x;return(x=a_(n)&&(Q=Q.getDataUI(n))&&Q._88I?Q._88I.rect:x)||n.getRect()});$_(b5,{edgeGroupAgentFunc:x5,graphViewAutoScrollZone:16,graphViewZoomable:!0,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:i.rectSelectBorder,graphViewRectSelectBackground:Qj,graphViewEditPointSize:Y5?17:7,graphViewEditPointBorderColor:i.editPointBorder,graphViewEditPointBackground:i.editPointBackground,setEdgeType:function(Q,n,x){qj[Q]=n,yj[Q]=x},getEdgeType:function(Q){return qj[Q]},getEdgeTypeMap:function(){return qj},getNodeRect:$G},!0);(n={"layout.h":n5,"layout.v":n5,"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":n5,"2d.attachable":!1,"2d.hostable":!1,interactive:!1,preventDefaultWhenInteractive:!0,disableDoubleClick:!1,"image.stretch":"fill",icons:n5,ingroup:!0,"body.color":n5,"2d.gray":!1,fullscreen:n5,"fullscreen.gap":2,"fullscreen.lock":!1,opacity:n5,pixelPerfect:!0,keepAspectRatio:!1,"attach.points":null,"attach.style":null,"attach.close.threshold":16,"vector.layoutable":!1,"clip.direction":"top","clip.percentage":n5,"clip.host":!1,"select.color":O1,"select.width":1,"select.padding":2,"select.type":h,"shadow.interactable":!0,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,shadow2:!1,"shadow2.color":O1,"shadow2.blur":6,"shadow2.offset.x":3,"shadow2.offset.y":3,"border.color":n5,"border.width":2,"border.padding":2,"border.type":h,label:n5,"label.font":n5,"label.color":l7,"label.background":n5,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":n5,"label.max":n5,"label.opacity":n5,"label.scale":1,"label.align":n5,"label.selectable":!0,"label.decoration":n5,label2:n5,"label2.font":n5,"label2.color":l7,"label2.background":n5,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":n5,"label2.max":n5,"label2.opacity":n5,"label2.scale":1,"label2.align":n5,"label2.selectable":!0,"label2.decoration":n5,note:n5,"note.expanded":!0,"note.font":n5,"note.color":v5,"note.background":O1,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":n5,"note.toggleable":!0,"note.border.width":1,"note.border.color":n5,"note.opacity":n5,"note.scale":1,"note.align":n5,note2:n5,"note2.expanded":!0,"note2.font":n5,"note2.color":v5,"note2.background":O1,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":n5,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":n5,"note2.opacity":n5,"note2.scale":1,"note2.align":n5,"group.type":n5,"group.image":n5,"group.image.stretch":"fill","group.repeat.image":n5,"group.repeat.image.stretch":n5,"group.repeat.image.rotation":0,"group.border.repeat.image":n5,"group.border.repeat.image.stretch":n5,"group.border.repeat.image.rotation":0,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":n5,"group.title.color":v5,"group.title.background":i.groupTitleBackground,"group.title.align":Qi,"group.title.orientation":xi,"group.background":i.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":n5,"group.border.color":o,"group.border.radius":n5,"group.border.cap":f7,"group.border.join":V7,"group.border.width.absolute":!1,"group.splitLine":!1,"group.gradient":x5,"group.gradient.color":"#FFF",shape:n5,"shape.background":o,"shape.repeat.image":n5,"shape.repeat.image.stretch":n5,"shape.repeat.image.rotation":0,"shape.border.repeat.image":n5,"shape.border.repeat.image.stretch":n5,"shape.border.repeat.image.rotation":0,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":o,"shape.border.3d":!1,"shape.border.3d.color":n5,"shape.border.3d.accuracy":n5,"shape.border.cap":f7,"shape.border.join":V7,"shape.border.pattern":n5,"shape.gradient":x5,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":L7,"shape.dash.offset":0,"shape.dash.color":r1,"shape.dash.width":n5,"shape.dash.3d":!1,"shape.dash.3d.color":n5,"shape.dash.3d.accuracy":n5,"shape.polygon.side":6,"shape.arc.from":w,"shape.arc.to":l5,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":n5,"shape.gradient.pack":n5,"shape.border.gradient.pack":n5,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":n5,"shape.foreground":n5,"shape.foreground.gradient":x5,"shape.foreground.gradient.color":"#FFF","shape.foreground.clip.direction":"top","shape.foreground.clip.percentage":n5,"shape.regular":!0,"autolayout.gap":n5,"autolayout.hgap":n5,"autolayout.vgap":n5,"edge.type":n5,"edge.points":n5,"edge.segments":n5,"edge.color":o,"edge.width":2,"edge.width.absolute":!1,"edge.repeat.image":null,"edge.offset":0,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":n5,"edge.3d.accuracy":n5,"edge.cap":f7,"edge.join":V7,"edge.source.position":17,"edge.source.anchor.x":n5,"edge.source.anchor.y":n5,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.source.index":-1,"edge.source.percent":0,"edge.target.position":17,"edge.target.anchor.x":n5,"edge.target.anchor.y":n5,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.target.index":-1,"edge.target.percent":0,"edge.pattern":n5,"edge.dash":!1,"edge.dash.pattern":L7,"edge.dash.offset":0,"edge.dash.color":r1,"edge.dash.width":n5,"edge.dash.3d":!1,"edge.dash.3d.color":n5,"edge.dash.3d.accuracy":n5,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":n5,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":n5,"grid.column.percents":n5,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":i.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":i.gridCellBorderColor,"grid.block":n5,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":i.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":l7,"text.gradient.pack":n5,"text.font":H7,"text.shadow":!1,"text.shadow.color":O1,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3,"text.scale.x":1,"text.scale.y":1,"text.gradient":n5,"text.gradient.color":"#FFF","text.decoration":n5,"text.vertical":!1,"text.vertical.gap":1,"text.wrap":!1,"text.letter.gap":null,"text.border.color":O1,"text.border.width":0,keepPosition:!0})[rZ]=n5,$_(o5,n,!0),$_(GG,{_76I:function(Q,n,x){this._39I&&this._39I.fire({data:Q,oldIndex:n,newIndex:x})},addIndexChangeListener:function(Q,n,x){this._39I||(this._39I=new oG),this._39I.add(Q,n,x)},removeIndexChangeListener:function(Q,n){this._39I.remove(Q,n)},prepareRemove:function(Q){Z_(Q)&&(Q.setSource(x5),Q.setTarget(x5)),Q._70O&&Q._70O.toList().each(this.remove,this),Q._69O&&Q._69O.toList().each(function(Q){Q.setHost(x5)}),Q._host&&Q.setHost(x5)},onAdded:function(Q){this.isAutoAdjustIndex()&&this.adjustIndex(Q)},onDataPropertyChanged:function(Q,n){uG[n.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(Q)},isAdjustable:function(Q){return v(Q)||Z_(Q)},isAdjustedToBottom:function(Q){return!!E_(Q)&&Q.isExpanded()&&yG(Q)},adjustIndex:function(Q){this.isHierarchicalRendering()||(this.isAdjustedToBottom(Q)?(this.sendToBottom(Q),Q.eachChild(this.adjustIndex,this)):this.sendToTop(Q))},sendToTop:function(n){var Q,x,b=this;b.contains(n)&&b.isAdjustable(n)&&(x=b._datas,n!==x.get(b.size()-1)&&(Q=x.indexOf(n),x.removeAt(Q),x.add(n),b._76I(n,Q,b.size()-1)),Z_(n)&&((x=n._40I)&&!b.isAdjustedToBottom(x)&&b.sendToTop(x),(x=n._41I)&&!b.isAdjustedToBottom(x)&&b.sendToTop(x)),n._69O&&n._69O.each(function(Q){Q.isRelatedTo(n)||v(n)&&Q.isLoopedHostOn(n)||b.sendToTop(Q)}),n.ISubGraph||E_(n)&&!n.isExpanded()||n._adjustChildrenToTop&&n.eachChild(function(Q){Z_(Q)||b.sendToTop(Q)}))},sendToBottom:function(Q,n){var x,b;Q!==n&&this.contains(Q)&&this.isAdjustable(Q)&&(n&&!this.contains(n)||(x=(b=this._datas).remove(Q),n=n?this._datas.indexOf(n):0,b.add(Q,n),x!==n&&(this._76I(Q,x,n),!(b=Q._parent)||b.ISubGraph||Z_(b)||this.sendToBottom(Q._parent,Q))))}}),$_(kK,{ms_edit:function(Q,n){Q._46O=function(Q){var n=this,x=n.gv.dm(),b=n._index,J=n._89I,L=n._node,f=n._shape,V=n._edge,l=n._77I;L&&J?(this.fi({kind:"endEditRect",event:Q,data:L,direction:J}),x.endTransaction()):f&&0<=b?(n.fi({kind:"endEditPoint",event:Q,data:f,index:b}),x.endTransaction()):V&&0<=b?(n.fi({kind:"endEditPoint",event:Q,data:V,index:b}),x.endTransaction()):l&&(n.fi({kind:"endEditRotation",event:Q,data:l}),x.endTransaction())},Q._78I=function(Q){var n=this,x=(n.autoScroll(Q),n.gv.lp(Q)),b=n._index,J=n._89I,L=n._node,f=n._shape,V=n._edge,l=n._77I;L&&J?(n._80O(x),n.fi({kind:"betweenEditRect",event:Q,data:L,direction:J})):f&&0<=b?(x.e=f.getPoints().get(b).e,f.setPoint(b,x),n.fi({kind:"betweenEditPoint",event:Q,data:f,index:b})):V&&0<=b?(L=V.s(Ri),x.e=L.get(b).e,L.set(b,x),V.fp(Ri,x5,L),n.fi({kind:"betweenEditPoint",event:Q,data:V,index:b})):l&&(J=l.p(),f=l.getScale(),L=w5+K5(x.y-J.y,x.x-J.x),f.y<0&&(L+=w),P5(L)<.04&&(L=0),l.setRotation(L),n.fi({kind:"betweenEditRotation",event:Q,data:l}))},Q._80O=function(Q){var n=this._node,x=this._rect,b=x.x,J=x.y,L=x.width,f=x.height,V=this._89I,l=this._anchor,H=this._matrix,Q=H.tfi(Q);"northwest"===V?x=m7(Q,{x:b+L,y:J+f}):V===Hi?x=m7({x:b,y:Q.y},{x:b+L,y:J+f}):"northeast"===V?x=m7({x:b,y:Q.y},{x:Q.x,y:J+f}):V===li?x=m7({x:Q.x,y:J},{x:b+L,y:J+f}):V===Vi?x=m7({x:b,y:J},{x:Q.x,y:J+f}):"southwest"===V?x=m7({x:Q.x,y:J},{x:b+L,y:Q.y}):"south"===V?x=m7({x:b,y:J},{x:b+L,y:Q.y}):"southeast"===V&&(x=m7({x:b,y:J},Q)),n.setPosition(H.tf(x.x+x.width*l.x,x.y+x.height*l.y)),n.setWidth(x.width),n.setHeight(x.height)},Q._80I=function(Q,n,x,b){var J=this.gv._zoom,J=(this.gv.getEditPointSize()+2)/J;return!!T7({x:n-J/2,y:x-J/2,width:J,height:J},Q)&&(this._89I!==b&&(this._89I=b),!0)},Q._79I=function(Q,n,x){var b=this,J=b.gv,L=n?J.getDataUI(n):x5;if(L=L?L._55O:x5){var f,V,l=J._zoom,H=(J.getEditPointSize()+2)/l,I=J.lp(Q);if(v(n)){if(L._56O&&v(n)&&(f=L._98o,T7({x:f.x-H/2,y:f.y-H/2,width:H,height:H},I)))return b._77I=n,x&&b.fi({kind:"beginEditRotation",event:Q,data:n}),b.setCursor("crosshair"),!0;if(L._43O&&n instanceof YV)for(a=(V=n.getPoints()).size()-1;0<=a;a--)if(f=V.get(a),T7({x:f.x-H/2,y:f.y-H/2,width:H,height:H},I))return b._index=a,b._shape=n,x&&b.fi({kind:"beginEditPoint",event:Q,data:n,index:a}),b.setCursor("crosshair"),!0;if(L._42O)for(var Z=n.getEditControlPoints(),E=["northwest",-1,-1,li,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,Vi,1,0,"northeast",1,-1,Hi,0,-1],a=0,o=Z.length;a<o;a++){var B,G,_,$=Z[a];if(b._80I(I,$.x,$.y,E[3*a]))return $=(b._node=n).getWidth(),_=n.getHeight(),B=n.getAnchor(),b._rect={x:-$*B.x,y:-_*B.y,width:$,height:_},b._anchor=B,b._matrix=n.getMatrix(),$=n.getRotation(),_=f5($),B=V5($),$=E[3*a+1]*P_(n.getScale().x),G=E[3*a+2]*P_(n.getScale().y),_=Math.atan2(-B*$-_*G,_*$-B*G),$=(Math.round(_/(Math.PI/4))+8)%8,b.setCursor([mZ,"nesw-resize",YZ,"nwse-resize",mZ,"nesw-resize",YZ,"nwse-resize"][$]),x&&b.fi({kind:"beginEditRect",event:Q,data:n,direction:b._89I}),!0}}if(L._43O&&Z_(n)&&n.s(gi)===Fi&&(V=n.s(Ri)))for(a=V.size()-1;0<=a;a--)if(f=V.get(a),T7({x:f.x-H/2,y:f.y-H/2,width:H,height:H},I))return b._index=a,b._edge=n,x&&b.fi({kind:"beginEditPoint",event:Q,data:n,index:a}),b.setCursor("crosshair"),!0}return!1}},ms_gv:function(Q,n){Q._currentSubGraph=x5,Q._initView=function(){this._fpsInfo={time:0,fps:0,frames:0}},Q.upSubGraph=function(){this.setCurrentSubGraph(qG(this._currentSubGraph))},Q.isVisible=function(Q){var n=this;if(qG(Q)!==n._currentSubGraph)return!1;if(Z_(Q)){var x=Q._40I,b=Q._41I;if(!x||!b)return!1;if(!(Q.s("edge.independent")||n.isVisible(x)&&n.isVisible(b)))return!1;if(Q.isEdgeGroupHidden())return!1}else for(var J=Q._parent;J&&!J.ISubGraph;){if(E_(J)&&(!J.isExpanded()||!n.isVisible(J)))return!1;J=J._parent}if(Q._parent instanceof SV&&!n.isVisible(Q._parent))return!1;if(Q._refGraph instanceof jV&&!n.isVisible(Q._refGraph))return!1;if(n instanceof T8){if(!Q.s("3d.visible"))return!1}else{if((x=n.getLayersInfo())&&(b=x[Q._layer])&&!1===b.visible)return!1;if(!Q.s("2d.visible"))return!1}return!n._visibleFunc||n._visibleFunc(Q)},Q.handleSelectionChange=function(Q){var x=this;Q.datas.each(function(Q){x.invalidateData(Q);var n=Q._parent;E_(n)&&v(Q)&&Q.s(ti)&&(x.invalidateData(n),n._49I&&n._49I.each(function(Q){x.invalidateData(Q)}))}),x.onSelectionChanged(Q)},Q.onSelectionChanged=function(Q){var n=this.sm();1!==n.size()||"set"!==Q.kind&&"append"!==Q.kind||(Q=n.ld(),this.isAutoMakeVisible()&&this.makeVisible(Q),this.adjustIndex&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(Q))},Q.makeVisible=function(Q){if(Q&&(this.getDataUI?this.getDataUI(Q):this.getData3dUI(Q))){var n=Q,x=qG(Q);for(x!==this._currentSubGraph&&this.setCurrentSubGraph(x);(n=n._parent)&&n!==x;)E_(n)&&n.setExpanded(!0);this._23I=Q,this.iv()}},Q.getLabel=function(Q){var n=Q.getStyle(Ki);return n===n5?Q.getName():n},Q.getLabelBackground=function(Q){return Q.getStyle("label.background")},Q.getLabelColor=function(Q){return Q.getStyle("label.color")},Q.getLabel2=function(Q){return Q.getStyle("label2")},Q.getLabel2Background=function(Q){return Q.getStyle("label2.background")},Q.getLabel2Color=function(Q){return Q.getStyle("label2.color")},Q.getNote=function(Q){return Q.getStyle(ei)},Q.getNoteBackground=function(Q){return Q.getStyle("note.background")},Q.getNote2=function(Q){return Q.getStyle(vi)},Q.getNote2Background=function(Q){return Q.getStyle("note2.background")},Q.handleClick=function(Q,n,x){n?(this.fi({kind:"clickData",event:Q,data:n,part:x}),this.onDataClicked(n,Q)):(this.fi({kind:"clickBackground",event:Q}),this.onBackgroundClicked(Q))},Q.handleDoubleClick=function(Q,n,x){var b=this;O7(Q)&&(n?(b.fi({kind:"doubleClickData",event:Q,data:n,part:x}),b.onDataDoubleClicked(n,Q,x),b.checkDoubleClickOnNote(Q,n,x)||b.checkDoubleClickOnRotation&&b.checkDoubleClickOnRotation(Q,n,x)||(Z_(n)?b.onEdgeDoubleClicked(n,Q,x):n.ISubGraph?b.onSubGraphDoubleClicked(n,Q,x):E_(n)?b.onGroupDoubleClicked(n,Q,x):n.IDoorWindow?b.onDoorWindowDoubleClicked(n,Q,x):n.ICSGBox&&b.onCSGBoxDoubleClicked(n,Q,x))):(b.fi({kind:"doubleClickBackground",event:Q}),b.onBackgroundDoubleClicked(Q)))},Q.onSubGraphDoubleClicked=function(Q,n,x){this.setCurrentSubGraph(Q)},Q.onEdgeDoubleClicked=function(Q,n,x){this.isEditable(Q)||(Q.ISubGraph&&!X7(n)?this.setCurrentSubGraph(Q):Q.s("edge.toggleable")&&Q.toggle())},Q._39Q=function(Q){return!!this.isInteractive(Q)&&this.preventDefaultWhenInteractive(Q)},Q.preventDefaultWhenInteractive=function(Q){return Q.s("preventDefaultWhenInteractive")},Q.onGroupDoubleClicked=function(Q,n,x){Q.s("group.toggleable")&&Q.toggle()},Q.onDoorWindowDoubleClicked=function(Q,n,x){Q.s("dw.toggleable")&&Q.toggle(!0)},Q.onCSGBoxDoubleClicked=function(Q,n,x){this instanceof T8&&(n=this.intersectObject(n,Q))&&Q.s(n.part+".toggleable")&&Q.toggleFace(n.part,!0)},Q.onBackgroundClicked=function(Q){},Q.onBackgroundDoubleClicked=function(Q){this.upSubGraph()},Q.onDataClicked=function(Q,n,x){},Q.onDataDoubleClicked=function(Q,n,x){},Q.onAutoLayoutEnded=function(){},Q.onMoveEnded=function(){},Q.onPanEnded=function(){},Q.onPinchEnded=function(){},Q.onRectSelectEnded=function(){},Q.onZoomEnded=function(){},Q.serialize=function(Q){return this.dm().serialize(Q)},Q.toJSON=function(){return this.dm().toJSON()},Q.deserialize=function(Q,n){var V=this,l=((n=n instanceof BG?{rootParent:n}:f_(n)?{setId:n}:l_(n)?{finishFunc:n}:n||{}).view=V).dm();return n.reset&&(l.setAttrObject({}),l.setLayers(n5),l.setName(n5),l.setAutoAdjustIndex(!0),l.setHierarchicalRendering(!1),l.setBackground(n5),l.setInit(n5),l.setPostProcessingData(n5),l.setEnvmap(n5),l.setEnvmapType(n5),V.disableToolTip(),V instanceof d.graph.GraphView?(V.setZoomable(b5.graphViewZoomable),V.setPannable(b5.graphViewPannable),V.setRectSelectable(b5.graphViewRectSelectable)):V instanceof d.graph3d.Graph3dView&&(V.shadowMap.resetProperties(),V.setDashDisabled(b5.graph3dViewDashDisabled),V.setUvClipEnabled(b5.graph3dViewUvClipEnabled),V.getHighlightHelper().resetProperties(),V.resetHeadlightProperties(),V.resetFogProperties(),V.setBatchInfoMap({}),V.setBatchColorDisabled(b5.graph3dViewBatchColorDisabled),V.setBatchInstancedDisabled(b5.graph3dViewBatchInstancedDisabled),V.setBatchBlendDisabled(b5.graph3dViewBatchBlendDisabled),V.setBatchBrightnessDisabled(b5.graph3dViewBatchBrightnessDisabled),V.setFlowBlendMode(b5.graph3dViewFlowBlendMode),V.setMoveStep(b5.graph3dViewMoveStep),V.setRotateStep(b5.graph3dViewRotateStep),V.setSortable(b5.graph3dViewSortable),V.setSortFunc(n5),V.setSkybox(n5),V.setToneMapping(n5),V.setToneMappingExposure(1))),n.__innerHandler__=function(Q){var x,b,J,n,L,f;f_(l.a("toolTipEnable"))&&(l.a("toolTipEnable")?V.enableToolTip():V.disableToolTip()),H_(l.a("fontFaces"))&&l.a("fontFaces").forEach(function(Q){b5.addFontFace(Q.name,Q.url)}),V instanceof d.graph.GraphView&&(f_(l.a("zoomable"))&&V.setZoomable&&V.setZoomable(l.a("zoomable")),f_(l.a("pannable"))&&V.setPannable&&V.setPannable(l.a("pannable")),f_(l.a("rectSelectable"))&&V.setRectSelectable&&V.setRectSelectable(l.a("rectSelectable")),!0===l.a("fitContent")&&V.fitContent&&V.fitContent(!0,0)),V instanceof d.graph3d.Graph3dView&&((Q=Q.scene)&&Q.shadow!=x5&&V.shadowMap.setShadow(Q.shadow,Q.shadowParams),(f=l.a("sceneContext"))?(f.eye&&V.setEye(f.eye),f.center&&V.setCenter(f.center),L_(f.far)&&V.setFar(f.far),L_(f.near)&&V.setNear(f.near)):(L_(l.a("sceneNear"))&&V.setNear(l.a("sceneNear")),L_(l.a("sceneFar"))&&V.setFar(l.a("sceneFar")),Q&&(Q.eye&&V.setEye(Q.eye),Q.center&&V.setCenter(Q.center))),L_(l.a("sceneDevicePixelRatio"))&&V.setDevicePixelRatio(l.a("sceneDevicePixelRatio")),L_(l.a("sceneFovy"))&&V.setFovy(l.a("sceneFovy")),f_(l.a("sceneOrtho"))&&V.setOrtho(l.a("sceneOrtho")),L_(l.a("sceneOrthoWidth"))&&V.setOrthoWidth(l.a("sceneOrthoWidth")),f_(l.a("sceneShadowEnabled"))&&(l.a("sceneShadowEnabled")?V.enableShadow():V.disableShadow()),L_(l.a("sceneShadowDegreeX"))&&V.setShadowDegreeX(l.a("sceneShadowDegreeX")),L_(l.a("sceneShadowDegreeZ"))&&V.setShadowDegreeZ(l.a("sceneShadowDegreeZ")),L_(l.a("sceneShadowIntensity"))&&V.setShadowIntensity(l.a("sceneShadowIntensity")),l.a("sceneShadowQuality")!=x5&&V.setShadowQuality(l.a("sceneShadowQuality")),l.a("sceneShadowType")&&V.setShadowType(l.a("sceneShadowType")),L_(l.a("sceneShadowRadius"))&&V.setShadowRadius(l.a("sceneShadowRadius")),L_(l.a("sceneShadowBias"))&&V.setShadowBias(l.a("sceneShadowBias")),f_(l.a("sceneDashEnable"))&&V.setDashDisabled(!l.a("sceneDashEnable")),f_(l.a("sceneUvClipEnabled"))&&V.setUvClipEnabled(l.a("sceneUvClipEnabled")),H5(l.a("sceneHighlightMode"))&&V.setHighlightMode(l.a("sceneHighlightMode")),L_(l.a("sceneHighlightWidth"))&&V.setHighlightWidth(l.a("sceneHighlightWidth")),l.a("sceneHighlightColor")&&V.setHighlightColor(l.a("sceneHighlightColor")),l.a("sceneHighlightType")&&V.setHighlightType(l.a("sceneHighlightType")),l.a("sceneHighlightGlow")&&V.setHighlightGlow(l.a("sceneHighlightGlow")),l.a("sceneHighlightStrength")&&V.setHighlightStrength(l.a("sceneHighlightStrength")),f_(l.a("sceneHeadlightEnable"))&&V.setHeadlightDisabled(!l.a("sceneHeadlightEnable")),l.a("sceneHeadlightDirection")!=x5&&V.setHeadlightDirection(l.a("sceneHeadlightDirection")),L_(l.a("sceneHeadlightRange"))&&V.setHeadlightRange(l.a("sceneHeadlightRange")),l.a("sceneHeadlightColor")&&V.setHeadlightColor(l.a("sceneHeadlightColor")),L_(l.a("sceneHeadlightIntensity"))&&V.setHeadlightIntensity(l.a("sceneHeadlightIntensity")),L_(l.a("sceneHeadlightAmbientIntensity"))&&V.setHeadlightAmbientIntensity(l.a("sceneHeadlightAmbientIntensity")),L_(l.a("sceneHeadlightRatioForPhysicalMaterial"))&&V.setHeadlightRatioForPhysicalMaterial(l.a("sceneHeadlightRatioForPhysicalMaterial")),L_(l.a("sceneHeadlightGroup"))&&V.setHeadlightGroup(l.a("sceneHeadlightGroup")),f_(l.a("sceneFogEnable"))&&V.setFogDisabled(!l.a("sceneFogEnable")),l.a("sceneFogMode")&&V.setFogMode(l.a("sceneFogMode")),L_(l.a("sceneFogDensity"))&&V.setFogDensity(l.a("sceneFogDensity")),l.a("sceneFogColor")&&V.setFogColor(l.a("sceneFogColor")),L_(l.a("sceneFogNear"))&&V.setFogNear(l.a("sceneFogNear")),L_(l.a("sceneFogFar"))&&V.setFogFar(l.a("sceneFogFar")),f_(l.a("sceneBatchBrightnessDisabled"))&&V.setBatchBrightnessDisabled(l.a("sceneBatchBrightnessDisabled")),l.a("sceneFlowBlendMode")!==n5&&V.setFlowBlendMode(l.a("sceneFlowBlendMode")),l.a("sceneToneMapping")!==n5&&V.setToneMapping(l.a("sceneToneMapping")),L_(l.a("sceneToneMappingExposure"))&&V.setToneMappingExposure(l.a("sceneToneMappingExposure")),f_(l.a("sceneBatchBlendDisabled"))&&V.setBatchBlendDisabled(l.a("sceneBatchBlendDisabled")),f_(l.a("sceneBatchColorDisabled"))&&V.setBatchColorDisabled(l.a("sceneBatchColorDisabled")),f_(l.a("sceneBatchInstancedDisabled"))&&V.setBatchInstancedDisabled(l.a("sceneBatchInstancedDisabled")),l.a("sceneBatchInfoMap")&&V.setBatchInfoMap(l.a("sceneBatchInfoMap")),l.a("sceneRenderLayerInfoMap")&&V.setRenderLayerInfoMap(l.a("sceneRenderLayerInfoMap")),L_(l.a("sceneMoveStep"))&&V.setMoveStep(l.a("sceneMoveStep")),L_(l.a("sceneRotateStep"))&&V.setRotateStep(l.a("sceneRotateStep")),f_(l.a("sceneSortable"))&&V.setSortable(l.a("sceneSortable")),l_(l.a("sceneSortFunc"))&&V.setSortFunc(l.a("sceneSortFunc")),(f=l.a("sceneSkyboxType")||"sphere")!=x5&&(b=!(x={}),Q=l.a("sceneSkyboxColor"),"sphere"===f?(x.shape3d=f,(n=l.a("sceneSkyboxImage"))&&(x["shape3d.image"]=n,b=!0)):"cube"===f?(x.shape3d=n5,["front","back","left","right","top","bottom"].forEach(function(Q){var n=Q+".image",Q=Q.charAt(0).toUpperCase()+Q.slice(1);(Q=l.a("sceneSkybox"+Q+"Image"))&&(x[n]=Q,b=!0)})):"color"===f&&Q&&(b=!0),b&&(J=new OV,L=l.a("sceneSkyboxDiameter"),L_(L)?J.s3(L,L,L):J.s3(20,20,20),x["body.color"]=l.a("sceneSkyboxBodyColor"),x.envmap=l.a("sceneSkyboxEnvmap"),x["envmap.probe"]=l.a("sceneSkyboxEnvmapProbe"),x.roughness=l.a("sceneSkyboxRoughness"),x["shape3d.light"]=x["all.light"]=l.a("sceneSkyboxLight"),x["light.mask"]=l.a("sceneSkyboxLightMask"),x["headlight.ambientIntensity"]=l.a("sceneSkyboxHeadLightAmbientIntensity"),x["skybox.blur.size"]=l.a("sceneSkyboxBlurSize"),x["skybox.blur.resolution"]=l.a("sceneSkyboxBlurResolution"),x["texture.wrap"]="clampToEdge",x["3d.clipbox.mask"]=pe,x["effect.flow.mask"]=pe,"color"===f&&(x.shape3d="sphere",(L=(n=J.s("shape3d.image"))&&d.Default.getImage(n))&&"CANVAS"===L.tagName||(L=E.createElement("canvas"),n=d.Math.generateUUID(),d.Default.setImage(n,L)),n&&V.getTextureMap()&&V.deleteTexture(n),d.Default.setCanvas(L,2,1024,1),(f=L.getContext("2d")).clearRect(0,0,2,1024),f.beginPath(),f.rect(0,0,2,1024),gh(f,Q,function(Q){return Q},!1,{x:0,y:0,width:2,height:1024}),f.fill(),f.restore(),x["shape3d.image"]=n),J.s(x),["X","Y","Z"].forEach(function(Q){var n=l.a("sceneSkyboxRotation"+Q);L_(n)&&J["setRotation"+Q](n)}),V.setSkybox(J))))},l.deserialize(Q,n.rootParent,n)},Q.isDebugTipShowing=function(){return!!this._debugDiv},Q.showDebugTip=function(){var Q,x,b=this,J=b._debugDiv;J||((J=b._debugDiv=E.createElement("div")).style.position="absolute",J.style.overflow="hidden",J.style.font=b5.debugTipLabelFont,J.style.padding="6px",J.style.backgroundColor=b5.debugTipBackground,J.style.color=b5.debugTipLabelColor,Q=b.getView(),b._79O?Q.insertBefore(J,b._79O):Q.appendChild(J),x=function(){b.redraw();var Q=b._canvas,Q="FPS: "+b._fpsInfo.fps+"<br/>Datas: "+b.dm().getDatas().length+(Q?"<br/>Size: "+Q.width+" * "+Q.height:""),n=b.dm()._historyManager;n&&(Q+="<br/>Undoes: "+n.getHistories().length+" index: "+n.getHistoryIndex()),(n=b.getDebugTip())&&(Q+="<hr>"+n),J.innerHTML=Q,b._isDebugging&&requestAnimationFrame(x)},requestAnimationFrame(x),b._isDebugging=!0)},Q.hideDebugTip=function(){var Q=this._debugDiv;Q&&(delete this._debugDiv,this.getView().removeChild(Q),this._isDebugging=!1)},Q.updateDOMAppendMatrix=function(){var Q=this.getView();Q&&(Q.updateAppendMatrix=!0)},Q.countFrame=function(){var Q,n;this._isDebugging&&(1e3<(Q=Date.now())-(n=this._fpsInfo).time?(n.fps=Math.round(1e5*(n.frames+1)/(Q-n.time))/100,n.time=Q,n.frames=0):n.frames++)}},ms_icons:function(Q,n){Q.getRotation=function(Q,n){return Q==x5?0:Q},Q._15O=function(){var Q=this,n=Q.s(Oi);if(n){var x,b=Q,J=Q.data||Q._data,L=J.getRotation&&J.getRotation(),f=Q._38o={icons:n,rects:{}};for(x in n){var V=n[x],l=S(V.shape3d,J,b);if(!(!1===S(V.visible,J,b)||S(V.for3d,J,b)&&!Q.I3d||l&&!Q.I3d)){var H=l?[l]:S(V.names,J,b),I=H?H.length:0,Z=S(V.position,J,b)||3,E=S(V.offsetX,J,b)||0,a=S(V.offsetY,J,b)||0,o=S(V.direction,J,b)||Vi,B=(G=S(V.gap,J,b))!=x5?G:1,G=S(V.rotation,J,b),_=S(V.keepOrien,J,b),$=S(V.rotationFixed,J,b)?G:Q.getRotation(G,_,Z),W=x5,D=f.rects[x]=new Array(I);L_(L)&&(L_($)?$+=L:$=L),D.rotation=$;for(var A=0;A<I;A++){var u,M,t,i=H[A];l?M=u=0:(i=g(i),u=S(V.width,J,b),M=S(V.height,J,b),u==x5&&(u=kS(i,J)),M==x5&&(M=NS(i,J))),W?o===Vi?E+=u/2:o===li?E-=u/2:o===Hi?a-=M/2:a+=M/2:W={width:u,height:M},Q.I3d?(i=-u/2,t=-M/2,t={width:u,height:M,mat:Q._16O(S(V.autorotate,J,b),Z,W,S(V.face,J,b)||j5,S(V.t3,J,b),S(V.r3,J,b),S(V.rotationMode,J,b),E,a),vs:new oS([i,-t,0,i,-t-M,0,i+u,-t-M,0,i+u,-t,0])}):(t={x:(i=Q.getPosition(Z,E,a,W,S(V.positionFixed,J,b))).x-u/2,y:i.y-M/2,width:u,height:M},Q._68o(t,$)),D[A]=t,o===Vi?E+=u/2+B:o===li?E-=u/2+B:o===Hi?a-=M/2+B:a+=M/2+B}}}}}}});var WG={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},DG={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},AG={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},uG={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},MG={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},tG={"edge.type":1,"edge.group":1},iG={rotation:1,rotationX:1,rotationZ:1,rotation3d:1},rG={rotation:1,position:1,width:1,height:1,anchor:1,scale:1,host:1,"s:vector.layoutable":1},PG={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},cG={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},FG={shape:1,thickness:1,position:1,anchor:1,scale:1},qG=function(Q){if(!Q)return x5;var n,x;if(Z_(Q))return n=Q._40I,x=Q._41I,n&&x&&(n=qG(n))===qG(x)?n:x5;for(var b=Q._parent;Z_(b)&&!b.ISubGraph;)b=b._parent;return b?b.ISubGraph?b:qG(b):x5},wG=function(Q,n,x,b){var J=n.getStyle(x)*b;J&&QS(Q,J),(J=n.getStyle(x+".left")*b)&&(Q.x-=J,Q.width+=J),(J=n.getStyle(x+".right")*b)&&(Q.width+=J),(J=n.getStyle(x+".top")*b)&&(Q.y-=J,Q.height+=J),(J=n.getStyle(x+".bottom")*b)&&(Q.height+=J),Q.width<0&&(Q.width=-Q.width,Q.x-=Q.width),Q.height<0&&(Q.height=-Q.height,Q.y-=Q.height)},yG=function(Q){for(var n,x=0,b=Q.size();x<b;x++)if(n=Q.getChildAt(x),v(n)&&yG(n))return!0;return Q.hasAgentEdges()},KG=function(Q){if(!Q)return x5;for(var n=Q._parent;E_(n);){if(!E_(n._parent))return n.isExpanded()?Q:n;n.isExpanded()||(Q=n),n=n._parent}return Q},UG=function(Q,n){if(!Q||!n)return x5;var x,b,J,L=qG(Q),f=qG(n);if(L===f)return Q;for(;f&&L!==f;)f=qG(f);if(L===f)return Q;(x=new m).add(Q,0);for(var V=Q._parent;v(V)&&!n.isDescendantOf(V);)x.add(V,0),V=V._parent;for(J=x.size(),b=0;b<J;b++){var l=x.get(b);if(E_(l)&&!l.isExpanded())return l;if(l.ISubGraph)return l}return Q},eG=function(Q,n,x){var b,J,L,f="target"===(x="target"!==x?"source":x)?n.getTargetAgent():n.getSourceAgent(),x="edge."+x+".";return Z_(f)?((b=Q.getDataUI(f))._79o(),0<=(J=n.s(x+"index"))?(L=xV(b))[Math.max(0,Math.min(J,L.length-1))]:(J=n.s(x+"percent")||0,J=Math.max(0,Math.min(J,1)),L=NG(b),nV(L,100*J))):vG(Q,f,n.s(x+"position"),n.s(x+"offset.x"),n.s(x+"offset.y"),n.s(x+"anchor.x"),n.s(x+"anchor.y"))},vG=function(Q,n,x,b,J,L,f){if(!n)return x5;var V,l,H,I,Z,E=n.getRotation?n.getRotation():0;return x=L!==n5||f!==n5?(L=L===n5?.5:L,f=f===n5?.5:f,H=n.getScale(),E&&!a_(n,Q)||H.x<0||H.y<0?(V=n.getPosition(),I=n.getWidth(),l=n.getHeight(),Z=n.getAnchor(),new OK(E,V.x,V.y,H.x,H.y).tf((L-Z.x)*I,(f-Z.y)*l)):{x:(V=$G(Q,n)).x+L*V.width,y:V.y+f*V.height}):t1(x,$G(Q,n)),E&&(Z=b*(H=f5(E))-J*(I=V5(E)),J=b*I+J*H,b=Z),x.x+=b,x.y+=J,x},OG=function(Q,n){var x,b,J=function(Q,n){if(!Q||!n)return x5;var x,b,J,L,f,V;if(Q===n){if(!(L=Q.getLoopedEdges()))return x5;L=new m(L)}else{if(f=Q.getAgentEdges(),V=n.getAgentEdges(),!f||!V)return x5;for(b=f.size(),x=0;x<b;x++)J=f.get(x),V.contains(J)&&(L=L||new m).add(J)}if(L)for(x=0;x<L.size();x++)(J=L.get(x)).getStyle(gi)===Fi&&(J._22I(x5),L.removeAt(x),x--);return L}(Q,n);J&&!J.isEmpty()&&(1===J.size()?J.get(0)._22I(x5):(x=new m,b=new m,J.each(function(Q){Q=Q.s("edge.group"),x.contains(Q)||x.add(Q)}),x.sort(),x.each(function(n){b.add(new d.EdgeGroup(J.toList(function(Q){return n===Q.s("edge.group")}),b))}),b.each(function(n){n.each(function(Q){Q._22I(n)})})))},dG=function(Q,n,x){var b=Q._canvas,Q=(Q._zoom,nS(n,b)),n=nS(x,b);return{x:Q.x-n.x,y:Q.y-n.y}},hG=function(Q,n){var x,b,J,L,f,V,l,H,I,Z,E,a;n&&(x=n.rect,b=n.color,J=n.rotation,L=n.labelWidth,f=n.background,V=n.opacity,l=(a=n.scale)!=x5&&1!==a,V!=x5&&(H=Q.globalAlpha,Q.globalAlpha*=V),(J||l)&&(Q.save(),I=x.x+x.width/2,Z=x.y+x.height/2,Jh(Q,I,Z),J&&Lh(Q,J),l&&Q.scale(a,a),Jh(Q,-I,-Z)),f&&Nh(Q,x.x,x.y,x.width,x.height,f),L&&(E=x.width,(a=Q.createLinearGradient(x.x,x.y,x.x+E,x.y)).addColorStop(0,b),a.addColorStop(.9,b),a.addColorStop(1,pZ),b=a,x.width=L),k_(Q,n.ss,x,n.font,b,n.align,n.decoration),L&&(x.width=E),(J||l)&&Q.restore(),V!=x5&&(Q.globalAlpha=H))},pG=function(Q,n){var x,b,J,L,f,V,l,H,I,Z,E,a,o,B,G,_,$;n&&(b=(x=n.rect).x,J=x.y,L=x.width,f=x.height,V=n.background,l=n.backgroundImage,H=n.borderWidth,I=n.borderColor,Z=n.labelWidth,E=n.opacity,a=($=n.scale)!=x5&&1!==$,E!=x5&&(o=Q.globalAlpha,Q.globalAlpha*=E),a&&(Q.save(),B=x.x+x.width/2,_=x.y+x.height/2,Jh(Q,B,_),Q.scale($,$),Jh(Q,-B,-_)),n.expanded?($=L5(8,L/4),B=J+f-8,Q.fillStyle=V,Q.beginPath(),Q.moveTo(b,J),Q.lineTo(b,B),Q.lineTo(b+L/2,B),Q.lineTo(b+L/2,J+f),Q.lineTo(b+L/2+$,B),Q.lineTo(b+L,B),Q.lineTo(b+L,J),Q.closePath(),Q.fill(),H&&(Q.lineWidth=H,Q.lineJoin="round",Q.lineCap="round",I?Q.strokeStyle=I:(Q.strokeStyle=U7(V),Q.beginPath(),Q.moveTo(b+L,J),Q.lineTo(b+L,B),Q.lineTo(b+L/2+$,B),Q.lineTo(b+L/2,J+f),Q.stroke(),Q.strokeStyle=K7(V),Q.beginPath(),Q.moveTo(b+L,J),Q.lineTo(b,J),Q.lineTo(b,B),Q.lineTo(b+L/2,B),Q.lineTo(b+L/2,J+f)),Q.stroke()),l?i7(Q,g(l),dZ,x.x,x.y,x.width,x.height-8,n.data,n.view):(x.height-=8,V=n.color,Z&&((_=Q.createLinearGradient(b,J,b+(G=L),J)).addColorStop(0,V),_.addColorStop(.9,V),_.addColorStop(1,pZ),V=_,x.width=Z),k_(Q,n.ss,x,n.font,V,n.align),Z&&(x.width=G),x.height+=8)):n.icon?jS(Q,g(n.icon),b,J,L,f,n.data,n.view):($=L/2,H&&(Q.lineWidth=H,Q.lineJoin="round",Q.lineCap="round",Q.strokeStyle=I||U7(V),Q.beginPath(),Q.arc(b+$,J+$,$,w5,1.6*w,!0),Q.moveTo(b+$,J+f),Q.lineTo(b+L-$/5,J+$),Q.stroke(),Q.strokeStyle=I||K7(V),Q.beginPath(),Q.arc(b+$,J+$,$,1.6*w,w5,!0),Q.moveTo(b+$,J+f),Q.lineTo(b+$/5,J+$),Q.stroke()),Q.fillStyle=V,Q.beginPath(),Q.arc(b+$,J+$,$,0,l5,!0),Q.moveTo(b+$,J+f),Q.lineTo(b+L-$/5,J+$),Q.lineTo(b+$/5,J+$),Q.closePath(),Q.fill(),Q.fillStyle=n.color,Q.beginPath(),Q.arc(b+$,J+$,$/3,0,l5,!0),Q.fill()),a&&Q.restore(),E!=x5&&(Q.globalAlpha=o))},zG=function(Q,n){return 2*Q<n?Q:n/2},sG=function(Q,n,x,b){if(!Q||!n)return 0;var J=K5(n.y-Q.y,n.x-Q.x);return(J=!x&&n.x<Q.x?J+w:J)+b},XG=function(Q,n,x,b,J,L,f){return f&&(Q.x>n.x||Q.x===n.x&&Q.y>n.y)&&(x=M1[x],J=-J),(f=t1(x,{x:0,y:0,width:S7(Q,n),height:0},L)).x+=b,f.y+=J,(f=new OK(K5(n.y-Q.y,n.x-Q.x)).tf(f)).x+=Q.x,f.y+=Q.y,f},RG=function(Q,x,b,n,J){if(Q._19Q=!0,!b.getEdgeGroup())return n?b.s("edge.gap"):0;if(Z_(b.getSourceAgent())||Z_(b.getTargetAgent()))return 0;var L,f=0,V=0,l=0;return b.getEdgeGroup().getSiblings().each(function(Q){Q.each(function(Q){var n;x.isVisible(Q)&&Q.s(gi)==J&&(n=Q.s("edge.gap"),L?V+=l/2+n/2:L=Q,l=n,Q===b&&(f=V))})}),n?V-f+l:(n=f-V/2,L&&b._40I!==L._40I&&(Q._19Q=!1),n)},gG=function(Q){if(1===(n=Q._getValidSelection()).length){var n,x=(n=n[0])instanceof d.Edge;if((n instanceof d.Shape||x)&&(!(x=x&&n.s("edge.type"))||"points"===x))return(x=Q.gv).isPointEditable&&!x.isPointEditable(n)||!x.isEditable(n)?void 0:n}},SG=d.graph={},Q=function(Q,n,x){HS("ht.graph."+Q,n,x)},mG=(d.layout={},{}),YG=function(Q,n,x,b,J,L,f,V){var l=f._zoom;if(!l)return n;if(l!==f._cacheZoom&&(f._cacheZoom=l,f._cacheImage={}),l*=Q7,b=Math.ceil(b),J=Math.ceil(J),2048<b*l||2048<J*l)return n;var H,I=[n.uuid,b,J,x].join("_"),Z=L.s("state");if(Z&&(I+="_"+Z),(Z=n.cacheRule)&&(l_(Z)?a=Z(L,f):l_(Z.func)&&(a=Z.func(L,f))),a===n5&&L instanceof d.Data){var E=n.dataBindings;if(E){for(var a="",o=E.length-1;0<=o;o--){var B=L.ca(E[o].attr);V_(B)||H_(B)||(a+="_"+B)}a=a.slice(1)}}if(I+="_"+a,b<=J&&b*l<1?(H=J/b,J=(b=1/l)*H):J<=b&&J*l<1&&(H=b/J,b=(J=1/l)*H),b=Math.ceil(b),J=Math.ceil(J),!(Z=f._cacheImage[I])){if(XS=!0,Z=d.Default.toCanvas(n,b,J,x,L,f,V,l),!XS)return n;f._cacheImage[I]=Z}return Z};$_(b5,{setImageCacheRule:function(Q,n){var x,b;for(b in n||"object"!=typeof Q?(x={})[Q]=n:x=Q,x){var J=x[b];H5(b)?(HS=g(b))?HS.cacheRule=J:mG[b]=J:b.cacheRule=J}}});(n={comps:[{type:_i,points:[85,50,70,115,100,71,86,107,88,49,57,100,56,77,108,72,83,75,108,65,75,102,106,51,69,69,76,97,51,113,116,69,84,43,54,43,49,84,79,71,65,100,48,61],borderWidth:1,borderColor:x5}]})[ui]=n[Mi]=160,O.Image&&((aV=new O.Image).src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC",S5("default_blank",aV)),S5("node_image",Nj(30,30,[{type:h,rect:[4,5,22,16],gradient:x7,gradientColor:v1,background:o},{type:h,rect:[2,3,26,20],borderWidth:1,borderColor:o},{type:h,rect:[11,23,8,4],background:o},{type:h,rect:[6,27,18,2],background:o}])),S5("node_icon",Nj(16,16,[{type:h,rect:[2,2,12,10],gradient:x7,gradientColor:v1,background:o},{type:ai,rect:[2,2,12,10],width:1,color:o},{type:h,rect:[6,12,4,2],background:o},{type:h,rect:[4,14,8,1],background:o}])),S5("block_icon",Nj(16,16,[{type:ai,rect:[1,1,14,14],width:1,color:o}])),S5("group_image",Nj(66,39,[{type:h,rect:[44.3,18,18.1,12.8],gradient:x7,gradientColor:v1,background:o},{type:h,rect:[3.3,17.8,18.1,12.8],gradient:x7,gradientColor:v1,background:o},{type:h,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:o,gradient:x7,gradientColor:v1,background:o},{type:h,rect:[26.2,29.4,12.8,4.2],background:o},{type:h,rect:[21.3,33.5,22.5,2.3],background:o},{type:h,rect:[5.3,32.7,14.1,2.1],background:o},{type:h,rect:[9,30.4,6.7,2.4],background:o},{type:h,rect:[50,30.7,6.7,2.4],background:o},{type:h,rect:[46.3,33,14.1,2.1],background:o}])),S5("group_icon",Nj(16,16,[{type:h,rect:[4,12,4,2],background:o},{type:h,rect:[2,13,8,1],background:o},{type:h,rect:[12,12,2,1],background:o},{type:h,rect:[11,13,4,1],background:o},{type:h,rect:[10,7,6,5],gradient:x7,gradientColor:v1,background:o},{type:h,rect:[1,2,10,10],gradient:x7,gradientColor:v1,background:o},{type:ai,rect:[1,2,10,10],width:1,color:o}])),S5("refGraph_icon",Nj(16,16,[{type:"shape",borderWidth:1,borderColor:o,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:o,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),S5("edge_icon",Nj(16,16,[{type:h,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:x7,gradientColor:v1,background:o},{type:h,rect:[10.8,1,4,4],background:o},{type:h,rect:[1,11,4,4],background:o}])),S5("subGraph_image",Nj(72,45,[{type:_i,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:x7,gradientColor:v1,background:o},{type:h,rect:[29.6,30.7,3.6,1.8],background:o},{type:h,rect:[28.4,32.3,6,1.2],background:o},{type:h,rect:[37.3,32,10.8,1.8],background:o},{type:h,rect:[39.1,29.9,7.2,2.3],background:o},{type:h,rect:[26.6,23.7,9.6,7.2],gradient:x7,gradientColor:v1,background:o},{type:h,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:o,gradient:x7,gradientColor:v1,background:o}])),S5("subGraph_icon",Nj(17,17,[{type:_i,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:x7,gradientColor:v1,background:o}])),S5("shape_icon",Nj(16,16,[{type:_i,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:o}])),S5("polyline_icon",Nj(16,16,[{type:_i,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:o},jj(7.5,.4),jj(7.5,6.3),jj(13.6,6.3),jj(13.6,14),jj(.7,13.9),jj(.7,.3)])),S5("grid_icon",Nj(16,16,[{type:h,rect:[1,1,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[6,1,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[11,1,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[11,6,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[6,6,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[1,6,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[11,11,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[6,11,4,4],background:o,gradient:x7,gradientColor:v1},{type:h,rect:[1,11,4,4],background:o,gradient:x7,gradientColor:v1}])),S5("light_icon",Nj(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:o},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:o,gradient:x7,gradientColor:v1,background:{func:function(Q){return Q=Q?Q.s(de):x5,H_(Q)?"rgb("+e5(255*Q[0])+","+e5(255*Q[1])+","+e5(255*Q[2])+")":Q||o}}}])),S5("text_icon",Nj(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:o}])),S5("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),S5("columnChart_image",{fitSize:!0,boundExtend:150,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),S5("lineChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),S5("pieChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var TG=function(Q,n,x,b,J,L){var f,V,l,H,I,Z=[],E=-((b=Math.abs(b)>2*Math.PI?2*Math.PI:b)/(f=Math.ceil(Math.abs(b)/(Math.PI/4)))),a=-x;if(0<f){b=Q+Math.cos(x)*J,x=n+Math.sin(-x)*L,Z.push({x:b,y:x});for(var o=0;o<f;o++)I=(a+=E)-E/2,V=Q+Math.cos(a)*J,l=n+Math.sin(a)*L,H=Q+Math.cos(I)*(J/Math.cos(E/2)),I=n+Math.sin(I)*(L/Math.cos(E/2)),Z.push({x:H,y:I}),Z.push({x:V,y:l})}return Z},kG=function(Q){if(Q){var n=Q._data;if(n instanceof d.Shape)return{points:n.getPoints(),segments:n.getSegments()};if(n instanceof d.Edge&&(n=Q._78o)){var Q=n.type,x=n.points,b=n.segments,J=n.edgeTypeInfo;if(!Q||x){var L=(f=n.sourcePoint).x,f=f.y,V=(l=n.targetPoint).x,l=l.y;if(Q)b?((H=new m({x:L,y:f})).addAll(x),H.add({x:V,y:l}),I=new m(b._as)):(H=new m({x:L,y:f}),x.each(function(Q){H.add(Q)}),H.add({x:V,y:l}));else if(n.looped)for(var H=new m(TG(L,f,0,2*Math.PI,n.radius,n.radius)),I=new m([1]),Z=0;Z<(H.size()-1)/2;Z++)I.add(3);else H=new m,n.center?(H.add({x:n.c1.x,y:n.c1.y}),H.add({x:L,y:f}),H.add({x:V,y:l}),H.add({x:n.c2.x,y:n.c2.y})):(H.add({x:L,y:f}),H.add({x:V,y:l}))}else J&&(H=new m(J.points._as),J.segments&&(I=new m(J.segments._as)));return{points:H,segments:I}}}},NG=function(Q,n,x){if(null==n){if(!(Q=kG(Q)))return;n=Q.points,x=Q.segments}if(n){if("number"==typeof(n=Array.isArray(n)?new m(n):n).get(0)){for(var b=new d.List,J=0;J<n.size();J+=2)b.add({x:n.get(J),y:n.get(J+1)});n=b}if(!x){x=[1];for(var L=n.length-1;0<L;L--)x.push(2)}Array.isArray(x)&&(x=new m(x));for(var f=Yh(n._as,x._as,50),V=f.length,l=[],J=0;J<V;J++){var H=f[J];1<H.length&&l.push(H)}return l}},jG=function(Q){for(var n=0,x=Q.length-1,b=0;b<x;b++){var J=Q[b],L=(f=Q[b+1]).x-J.x,f=f.y-J.y;n+=Math.sqrt(L*L+f*f)}return n},CG=function(Q,n){for(var x=0,b=n.length,J=0;J<b;J++)if(Q<(x+=n[J]))return J;return Math.min(J,b-1)},QV=function(Q,n){for(var x=0,b=0,J=Q.length-1,L=0;L<J;L++){var f=Q[L],V=Q[L+1],l=V.x-f.x,H=V.y-f.y;if(n<(x+=V=Math.sqrt(l*l+H*H))){x-=V,b=L;break}}var I=Q[b],Z=Q[b+1],Z=Math.atan2(Z.y-I.y,Z.x-I.x),E=n-x,H=Math.sin(Z)*E,l=Math.cos(Z)*E;return{x:I.x+l,y:I.y+H}},nV=function(Q,n){if(Q){var x;if(0===n)x=Q[0][0];else if(100===n)x=(Q=Q[Q.length-1])[Q.length-1];else{for(var b=0,J=[],L=Q.length,f=0;f<L;f++){var V=Q[f];b+=V=jG(V),J.push(V)}for(var l=CG(n=b*n/100,J),H=0,I=0;I<l;I++)H+=J[I];x=QV(Q[l],n-=H)}return x}},xV=function(Q){for(var n,x,b,J,L,f=[],V=-1,l=0,H=((b=Q instanceof lE?(x=(n=kG(Q)).points,n.segments):(x=Q,arguments[1]))||x).length;l<H;l++){if(3===(J=b?b.get(l):1))L=2;else if(4===J)L=3;else{if(5===J)continue;L=1}V+=L,f.push(x.get(V))}return f},bV=($_(b5,{_edgeProtectMethod:{getStraightLinePoints:NG,calculateLineLength:jG,calcSegmentIndexByDistance:CG,calculatePointAlongLine:QV,getPercentPosition:nV,getRealPointsFromDataUI:xV}}),function(Q,n){for(var x=Q.vertices,b=0;b<x.length;b++){var J=x[b],L=J.y;J.y=J.z,J.z=-L,n&&(J.y+=n)}}),JV=function(Q){for(var n,x,b,J,L,f,V=[],l=[],H=[],I=Q.faces,Z=0,E=I.length;Z<E;Z++,0){var a=I[Z];1===a.i?(n||(n=[],x=[],b=[]),LV(a,Z,0,0,Q,n,b,x)):2===a.i?(J||(J=[],L=[],f=[]),LV(a,Z,0,0,Q,J,f,L)):LV(a,Z,0,0,Q,V,H,l)}return{vs:V,uv:l,ns:H,top_vs:n,top_uv:x,top_ns:b,bottom_vs:J,bottom_uv:L,bottom_ns:f}},LV=function(Q,n,x,b,J,L,f,V){var l,H,I,Z=J.vertices,J=J.faceVertexUvs,E=Z[Q.a],a=Z[Q.b],Z=Z[Q.c];L.push(E.x,E.y,E.z,a.x,a.y,a.z,Z.x,Z.y,Z.z);3===(L=Q.vertexNormals).length?(l=L[0],H=L[1],I=L[2]):l=H=I=Q.normal,f.push(l.x,l.y,l.z,H.x,H.y,H.z,I.x,I.y,I.z),E=J[0][n][0],a=J[0][n][1],Z=J[0][n][2];V.push(E.x,E.y,a.x,a.y,Z.x,Z.y)},fV=(WJ=new I5,DJ=new I5,AJ=new I5,uJ=new I5,MJ=new I5,tJ=new I5,iJ=new I5,rJ=new I5,PJ=new I5,cJ=new I5,FJ=new I5,qJ=new I5,Ea.prototype._findVertex=function(Q,n,x){return qJ.fromArray(Q,3*n),x&&qJ.applyMatrix4(x),Q=[qJ.x,qJ.y,qJ.z].join(","),(n=this._vertexMap[Q])||((x=qJ.clone())._key=Q,this._vertexMap[Q]=n=x),n},Ea.prototype._findLine=function(Q,n){var x=[Q,n];return Q._key>n._key&&x.reverse(),x._key=[x[0]._key,x[1]._key].join("|"),(Q=this._lineMap[x._key])||((this._lineMap[x._key]=Q=x)._triangles={},x._planes={},this._lineList.push(x)),Q},wJ=new I5(1,0,0),yJ=new I5(0,1,0),KJ=new I5(0,0,1),UJ=new I5,eJ=new I5,vJ=new x,Ea.prototype._addTriangle=function(Q,n,x,b,J,L,f,V){var l,H=this._findVertex(Q,x,L),I=this._findVertex(Q,b,L),Q=this._findVertex(Q,J,L),L=this._findLine(H,I),Z=this._findLine(I,Q),E=this._findLine(Q,H);n?(l=(new I5).fromArray(n,3*x),x=(new I5).fromArray(n,3*b),b=(new I5).fromArray(n,3*J),f&&(l.applyMatrix3(f),x.applyMatrix3(f),b.applyMatrix3(f)),l._key=Ba(l,V),x._key=Ba(x,V),b._key=Ba(b,V),aa(L,0,l,I,x,Q,b),aa(Z,0,x,Q,b,H,l),aa(E,0,b,H,l,I,x)):(eJ.subVectors(Q,I),UJ.subVectors(I,H),(l=(new I5).crossVectors(UJ,eJ))._key=Ba(l,V),oa(L,Q,l),oa(Z,H,l),oa(E,I,l))},Ea.prototype._toLineVS=function(Q){for(var n=this._lineList,x=0,b=n.length;x<b;++x){var J,L=n[x],f=!1;for(J in L._triangles)if(1==e.keys(L._triangles[J]).length){Q.push(L[0].x,L[0].y,L[0].z,L[1].x,L[1].y,L[1].z),f=!0;break}if(!f)for(var V in L._planes)if(1==L._planes[V]._vertices.length){Q.push(L[0].x,L[0].y,L[0].z,L[1].x,L[1].y,L[1].z),f=!0;break}}},[function(Q,n){var x,b,J,L,f,V,l,H;if((A=Q._ctlineModel)||(Q._ctlineModel=A=[]),A[0])return A[0];var I,Z,E,a,o,B,G,_,$,W=H_(Q)?Q:[Q],D=["","top_","bottom_"],A=[],u=[];for(HO(W,n,u),x=0,b=u.length;x<b;x++)if((l=u[x])&&(H=l.mesh))for(F8(H),J=0,L=D.length;J<L;J++)if(V=H[D[J]+"lvs"])for(G=A.length,_=V.length,A.length=G+_,$=0;$<_;++$,++G)A[G]=V[$];else if(f=H[D[J]+"vs"]){for(var M=H[D[J]+"is"],t=l.matrix,i=M?M.length:f.length/3,r=0;r<i-1;)B=M?(I=M[r],Z=M[r+1],E=M[r+2],a=M[r+3],o=M[r+4],M[r+5]):(Z=(I=r)+1,E=r+2,a=r+3,o=r+4,r+5),WJ.fromArray(f,3*I),DJ.fromArray(f,3*Z),AJ.fromArray(f,3*E),uJ.fromArray(f,3*a),MJ.fromArray(f,3*o),tJ.fromArray(f,3*B),t&&(WJ.applyMatrix4(t),DJ.applyMatrix4(t),AJ.applyMatrix4(t),uJ.applyMatrix4(t),MJ.applyMatrix4(t),tJ.applyMatrix4(t)),r+=3*function(Q,n,x,b,J){for(var L,f=[n,x,b],V=[J,MJ,tJ],l=[],H=f.length,I=!0;H--&&I;){for(var Z=f[H],E=V.length,a=!1;E--;)if(Z.equals(V[E])){V.splice(E,1),l.push(Z),a=!0;break}if(!a){if(L){I=!1;break}L=Z}}return I&&2===l.length&&(J=V[0],iJ.subVectors(L,l[0]),PJ.subVectors(J,l[0]),rJ.subVectors(L,l[1]),iJ.x*rJ.y*PJ.z+rJ.x*PJ.y*iJ.z+PJ.x*iJ.y*rJ.z-PJ.x*rJ.y*iJ.z-PJ.y*rJ.z*iJ.x-PJ.z*rJ.x*iJ.y<1e-6&&(cJ.subVectors(J,l[1]),FJ.subVectors(l[1],l[0]),Za(FJ,iJ)&&Za(FJ,PJ)&&(FJ.negate(),Za(FJ,rJ)&&Za(FJ,cJ))))?(Q.push(l[1].x,l[1].y,l[1].z),Q.push(L.x,L.y,L.z),Q.push(L.x,L.y,L.z),Q.push(l[0].x,l[0].y,l[0].z),Q.push(l[0].x,l[0].y,l[0].z),Q.push(J.x,J.y,J.z),Q.push(J.x,J.y,J.z),Q.push(l[1].x,l[1].y,l[1].z),2):(Q.push(n.x,n.y,n.z),Q.push(x.x,x.y,x.z),Q.push(x.x,x.y,x.z),Q.push(b.x,b.y,b.z),Q.push(b.x,b.y,b.z),Q.push(n.x,n.y,n.z),1)}(A,WJ,DJ,AJ,uJ);r<i&&(E=M?(I=M[r],Z=M[r+1],M[r+2]):(Z=(I=r)+1,r+2),WJ.fromArray(f,3*I),DJ.fromArray(f,3*Z),AJ.fromArray(f,3*E),t&&(WJ.applyMatrix4(t),DJ.applyMatrix4(t),AJ.applyMatrix4(t)),A.push(WJ.x,WJ.y,WJ.z),A.push(DJ.x,DJ.y,DJ.z),A.push(DJ.x,DJ.y,DJ.z),A.push(AJ.x,AJ.y,AJ.z),A.push(AJ.x,AJ.y,AJ.z),A.push(WJ.x,WJ.y,WJ.z))}return Q._ctlineModel[0]=A},function(Q,n,x){var b,J,L,f,V,l,H,I=Q._ctlineModel;if(I||(Q._ctlineModel=I=[]),(I=I[1])&&I.epsilon===x)return I;(I=[]).epsilon=x;var Z,E,a,o=H_(Q)?Q:[Q],B=["","top_","bottom_"],G=new Ea,_=[];for(HO(o,n,_),b=0,J=_.length;b<J;b++)if((l=_[b])&&(H=l.mesh))for(F8(H),L=0,f=B.length;L<f;L++)if(V=H[B[L]+"vs"])for(var $=H[B[L]+"is"],W=l.matrix,D=$?$.length:V.length/3,A=0,A=0;A<D;A+=3)a=$?(Z=$[A],E=$[A+1],$[A+2]):(E=(Z=A)+1,A+2),G._addTriangle(V,n5,Z,E,a,W,n5,x);return G._toLineVS(I),Q._ctlineModel[1]=I},function(Q,n,x){var b,J,L,f,V,l,H,I=Q._ctlineModel;if(I||(Q._ctlineModel=I=[]),(I=I[2])&&I.epsilon===x)return I;(I=[]).epsilon=x;var Z,E,a,o=H_(Q)?Q:[Q],B=["","top_","bottom_"],G=new Ea,_=[];for(HO(o,n,_),b=0,J=_.length;b<J;b++)if((l=_[b])&&(H=l.mesh))for(F8(H),L=0,f=B.length;L<f;L++)if(V=H[B[L]+"vs"])for(var $,W=($=l.matrix)?vJ.getNormalMatrix($):null,D=H[B[L]+"is"],A=H[B[L]+"ns"],u=D?D.length:V.length/3,M=0,M=0;M<u;M+=3)a=D?(Z=D[M],E=D[M+1],D[M+2]):(E=(Z=M)+1,M+2),G._addTriangle(V,A,Z,E,a,$,W,x);return G._toLineVS(I),Q._ctlineModel[2]=I}]),VV=function(Q,n,x,b,J,L,f,V,l,H){x==x5&&(x=!0),b==x5&&(b=!0),f==x5&&(f=1),V==x5&&(V=0);var I=new DV,Z=(mh(I,Q,n,l),I=I.toShapes(),n5);return H&&(H.length?Z={minX:H[0],minY:-H[3],maxX:H[2],maxY:-H[1]}:(Z={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},I.forEach(function(Q){Q=Q.getBoundingBox(),Z.minX=L5(Q.minX,Z.minX),Z.minY=L5(Q.minY,Z.minY),Z.maxX=J5(Q.maxX,Z.maxX),Z.maxY=J5(Q.maxY,Z.maxY)}))),JV(new KV(I,{top:x,bottom:b,curveSegments:J,amount:f,repeatUVLength:L,boundingBox:Z},-f/2+V))},lV=function(Q,n){this.repeatUVLength=Q,this._bb=n},HV=(lV.prototype={generateTopUV:function(Q,n,x,b,J,L,f){var V,l,H,I=(Q=Q.vertices)[b].x,b=Q[b].y,Z=Q[J].x,J=Q[J].y,E=Q[L].x,Q=Q[L].y;return n=(L=this.repeatUVLength)?(l=V=0,H=L):(this._bb||(this._bb=n.getBoundingBox()),V=(L=this._bb).minX,l=L.minY,H=L.maxX-V,L.maxY-l),f?[new R((I-V)/H,(b-l)/n),new R((Z-V)/H,(J-l)/n),new R((E-V)/H,(Q-l)/n)]:[new R((I-V)/H,1-(b-l)/n),new R((Z-V)/H,1-(J-l)/n),new R((E-V)/H,1-(Q-l)/n)]},generateBottomUV:function(Q,n,x,b,J,L){return this.generateTopUV(Q,n,x,b,J,L,!0)},generateSideWallUV:function(Q,n,x,b,J,L,f,V,l,H,I,Z){if(!this._cl){for(var E=[],a=0,o=x.length,B=0;B<o;B++){var G=x[B],_=x[(B+1)%o],$=G.x-_.x,G=G.y-_.y,_=r5($*$+G*G);E.push(a),a+=_}for(B=0;B<o;B++)E[B]/=a;this._cl=E}var W=1-l/H,l=1-(l+1)/H;return(H=(E=this._cl)[I])<(I=E[Z])&&(H+=1),[new R(H,W),new R(I,W),new R(I,l),new R(H,l)]}},function(Q,n,x,b,J,L){this.a=Q,this.b=n,this.c=x,this.i=L,this.normal=b instanceof I5?b:new I5,this.vertexNormals=b instanceof Array?b:[]}),IV=(HV.prototype={constructor:HV},[-8,14,0,14,3,4,6,8,-1]),ZV=function(){if(ZV.eye!=x5)return ZV.eye;for(var Q=Xh.eye,n=IV,x=BG.prototype.getClassName(),b="",J=!1,x=+new O[x.substr(3,3)+mZ[0]],L=0;L<n.length;L++){var f=n.length-L;b+=L%2==0?n[L]+f+"":n[L]-f+""}for(L=0;L<4;L++)b+=0;if((b=b*b.length/b.length)<x){if(Q&&Q[0]&&Q[4/h.length]){for(var V,l,H,I,Z,E,a,o,B=Q[0],G=Q[1],_="",$=0,L=0;L<G.length;L++)'"'===G[L]?o?(o=!1,$%2!=0&&(V==x5?V=_:l==x5?l=_:H==x5?H=_:I==x5?I=_:Z==x5?Z=_:E==x5?E=_:a==x5&&(a=_)),$++,_=""):o=!0:o&&(_+=G[L]);for(var W,D,A,u="",M=0,L=0;L<B.length;L++)'"'===B[L]?W?(W=!1,M%2!=0&&(D==x5?D=u:A==x5&&(A=u)),M++,u=""):W=!0:W&&(u+=B[L]);var Q=V+l+H+I+Z+E,t=!E||E===Lj||!Lj&&E===ej.toString()[0];if(!t&&E)for(var i,L=0,r=E.length;L<r;L++)E[L]===oZ[4]?i===Lj?t=LZ:i[0]===Ci[7]&&Lj&&0<=Lj.indexOf(i.substr(1))?t=VZ:i=x5:(i==x5?i=E[L]:i+=E[L],L===r-1&&(i===Lj?t=LZ:i[0]===Ci[7]&&Lj&&0<=Lj.indexOf(i.substr(1))&&(t=VZ)));(J=$5(Q,a)&&$5(D,A)&&D===V&&t&&(!Z||x<Z))&&0<=H.indexOf(zj[0])&&(ZV[zj[0]]=1),J&&0<=H.indexOf(1)&&(ZV[1]=1),J&&0<=H.indexOf(3)&&(ZV[2]=1),J&&0<=H.indexOf(4)&&(ZV[3]=1),J&&0<=H.indexOf(7)&&(ZV[4]=1),J&&0<=H.indexOf(iZ[1])&&(ZV[iZ[1]]=1),J&&0<=H.indexOf(yi[0])&&(ZV[yi[0]]=1)}}else J=!0,ZV[zj[0]]=ZV[1]=ZV[2]=ZV[3]=ZV[4]=ZV[iZ[1]]=ZV[yi[0]]=1;return ZV.eye=J},EV=function(){},aV=EV.prototype,oV=(aV.getPointAt=function(Q){return Q=this.getUtoTmapping(Q),this.getPoint(Q)},aV.getPoints=function(Q){Q=Q||5;for(var n=[],x=0;x<=Q;x++)n.push(this.getPoint(x/Q));return n},aV.getSpacedPoints=function(Q){Q=Q||5;for(var n=[],x=0;x<=Q;x++)n.push(this.getPointAt(x/Q));return n},aV.getLength=function(){var Q=this.getLengths();return Q[Q.length-1]},aV.getLengths=function(Q){if(Q=Q||this.__arcLengthDivisions||200,this.cacheArcLengths&&this.cacheArcLengths.length==Q+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n,x,b=[],J=this.getPoint(0),L=0;for(b.push(0),x=1;x<=Q;x++)L+=(n=this.getPoint(x/Q)).distanceTo(J),b.push(L),J=n;return this.cacheArcLengths=b},aV.getUtoTmapping=function(Q,n){for(var x,b=this.getLengths(),J=0,L=b.length,f=n||Q*b[L-1],V=0,l=L-1;V<=l;)if((x=b[J=t5(V+(l-V)/2)]-f)<0)V=J+1;else{if(!(0<x)){l=J;break}l=J-1}return b[J=l]==f?J/(L-1):(J+(f-(n=b[J]))/(b[J+1]-n))/(L-1)},aV.getTangent=function(Q){var n=Q-1e-4,n=(1<(Q=Q+1e-4)&&(Q=1),this.getPoint(n=n<0?0:n));return this.getPoint(Q).clone().sub(n).normalize()},aV.getTangentAt=function(Q){return Q=this.getUtoTmapping(Q),this.getTangent(Q)},EV.create=function(Q,n){return Q.prototype=O_(EV.prototype),Q.prototype.getPoint=n,Q},function(){this.curves=[],this.autoClose=!1}),BV=((x=oV.prototype=O_(aV)).add=function(Q){this.curves.push(Q)},x.closePath=function(){var Q=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);Q.equals(n)||this.curves.push(new iV(n,Q))},x.getPoint=function(Q){for(var n,x,b=Q*this.getLength(),J=this.getCurveLengths(),L=0;L<J.length;){if(J[L]>=b)return x=1-(J[L]-b)/(n=this.curves[L]).getLength(),n.getPointAt(x);L++}return null},x.getLength=function(){var Q=this.getCurveLengths();return Q[Q.length-1]},x.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;for(var Q=[],n=0,x=this.curves.length,b=0;b<x;b++)n+=this.curves[b].getLength(),Q.push(n);return this.cacheLengths=Q},x.getTransformedPoints=function(Q){return this.getPoints(Q)},x.getBoundingBox=function(){for(var Q,n,x,b,J,L=this.getPoints(),f=Q=Number.NEGATIVE_INFINITY,V=x=Number.POSITIVE_INFINITY,l=L[0]instanceof I5,H=new(l?I5:R),I=0,Z=L.length;I<Z;I++)(J=L[I]).x>f&&(f=J.x),J.x<V&&(V=J.x),J.y>Q&&(Q=J.y),J.y<x&&(x=J.y),l&&(J.z>n&&(n=J.z),J.z<b&&(b=J.z)),H.add(J);var E={minX:V,minY:x,maxX:f,maxY:Q};return l&&(E.maxZ=n,E.minZ=b),E},function(Q){oV.call(this),this.actions=[],Q&&this.fromPoints(Q)}),x=BV.prototype=O_(oV.prototype),GV="moveTo",_V="quadraticCurveTo",$V="bezierCurveTo",WV="ellipse",DV=(x.fromPoints=function(Q){this.moveTo(Q[0].x,Q[0].y);for(var n=1,x=Q.length;n<x;n++)this.lineTo(Q[n].x,Q[n].y)},x.moveTo=function(Q,n){var x=Array.prototype.slice.call(arguments);this.actions.push({action:GV,args:x})},x.lineTo=function(Q,n){var x=Array.prototype.slice.call(arguments),b=(J=this.actions[this.actions.length-1].args)[J.length-2],J=J[J.length-1],b=new iV(new R(b,J),new R(Q,n));this.curves.push(b),this.actions.push({action:"lineTo",args:x})},x.quadraticCurveTo=function(Q,n,x,b){var J=Array.prototype.slice.call(arguments),L=(f=this.actions[this.actions.length-1].args)[f.length-2],f=f[f.length-1],L=new rV(new R(L,f),new R(Q,n),new R(x,b));this.curves.push(L),this.actions.push({action:_V,args:J})},x.bezierCurveTo=function(Q,n,x,b,J,L){var f=Array.prototype.slice.call(arguments),V=(l=this.actions[this.actions.length-1].args)[l.length-2],l=l[l.length-1],V=new PV(new R(V,l),new R(Q,n),new R(x,b),new R(J,L));this.curves.push(V),this.actions.push({action:$V,args:f})},x.arc=function(Q,n,x,b,J,L){var f=(V=this.actions[this.actions.length-1].args)[V.length-2],V=V[V.length-1];this.absarc(Q+f,n+V,x,b,J,L)},x.absarc=function(Q,n,x,b,J,L){this.absellipse(Q,n,x,x,b,J,L)},x.ellipse=function(Q,n,x,b,J,L,f){var V=(l=this.actions[this.actions.length-1].args)[l.length-2],l=l[l.length-1];this.absellipse(Q+V,n+l,x,b,J,L,f)},x.absellipse=function(Q,n,x,b,J,L,f){var V=Array.prototype.slice.call(arguments),Q=new tV(Q,n,x,b,J,L,f),n=(this.curves.push(Q),Q.getPoint(1));V.push(n.x),V.push(n.y),this.actions.push({action:WV,args:V})},x.getSpacedPoints=function(Q,n){Q=Q||40;for(var x=[],b=0;b<Q;b++)x.push(this.getPoint(b/Q));return x},x.getPoints=function(Q,n){Q=Q||12;for(var x,b,J,L,f,V,l,H,I,Z,E,a,o,B,G,_,$,W=[],D=0,A=this.actions.length;D<A;D++)switch(b=(x=this.actions[D]).action,J=x.args,b){case GV:case"lineTo":W.push(new R(J[0],J[1]));break;case _V:for(L=J[2],f=J[3],H=J[0],I=J[1],E=0<W.length?(Z=(a=W[W.length-1]).x,a.y):(Z=(a=this.actions[D-1].args)[a.length-2],a[a.length-1]),q=1;q<=Q;q++)B=AV.b2(o=q/Q,Z,H,L),G=AV.b2(o,E,I,f),W.push(new R(B,G));break;case $V:for(L=J[4],f=J[5],H=J[0],I=J[1],V=J[2],l=J[3],E=0<W.length?(Z=(a=W[W.length-1]).x,a.y):(Z=(a=this.actions[D-1].args)[a.length-2],a[a.length-1]),q=1;q<=Q;q++)B=AV.b3(o=q/Q,Z,H,V,L),G=AV.b3(o,E,I,l,f),W.push(new R(B,G));break;case"arc":for(var u=J[0],M=J[1],t=J[2],i=J[3],r=J[4],P=!!J[5],c=r-i,F=2*Q,q=1;q<=F;q++)o=q/F,B=u+t*f5(w=i+(o=P?o:1-o)*c),G=M+t*V5(w),W.push(new R(B,G));break;case WV:for(var w,u=J[0],M=J[1],y=J[2],v=J[3],i=J[4],r=J[5],P=!!J[6],c=r-i,F=2*Q,q=1;q<=F;q++)o=q/F,B=u+y*f5(w=i+(o=P?o:1-o)*c),G=M+v*V5(w),W.push(new R(B,G))}var K=o5["shape3d.point.epsilon"],U=!1,A=W.length;for(D=0,A=W.length;D<A;D++)_=W[D],$=D===A-1?W[0]:W[D+1],_&&$&&P5(_.x-$.x)<K&&P5(_.y-$.y)<K&&(U=!0,W[D]=null);if(U){for(var e=[],D=0;D<A;D++)W[D]&&e.push(W[D]);W=e}return n&&W.push(W[0]),W},x.toShapes=function(Q,n){function x(Q){for(var n=[],x=0,b=Q.length;x<b;x++){var J=Q[x],L=new DV;L.actions=J.actions,L.curves=J.curves,n.push(L)}return n}var b=function(Q){for(var n,x,b=[],J=new BV,L=0,f=Q.length;L<f;L++)x=(n=Q[L]).args,(n=n.action)==GV&&0!=J.actions.length&&(b.push(J),J=new BV),J[n].apply(J,x);return 0!=J.actions.length&&b.push(J),b}(this.actions);if(0==b.length)return[];if(!0===n)return x(b);var J,L,f,V=[];if(1==b.length)return L=b[0],(f=new DV).actions=L.actions,f.curves=L.curves,V.push(f),V;var l,H,I,Z,E,a,o=!AV.isClockWise(b[0].getPoints()),o=Q?!o:o,B=[],G=[],_=[],$=0;for(G[$]=n5,_[$]=[],H=0,I=b.length;H<I;H++)l=(L=b[H]).getPoints(),J=AV.isClockWise(l),(J=Q?!J:J)?(!o&&G[$]&&$++,G[$]={s:new DV,p:l},G[$].s.actions=L.actions,G[$].s.curves=L.curves,o&&$++,_[$]=[]):_[$].push({h:L,p:l[0]});if(!G[0])return x(b);if(1<G.length){for(var W=!1,D=[],A=0,u=G.length;A<u;A++)B[A]=[];for(A=0,u=G.length;A<u;A++){G[A];for(var M=_[A],t=0;t<M.length;t++){for(var i=M[t],r=!0,P=0;P<G.length;P++)!function(Q,n){for(var x=n.length,b=!1,J=x-1,L=0;L<x;J=L++){var f=n[J],V=n[L],l=V.x-f.x,H=V.y-f.y;if(1e-10<P5(H)){if(H<0&&(f=n[L],l=-l,V=n[J],H=-H),!(Q.y<f.y||Q.y>V.y))if(Q.y==f.y){if(Q.x==f.x)return 1}else{if(0==(H=H*(Q.x-f.x)-l*(Q.y-f.y)))return 1;H<0||(b=!b)}}else if(Q.y==f.y&&(V.x<=Q.x&&Q.x<=f.x||f.x<=Q.x&&Q.x<=V.x))return 1}return b}(i.p,G[P].p)||(A!=P&&D.push({froms:A,tos:P,hole:t}),r?(r=!1,B[P].push(i)):W=!0);r&&B[A].push(i)}}0<D.length&&(W||(_=B))}for(H=0,I=G.length;H<I;H++)for(f=G[H].s,V.push(f),E=0,a=(Z=_[H]).length;E<a;E++)f.holes.push(Z[E].h);return V},function(){BV.apply(this,arguments),this.holes=[]}),AV=((x=DV.prototype=O_(x)).getPointsHoles=function(Q){for(var n=this.holes.length,x=[],b=0;b<n;b++)x[b]=this.holes[b].getTransformedPoints(Q);return x},x.extractAllPoints=function(Q){return{shape:this.getTransformedPoints(Q),holes:this.getPointsHoles(Q)}},x.extractPoints=function(Q){return this.extractAllPoints(Q)},{triangulateShape:function(A,Q){function u(Q,n,x){return Q.x!=n.x?Q.x<n.x?Q.x<=x.x&&x.x<=n.x:n.x<=x.x&&x.x<=Q.x:Q.y<n.y?Q.y<=x.y&&x.y<=n.y:n.y<=x.y&&x.y<=Q.y}function M(Q,n,x,b,J){var L=n.x-Q.x,f=n.y-Q.y,V=b.x-x.x,l=b.y-x.y,H=Q.x-x.x,I=Q.y-x.y,Z=f*V-L*l,E=f*H-L*I;if(1e-10<P5(Z)){if(0<Z){if(E<0||Z<E)return[];if((a=l*H-V*I)<0||Z<a)return[]}else{if(0<E||E<Z)return[];if(0<(a=l*H-V*I)||a<Z)return[]}if(0==a)return!J||0!=E&&E!=Z?[Q]:[];if(a==Z)return!J||0!=E&&E!=Z?[n]:[];if(0==E)return[x];if(E==Z)return[b];var a=a/Z;return[{x:Q.x+a*L,y:Q.y+a*f}]}if(0!=E||l*H!=V*I)return[];var o,B,G,_,$,W,D,a=0==V&&0==l;return(Z=0==L&&0==f)&&a?Q.x!=x.x||Q.y!=x.y?[]:[Q]:Z?u(x,b,Q)?[Q]:[]:a?u(Q,n,x)?[x]:[]:(E=0!=L?(_=Q.x<n.x?(G=(o=Q).x,(B=n).x):(G=(o=n).x,(B=Q).x),x.x<b.x?(D=($=x).x,(W=b).x):(D=($=b).x,(W=x).x)):(_=Q.y<n.y?(G=(o=Q).y,(B=n).y):(G=(o=n).y,(B=Q).y),x.y<b.y?(D=($=x).y,(W=b).y):(D=($=b).y,(W=x).y)),G<=D?_<D?[]:_==D?J?[]:[$]:_<=E?[$,B]:[$,W]:E<G?[]:G==E?J?[]:[o]:_<=E?[o,B]:[o,W])}function t(Q,n,x,b){var J=n.x-Q.x,n=n.y-Q.y,L=x.x-Q.x,x=x.y-Q.y,f=b.x-Q.x,b=b.y-Q.y,Q=J*x-n*L,J=J*b-n*f;return 1e-10<P5(Q)?(n=f*x-b*L,0<Q?0<=J&&0<=n:0<=J||0<=n):0<J}for(var n,x,b,J,L={},f=A.concat(),V=0,l=Q.length;V<l;V++)Array.prototype.push.apply(f,Q[V]);for(I=0,Z=f.length;I<Z;I++)L[b=f[I].x+":"+f[I].y],L[b]=I;for(var A=function(f){for(var Q,n,x,b,J=A.concat(),V=[],L=[],l=0,H=f.length;l<H;l++)V.push(l);for(var I,Z,E,a,o,B=0,G=2*V.length;0<V.length&&!(--G<0);)for(Q=B;Q<J.length;Q++){for(var _=J[Q],$=-1,l=0;l<V.length;l++)if(n=V[l],L[x=_.x+":"+_.y+":"+n]===n5){for(var W=f[n],D=0;D<W.length;D++)if(b=W[D],I=Q,Z=D,o=a=E=void 0,E=J.length-1,a=I-1,o=I+1,t(J[I],J[a=a<0?E:a],J[o=E<o?0:o],W[Z])&&(a=W.length-1,!!t(W[Z],W[E=(E=Z-1)<0?a:E],W[o=a<(o=Z+1)?0:o],J[I]))&&!function(Q,n){for(var x,b=0;b<J.length;b++)if(x=b+1,x%=J.length,0<M(Q,n,J[b],J[x],!0).length)return 1}(_,b)&&!function(Q,n){for(var x,b,J,L=0;L<V.length;L++)for(x=f[V[L]],b=0;b<x.length;b++)if(J=b+1,J%=x.length,0<M(Q,n,x[b],x[J],!0).length)return 1}(_,b)){$=D,V.splice(l,1),b=J.slice(0,Q+1),E=J.slice(Q),a=W.slice($),Z=W.slice(0,$+1),J=b.concat(a).concat(Z).concat(E),B=Q;break}if(0<=$)break;L[x]=!0}if(0<=$)break}return J}(Q),H=uV.Triangulate(A,!1),I=0,Z=H.length;I<Z;I++)for(x=H[I],n=0;n<3;n++)(J=L[b=x[n].x+":"+x[n].y])!==n5&&(x[n]=J);return H.concat()},isClockWise:function(Q){return uV.Triangulate.area(Q)<0},b2p0:function(Q,n){return(Q=1-Q)*Q*n},b2p1:function(Q,n){return 2*(1-Q)*Q*n},b2p2:function(Q,n){return Q*Q*n},b2:function(Q,n,x,b){return this.b2p0(Q,n)+this.b2p1(Q,x)+this.b2p2(Q,b)},b3p0:function(Q,n){return(Q=1-Q)*Q*Q*n},b3p1:function(Q,n){var x=1-Q;return 3*x*x*Q*n},b3p2:function(Q,n){return 3*(1-Q)*Q*Q*n},b3p3:function(Q,n){return Q*Q*Q*n},b3:function(Q,n,x,b,J){return this.b3p0(Q,n)+this.b3p1(Q,x)+this.b3p2(Q,b)+this.b3p3(Q,J)}}),uV={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var Q=e.keys(this.faces);return Q.length?Q[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(Q){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(Q){var n=Q.familyName.toLowerCase();return this.faces[n]=this.faces[n]||{},this.faces[n][Q.cssFontWeight]=this.faces[n][Q.cssFontWeight]||{},this.faces[n][Q.cssFontWeight][Q.cssFontStyle]=Q},drawText:function(Q){for(var n=this.getFace(),x=this.size/n.resolution,b=0,J=String(Q).split(""),L=J.length,f=[],V=0;V<L;V++){var l=new BV;(l=this.extractGlyphPoints(J[V],n,x,b,l))&&(b+=l.offset*this.spacing,f.push(l.path))}return{paths:f,offset:b/2}},extractGlyphPoints:function(Q,n,x,b,J){var L,f,V,l,H,I,Z,E,a,o,B,G,_,$,W,D,A,u,M=[];if(Q=n.glyphs[Q]||n.glyphs["?"]){if(Q.o)for(H=(l=Q._cachedOutline||(Q._cachedOutline=Q.o.split(" "))).length,Z=I=x,L=0;L<H;)switch(l[L++]){case"m":E=l[L++]*I+b,a=l[L++]*Z,J.moveTo(E,a);break;case"l":E=l[L++]*I+b,a=l[L++]*Z,J.lineTo(E,a);break;case"q":if(o=l[L++]*I+b,B=l[L++]*Z,$=l[L++]*I+b,W=l[L++]*Z,J.quadraticCurveTo($,W,o,B),u=M[M.length-1])for(G=u.x,_=u.y,f=1,V=this.divisions;f<=V;f++){var t=f/V;AV.b2(t,G,$,o),AV.b2(t,_,W,B)}break;case"b":if(o=l[L++]*I+b,B=l[L++]*Z,$=l[L++]*I+b,W=l[L++]*Z,D=l[L++]*I+b,A=l[L++]*Z,J.bezierCurveTo($,W,D,A,o,B),u=M[M.length-1])for(G=u.x,_=u.y,f=1,V=this.divisions;f<=V;f++)AV.b3(t=f/V,G,$,D,o),AV.b3(t,_,W,A,B)}return{offset:Q.ha*x,path:J}}},generateShapes:function(Q,n){var x=(n=n||{}).font;if(x===n5&&!(x=uV.getDefaultFont()))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var b=n.size!==n5?n.size:1,J=n.curveSegments!==n5?n.curveSegments:4,L=n.spacing!==n5?n.spacing:1,f=n.weight!==n5?n.weight:"normal",n=n.style!==n5?n.style:"normal";uV.size=b,uV.divisions=J,uV.face=x,uV.weight=f,uV.style=n,uV.spacing=L;for(var V=uV.drawText(Q).paths,l=[],H=0,I=V.length;H<I;H++)Array.prototype.push.apply(l,V[H].toShapes());return l}},MV=(OJ=1e-10,(x=uV).Triangulate=function(Q,n){var x=Q.length;if(x<3)return null;var b,J,L=[],f=[],V=[];if(0<Ga(Q))for(I=0;I<x;I++)f[I]=I;else for(I=0;I<x;I++)f[I]=x-1-I;for(var l=x,H=2*l,I=l-1;2<l;){if(H--<=0)return n?V:L;if(function(Q,n,x,b,J,L){var f,V,l,H,I,Z,E,a,o,B=Q[L[n]].x,G=Q[L[n]].y,_=Q[L[x]].x,$=Q[L[x]].y,W=Q[L[b]].x,D=Q[L[b]].y;if(!((_-B)*(D-G)-($-G)*(W-B)<OJ)){for(H=W-_,I=D-$,Z=B-W,E=G-D,a=_-B,o=$-G,f=0;f<J;f++)if(V=Q[L[f]].x,l=Q[L[f]].y,!(V===B&&l===G||V===_&&l===$||V===W&&l===D)&&-OJ<=H*(l-$)-I*(V-_)&&-OJ<=Z*(l-D)-E*(V-W)&&-OJ<=a*(l-G)-o*(V-B))return;return 1}}(Q,b=l<=(b=I)?0:b,I=l<=(I=b+1)?0:I,J=l<=(J=I+1)?0:J,l,f)){var Z,E,a=f[b],o=f[I],B=f[J];for(L.push([Q[a],Q[o],Q[B]]),V.push([f[b],f[I],f[J]]),E=(Z=I)+1;E<l;Z++,E++)f[Z]=f[E];H=2*--l}}return n?V:L},x.Triangulate.area=Ga,O._typeface_js={faces:uV.faces,loadFace:uV.loadFace},function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]}),x=MV.prototype={constructor:MV,computeFaceNormals:function(){for(var Q=new I5,n=new I5,x=0,b=this.faces.length;x<b;x++){var J=this.faces[x],L=this.vertices[J.a],f=this.vertices[J.b],V=this.vertices[J.c];Q.subVectors(V,f),n.subVectors(L,f),Q.cross(n),Q.normalize(),J.normal.copy(Q)}},computeVertexNormals:function(Q){for(var n,x=new Array(this.vertices.length),b=0,J=this.vertices.length;b<J;b++)x[b]=new I5;if(Q)for(var L,f,V,l=new I5,H=new I5,I=0,Z=this.faces.length;I<Z;I++)n=this.faces[I],L=this.vertices[n.a],f=this.vertices[n.b],V=this.vertices[n.c],l.subVectors(V,f),H.subVectors(L,f),l.cross(H),x[n.a].add(l),x[n.b].add(l),x[n.c].add(l);else for(I=0,Z=this.faces.length;I<Z;I++)x[(n=this.faces[I]).a].add(n.normal),x[n.b].add(n.normal),x[n.c].add(n.normal);for(b=0,J=this.vertices.length;b<J;b++)x[b].normalize();for(I=0,Z=this.faces.length;I<Z;I++)(n=this.faces[I]).vertexNormals[0]=x[n.a].clone(),n.vertexNormals[1]=x[n.b].clone(),n.vertexNormals[2]=x[n.c].clone()},mergeVertices:function(){for(var Q,n,x,b,J={},L=[],f=[],V=F5(10,4),l=0,H=this.vertices.length;l<H;l++)Q=this.vertices[l],J[Q=M5(Q.x*V)+"_"+M5(Q.y*V)+"_"+M5(Q.z*V)]===n5?(J[Q]=l,L.push(this.vertices[l]),f[l]=L.length-1):f[l]=f[J[Q]];for(var I=[],l=0,H=this.faces.length;l<H;l++){(n=this.faces[l]).a=f[n.a],n.b=f[n.b],n.c=f[n.c];for(var Z=[n.a,n.b,n.c],E=0;E<3;E++)if(Z[E]==Z[(E+1)%3]){I.push(l);break}}for(l=I.length-1;0<=l;l--){var a=I[l];for(this.faces.splice(a,1),x=0,b=this.faceVertexUvs.length;x<b;x++)this.faceVertexUvs[x].splice(a,1)}var o=this.vertices.length-L.length;return this.vertices=L,o}},tV=function(Q,n,x,b,J,L,f){this.aX=Q,this.aY=n,this.xRadius=x,this.yRadius=b,this.aStartAngle=J,this.aEndAngle=L,this.aClockwise=f},iV=(tV.prototype=O_(aV),tV.prototype.getPoint=function(Q){(n=this.aEndAngle-this.aStartAngle)<0&&(n+=l5),l5<n&&(n-=l5),Q=!0===this.aClockwise?this.aEndAngle+(1-Q)*(l5-n):this.aStartAngle+Q*n;var n=this.aX+this.xRadius*f5(Q),Q=this.aY+this.yRadius*V5(Q);return new R(n,Q)},function(Q,n){this.v1=Q,this.v2=n}),rV=((L=iV.prototype=O_(aV)).getPoint=function(Q){var n=this.v2.clone().sub(this.v1);return n.multiplyScalar(Q).add(this.v1),n},L.getPointAt=function(Q){return this.getPoint(Q)},L.getTangent=function(Q){return this.v2.clone().sub(this.v1).normalize()},function(Q,n,x){this.v0=Q,this.v1=n,this.v2=x}),PV=(rV.prototype=O_(aV),rV.prototype.getPoint=function(Q){var n=AV.b2(Q,this.v0.x,this.v1.x,this.v2.x),Q=AV.b2(Q,this.v0.y,this.v1.y,this.v2.y);return new R(n,Q)},function(Q,n,x,b){this.v0=Q,this.v1=n,this.v2=x,this.v3=b}),cV=(PV.prototype=O_(aV),PV.prototype.getPoint=function(Q){var n=AV.b3(Q,this.v0.x,this.v1.x,this.v2.x,this.v3.x),Q=AV.b3(Q,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new R(n,Q)},EV.create(function(Q,n){this.v1=Q,this.v2=n},function(Q){var n=new I5;return n.subVectors(this.v2,this.v1),n.multiplyScalar(Q),n.add(this.v1),n}),EV.create(function(Q,n,x){this.v0=Q,this.v1=n,this.v2=x},function(Q){var n=AV.b2(Q,this.v0.x,this.v1.x,this.v2.x),x=AV.b2(Q,this.v0.y,this.v1.y,this.v2.y),Q=AV.b2(Q,this.v0.z,this.v1.z,this.v2.z);return new I5(n,x,Q)})),FV=EV.create(function(Q,n,x,b){this.v0=Q,this.v1=n,this.v2=x,this.v3=b},function(Q){var n=AV.b3(Q,this.v0.x,this.v1.x,this.v2.x,this.v3.x),x=AV.b3(Q,this.v0.y,this.v1.y,this.v2.y,this.v3.y),Q=AV.b3(Q,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new I5(n,x,Q)}),qV=function(Q,v,O,n,x,b,J,L){MV.call(this),n=n!==n5?n:.5,x=x!==n5?x:.5,Q=Q||8,b=b||0,J=J||l5;for(var f=(L=L!==n5?L:1)/2,V=[],l=[],H=this.vertices,I=this.faces,Z=this.faceVertexUvs,E=0;E<=1;E++){for(var a=[],o=[],B=+E,G=B*(x-n)+n,_=0;_<=Q;_++){var $=_/Q,W=new I5,D=-($*J+b);W.z=G*V5(D),W.y=-B*L+f,W.x=G*f5(D),H.push(W),a.push(H.length-1),o.push(new R($,B))}V.push(a),l.push(o)}for(var A,u,M=(x-n)/L,_=0;_<Q;_++)for(u=0!==n?(A=H[V[0][_]].clone(),H[V[0][_+1]].clone()):(A=H[V[1][_]].clone(),H[V[1][_+1]].clone()),A.setY(r5(A.x*A.x+A.z*A.z)*M).normalize(),u.setY(r5(u.x*u.x+u.z*u.z)*M).normalize(),E=0;E<1;E++){var t=V[E][_],i=V[E+1][_],r=V[E+1][_+1],P=V[E][_+1],c=A.clone(),F=A.clone(),q=u.clone(),w=u.clone(),y=l[E][_].clone(),K=l[E+1][_].clone(),d=l[E+1][_+1].clone(),h=l[E][_+1].clone();I.push(new HV(t,i,P,[c,F,w])),Z[0].push([y,K,h]),I.push(new HV(i,r,P,[F.clone(),q,w.clone()])),Z[0].push([K.clone(),d,h.clone()])}if(v&&0<n)for(this.vertices.push(new I5(0,f,0)),_=0;_<Q;_++){t=V[0][_],i=V[0][_+1],r=this.vertices.length-1,c=new I5(0,1,0),F=new I5(0,1,0),q=new I5(0,1,0),y=l[0][_].clone(),K=l[0][_+1].clone(),d=new R(K.x,0),I.push(new HV(t,i,r,[c,F,q],0,1));var p=f5(U=_/Q*l5),z=V5(U),s=f5(e=(_+1)/Q*l5),X=V5(e);Z[0].push([new R(.5+.5*p,.5+.5*z),new R(.5+.5*s,.5+.5*X),new R(.5,.5)])}if(O&&0<x)for(this.vertices.push(new I5(0,-f,0)),_=0;_<Q;_++){t=V[E][_+1],i=V[E][_],r=H.length-1,c=new I5(0,-1,0),F=new I5(0,-1,0),q=new I5(0,-1,0),y=l[E][_+1].clone(),K=l[E][_].clone(),I.push(new HV(t,i,r,[c,F,q],0,2));var U,e,p=f5(U=_/Q*l5),z=V5(U),s=f5(e=(_+1)/Q*l5),X=V5(e);Z[0].push([new R(.5+.5*s,.5-.5*X),new R(.5+.5*p,.5-.5*z),new R(.5,.5)])}},wV=(qV.prototype=O_(x),function(Q,n,x,b,J,L,f){MV.call(this),f=f||.5,Q=Q||16,n=n||16,x=(x!==n5?x:0)-w,b=b!==n5?b:l5,J=J!==n5?J:0,L=L!==n5?L:w;for(var V=[],l=[],H=this.vertices,I=this.faces,Z=this.faceVertexUvs,E=0;E<=n;E++){for(var a=[],o=[],B=0;B<=Q;B++){var G=B/Q,_=E/n,$=new I5;$.x=-f*f5(x+G*b)*V5(J+_*L),$.y=f*f5(J+_*L),$.z=f*V5(x+G*b)*V5(J+_*L),H.push($),a.push(H.length-1),o.push(new R(G,_))}V.push(a),l.push(o)}for(E=0;E<n;E++)for(B=0;B<Q;B++){var W=V[E][B+1],D=V[E][B],A=V[E+1][B],u=V[E+1][B+1],M=H[W].clone().normalize(),t=H[D].clone().normalize(),i=H[A].clone().normalize(),r=H[u].clone().normalize(),P=l[E][B+1].clone(),c=l[E][B].clone(),F=l[E+1][B].clone(),q=l[E+1][B+1].clone();P5(H[W].y)===f?(P.x=(P.x+c.x)/2,I.push(new HV(W,A,u,[M,i,r])),Z[0].push([P,F,q])):P5(H[A].y)===f?(F.x=(F.x+q.x)/2,I.push(new HV(W,D,A,[M,t,i])),Z[0].push([P,c,F])):(I.push(new HV(W,D,u,[M,t,r])),Z[0].push([P,c,q]),I.push(new HV(D,A,u,[t.clone(),i,r.clone()])),Z[0].push([c.clone(),F,q.clone()]))}}),yV=(wV.prototype=O_(x),function(Q,n,x,b,J,L){MV.call(this),Q=Q||.33,n=n||.17,b=b||8,x=x||6,J=J||0,L=L||l5;for(var f=new I5,V=[],l=[],H=0;H<=b;H++)for(var I=H/b*l5+w,Z=0;Z<=x;Z++){var E=Z/x*L+J,a=(f.x=Q*f5(E),f.z=-Q*V5(E),new I5),o=Q+n*f5(I);a.x=o*f5(E),a.z=-o*V5(E),a.y=n*V5(I),this.vertices.push(a),V.push(new R(Z/x,1-H/b)),l.push(a.clone().sub(f).normalize())}for(H=1;H<=b;H++)for(Z=1;Z<=x;Z++){var B=(x+1)*H+Z-1,G=(x+1)*(H-1)+Z-1,_=(x+1)*(H-1)+Z,$=(x+1)*H+Z,W=new HV(B,G,$,[l[B].clone(),l[G].clone(),l[$].clone()]);this.faces.push(W),this.faceVertexUvs[0].push([V[B].clone(),V[G].clone(),V[$].clone()]),W=new HV(G,_,$,[l[G].clone(),l[_].clone(),l[$].clone()]),this.faces.push(W),this.faceVertexUvs[0].push([V[G].clone(),V[_].clone(),V[$].clone()])}this.computeFaceNormals()}),KV=(yV.prototype=O_(x),function(Q,n,x){Q&&(MV.call(this),Q=Q instanceof Array?Q:[Q],this.addShapeList(Q,n),!1!==n.convertYZ&&bV(this,x),this.computeFaceNormals())}),UV=((L=KV.prototype=O_(MV.prototype)).addShapeList=function(Q,n){for(var x=Q.length,b=0;b<x;b++){var J=Q[b];this.addShape(J,n)}},L.addShape=function(G,_){var Q,n,x,b,J,L,f=_.amount,V=_.curveSegments||VS,$=_.steps||1,l=_.extrudePath,H=!1,W=new lV(_.repeatUVLength,_.boundingBox),D=(l&&(Q=l.getSpacedPoints($),H=!0,n=_.frames!==n5?_.frames:new UV.FrenetFrames(l,$,!1),x=new I5,b=new I5,J=new I5),this),A=this.vertices.length,I=(l=G.extractPoints(V)).shape,Z=l.holes;if(!AV.isClockWise(I))for(I=I.reverse(),a=0,o=Z.length;a<o;a++)L=Z[a],AV.isClockWise(L)&&(Z[a]=L.reverse());for(var E=AV.triangulateShape(I,Z),V=I,a=0,o=Z.length;a<o;a++)L=Z[a],I=I.concat(L);for(var B,u,M,t=I.length,i=E.length,r=0;r<t;r++)B=I[r],H?(b.copy(n.normals[0]).multiplyScalar(B.x),x.copy(n.binormals[0]).multiplyScalar(B.y),J.copy(Q[0]).add(b).add(x),q(J.x,J.y,J.z)):q(B.x,B.y,0);for(M=1;M<=$;M++)for(r=0;r<t;r++)B=I[r],H?(b.copy(n.normals[M]).multiplyScalar(B.x),x.copy(n.binormals[M]).multiplyScalar(B.y),J.copy(Q[M]).add(b).add(x),q(J.x,J.y,J.z)):q(B.x,B.y,f/$*M);if(_.bottom)for(var P=0;P<i;P++)w((u=E[P])[2],u[1],u[0],!0);if(_.top)for(P=0;P<i;P++)w((u=E[P])[0]+t*$,u[1]+t*$,u[2]+t*$,!1);var c=0;for(F(V,c),c+=V.length,a=0,o=Z.length;a<o;a++)F(L=Z[a],c),c+=L.length;function F(Q,n){for(var x,b,J=Q.length;0<=--J;){(b=(x=J)-1)<0&&(b=Q.length-1);for(var L=0,f=$,L=0;L<f;L++){var V=t*L,l=t*(L+1),H=(Z=void 0,n+x+V),V=n+b+V,I=n+b+l,l=n+x+l,Z=Q,E=L,a=f,o=x,B=b;H+=A,V+=A,I+=A,l+=A,D.faces.push(new HV(H,V,l)),D.faces.push(new HV(V,I,l)),Z=W.generateSideWallUV(D,G,Z,_,H,V,I,l,E,a,o,B),D.faceVertexUvs[0].push([Z[0],Z[1],Z[3]]),D.faceVertexUvs[0].push([Z[1],Z[2],Z[3]])}}}function q(Q,n,x){D.vertices.push(new I5(Q,n,x))}function w(Q,n,x,b){D.faces.push(new HV(Q+=A,n+=A,x+=A,null,0,b?2:1)),b=b?W.generateBottomUV(D,G,_,Q,n,x):W.generateTopUV(D,G,_,Q,n,x),D.faceVertexUvs[0].push(b)}},function(Q,n,x,b,J){MV.call(this),x=x||1,b=b||8,J=J||!1;var L,f,V,l,H,I,Z,E,a,o,B,G,_,$,W,D,A=[],u=(n=n||64)+1,M=new I5,t=new UV.FrenetFrames(Q,n,J),i=t.tangents,r=t.normals,P=t.binormals;for(this.tangents=i,this.normals=r,this.binormals=P,l=0;l<u;l++)for(A[l]=[],V=Q.getPointAt(l/(u-1)),i[l],L=r[l],f=P[l],H=0;H<b;H++)$=-x*f5(W=H/b*l5),W=x*V5(W),M.copy(V),M.x+=$*L.x+W*f.x,M.y+=$*L.y+W*f.y,M.z+=$*L.z+W*f.z,A[l][H]=($=M.x,W=M.y,D=M.z,this.vertices.push(new I5($,W,D))-1);for(l=0;l<n;l++)for(H=0;H<b;H++)I=A[l][H],Z=A[a=J?(l+1)%n:l+1][H],E=A[a][a=(H+1)%b],a=A[l][a],o=new R(l/n,H/b),B=new R((l+1)/n,H/b),G=new R((l+1)/n,(H+1)/b),_=new R(l/n,(H+1)/b),this.faces.push(new HV(I,Z,a)),this.faceVertexUvs[0].push([o,B,_]),this.faces.push(new HV(Z,E,a)),this.faceVertexUvs[0].push([B.clone(),G,_.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}),eV=(UV.prototype=O_(x),UV.FrenetFrames=function(Q,n,x){var b,J,L,f,V,l=new I5,H=[],I=[],Z=[],E=new I5,a=new X,o=n+1;for(this.tangents=H,this.normals=I,this.binormals=Z,V=0;V<o;V++)H[V]=Q.getTangentAt(V/(o-1)),H[V].normalize();for(I[0]=new I5,Z[0]=new I5,n=Number.MAX_VALUE,J=P5(H[0].x),L=P5(H[0].y),f=P5(H[0].z),J<=n&&(n=J,l.set(1,0,0)),L<=n&&(n=L,l.set(0,1,0)),f<=n&&l.set(0,0,1),E.crossVectors(H[0],l).normalize(),I[0].crossVectors(H[0],E),Z[0].crossVectors(H[0],I[0]),V=1;V<o;V++)I[V]=I[V-1].clone(),Z[V]=Z[V-1].clone(),E.crossVectors(H[V-1],H[V]),1e-4<E.length()&&(E.normalize(),b=c5(r_(H[V-1].dot(H[V]),-1,1)),I[V].applyMatrix4(a.makeRotationAxis(E,b))),Z[V].crossVectors(H[V],I[V]);if(x)for(b=c5(r_(I[0].dot(I[o-1]),-1,1)),b/=o-1,0<H[0].dot(E.crossVectors(I[0],I[o-1]))&&(b=-b),V=1;V<o;V++)I[V].applyMatrix4(a.makeRotationAxis(H[V],b*V)),Z[V].crossVectors(H[V],I[V])},function(Q,n,x,b){MV.call(this),x=x||0,b=b==x5?l5:b;for(var J=1/(Q.length-1),L=1/(n=n||18),f=0,V=n;f<=V;f++)for(var l=x+f*L*b,H=f5(l),I=V5(l),Z=0,E=Q.length;Z<E;Z++){var a=Q[Z],o=new I5;o.x=H*a.x-I*a.y,o.y=I*a.x+H*a.y,o.z=a.z,this.vertices.push(o)}for(var B=Q.length,f=0,V=n;f<V;f++)for(Z=0,E=Q.length-1;Z<E;Z++){var G=Z+B*f,_=G+B,H=G+1+B,$=G+1,W=f*L,D=Z*J,A=W+L,u=D+J;this.faces.push(new HV(G,$,_)),this.faceVertexUvs[0].push([new R(W,D),new R(W,u),new R(A,D)]),this.faces.push(new HV(_,$,H)),this.faceVertexUvs[0].push([new R(A,D),new R(W,u),new R(A,u)])}this.mergeVertices(),bV(this),this.computeFaceNormals(),this.computeVertexNormals()}),vV=(eV.prototype=O_(x),function(Q,n){Q=uV.generateShapes(Q,n=n||{}),n.amount=n.amount!==n5?n.amount:.5,(n.convertYZ=!1)!==n.fill&&(n.bottom=!0,n.top=!0),KV.call(this,Q,n)}),OV=(vV.prototype=O_(L),d.Node=function(){u_(OV,this);var x=this._styleMap={};this.getStyle=function(Q){var n=x[Q];return n!==n5?n:o5[Q]},this.setStyleMap=function(Q){var n=x;x=this._styleMap=Q||{},this.fp("styleMap",n,x)}}),dV={X:rS,Y:PS,Z:cS},hV={X:0,Y:1,Z:2},pV={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},zV=new dK,sV=function(Q,n,x){var b,J;n&&(b=n[0],J=n[1],n=n[2],"xzy"===x?(PS(Q,J),cS(Q,n),rS(Q,b)):"xyz"===x?(cS(Q,n),PS(Q,J),rS(Q,b)):"yxz"===x?(cS(Q,n),rS(Q,b),PS(Q,J)):"yzx"===x?(rS(Q,b),cS(Q,n),PS(Q,J)):"zxy"===x?(PS(Q,J),rS(Q,b),cS(Q,n)):"zyx"===x?(rS(Q,b),PS(Q,J),cS(Q,n)):(PS(Q,J),cS(Q,n),rS(Q,b)))},XV=(p1("Node",BG,{ms_ac:["rotationMode","anchorElevation"],ms_edge:!0,_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:aV="xzy",_64O:0,_rotationX:0,_53O:0,_host:x5,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return IE},_22Q:function(){return ru},getX:function(){return this.p().x},setX:function(Q){this.p(Q,this.p().y)},getY:function(){return this.p().y},setY:function(Q){this.p(this.p().x,Q)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(Q){this.setAnchor(Q,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(Q){this.setAnchor(this.getAnchor().x,Q)},getScaleX:function(){return this.getScale().x},setScaleX:function(Q){this.setScale(Q,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(Q){this.setScale(this.getScale().x,Q)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},setQuaternion:function(Q){return Q=(new mK).setFromQuaternion(Q,mK.ReverseOrder(this.getRotationMode())),this._applyClosestR3(Q.x,Q.y,Q.z)},getQuaternion:(JK=new mK,LK=new mK,fK=new dK,function(Q){return Q=Q||new dK,this.getEuler(JK),JK.equals(LK)?Q.copy(fK):Q.copy(fK.setFromEuler(LK.copy(JK)))}),getEuler:function(Q){var n=this.r3();return(Q=Q||new mK).set(n[0],n[1],n[2],mK.ReverseOrder(this.getRotationMode()))},setEuler:function(Q){return Q=Q.clone().reorder(mK.ReverseOrder(this.getRotationMode())),this.r3(Q.x,Q.y,Q.z)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(Q,n){uS(Q,qS(x5,x5,this.r3(),this.getRotationMode())),this.translate3d(Q[0]*n,Q[1]*n,Q[2]*n)},translateFront:function(Q){this.translate3dBy([0,0,1],Q)},translateBack:function(Q){this.translate3dBy([0,0,-1],Q)},translateLeft:function(Q){this.translate3dBy([-1,0,0],Q)},translateRight:function(Q){this.translate3dBy([1,0,0],Q)},translateTop:function(Q){this.translate3dBy([0,1,0],Q)},translateBottom:function(Q){this.translate3dBy([0,-1,0],Q)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(Q,n,x){1===arguments.length&&(n=Q[1],x=Q[2],Q=Q[0]),this.p(Q,x),this.setElevation(n)},translate3d:function(Q,n,x){1===arguments.length&&(n=Q[1],x=Q[2],Q=Q[0]),this.translate(Q,x),this.setElevation(this._54O+n)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(Q,n,x){1===arguments.length&&(n=Q[1],x=Q[2],Q=Q[0]),this.setSize(Q,x),this.setTall(n)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(Q,n,x){var b,J=this;J._updatingRotation3d||((J._updatingRotation3d=1)===arguments.length&&(n=Q[1],x=Q[2],Q=Q[0]),b=[J._rotationX,-J._64O,J._53O],J._rotationX=Q,J._64O=-n,J._53O=x,J.fp("rotation3d",b,[Q,n,x]),delete J._updatingRotation3d)},_applyClosestR3:function(Q,n,x){var b,J,L,f=this.r3(),V=this.getRotationMode();"xzy"===V||"yzx"===V?(b=0<Q?Q-w:Q+w,J=0<n?n-w:n+w,L=0<x?w-x:-w-x):"xyz"===V||"zyx"===V?(b=0<Q?Q-w:Q+w,L=0<x?x-w:x+w,J=0<n?w-n:-w-n):"yxz"!==V&&"zxy"!==V||(L=0<x?x-w:x+w,J=0<n?n-w:n+w,b=0<Q?w-Q:-w-Q),$a([b,J,L],f)<$a([Q,n,x],f)?this.r3(b,J,L):this.r3(Q,n,x)},setRotationY:function(Q){this.setRotation(-Q)},getRotationY:function(){return-this._64O},lookAtDirection:function(Q,n){n=n||j5;var x=this,b=S7(Q);n===j5?(x.r3([-q5(Q[1]/b),-K5(Q[2],Q[0])+w5,0]),x.setRotationMode("xzy")):n===ni?(x.r3(0,-K5(Q[2],Q[0]),q5(Q[1]/b)),x.setRotationMode("zyx")):n===Qi?(x.r3(0,-K5(Q[2],Q[0])+w,-q5(Q[1]/b)),x.setRotationMode("zyx")):n===xi?(x.r3([-q5(Q[1]/b)+w5,-K5(Q[2],Q[0])+w5,0]),x.setRotationMode("xzy")):n===bi&&(x.r3([-q5(Q[1]/b)-w5,-K5(Q[2],Q[0])+w5,0]),x.setRotationMode("xzy")),n===C5&&(x.r3([-q5(Q[1]/b)+w,-K5(Q[2],Q[0])+w5,w]),x.setRotationMode("zxy"))},lookAt:function(Q,n){return this.lookAtDirection(BS(Q,this.p3()),n)},lookAtX:(jJ=new I5,CJ=new I5,QK=new I5,nK=new X,xK=new X,bK=new mK,function(Q,n){var x=FS(this);nK.fromArray(x),QK.copy(this.p3()),jJ.copy(Q).sub(QK),jJ.lengthSq()<1e-6||(jJ.normalize(),"string"==typeof(n=n||j5)?n===j5?CJ.set(0,0,1):n===C5?CJ.set(0,0,-1):n===Qi?CJ.set(-1,0,0):n===ni?CJ.set(1,0,0):n===xi?CJ.set(0,1,0):n===bi&&CJ.set(0,-1,0):CJ.copy(n).normalize(),CJ.applyMatrix4(nK).sub(QK).normalize(),(x=Math.acos(jJ.dot(CJ)))&&((Q=jJ.clone().cross(CJ)).lengthSq()<1e-6&&(n===xi||n===bi||0===n[0]&&0===n[1]?Q.set(0,0,1):Q.set(0,1,0)).applyMatrix4(nK).sub(QK),Q.normalize(),bK.set(this.r3(),this.getRotationMode(),!0),nK.makeRotationFromEuler(bK),xK.makeRotationAxis(Q,-x),bK.setFromRotationMatrix(xK.multiply(nK)),this._applyClosestR3(bK.x,bK.y,bK.z)))}),getHost:function(){return this._host},setHost:function(Q){var n,x=this;x!==Q&&x._host!==Q&&((n=x._host)&&(n._removeAttach(x),n.updateLayoutAttaches()),x._host=Q,x._host&&(x._host._addAttach(x),x._host.updateLayoutAttaches()),x.fp("host",n,Q),x.onHostChanged(n,Q))},getAttaches:function(){return this._69O},_addAttach:function(Q){this._69O||(this._69O=new m),this._69O.add(Q),this.fp("attaches",x5,Q)},_removeAttach:function(Q){this._69O.remove(Q),this._69O.isEmpty()&&delete this._69O,this.fp("attaches",Q,x5)},getImage:function(){return this._pendingCheckImageJSON&&b5.getImage(this._image)&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof jV&&this.getParent().checkPendingUpdateInfo()),this._image},setImage:function(Q){var n=this._image,x=this.getWidth(),b=this.getHeight();this._image=Q,this.fp("image",n,Q)&&(null!=Q&&(V_(Q)||H5(Q)&&/\.json$/i.test(Q))&&(this._pendingCheckImageJSON=!0),Wj||(this.fp(ui,x,this.getWidth()),this.fp(Mi,b,this.getHeight())))},getElevation:function(){return this._54O},setElevation:function(Q){var n;this._50O||(this._50O=1,n=this._54O,this._54O=Q,this.fp(AZ,n,Q),delete this._50O)},getRotation:function(){return this._64O},setRotation:function(Q){var n;this._49O||(this._49O=1,n=this._64O,this._64O=Q,this.fp(Si,n,Q),delete this._49O)},getRotationX:function(){return this._rotationX},setRotationX:function(Q){var n;this._51O||(this._51O=1,n=this._rotationX,this._rotationX=Q,this.fp("rotationX",n,Q),delete this._51O)},getRotationZ:function(){return this._53O},setRotationZ:function(Q){var n;this._52O||(this._52O=1,n=this._53O,this._53O=Q,this.fp("rotationZ",n,Q),delete this._52O)},getPosition:function(){return this._position},setPosition:function(Q,n){this._50I||(this._50I=1,(n=2===arguments.length?{x:Q,y:n}:Q).x===this._position.x&&n.y===this._position.y||(Q=this._position,this._position=n,this.fp(DZ,Q,n)),delete this._50I)},translate:function(Q,n){var x=this._position;this.p(x.x+Q,x.y+n)},hasInheritedSize:function(){var Q=this.getStyle("shape3d");if(Q){var n=Xe(Q);if(n&&n.rawS3)return!0;if(("billboard"===Q||"plane"===Q)&&g(this.getStyle("shape3d.image")))return!0}return!(!this.hasOwnProperty("_image")||!g(this._image))},getWidth:function(){if(0<=this._width)return this._width;var Q=this.getStyle("shape3d");if(Q){var n,x=Xe(Q);if(x&&x.rawS3)return x.rawS3[0];if("billboard"===Q||"plane"===Q)return(n=g(this.getStyle("shape3d.image")))?kS(n,this):20}return(n=g(this._image))?kS(n,this):20},setWidth:function(Q){var n=this._width;this._width=Q,this.fp(ui,n,Q)},getHeight:function(){if(0<=this._height)return this._height;var Q=this.getStyle("shape3d");if(Q){var n,x=Xe(Q);if(x&&x.rawS3)return x.rawS3[2];if("plane"===Q)return(n=g(this.getStyle("shape3d.image")))?NS(n,this):20;if("billboard"===Q)return 2}return(n=g(this._image))?NS(n,this):20},setHeight:function(Q){var n=this._height;this._height=Q,this.fp(Mi,n,Q)},getTall:function(){if(0<=this._tall)return this._tall;var Q=this.getStyle("shape3d");if(Q){var n=Xe(Q);if(n&&n.rawS3)return n.rawS3[1];if("billboard"===Q)return(n=g(this.getStyle("shape3d.image")))?NS(n,this):20;if("plane"===Q)return 2}return 20},setTall:function(Q){var n=this._tall;this._tall=Q,this.fp("tall",n,Q)},setSize:function(Q,n){2===arguments.length?(this.setWidth(Q),this.setHeight(n)):(this.setWidth(Q.width),this.setHeight(Q.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(Q,n,x,b,J){var L=this.getAnchor(),f=this.getScale(),V=(arguments.length<=2&&(J=n,n=Q.y,x=Q.width,b=Q.height,Q=Q.x),J&&f.x<0?1-L.x:L.x),L=J&&f.y<0?1-L.y:L.y;this.p(Q+x*V,n+b*L),J&&(x/=Math.abs(f.x),b/=Math.abs(f.y)),this.setWidth(x),this.setHeight(b)},getMatrix:function(){var Q=this._64O,n=this._position,x=this.getScale();return new OK(Q,n.x,n.y,x.x,x.y)},getMatrix4:(TJ=new I5,kJ=new dK,NJ=new I5,function(Q){return this.getQuaternion(kJ),TJ.copy(this.p3()),NJ.copy(this.getFinalScale3d()),(Q=Q||new X).compose(TJ,kJ,NJ)}),getAnchorRect:function(){var Q=this.getWidth(),n=this.getHeight(),x=this.getAnchor();return{x:-Q*x.x,y:-n*x.y,width:Q,height:n}},toLocal:function(Q){return this.getMatrix().tfi(Q)},toGlobal:function(Q){return this.getMatrix().tf(Q)},getAttachPosition:(YJ=new OK,function(Q,n,x,b){x=x||0,b=b||0;var J=this.getAnchor(),L=this._64O,f=this._position,V=this.getScale();return YJ.setFromTransform(L,f.x,f.y).tf({x:x+V.x*this.getWidth()*(Q-J.x),y:b+V.y*this.getHeight()*(n-J.y)})}),isInRect:function(Q){Q=this.toLocal(Q);var n=this.getWidth(),x=this.getHeight();return Q.x+=n*this.getAnchorX(),Q.y+=x*this.getAnchorY(),!(Q.x<0||Q.y<0||Q.x>n||Q.y>x)},getRect:function(){var Q=this.getWidth(),n=this.getHeight(),x={x:-Q*(x=this.getAnchor()).x,y:-n*x.y,width:Q,height:n},Q=this.getMatrix();return m7([Q.tf(x.x,x.y),Q.tf(x.x+x.width,x.y),Q.tf(x.x+x.width,x.y+x.height),Q.tf(x.x,x.y+x.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var Q=this.getAnchor(),n=this._anchorElevation;return{x:Q.x,y:n,z:Q.y}},setAnchorElevation:function(Q){var n=this._anchorElevation;return n!==Q&&(this._anchorElevation=Q,this.fp("anchorElevation",n,Q),!0)},setAnchor3d:function(Q,n,x,b){"number"==typeof Q?J={x:Q,y:n,z:x}:(J=Q.length?{x:Q[0],y:Q[1],z:Q[2]}:Q,b=n),this.beginTransaction();var J,x=this.getAnchor3d(),Q=this.setAnchor(J.x,J.z);return(Q=!!this.setAnchorElevation(J.y)||Q)&&b&&!Wj&&(this.getAnchor3d(),n=FS(this),b=uS([J.x-x.x,J.y-x.y,J.z-x.z],n),this.p3(b)),this.endTransaction(),Q},getAnchor:function(){if(this.hasOwnProperty("_anchor"))return this._anchor;var Q=g(this._image);return Q&&Q.anchorX!==n5?{x:Q.anchorX,y:Q.anchorY}:this._anchor},setAnchor:function(Q,n,x){var b,J,L,f,V=this;return"number"==typeof Q?f={x:Q,y:n}:(f=Q.length?{x:Q[0],y:Q[1]}:Q,x=n),((Q=V.getAnchor()).x!==f.x||Q.y!==f.y)&&(V.beginTransaction(),V._anchor=f,V.fp("anchor",Q,f),x&&!Wj&&(n=V.getPosition(),x=V.getSize(),b=V.getRotation(),J=V.getScale(),L=-x.width*(Q.x-f.x)*J.x,x=-x.height*(Q.y-f.y)*J.y,Q=V5(b),f=f5(b),V.setPosition(n.x+f*L-Q*x,n.y+Q*L+f*x)),V.endTransaction(),!0)},getLocalQuaternion:function(Q){if(!(n=this.getHost()))return this.getQuaternion(Q);var n=n.getQuaternion(),x=this.getQuaternion();return(Q=Q||new dK).copy(n).inverse().multiply(x)},setLocalQuaternion:function(Q){var n=this.getHost();if(!n)return this.setQuaternion(Q);n=n.getQuaternion(),this.setQuaternion(n.clone().multiply(Q))},getLocalEuler:(mJ=new dK,function(Q){return this.getHost()?(this.getLocalQuaternion(mJ),(Q=Q||new mK).setFromQuaternion(mJ,mK.ReverseOrder(this.getRotationMode()))):this.getEuler(Q)}),setLocalEuler:(SJ=new dK,function(Q){return this.getHost()?(SJ.setFromEuler(Q),this.setLocalQuaternion(SJ)):this.setEuler(Q)}),getLocalPosition3d:function(Q){(Q=Q||new I5).copy(this.p3());var n=this.getHost();return n?(n=n.getMatrix4(),Q.applyMatrix4(n.getInverse(n))):Q},setLocalPosition3d:function(Q){var n,x=this.getHost();x?(x=x.getMatrix4(),(n=new I5(Q)).applyMatrix4(x),this.p3(n.x,n.y,n.z)):Q.x!==n5?this.p3(Q.x,Q.y,Q.z):this.p3(Q)},getScale:function(){return this._scale},setScale:function(Q,n){n=2===arguments.length?{x:Q,y:n}:Q,(Q=this.getScale()).x===n.x&&Q.y===n.y||(this._scale=n,this.fp("scale",Q,n))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var Q=this._scaleTall,n=this.getScale();return[n.x,Q,n.y]},getFinalScale3d:function(){var Q=this.s3(),n=this._dynamicScale3d,x=this.getScale3d();return Q&&(x[0]*=Q[0],x[1]*=Q[1],x[2]*=Q[2]),n&&(x[0]*=n[0],x[1]*=n[1],x[2]*=n[2]),x},getFinalRotation3d:function(){return this._dynamicRotation||this.r3()},setScaleTall:function(Q){var n=this._scaleTall;n!==Q&&(this._scaleTall=Q,this.fp("scaleTall",n,Q))},setScale3d:function(Q,n,x){n="number"==typeof Q?{x:Q,y:n,z:x}:Q.length?{x:Q[0],y:Q[1],z:Q[2]}:Q,this.setScaleTall(n.y),this.setScale(n.x,n.z)},getCorners:function(Q,n){Q==x5&&(Q=0),n==x5&&(n=Q);var x=this.getAnchor(),b=this.getWidth(),J=this.getHeight(),L=-b*x.x-Q,x=-J*x.y-n,b=b+2*Q,Q=J+2*n;return[(J=this.getMatrix()).tf(L,x),J.tf(L,x+Q),J.tf(L+b,x+Q),J.tf(L+b,x)]},getEditControlPoints:function(Q,n,x){n==x5&&(n=0),x==x5&&(x=n);var b=this.getAnchor(),J=this.getWidth(),L=this.getHeight(),f=-J*b.x-n,b=-L*b.y-x,J=J+2*n,n=L+2*x;return Q?[{x:f,y:b},{x:f,y:0},{x:f,y:b+n},{x:0,y:b+n},{x:f+J,y:b+n},{x:f+J,y:0},{x:f+J,y:b},{x:0,y:b}]:[(L=this.getMatrix()).tf(f,b),L.tf(f,0),L.tf(f,b+n),L.tf(0,b+n),L.tf(f+J,b+n),L.tf(f+J,0),L.tf(f+J,b),L.tf(0,b)]},rotateAt:function(Q,n,x){var b=this._position,J=this._64O,L=new OK(J,b.x,b.y).tf(Q,n),Q=r5(Q*Q+n*n),n=K5(b.y-L.y,b.x-L.x)+x;this.setRotation(J+x),this.p(L.x+Q*f5(n),L.y+Q*V5(n))},rotateAroundAxis:function(Q,n){this.setQuaternion(this.getQuaternion().multiply(zV.setFromAxisAngle(Q,n)))},rotateAroundWorldAxis:function(Q,n){this.setQuaternion(this.getQuaternion().premultiply(zV.setFromAxisAngle(Q,n)))},rotateX:function(Q){return this.rotateAroundAxis(I5.AxisX,Q)},rotateY:function(Q){return this.rotateAroundAxis(I5.AxisY,Q)},rotateZ:function(Q){return this.rotateAroundAxis(I5.AxisZ,Q)},onParentChanged:function(Q,n){OV.superClass.onParentChanged.apply(this,arguments),this._8I()},onPropertyChanged:(gJ={},"width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function(Q){gJ[Q]=!0}),function(n){var Q,x=this,b=(OV.superClass.onPropertyChanged.call(x,n),n.property);gJ[b]&&!x._layoutUpdating&&x.updateLayoutParameters(null,b),x._69O&&x._69O.each(function(Q){Q.handleHostPropertyChange(n)}),x._49I&&x._49I.each(function(Q){Q.fp("agentChange",!0,!1)}),rG[b]&&this.updateLayoutAttaches(),"a:layout"===b.substring(0,8)&&(this.updateLayoutAttaches(),(Q=x._host)&&Q.updateLayoutAttaches()),"s:shape3d.autorotate"!==b&&"s:autorotate"!==b&&"s:shape3d.fixSizeOnScreen"!==b&&"s:fixSizeOnScreen"!==b&&"s:hide.overlapping.group"!==b||(x._47Q=x.s("autorotate")||x.s("shape3d.autorotate")||x.s("fixSizeOnScreen")||x.s("shape3d.fixSizeOnScreen")||x.s("hide.overlapping.group"))}),onHostChanged:function(Q,n){this.updateAttach(),this.updateLayoutParameters()},handleHostPropertyChange:function(Q){this.updateAttach(Q)},onStyleChanged:function(Q,n,x){OV.superClass.onStyleChanged.apply(this,arguments),cG[Q]&&this.updateAttach()},updateLayoutAttaches:function(){var Q;if(!Wj&&this.s("vector.layoutable"))return!!((Q=g(this.getImage()))&&Q.layoutAttach&&(Q=Q.layoutAttach)&&Q(this))||void 0},updateAttach:function(Q){Wj?this.updateLayoutParameters():this._51I||(this._51I=1,this._71O(Q),delete this._51I)},_71O:function(Q){var n,x,b,J,L,f,V=this,l=V._host,H=Q?Q.property:x5,I=Q?Q.oldValue:x5,Z=Q?Q.newValue:x5;if(l instanceof OV&&(!Q||rG[H])){var E=g(l.getImage());if(E&&E.layoutAttach)return}l instanceof d.Grid?H===AZ?V.setElevation(V._54O+Z-I):Q&&!PG[H]||(E=V.s("attach.row.index"),J=V.s("attach.column.index"),(x=l.getCellRect(E,J))&&(b=V.s("attach.row.span"),n=V.s("attach.column.span"),1===b&&1===n||(x=Y7(x,l.getCellRect(E+b-1,J+n-1))),wG(x,V,"attach.padding",1),V.setRect(x))):l instanceof YV&&0<=(E=V.s("attach.index"))&&(!Q||FG[H])?(b=V.s("attach.thickness"),J=l.getScale(),n=Math.max(J.x,J.y),0<b&&V.setHeight(l.getThickness()*b*n),x=V.s("attach.offset"),E<(b=(J=l.getPoints()).size())&&(L=l.getPointsMatrix2d(),f=J.get(E),b=b===E+1?J.get(0):J.get(E+1),f=L.apply(f),J=[(b=L.apply(b)).x-f.x,b.y-f.y],(E=S7(J))&&(V.s("attach.offset.relative")&&(x*=E),V.s("attach.offset.opposite")&&(x=E-x),L={x:f.x+J[0]/E*x,y:f.y+J[1]/E*x},(f=V.s("attach.gap"))&&(V.s("attach.gap.relative")&&(f*=l.getThickness()*n),L=Vs(x5,L,b,f)),V.p(L),V.setRotation(K5(J[1],J[0]))))):Q&&(H===DZ?V.translate(Z.x-I.x,Z.y-I.y):H===AZ?V.setElevation(V._54O+Z-I):iG[H]?"rotation3d"===H?V.syncRotation3d(l,Z,I):V._11Q(l,H,Z-I):"anchor"!==H&&"width"!==H&&"height"!==H&&"scale"!==H||V.layout(l))},_11Q:(zJ=new d.Math.Euler,sJ=d.Math.Euler.ReverseOrder,XJ=new d.Math.Vector2,RJ=new d.Math.Vector2,function(Q,n,x){var b=Q.p3(),J=Q.r3(),L=this.p3(),f=this.r3();if(n===Si&&(n="rotationY",x=-x),(n===Si||"rotationY"===n)&&0===f[0]&&0===f[2]&&0===J[0]&&0===J[2]&&0===L[1]&&0===b[1])return this.setRotation(-f[1]-x),XJ.set(L[0],L[2]).rotateAround(RJ.set(b[0],b[2]),-x),void this.p(XJ.x,XJ.y);var Q=(f=pV[Q.getRotationMode()])[0],V=f[1],f=f[2],l=dV[Q],H=dV[V],I=dV[f],Z=$S(),Q=(n===Si+Q?(I(Z,J[hV[f]]),H(Z,J[hV[V]]),l(Z,x),H(Z,-J[hV[V]]),I(Z,-J[hV[f]])):n===Si+V?(I(Z,J[hV[f]]),H(Z,x),I(Z,-J[hV[f]])):n===Si+f&&I(Z,x),BS(L,b)),l=(uS(Q,Z),this.p3(b[0]+Q[0],b[1]+Q[1],b[2]+Q[2]),this.getRotationMode());sV(Z,this.r3(),l),zJ.setFromRotationMatrix(Z,sJ(l)),this.r3([zJ.x,zJ.y,zJ.z])}),syncRotation3d:(dJ=new dK,hJ=new mK,pJ=new I5,function(Q,n,x){var b;x[0]===n[0]&&x[1]===n[1]&&x[2]===n[2]||(b=mK.ReverseOrder(Q.getRotationMode()),zV.setFromEuler(hJ.set(x[0],x[1],x[2],b)),dJ.setFromEuler(hJ.set(n[0],n[1],n[2],b)),dJ.multiply(zV.inverse()),x=Q.p3(),n=this.p3(),pJ.set(n[0]-x[0],n[1]-x[1],n[2]-x[2]).applyQuaternion(dJ),this.p3(x[0]+pJ.x,x[1]+pJ.y,x[2]+pJ.z),this.setQuaternion(this.getQuaternion(zV).premultiply(dJ)))}),isHostOn:function(Q){if(this._host&&Q&&Q._69O)for(var n={},x=this._host;x&&x!==this&&!n[x._id];){if(x===Q)return!0;x=(n[x._id]=x)._host}return!1},isLoopedHostOn:function(Q){return this.isHostOn(Q)&&Q.isHostOn(this)},getScaledSize:function(){var Q=this.getSize(),n=this.getScale();return Q.width*=Math.abs(n.x),Q.height*=Math.abs(n.y),Q},invalidateView:function(){var Q=this.dm();Q&&Q.firePropertyChange("invalidateView",!1,!0)},layout:function(Q){if(Q=Q||this.getHost()){var n=this,x=n.s("layout.h")||"center",b=n.s("layout.v")||"center";if("center"!==x||"center"!==b){var J,L,f,V,l,H,I=new d.Math.Vector2,Z=Q.getPosition(),E=Q.getAnchor(),a=Q.getScaledSize(),o=(n.getPosition(),1),B=1;switch(n._layoutUpdating=!0,x){case"left":I.setX(n._layoutHValue-E.x*a.width);break;case"right":I.setX((1-E.x)*a.width-n._layoutHValue);break;case"leftright":J=a.width-n._layoutHValue[2],f=n.getRotation()-Q.getRotation(),V=Math.abs(Math.sin(f)),o+=(l=Math.abs(Math.cos(f)))*J/n._layoutHValue[3],B+=V*J/n._layoutHValue[4],I.setX(n._layoutHValue[1]+(n._layoutHValue[5]-E.x)*a.width);break;case"center":I.setX((.5-E.x)*a.width-n._layoutHValue);break;case"scale":f=n.getRotation()-Q.getRotation(),V=Math.abs(Math.sin(f)),l=Math.abs(Math.cos(f)),I.setX((.5-E.x)*a.width-n._layoutHValue[1]*a.width/n._layoutHValue[0]),o+=l*(L=a.width/n._layoutHValue[2]-1),B+=V*L}switch(b){case"top":I.setY(n._layoutVValue-E.y*a.height);break;case"bottom":I.setY((1-E.y)*a.height-n._layoutVValue);break;case"topbottom":f||(f=n.getRotation()-Q.getRotation(),V=Math.abs(Math.sin(f)),l=Math.abs(Math.cos(f))),o+=V*(J=a.height-n._layoutVValue[2])/n._layoutVValue[3],B+=l*J/n._layoutVValue[4],I.setY(n._layoutVValue[1]+(n._layoutVValue[5]-E.y)*a.height);break;case"center":I.setY((.5-E.y)*a.height-n._layoutVValue);break;case"scale":f||(f=n.getRotation()-Q.getRotation(),V=Math.abs(Math.sin(f)),l=Math.abs(Math.cos(f))),I.setY((.5-E.y)*a.height-n._layoutVValue[1]*a.height/n._layoutVValue[0]),o+=V*(L=a.height/n._layoutVValue[2]-1),B+=l*L}"leftright"!==x&&"scale"!==x&&"topbottom"!==b&&"scale"!==b||(b=this.getScale(),H=Math.abs(b.x),b=Math.abs(b.y),"leftright"===x||"scale"===x?n.setSize(n._layoutHValue[3]*o/H,n._layoutHValue[4]*B/b):n.setSize(n._layoutVValue[3]*o/H,n._layoutVValue[4]*B/b)),I.rotateAround(null,Q.getRotation()),this.setPosition(I.x+Z.x,I.y+Z.y),n._layoutUpdating=n5}}},updateLayoutParameters:function(Q,n){if(Q=Q||this.getHost()){var x=this,b=x.s("layout.h"),J=x.s("layout.v");if(b||J){var L,f,V,l,H,I,Z=new d.Math.Vector2,E=Q.getPosition(),a=Q.getAnchor(),o=Q.getScaledSize(),B=x.getPosition(),G=x.getScaledSize();switch(Z.set(B.x-E.x,B.y-E.y),Z.rotateAround(null,-Q.getRotation()),b){case"left":x._layoutHValue=Z.x+a.x*o.width;break;case"right":x._layoutHValue=-Z.x+(1-a.x)*o.width;break;case"center":x._layoutHValue=-Z.x+(.5-a.x)*o.width;break;case"leftright":case"scale":L="scale"===b?-Z.x+(.5-a.x)*o.width:(f=x.getAnchor(),V=x.getRotation()-Q.getRotation(),l=Math.cos(V),H=Math.sin(V),I=-Math.min(-f.x*l+f.y*H,-f.x*l-(1-f.y)*H,(1-f.x)*l+f.y*H,(1-f.x)*l-(1-f.y)*H),Z.x-(I-a.x)*o.width),"position"===n&&"object"==typeof x._layoutHValue?(x._layoutHValue[0]=o.width,x._layoutHValue[1]=L):x._layoutHValue=[o.width,L,o.width,G.width,G.height,I]}switch(J){case"top":x._layoutVValue=Z.y+a.y*o.height;break;case"bottom":x._layoutVValue=-Z.y+(1-a.y)*o.height;break;case"center":x._layoutVValue=-Z.y+(.5-a.y)*o.height;break;case"topbottom":case"scale":L="scale"===J?-Z.y+(.5-a.y)*o.height:(V||(f=x.getAnchor(),V=x.getRotation()-Q.getRotation(),l=Math.cos(V),H=Math.sin(V)),I=-Math.min(-f.x*H-f.y*l,-f.x*H+(1-f.y)*l,(1-f.x)*H-f.y*l,(1-f.x)*H+(1-f.y)*l),Z.y-(I-a.y)*o.height),"position"===n&&"object"==typeof x._layoutVValue?(x._layoutVValue[0]=o.height,x._layoutVValue[1]=L):x._layoutVValue=[o.height,L,o.height,G.width,G.height,I]}}}},getSerializableProperties:function(){var Q=OV.superClass.getSerializableProperties.call(this);return $_(Q,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),Q}}),d.Edge=function(Q,n){u_(XV,this),this.setSource(Q),this.setTarget(n)}),RV=(p1("Edge",BG,{ms_edge:!0,_icon:"edge_icon",getUIClass:function(){return ZE},_22Q:function(){return cu},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},canSetSourceTarget:function(Q,n){if(Q===this)return!1;if(v(Q))return!0;for(var x,b,J,L,f=[this],V=-1,l=0;V<l;)if(x=f[++V]._44I)for(J=0,L=(x=x.getArray()).length;J<L;J++)if(b=x[J],Z_(b)&&!(0<=f.indexOf(b))){if(b===Q)return!1;f.push(b),l++}return!0},setSource:function(Q){var n;this._source!==Q&&this.canSetSourceTarget(Q)&&(n=this._source,this._source=Q,n&&n._16I(this),Q&&Q._2I(this),this._7I(),this.fp("source",n,Q))},setTarget:function(Q){var n;this._target!==Q&&this.canSetSourceTarget(Q)&&(n=this._target,this._target=Q,n&&n._18I(this),Q&&Q._4I(this),this._7I(),this.fp("target",n,Q))},isLooped:function(){return this._source===this._target&&v(this._source)&&v(this._target)},onPropertyChanged:(VK={},["source","target","sourceAgent","targetAgent","edgeGroup","agentChange","s:edge.width","s:edge.type","s:edge.offset","s:edge.center","s:edge.points","s:edge.segments","s:edge.gap","s:edge.source.t3","s:edge.source.position","s:edge.source.anchor.x","s:edge.source.anchor.y","s:edge.source.anchor.elevation","s:edge.source.offset.x","s:edge.source.offset.y","s:edge.source.offset.elevation","s:edge.source.index","s:edge.source.percent","s:edge.target.t3","s:edge.target.position","s:edge.target.anchor.x","s:edge.target.anchor.y","s:edge.target.anchor.elevation","s:edge.target.offset.x","s:edge.target.offset.y","s:edge.target.offset.elevation","s:edge.target.index","s:edge.target.percent","s:edge.color","s:edge.gradient.color","s:edge.pattern","s:edge.dash","s:edge.dash.color","s:edge.dash.pattern","s:edge.dash.offset","s:repeat.uv.length","s:rotate.uv.length","s:rotate.vs.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(Q){VK[Q]=!0}),function(Q){VK[Q.property]&&(this._needChangeGeometry=!0),this._needChangeGeometry&&this._49I&&this._49I.each(function(Q){Q.fp("agentChange",!0,!1)}),"s:alwaysOnTop"!==Q.property&&"s:shape3d.alwaysOnTop"!==Q.property||(Q.newValue?this.setRenderLayer("top"):this.setRenderLayer(n5))}),_7I:function(){var Q,n=this,x=function(Q){if(Q.isLooped())return Q._source;var n=KG(Q._source),x=KG(Q._target);return n===x?Q._source:UG(n,x)}(n),x=(n._40I!==x&&((Q=this._40I)&&Q._15I(n),(n._40I=x)&&x._1I(n),n.fp("sourceAgent",Q,x),OG(Q,n._41I),OG(x,n._41I)),function(Q){if(Q.isLooped())return Q._target;var n=KG(Q._source),x=KG(Q._target);return n===x?Q._target:UG(x,n)}(n));n._41I!==x&&((Q=n._41I)&&Q._17I(n),(n._41I=x)&&x._3I(n),n.fp("targetAgent",Q,x),OG(Q,n._40I),OG(x,n._40I))},_22I:function(Q){this._52I=Q,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){return this._52I&&this._52I.get(0)!==this&&!this.getStyle(Xi)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var Q=this._52I;return Q&&!this.getStyle(Xi)&&1<Q.size()&&this===Q.get(0)},toggle:function(){this.beginTransaction();var Q=this._52I,n=!this.s(Xi);Q&&1<Q.size()&&(Q.each(function(Q){Q.s(Xi,n)}),Q.getSiblings().each(function(n){n!==Q&&n.each(function(Q){Q.fp("edgeGroup",x5,n)})})),this.endTransaction()},setStyle:function(Q,n){var x;Q!==Ri&&"edge.segments"!==Q||(n=H_(x=n)?new m(x):x),XV.superClass.setStyle.call(this,Q,n)},onStyleChanged:function(Q,n,x){XV.superClass.onStyleChanged.apply(this,arguments),tG[Q]&&OG(this._41I,this._40I)},getSerializableProperties:function(){var Q=XV.superClass.getSerializableProperties.call(this);return $_(Q,{source:1,target:1}),Q}}),d.Group=function(){u_(RV,this)}),gV=(p1("Group",OV,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return aE},onChildAdded:function(Q,n){RV.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(Q,n){RV.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var Q;this._54I||Wj||(Q=this.getChildrenRect())&&(this._53I=1,this.p(t1(this.s("group.position"),Q,this.getSize())),delete this._53I)},getChildrenRect:function(){var n,x=this;return x.eachChild(function(Q){v(Q)&&(n=Y7(n,x.getChildRect(Q)))}),n},getChildRect:function(n){var x;return v(n)&&n.s(ti)&&(E_(n)&&n.isExpanded()&&n.eachChild(function(Q){x=Y7(x,n.getChildRect(Q))}),!x&&n.getRect&&(x=n.getRect())),x},setPosition:function(Q,n){this._54I||(n=2===arguments.length?{x:Q,y:n}:Q,Wj||this._53I||(this._54I=1,D1(this._children,n.x-this._position.x,n.y-this._position.y),delete this._54I),RV.superClass.setPosition.call(this,n))},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(Q){var n;this._57O!==Q&&(n=this._57O,this._57O=Q,this.fp("expanded",n,this._57O),this._fireInvalidateDeep(),this._8I())},_fireInvalidateDeep:function(){this.eachChild(function(Q){E_(Q)?Q._fireInvalidateDeep():Q.iv()})},_8I:function(){RV.superClass._8I.call(this),this.eachChild(function(Q){v(Q)&&Q._8I()})},onStyleChanged:function(Q,n,x){RV.superClass.onStyleChanged.apply(this,arguments),"group.position"===Q&&this._81I()},getSerializableProperties:function(){var Q=RV.superClass.getSerializableProperties.call(this);return Q.expanded=1,Q}}),d.Camera=function(){u_(gV,this),this.s({"shadow.cast":!1,"shadow.receive":!1,shape3d:"billboard"}),this._viewMatrix=new s.Matrix4,this._projectMatrix=new s.Matrix4,this.setScale3d(1,1,-1),this.setCullingMask("main,top"),this._projectMatrixDirty=!0}),SV=(gV.CubeDirectionParam=[1,0,0,0,-1,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,-1,0,0,0,-1,0,0,1,0,-1,0,0,0,-1,0,-1,0],p1("Camera",OV,{_22Q:function(){return Camera3dUI},attachRenderTarget:function(Q){this._projectMatrixDirty=!0,this.renderTarget=Q},detachRenderTarget:function(){this._projectMatrixDirty=!0,this.renderTarget=null},setCullingMask:function(Q){Q=Q.split(","),this._cullingLayers=Q,this._cullingMask=lG(Q,null,!0),this.gv&&(this._currentCullingMask=lG(Q,this.gv.getRenderLayerInfoMap(),!0))},isLayerVisible:function(Q){var n,Q=this.gv?(n=this.gv.getRenderLayerInfo(Q),this._currentCullingMask):(n=JG[Q],this._cullingMask);return n&&HG(Q,n.mask)},isOrtho:function(){return"ortho"===this.s("camera.type")&&!this.isCube()},isCube:function(){return this.renderTarget&&this.renderTarget.isCube()},isPerspective:function(){return!this.isOrtho()},setViewMatrix:(EK=new d.Math.Matrix4,aK=new d.Math.Euler,function(Q){Q.isMatrix4?this._viewMatrix.copy(Q):this._viewMatrix.fromArray(Q),EK.getInverse(this._viewMatrix),this.p3(EK.getPosition().toArray()),aK.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(EK),this.r3([aK.x,aK.y,aK.z])}),getViewMatrix:function(Q){var n=qS(null,null,this.r3(),this.getRotationMode(),this.p3()),x=this._viewMatrix;return x.fromArray(n).getInverse(x),x.toArray(Q)},setProjectMatrix:function(Q){Q.isMatrix4?this._projectMatrix.copy(Q):this._projectMatrix.fromArray(Q),Q=this._projectMatrix.getElements(),this.isOrtho()?this.s({"camera.near":(Q[14]+1)/Q[10],"camera.far":(Q[14]-1)/Q[10],"camera.ortho.width":2/Q[0]}):this.s({"camera.near":Q[14]/(Q[10]-1),"camera.far":Q[14]/(Q[10]+1),"camera.fovy":2*Math.atan(1/Q[5]),"camera.aspect":Q[5]/Q[0]}),this._projectMatrixDirty=!1},onPropertyChanged:function(Q){gV.superClass.onPropertyChanged.call(this,Q),"s:camera.near"!==(Q=Q.property)&&"s:camera.far"!==Q&&"s:camera.fovy"!==Q&&"s:camera.aspect"!==Q&&"s:camera.ortho.width"!==Q||(this._projectMatrixDirty=!0)},getProjectMatrix:function(){var Q,n,x,b,J,L,f,V=this;return V._projectMatrixDirty&&(Q=V.gv,x=(n=V.isCube())?1:V.s("camera.aspect")||(Q?Q.getAspect():null)||b5.graph3dViewAspect,b=V.s("camera.near")||(Q?Q.getNear():null)||b5.graph3dViewNear,J=V.s("camera.far")||(Q?Q.getFar():null)||b5.graph3dViewFar,L=$S(),V.isOrtho()?(f=(V.s("camera.ortho.width")||(Q?Q.getOrthoWidth():null)||b5.graph3dViewOrthoWidth)/2,os(L,-f,f,-(f/=x),f,b,J)):(f=n?Math.PI/2:V.s("camera.fovy")||(Q?Q.getFovy():null)||b5.graph3dViewFovy,as(L,f,x,b,J)),V._projectMatrix.fromArray(L),V._projectMatrixDirty=!1),V._projectMatrix.toArray()},lookAt:function(Q,n){var x=this.p3();return Q.x?this.lookAtDirection([Q.x-x[0],Q.y-x[1],Q.z-x[2]],n):this.lookAtDirection([Q[0]-x[0],Q[1]-x[1],Q[2]-x[2]],n)},lookAtDirection:(lK=new d.Math.Matrix4,HK=new d.Math.Euler,IK=new d.Math.Vector3,ZK=new d.Math.Vector3,function(Q,n){lK.lookAtDirection(IK.copy(Q).multiplyScalar(-1),n?ZK.copy(n):ZK.set(0,1,0)),HK.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(lK),this.r3([HK.x,HK.y,HK.z])}),updateAndRender:function(Q){return Q.syncRenderState(),Q.updateScene(),this.render(Q)},getSize:function(Q){var n=this.renderTarget;return n?[n.width,n.height]:Q?(n=Q.getDevicePixelRatio(),[Q.getWidth()*n,Q.getHeight()*n]):[0,0]},getWidth:function(Q){return this.getSize(Q)[0]},getHeight:function(Q){return this.getSize(Q)[1]},getEye:function(){return this.p3()},getCenter:function(){var Q=new I5,n=this.getEuler();return Q.set(0,0,-1).applyEuler(n),this.gv&&(n=new I5(this.gv.getEye()),n=new I5(this.gv.getCenter()).sub(n).length(),Q.setLength(n)),[(n=this.p3())[0]+Q.x,n[1]+Q.y,n[2]+Q.z]},getUp:function(){var Q=new I5,n=this.getEuler(),n=(Q.set(0,0,-1).applyEuler(n),(new I5).set(0,1,0).applyEuler(n)),x=(new I5).set(0,1,0);return(Math.abs(Q.cross(n).dot(x))<1e-5?x:n).toArray()},render:function(Q){var n=this,x=Q.getGL();if(!x)return!1;this._currentCullingMask=lG(this._cullingLayers,Q.getRenderLayerInfoMap(),!0);var b=n.renderTarget,J=n.getSize(Q),L=((n.gv=Q)._camera=n,Q._frameState.renderState.glState.color.clear.slice(0)),f=(Fs(x,n.s("camera.background")),Q.getEye);if(Q.getEye=function(){return n.p3()},Q.syncRenderState(),n.isCube())for(var V=gV.CubeDirectionParam,l=0;l<6;l++)b&&b.bind(x,l),Q._18Q=null,n.lookAtDirection([V[6*l+0],V[6*l+1],V[6*l+2]],[V[6*l+3],V[6*l+4],V[6*l+5]]),!1!==n.s("camera.clear")&&x.clear(16384),Q.setViewport(x,0,0,J[0],J[1]),n.s("camera.onlySky")?Q.renderSky():Q.renderScene({renderAxis:n.s("camera.renderAxis"),renderGrid:n.s("camera.renderGrid"),renderEdit:n.s("camera.renderEdit"),renderShadowMap:n.s("camera.renderShadowMap"),renderReflector:!1}),Q._18Q=null,b&&b.unbind(x);else b&&b.bind(x),Q._18Q=null,!1!==n.s("camera.clear")&&x.clear(16384),Q.overlappingBox.clear(),Q.setViewport(x,0,0,J[0],J[1]),n.s("camera.onlySky")?Q.renderSky():Q.renderScene({renderAxis:n.s("camera.renderAxis"),renderGrid:n.s("camera.renderGrid"),renderEdit:n.s("camera.renderEdit"),renderShadowMap:n.s("camera.renderShadowMap")}),Q._18Q=null,b&&b.unbind(x);return Q.getEye=f,Fs(x,L),Q._camera=null,!(n.gv=null)}}),d.Block=function(){u_(SV,this),this.s({"shadow.cast":!1,"shadow.receive":!1})}),x=(p1("Block",OV,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,_scaleMode:"2d",ms_ac:["clickThroughEnabled","syncSize","scaleMode"],getUIClass:function(){return oE},_22Q:function(){return Pu},onChildAdded:function(Q,n){SV.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(Q,n){SV.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},_getBoundingBox:(DK=new X,function(Q,n){if(!(Q=Q instanceof OV?[Q]:Q)||0===Q.length)return x5;var n=[],x=(function(Q,b){var J=(new X).makeRotationFromEuler(this.getEuler()).setPosition((new I5).fromArray(this.p3()));J.getInverse(J),Q.forEach(function(Q){var n,x;v(Q)&&(n=b,x=J,DK.fromArray(FS(Q)),Q=Q.getAnchor3d(),n.push((new I5).set(0-Q.x,0-Q.y,0-Q.z).applyMatrix4(DK).applyMatrix4(x)),n.push((new I5).set(0-Q.x,0-Q.y,1-Q.z).applyMatrix4(DK).applyMatrix4(x)),n.push((new I5).set(0-Q.x,1-Q.y,0-Q.z).applyMatrix4(DK).applyMatrix4(x)),n.push((new I5).set(0-Q.x,1-Q.y,1-Q.z).applyMatrix4(DK).applyMatrix4(x)),n.push((new I5).set(1-Q.x,0-Q.y,0-Q.z).applyMatrix4(DK).applyMatrix4(x)),n.push((new I5).set(1-Q.x,0-Q.y,1-Q.z).applyMatrix4(DK).applyMatrix4(x)),n.push((new I5).set(1-Q.x,1-Q.y,0-Q.z).applyMatrix4(DK).applyMatrix4(x)),n.push((new I5).set(1-Q.x,1-Q.y,1-Q.z).applyMatrix4(DK).applyMatrix4(x)))})}.call(this,Q,n),[1/0,1/0,1/0]),b=[-1/0,-1/0,-1/0];return n.forEach(function(Q){x[0]=Math.min(Q.x,x[0]),x[1]=Math.min(Q.y,x[1]),x[2]=Math.min(Q.z,x[2]),b[0]=Math.max(Q.x,b[0]),b[1]=Math.max(Q.y,b[1]),b[2]=Math.max(Q.z,b[2])}),{min:x,max:b}}),updateFromChildren:function(){var Q,n,x,b,J,L,f,V,l;Wj||this._updatingToChildren||!this._syncSize||0===this.size()||this._freezeSyncFromChildren||(x=this._getBoundingBox(this.toChildren(v)))&&(this._updatingFromChildren=1,Q=(new I5).fromArray(this.getScale3d()),n=(new I5).fromArray(x.min),x=(new I5).fromArray(x.max),f=b5.blockMinSize,l=new I5,0===(x=x.clone().sub(n)).x&&l.setX(.5),0===x.y&&l.setY(.5),0===x.z&&l.setZ(.5),b=this._width==x5||-1===this._width,J=new I5(this.getAnchor3d()),L=Q.clone().multiply((new I5).fromArray(this.s3())),0===(V=x.clone()).x&&V.setX(f),0===V.y&&V.setY(f),0===V.z&&V.setZ(f),L=(f=J.clone().multiply(L)).clone().multiplyScalar(-1).sub(n).divide(V).add(f.divide(V)).add(l),f=this.s("keepPosition"),b||this._anchorChanged||this._scaleChanged||!f?(V=(J=!b&&f?L:J).clone().multiply(x).add(n).applyEuler(this.getEuler()).add((new I5).fromArray(this.p3())),this.p3([V.x,V.y,V.z])):this.setAnchor3d(L.x,L.y,L.z),l=new I5(1,1,1).divide(Q).multiply(x),this.s3(Math.abs(l.x),Math.abs(l.y),Math.abs(l.z)),delete this._updatingFromChildren)},setPosition:function(Q,n){this._updatingToChildren||(n=2===arguments.length?{x:Q,y:n}:Q,Wj||this._updatingFromChildren||(this._updatingToChildren=1,D1(this._children,n.x-this._position.x,n.y-this._position.y),delete this._updatingToChildren),SV.superClass.setPosition.call(this,n))},setSize3d:function(){this.beginTransaction(),SV.superClass.setSize3d.apply(this,arguments),this.endTransaction()},setTall:function(Q){var n;this._updatingToChildren||(this.beginTransaction(),(Q=J5(Q,b5.blockMinSize))!==(n=this.getTall())&&SV.superClass.setTall.call(this,Q),Wj||this._updatingFromChildren||(this._updatingToChildren=1,this._adjustChildTallOrScale(Q/n,"size"),delete this._updatingToChildren,this.updateFromChildren()),this.endTransaction())},setWidth:function(Q){return this.setSize(Q,this.getHeight())},setHeight:function(Q){return this.setSize(this.getWidth(),Q)},setSize:function(Q,n){var x,b,J=b5.blockMinSize;Q=J5(Q,J),n=J5(n,J),(J=this)._updatingToChildren||(2!==arguments.length&&(n=Q.height,Q=Q.width),this.beginTransaction(),x=J.getWidth(),b=J.getHeight(),Q!==x&&SV.superClass.setWidth.call(J,Q),n!==b&&SV.superClass.setHeight.call(J,n),Wj||J._updatingFromChildren||(J._updatingToChildren=1,J._adjustChildScaleOrSize(Q/x,n/b,"size"),delete J._updatingToChildren,J.updateFromChildren()),this.endTransaction())},_adjustChildScaleOrSize:function(H,I,Z){var E,a;this._syncSize&&(E=this.getPosition(),a=this.getRotation(),this.eachChild(function(Q){var n,x,b,J,L,f,V,l;v(Q)&&(J=Q.getPosition(),l=Q.getRotation(),n=Q.getWidth(),x=Q.getHeight(),f=(b=Q.getScale()).x*n,V=b.y*x,0!=f&&0!=V&&(H*I<0&&Q.setRotation(-1*l),(J=new OK(l,J.x,J.y,f,V)).translate(-E.x,-E.y),J.rotate(-a),l=K5(J.b*Math.sign(f),J.a*Math.sign(f)),J.scale(H,I),V=f5(l),l=Math.abs(V)<.001?(f=V5(l),L=J.b/f,-J.c/f):(L=J.a/V,J.d/V),"scale"===Z?Q.setScale(L/n,l/x):"size"===Z&&(f=L/b.x,V=l/b.y,Q.setScale(P_(L)*Math.abs(b.x),P_(l)*Math.abs(b.y)),Q instanceof d.Shape?(Q.setWidthForce(Math.max(Math.abs(f),1e-5)),Q.setHeightForce(Math.max(Math.abs(V),1e-5))):Q.setSize(Math.max(.01,Math.abs(f)),Math.max(.01,Math.abs(V)))),J.rotate(a),J.translate(E.x,E.y),Q.setPosition(J.tx,J.ty)))}))},_calcChangeFactor:function(Q,n,x,b){var Q=P5(Q),J=(x=P5(x))<Q?Q/x:x/Q;return Q=P5(n),x=P5(b),J5(J,x<Q?Q/x:x/Q)},setElevation:function(Q){this._updatingToChildren||0!=(Q-=this.getElevation())&&(Wj||this._updatingFromChildren||(this._updatingToChildren=1,D1(this._children,0,Q,0),delete this._updatingToChildren),SV.superClass.setElevation.apply(this,arguments))},setScaleTall:function(Q){var n=this;if(!n._updatingToChildren){var x,b=n.getScaleTall();if(P5(Q)<.01&&(Q=.01*(P_(Q)||P_(b))),"3d"===n._scaleMode)return x=n.getScale(),void n.setScale3d(x.x,Q,x.y);SV.superClass.setScaleTall.call(n,Q),Wj||n._updatingFromChildren||(n._updatingToChildren=1,n._adjustChildTallOrScale(Q/b,"scale"),delete n._updatingToChildren,n._scaleChanged=1,this.updateFromChildren(),delete n._scaleChanged)}},_adjustChildTallOrScale:function(x,b){var J;this._syncSize&&(J=this.getElevation(),this.eachChild(function(Q){var n;v(Q)&&("size"===b?(n=Q.getTall(),x<0&&Q.setScaleTall(-1*Q.getScaleTall()),Q.setTall(Math.max(.01,Math.abs(n*x)))):(n=Q.getScaleTall(),Q.setScaleTall(n*x)),Q.setElevation(J+(Q.getElevation()-J)*x))}))},setAnchor3d:function(){var Q;if(!this._updatingToChildren)return this.beginTransaction(),(Q=SV.superClass.setAnchor3d.apply(this,arguments))&&!Wj&&!this._updatingFromChildren&&this._syncSize&&(this._anchorChanged=1,this.updateFromChildren(),delete this._anchorChanged),this.endTransaction(),Q},setAnchor:function(Q,n,x){var b=this;if(!b._updatingToChildren){var J=b.getAnchor(),L=SV.superClass.setAnchor.apply(b,arguments);if(Wj||b._updatingFromChildren||!b._syncSize)return L;b._updatingToChildren=1;var f=b.getAnchor(),V=(l=b.getSize()).width*(J.x-f.x),l=l.height*(J.y-f.y),J=(new X).compose(new I5,this.getQuaternion(),new I5(this.getScale3d())),H=new I5(V,0,l).applyMatrix4(J);return b.eachChild(function(Q){var n;v(Q)&&(n=new I5(Q.p3()),Q.p3(n.add(H).toArray()))}),delete b._updatingToChildren,L}},setAnchorElevation:function(Q){var n=this;if(!n._updatingToChildren){var x=n.getAnchorElevation(),b=SV.superClass.setAnchorElevation.apply(n,arguments);if(Wj||n._updatingFromChildren||!n._syncSize)return b;n._updatingToChildren=1;var J=n.getAnchorElevation(),x=n.getTall()*(x-J),J=(new X).compose(new I5,this.getQuaternion(),new I5(this.getScale3d())),L=new I5(0,x,0).applyMatrix4(J);return n.eachChild(function(Q){var n;v(Q)&&(n=new I5(Q.p3()),Q.p3(n.add(L).toArray()))}),delete n._updatingToChildren,b}},setRotation:function(Q){this._updateChildrenRotation3d("rotation",Q)},setRotationX:function(Q){this._updateChildrenRotation3d("rotationX",Q)},setRotationZ:function(Q){this._updateChildrenRotation3d("rotationZ",Q)},setRotation3d:function(Q,n,x){var b,J,L=this;L._updatingToChildren||(b=L.r3(),SV.superClass.setRotation3d.apply(L,arguments),J=L.r3(),Wj||L._updatingFromChildren||(L._updatingToChildren=1,L.eachChild(function(Q){v(Q)&&Q.syncRotation3d(L,J,b)}),delete L._updatingToChildren))},_updateChildrenRotation3d:function(Q,n){var x;this._updatingToChildren||(x=this[b_(Q)](),SV.superClass[J_(Q)].call(this,n),Wj||this._updatingFromChildren||this._updateRotationToChildren(Q,n-x))},_updateRotationToChildren:function(n,x){var b=this;b._updatingToChildren=1,b.eachChild(function(Q){v(Q)&&Q._11Q(b,n,x)}),delete b._updatingToChildren},setScale:function(Q,n){var x,b=this;b._updatingToChildren||(null==n&&(n=Q.y,Q=Q.x),x=b.getScale(),P5(Q)<.01&&(Q=.01*(P_(Q)||P_(x.x))),P5(n)<.01&&(n=.01*(P_(n)||P_(x.y))),"3d"===b._scaleMode?b.setScale3d(Q,b.getScaleTall(),n):(SV.superClass.setScale.call(b,Q,n),Wj||b._updatingFromChildren||(b._updatingToChildren=1,Q/=x.x,n/=x.y,b._adjustChildScaleOrSize(Q,n,"scale"),delete b._updatingToChildren,b._scaleChanged=1,b.updateFromChildren(),delete b._scaleChanged)))},onPropertyChanged:function(Q){SV.superClass.onPropertyChanged.call(this,Q),"s:3d.visible"===Q.property&&this._invalidateChildrenBatch()},_invalidateChildrenBatch:function(){this.eachChild(function(Q){(Q.s("batch")||Q.s("wf.geometry")||Q.s("wf.visible"))&&Q.iv(),Q instanceof SV&&Q._invalidateChildrenBatch()})},getSerializableProperties:function(){var Q=SV.superClass.getSerializableProperties.call(this);return Q.clickThroughEnabled=1,Q.syncSize=1,Q.scaleMode=1,Q},setScale3d:(oK=new I5,BK=new I5,GK=new I5,_K=new X,$K=new dK,WK=new I5,function(Q,n,x){var b,J,L=this,n="number"==typeof Q?{x:Q,y:n,z:x}:Q.length?{x:Q[0],y:Q[1],z:Q[2]}:Q;"3d"!==L._scaleMode?SV.superClass.setScale3d.apply(L,arguments):L._syncSize&&0!==L.size()&&((b=L.getMatrix4()).getInverse(b),SV.superClass.setScaleTall.call(L,n.y),SV.superClass.setScale.call(L,n.x,n.z),J=L.getMatrix4(),Wj||L._updatingFromChildren||(L._updatingToChildren=1,L.eachChild(function(Q){var n;v(Q)&&(BK.fromArray(Q.s3()),Q instanceof d.Polyline?(n=Q.getThickness(),BK.x=BK.x||n,BK.y=BK.y||n,BK.z=BK.z||n,WK.copy(Q.getScale3d()).multiplyScalar(n),Q.getQuaternion($K),oK.copy(Q.p3()),GK.copy(Q.getFinalScale3d()),GK.x=GK.x||WK.x,GK.y=GK.y||WK.y,GK.z=GK.z||WK.z,_K.compose(oK,$K,GK)):Q.getMatrix4(_K),_K.premultiply(b).premultiply(J),_K.decompose(oK,$K,GK),GK.divide(BK),Q.setQuaternion($K),Q.p3(oK.toArray()),Q.setScale3d(GK.toArray()))}),delete L._updatingToChildren,L._scaleChanged=1,L.updateFromChildren(),delete L._scaleChanged))})}),d.Grid=function(){u_(d.Grid,this)}),mV=(p1("Grid",OV,{IRotatable:!1,_icon:"grid_icon",_image:x5,getUIClass:function(){return _E},setRotation:function(){},getCellRect:function(Q,n){var x=this.s("grid.row.count"),b=this.s("grid.column.count");if(x<=0||b<=0||Q<0||x<=Q||n<0||b<=n)return x5;var J,L,f,V=this.getRect(),l=this.s("grid.row.percents"),H=this.s("grid.column.percents");if(wG(V,this,"grid.border",-1),l&&l._as&&(l=l._as),H&&H._as&&(H=H._as),l&&l.length===x){for(J=f=0;J<Q;J++)f+=V.height*l[J];V.y+=f,V.height=V.height*l[Q]}else V.height=V.height/x,V.y+=V.height*Q;if(H&&H.length===b){for(J=L=0;J<n;J++)L+=V.width*H[J];V.x+=L,V.width=V.width*H[n]}else V.width=V.width/b,V.x+=V.width*n;return QS(V,-this.s("grid.gap")),V}}),d.Text=function(){u_(mV,this),this.setSize(100,50),this.s("text","TEXT")}),YV=(p1("Text",OV,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return $E},setWidth:function(Q){mV.superClass.setWidth.call(this,Q=Q||.001)},setHeight:function(Q){mV.superClass.setHeight.call(this,Q=Q||.001)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),S5("__text__",{width:{value:100,isSafeFunc:!0,func:function(Q){return Q?Q._width:100}},height:{value:50,isSafeFunc:!0,func:function(Q){return Q?Q._height:50}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"},scaleX:{func:"style@text.scale.x"},scaleY:{func:"style@text.scale.y"},gradient:{func:"style@text.gradient"},gradientColor:{func:"style@text.gradient.color"},gradientPack:{func:"style@text.gradient.pack"},decoration:{func:"style@text.decoration"},vertical:{func:"style@text.vertical"},verticalGap:{func:"style@text.vertical.gap"},wrap:{func:"style@text.wrap"},letterGap:{func:"style@text.letter.gap"},borderWidth:{func:"style@text.border.width"},borderColor:{func:"style@text.border.color"}}]}),d.Shape=function(){u_(YV,this),this._59O=new m}),TV=(YV.__de__=n,p1("Shape",OV,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return BE},_22Q:function(){return Fu},getLength:function(Q){return v_(Yh(this._59O,this._58O,Q,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var Q=this._58O;return Q&&new m(Q._as.slice(0))},setSegments:function(Q){var n=this._58O;Q=Q?H_(Q)?new m(Q.slice(0)):new m(Q._as.slice(0)):null,(n&&Q&&n._as.join(",")!==Q._as.join(",")||n!==Q)&&(this._58O=Q,this.fp("segments",n,Q))},getPoints:function(){return this._59O},toPoints:function(){var Q=this._59O;return new m(Q._as.slice(0))},getPointsMatrix2d:function(){var Q=new s.Matrix2d,n=this.getPosition(),x=this.getScale(),b=this.getRotation();return Q.translate(-n.x,-n.y).scale(x.x,x.y).rotate(b).translate(n.x,n.y),Q},getPointsMatrix3d:function(){var Q=new s.Matrix4,n=Q.getElements(),x=this.p3(),b=(Hs(n,x),sV(n,this.getFinalRotation3d(),this.getRotationMode()),this.getScale3d()),J=this._dynamicScale3d;return J&&(b[0]*=J[0],b[1]*=J[1],b[2]*=J[2]),Is(n,b),Hs(n,GS(x)),Q},setPoints:function(Q,n){var x,b,J=this,L=J._59O;Q=Q?H_(Q)?new m(Q.slice(0)):new m(Q._as.slice(0)):new m,n&&(x=J.getPosition(),b=new OK(J.getRotation(),0,0,J.getScale().x,J.getScale().y)),(L&&Q&&L._as.join(",")!==Q._as.join(",")||L!==Q)&&(J._59O=Q,J.fs(),J.fp("points",L,Q)),n&&(Q=(L=J.getPosition()).x-x.x,n=L.y-x.y,x=b.tf(Q,n),J.setPosition(L.x-Q+x.x,L.y-n+x.y))},setPoints3d:function(Q,n){var x=new I5(this.p3()),b=this.getPointsMatrix3d();b.setPosition(new I5),kV.superClass.setPoints.call(this,Q),n&&(Q=new I5(this.p3()).clone().sub(x).applyMatrix4(b),x.add(Q),this.p3(x.x,x.y,x.z))},addPoint:function(Q,n,x){var b=this.toPoints();b.add(Q,n),this.setPoints(b,x)},setPoint:function(Q,n,x){var b=this.toPoints();b.set(Q,n),this.setPoints(b,x)},removePointAt:function(Q){var n=this.toPoints();n.removeAt(Q),this.setPoints(n)},setWidthForce:function(Q){var n,x,b,J,L=this;L._55I||Wj||!L.getWidth()||(L._55I=1,n=L._position.x,x=Q/L.getWidth(),b=L.toPoints(),J=new m,1!=x&&(b.each(function(Q){J.add({x:(Q.x-n)*x+n,y:Q.y,e:Q.e})}),L.setPoints(J),Sh(L,[x,0,0,1,n*(1-x),0]),L.fs()),delete L._55I),YV.superClass.setWidth.call(L,Q)},setWidth:function(Q){return this.setWidthForce(Q<ZS?ZS:Q)},setHeightForce:function(Q){var n,x,b,J,L=this;L._55I||Wj||!L.getHeight()||(L._55I=1,n=L._position.y,x=Q/L.getHeight(),b=L.toPoints(),J=new m,1!=x&&(b.each(function(Q){J.add({x:Q.x,y:(Q.y-n)*x+n,e:Q.e})}),L.setPoints(J),Sh(L,[1,0,0,x,0,n*(1-x)]),L.fs()),delete L._55I),YV.superClass.setHeight.call(L,Q)},setHeight:function(Q){return this.setHeightForce(Q<ZS?ZS:Q)},setAnchorElevation:function(Q){this._55I=!0;var n,x=this._updatingAnchor3d,Q=(Wj||x||(n=this.getAnchorElevation(),0!=(n=this.getTall()*(n-Q))&&this.shiftPointsElevation(n)),YV.superClass.setAnchorElevation.apply(this,arguments));return x||delete this._55I,Q},getShapeElevation:function(Q){return this._54O-(this.getTall()||0)*(this._anchorElevation-.5)},setAnchor3d:function(Q,n,x,b){var J,L,f,V,l,H=this,Q=("number"==typeof Q?J={x:Q,y:n,z:x}:(J=Q.length?{x:Q[0],y:Q[1],z:Q[2]}:Q,b=n),H._55I=!0,H._updatingAnchor3d=!0,H.beginTransaction(),Wj||(x=H.getAnchor3d(),Q=H.getSize(),n=H.getTall(),L=Q.width*(x.x-J.x),f=Q.height*(x.z-J.z),V=n*(x.y-J.y),b||H.shiftPoints(L,f,V),l=H.p3()),YV.superClass.setAnchor3d.apply(H,arguments));return Wj||b&&(n=H.p3(),H.shiftPoints(n[0]-l[0]+L,n[2]-l[2]+f,n[1]-l[1]+V)),H.endTransaction(),delete H._updatingAnchor3d,delete H._55I,Q},setAnchor:function(Q,n,x){var b,J,L,f=this,V=(f._55I=!0,f._updatingAnchor3d),l=!Wj&&!V,n=(l&&("number"==typeof Q?J={x:Q,y:n}:(J=Q.length?{x:Q[0],y:Q[1]}:Q,x=n),Q=f.getAnchor(),b=(n=f.getSize()).width*(Q.x-J.x),J=n.height*(Q.y-J.y),x||f.shiftPoints(b,J),L=f.getPosition()),YV.superClass.setAnchor.apply(f,arguments));return l&&(Q=f.getPosition(),x&&f.shiftPoints(Q.x-L.x+b,Q.y-L.y+J)),V||delete f._55I,n},shiftPoints:function(x,b,J){var L,Q,f;(x||b||J)&&(L=this.getElevation()||0,Q=this.toPoints(),f=new m,Q.each(function(Q){var n=Q.e;f.add({x:Q.x+x,y:Q.y+b,e:n=J?(n==x5?L:n)+J:n})}),this.setPoints(f),this.fs())},shiftPointsElevation:function(Q){return this.shiftPoints(0,0,Q)},setPosition:function(Q,n){var x=this;if(!x._28Q){if(x._28Q=1,!x._55I&&!Wj){if(Q=(n=2===arguments.length?{x:Q,y:n}:Q).x-x._position.x,n=n.y-x._position.y,0==Q&&0==n)return void delete x._28Q;x._55I=1,x.shiftPoints(Q,n),Sh(x,[1,0,0,1,Q,n]),delete x._55I}YV.superClass.setPosition.apply(x,arguments),delete x._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){if(2!==this._59O.size())return!1;var Q=this._58O;return!Q||2===Q.size()&&1===Q.get(0)&&2===Q.get(1)},fireShapeChange:function(){var Q;this._55I||Wj||(Q=m7(this._59O))&&(this._55I=1,this.setRect(Q),delete this._55I),this.fp(_i,!1,!0)},getSerializableProperties:function(){var Q=YV.superClass.getSerializableProperties.call(this);return Q.segments=1,Q.points=1,Q.thickness=1,Q.closePath=1,Q}}),d.Points=function(){u_(TV,this)}),kV=(p1("Points",OV,{_59O:[],_colors:[],_sizes:[],_uvoffsets:[],_22Q:function(){return qu},getPoints:function(){return this._59O},setPoints:function(Q){var n=this._59O,x=(Q=Q?Q.slice(0):[])[0];if(L_(x)){var b=Q;Q=[];for(var J=0,L=b.length;J<L;J+=3)Q.push({x:b[J],e:b[J+1],y:b[J+2]})}this._59O=Q,this._pointsDirty=!0,this.fp("points",n,this._59O)},setPoint:function(Q,n){var x=this._59O.slice(0);x[Q]=n,this.setPoints(x)},addPoint:function(Q){this.setPoint(this._59O.length,Q)},getColors:function(){return this._colors},setColors:function(Q){var n=this._colors;Q=Q?Q.slice(0):[],this._colors=Q,this._colorsDirty=!0,this.fp("colors",n,Q)},setPointColor:function(Q,n){var x=this._colors.slice(0);x[Q]=n,this.setColors(x)},getSizes:function(){return this._sizes},setSizes:function(Q){var n=this._sizes;Q=Q?Q.slice(0):[],this._sizes=Q,this._sizesDirty=!0,this.fp("sizes",n,this._sizes)},setPointSize:function(Q,n){var x=this._sizes.slice(0);x[Q]=n,this.setSizes(x)},getUvoffsets:function(){return this._uvoffsets},setUvoffsets:function(Q){var n=this._uvoffsets;Q=Q?Q.slice(0):[],this._uvoffsets=Q,this._offsetsDirty=!0,this.fp("uvoffsets",n,this._uvoffsets)},setPointUvoffset:function(Q,n,x){var b;"object"==typeof n?(b=n[0],x=n[1]):b=n,(n=this._uvoffsets.slice(0))[2*Q+0]=b,n[2*Q+1]=x,this.setUvoffsets(n)},getPointInfo:function(Q){if(!(n=this.getPoints())||n[Q]==x5)return x5;var n=[(n=n[Q]).x,n.e,n.y],x=this.mat||FS(this),b=[n[0],n[1],n[2]];return uS(b,x),x=this.getColors()[Q]||this.s("points.color"),{size:(Q=this.getSizes()[Q])==x5?this.s("points.size"):Q,color:x,local:n,world:b}},getSerializableProperties:function(){var Q=TV.superClass.getSerializableProperties.call(this);return Q.points=1,Q.colors=1,Q.sizes=1,Q.uvoffsets=1,Q},onPropertyChanged:function(Q){TV.superClass.onPropertyChanged.call(this,Q),"s:points.color"===(Q=Q.property)?this._colorsDirty=!0:"s:points.size"===Q?this._sizesDirty=!0:"s:points.model"===Q&&(this._modelDirty=!0)},getWidth:function(){if(0<=this._width)return this._width;var Q=this.getStyle("points.model");return(Q=Q&&Xe(Q))&&Q.rawS3?Q.rawS3[0]:1},getHeight:function(){if(0<=this._height)return this._height;var Q=this.getStyle("points.model");return(Q=Q&&Xe(Q))&&Q.rawS3?Q.rawS3[2]:1},getTall:function(){if(0<=this._tall)return this._tall;var Q=this.getStyle("points.model");return(Q=Q&&Xe(Q))&&Q.rawS3?Q.rawS3[1]:1}}),d.Polyline=function(){u_(kV,this),this.s({"shape.background":null,"shape.border.width":2})}),NV=(p1("Polyline",YV,{_icon:"polyline_icon",_22Q:function(){return yu},getUIClass:function(){return GE},setClosePath:function(Q){},setTall:function(Q){var n,x,b,J,L=this;L.beginTransaction(),L._55I||L._24Q||Wj||!L.getTall()||(L._24Q=1,n=L._54O,1!=(x=Q/L.getTall())&&(b=L.toPoints(),J=new m,b.each(function(Q){J.add({x:Q.x,y:Q.y,e:Q.e==x5?Q.e:(Q.e-n)*x+n})}),L.setPoints(J),L.fs()),delete L._24Q),kV.superClass.setTall.call(L,Q),L.endTransaction()},setElevation:function(Q){this.beginTransaction(),this._55I||this._24Q||Wj||(this._24Q=1,0!=(Q-=this._54O)&&this.shiftPointsElevation(Q),delete this._24Q),kV.superClass.setElevation.apply(this,arguments),this.endTransaction()},fireShapeChange:function(){var Q=this,n=Q._59O;if(!Q._55I&&!Q._24Q&&!Wj){var x=n.size();if(x){for(var b=1,J=n.get(0),L=Q._54O,f=(J.e==x5&&(J.e=L),J.e),V=0;b<x;b++){(J=n.get(b)).e==x5&&(J.e=L);var l=L5(f,J.e),H=J5(f+V,J.e),f=l,V=H-l}Q._24Q=1,Q.setTall(V),Q.setElevation(f+V*Q._anchorElevation),delete Q._24Q}}kV.superClass.fireShapeChange.apply(Q,arguments)},onPropertyChanged:(AK={},["points","segments","thickness","position","elevation","rotation","rotationX","rotationZ","rotationMode","scale","scaleTall","s:shape.border.color","s:shape.border.gradient.color","s:shape.border.pattern","s:shape.dash","s:shape.dash.color","s:shape.dash.pattern","s:shape.dash.offset","s:3d.clip.direction","s:repeat.uv.length","s:rotate.vs.length","s:rotate.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.uv.union"].forEach(function(Q){AK[Q]=!0}),function(Q){kV.superClass.onPropertyChanged.call(this,Q),AK[Q.property]&&(this._needChangeGeometry=!0)})}),d.SubGraph=function(){u_(NV,this)}),jV=(p1("SubGraph",OV,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){NV.superClass._8I.call(this),this.eachChild(function(Q){v(Q)&&Q._8I()})}}),b5.loadingRefGraph=0,d.RefGraph=function(){u_(jV,this)}),CV=(p1("RefGraph",SV,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(Q){var n=this._ref;this._ref=Q,this.fp("ref",n,Q),this.updateRef()},_21I:function(Q){jV.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var x,n,b=this;b5.loadingRefGraph++,b.clearChildrenFromDataModel(),b5.loadingRefGraph--,b._ref&&b._dataModel&&(b._xhrLoadHandler&&(b._xhrLoadHandler.cancel=!0),x=Wj,(n=b._xhrLoadHandler=function(Q){var n;Q&&b._dataModel&&(b5.loadingRefGraph++,n=b._pendingUpdateInfo={needToRestore:x},x&&(n.p3=b.p3(),n.s3=b.s3(),n.r3=b.r3(),n.anchor3d=b.getAnchor3d(),n.scale3d=b.getScale3d()),b.r3(0,0,0),b.setScale3d(1,1,1),b.setAnchor3d(.5,.5,.5),b.p3(0,0,0),n=b5.parse(Q),(Q=b._dataModel.deserialize(n,b,{justDatas:!0})).each(function(Q){Q._refGraph=b}),b.checkPendingUpdateInfo(),b5.loadingRefGraph--,b5.handleRefGraphLoaded(b,Q,n))}).xhrLoadCalled=!1,b5.load(b._ref,function(Q){n.cancel||(n.xhrLoadCalled?n(Q):P7(function(){n(Q)}))}),n.xhrLoadCalled=!0)},checkPendingUpdateInfo:function(){var n,Q=this,x=Q._pendingUpdateInfo;x?(n=!0,this.eachChild(function(Q){(Q._pendingCheckImageJSON||Q._pendingUpdateInfo)&&(n=!1)}),n&&(b5.loadingRefGraph++,Q._pendingUpdateInfo=null,Q.updateFromChildren(),x.needToRestore&&(Q.setAnchor3d(x.anchor3d),Q.setScale3d(x.scale3d),Q.r3(x.r3),Q.p3(x.p3)),this.getParent()instanceof jV&&this.getParent().checkPendingUpdateInfo(),Q.onPendingUpdated&&Q.onPendingUpdated(),b5.loadingRefGraph--)):Q.onPendingUpdated&&(b5.loadingRefGraph++,Q.onPendingUpdated(),b5.loadingRefGraph--)},getSerializableProperties:function(){var Q=jV.superClass.getSerializableProperties.call(this);return Q.ref=1,Q}}),d.EdgeGroup=function(Q,n){this._70O=Q,this._siblings=n;for(var x,b=0,J=Q.size(),L=o5[Xi];b<J;b++)if((x=Q.get(b).getOwnStyle(Xi))!=x5){L=x;break}for(L==x5&&(L=!0),(n=(n=b5.edgeGroupAgentFunc)&&n(Q))&&n!==Q.get(0)&&(Q.remove(n),Q.add(n,0)),b=0;b<J;b++)Q.get(b).s(Xi,L)},p1("EdgeGroup",e,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(Q){return this._70O.get(Q)},indexOf:function(Q){return this._70O.indexOf(Q)},each:function(Q,n){this._70O.each(Q,n)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(n,x){this._siblings.each(function(Q){Q._70O.each(n,x)})}}),$_(b5,{setConnectAction:function(Q,n,x){var b=wj[Q]={type:Q,action:n};if(x)for(var J in x)b[J]=x[J]},getConnectAction:function(Q,n){if(!n){if(!Q)return null;n=Q.getCurrentConnectActionType()}return wj[n]},doConnectAction:function(n,Q,x,b){if(b=b||n.getCurrentConnectActionType(),!(b=wj[b]))return!1;var J=b.action;return!!J&&(Q instanceof Y.Group?n.sm().getSelection().each(function(Q){J.call(null,n,Q,x)}):J.call(null,n,Q,x),!0)},doDeleteConnectionAction:function(n,Q,x){if(x=x||n.getCurrentConnectActionType(),!(x=wj[x])||!x.delete)return!1;var b=x.delete.action;return!!b&&(Q instanceof Y.Group?n.sm().getSelection().each(function(Q){b.call(null,n,Q)}):b.call(null,n,Q),!0)}}),d.JSONSerializer=function(Q,n){this.dm=this._dataModel=Q,b5.forceHierarchicalSerialization?this._hierarchical=!0:this._hierarchical=n==x5?Q.isHierarchicalRendering():n}),QE=(p1("JSONSerializer",e,{ms_ac:["hierarchical"],serialize:function(Q){return b5.stringify(this.toJSON(),Q)},toJSON:function(){var Q,n,x=this,b=x.dm,J=b.getRoots(),L=x.json={v:b5.getVersion(),p:{},a:{},d:[]},f=b.getSerializableAttrs();for(n in(Q=b.getInit())&&(L.init=Q),(Q=b.getName())&&(L.p.name=Q),(Q=b.getBackground())&&(L.p.background=Q),(Q=b.getLayers())&&(L.p.layers=Q),(Q=b.getEnvmap())&&(L.p.envmap=Q),(Q=b.getEnvmapType())&&(L.p.envmapType=Q),L.p.autoAdjustIndex=b.isAutoAdjustIndex(),L.p.hierarchicalRendering=b.isHierarchicalRendering(),f){var V=b.a(n);V!==n5&&x[vZ](n,V,L.a)}return M_(L.a)&&delete L.a,x._hierarchical?J.each(x.serializeData,this):b.each(function(Q){x.serializeData(Q)}),b.fireSerializeEvent({type:"serialize",json:L}),b.getPostProcessingData()&&(L.p.postProcessingData=b.getPostProcessingData()),L},isSerializable:function(Q){return!0},getProperties:function(Q){return Q.getSerializableProperties()},getStyles:function(Q){return Q.getSerializableStyles()},getAttrs:function(Q){return Q.getSerializableAttrs()},serializeData:function(Q){var n=this;if(n.isSerializable(Q)&&!Q._refGraph){var x,b,J,L,f,V=new(w7(Q.getClassName())||Q.getClass()),l={c:Q.getClassName(),i:Q.getId(),p:{},s:{},a:{}};for(x in n.json.d.push(l),n.getProperties(Q))/^_/.test(x)?(f=Q[x],"_width"!==x&&"_height"!==x||f!=x5&&-1!==f||(L==n5&&(J=(Q.s("layout.h")||Q.s("layout.v"))&&Q.getHost()||Q instanceof d.Node&&(J=Q.getParent())&&J instanceof d.Block||Q.s("fullscreen"),L=Q.hasInheritedSize()),J&&L&&(f=Q[x]="_width"===x?Q.getWidth():Q.getHeight())),f!==V[x]&&n[vZ](x.substr(1),f,l.p)):Q[b=b_(x)]&&(f=Q[b]())!==V[b]()&&n[vZ](x,f,l.p);for(x in n.getStyles(Q))(f=Q.s(x))!==V.s(x)&&n[vZ](x,f,l.s);for(x in n.getAttrs(Q))(f=Q.a(x))!==V.a(x)&&n[vZ](x,f,l.a);M_(l.p)&&delete l.p,M_(l.s)&&delete l.s,M_(l.a)&&delete l.a}n._hierarchical&&Q.getChildren().each(n.serializeData,n)},serializeValue:function(Q,n,x){I_(n)?n={__a:n._as}:n instanceof BG?n={__i:n.getId()}:n instanceof GG&&(n={__dm:n.serialize(0)}),x[Q]=n},deserialize:function(Q,n,x){var b=this;if(!H5(Q)||!/.json$/.test(Q))return b.deserializeImpl(Q,n,x);b5.xhrLoad(Q,function(Q){b.deserializeImpl(Q,n,x)})},deserializeImpl:function(Q,n,x){var b=this.dm,J=(b.setDeserializing(!0),x=f_(x)?{setId:x}:l_(x)?{finishFunc:x}:x||{},Q=this.json=H5(Q)?b5.parse(Q):Q,!x.justDatas&&Q.a&&Q.a.onPreDeserialize&&!x.disableOnPreDeserialize&&Q.a.onPreDeserialize(Q,b,x.view),b.beginTransaction(),Wj++,this._82I={},new m),L=new m,f=0,V=Q.d.length;if(x.justDatas||(!x.disableInit&&l_(Q.init)&&Q.init(b),b.setInit(Q.init)),!x.justDatas){for(var l in Q.a)b.a(l,this[OZ](Q.a[l]));for(var H in Q.p)b[J_(H)](Q.p[H])}for(;f<V;f++){var I=Q.d[f],Z=new(w7(I.c)),E=I.i;x.setId&&E!=x5&&(Z._id=E),this._82I[E]=Z,J.add(Z),L.add(I)}for(f=0;f<V;f++)this.deserializeData(J.get(f),L.get(f));return J.each(function(Q){n&&!Q.getParent()&&Q.setParent(n),b.add(Q)}),x.__innerHandler__&&x.__innerHandler__(Q,b,x.view,J),b.fireSerializeEvent({type:"deserialize",json:Q}),Wj--,b.endTransaction(),!x.justDatas&&Q.a&&Q.a.onPostDeserialize&&!x.disableOnPostDeserialize&&Q.a.onPostDeserialize(Q,b,x.view,J),x.finishFunc&&x.finishFunc(Q,b,x.view,J),b.setDeserializing(!1),J},deserializeData:function(Q,n){for(var x in n.p)Q[J_(x)](this[OZ](n.p[x]));for(x in n.s)Q.s(x,this[OZ](n.s[x]));for(x in n.a)Q.a(x,this[OZ](n.a[x]))},deserializeValue:function(Q){if(V_(Q)){var n,x=Q.__i;if(x!=x5)return this._82I[x];if((x=Q.__dm)!=x5)return(n=new d.DataModel).deserialize(x),n;if(x=Q.__a,H_(x))return new m(x)}return Q}}),$_(GG,{serialize:function(Q,n){return new CV(this,n).serialize(Q)},toJSON:function(Q){return new CV(this,Q).toJSON()},deserialize:function(Q,n,x){return new CV(this).deserialize(Q,n,x)}}),d.OverlappingBox=function(Q){this.gv=Q,this.boxes={}}),nE=(p1("OverlappingBox",e,{clear:function(){var Q,n=this.boxes;for(Q in n)n[Q].length=0},isOverlapping:function(Q,n){var x,b,J,L,f=this.boxes,V=f[Q];for(V?(x=V.rects,b=V.length):V=f[Q]={rects:x=[],length:b=0},J=0;J<b;J++)if((L=x[J]).x<n.x+n.w&&L.x+L.w>n.x&&L.y<n.y+n.h&&L.h+L.y>n.y)return!0;return x.length<=b?(x.push(n),V.length++):x[V.length++]=n,!1}}),$_(b5,{fetch:function(Q,n){Q.open((n=n||{}).method||"GET",n.url||"",!(null!=n.sync&&n.sync)),"json"===n.dataType&&Q.setRequestHeader("Content-Type","application/json"),n.responseType&&(Q.responseType=n.responseType),Q.send(n.data)},convertImageSrc:function(Q,n){(n=n&&"function"==typeof n?n:function(){})(Q)}}),d.Request=function(){}),xE=(p1("Request",e,{_mimeType:n5,getXhr:function(){return this._xhr||(this._xhr=new XMLHttpRequest,this.overrideMimeType("text/plain")),this._xhr},send:function(Q){var n=this.getXhr();Q.mimeType&&this.overrideMimeType(Q.mimeType),n.onload=this.onload,n.onerror=this.onerror,b5.fetch(n,Q)},onload:function(){},onerror:function(){},getResponseType:function(){return this.getXhr().responseType},setOverrideMimeType:function(Q){this.overrideMimeType(Q)},getMimeType:function(){return this._mimeType},overrideMimeType:function(Q){this.getXhr().overrideMimeType(this._mimeType=Q)},getResponseHeader:function(Q){return this.getXhr().getResponseHeader(Q)},getResponseText:function(){var Q=this.getXhr();return Q.response||Q.responseText},getStatus:function(){return this.getXhr().status}}),{}),bE={},JE={},LE={},fE=function(Q){for(var n in JE)JE[n]&&!Q["_loading_"+n+"_"]&&(LE[n][Q["_loading_"+n+"_"]=r7()]=Q)},VE=function(L,V){function l(Q,n){var x,b;if((x=a(Q,n))&&(n=x),Z[Q]=n,delete I[Q],M_(I)&&f){for(var J in f)(b=f[J]).invalidateAll&&b.invalidateAll(n5,L+"Loaded",Q),b.redraw&&b.redraw(),b.iv(),delete b["_loading_"+L+"_"];f=LE[L]={}}else if(n&&!M_(f))for(var J in f)(b=f[J]).invalidateAll&&b.invalidateAll(n5,L+"Loading",Q),b.redraw&&b.redraw(),b.iv()}var H,I=JE[L]={},Z=xE[L]={},f=LE[L]={},E=L.charAt(0).toUpperCase()+L.substr(1),a=(V=V||Oj).handleLoaded||hj,x="load"+E+"ByURL";bE[x]=function(x,b){if((b=b||x)&&!I[x]){var J=new nE,L=!(I[x]={request:J,url:b});if("string"==typeof b&&(L=Kj.test(b),b=b5.beforeLoadURL(b,x)),b.data){var Q=b.data;L&&Q&&(Q=b5.parse(Q)),l(x,Q),Q&&b5["handle"+E+"Loaded"](x,Q)}else{J.onload=function(Q){var n;200===this.status||0===this.status?(n=J.getResponseText(),L&&(n=b5.parse(n)),l(x,n),b5["handle"+E+"Loaded"](x,n)):l(x,b5["handleUnfound"+E](x,b)||x5)},J.onerror=function(Q){l(x,b5["handleUnfound"+E](x,b)||x5)};var n={};if(n.url=encodeURI(b),n.sync=!1,V.loadingParam)for(var f in V.loadingParam)n[f]=V.loadingParam[f];J.send(n)}}},b5["get"+E]=function(Q){var n=Z[Q];return n===n5&&bE[x](Q),n},b5["get"+E+"Map"]=function(){return Z},"shader"==L?(H=function(Q,n){n&&null!==n.data&&(Z[Q]=null,ze[Q]=null),bE[x](Q,n)},b5.setShader=function(Q,n,x){var b,J,L,f;H5(n)&&n.match(/\/\/ *FS/i)?(ze[Q]=null,Z[Q]=n):H5(n)&&H5(x)?(L=0,f=function(){0<L||(I[Q]=null,H(Q,b&&J?{data:b+"\n// FS\n"+J}:{data:null}))},n.match(/void\s+main/i)?b=n:(L++,b5.xhrLoad(n,function(Q){b=Q,L--,f()})),x.match(/void\s+main/i)?J=x:(L++,b5.xhrLoad(x,function(Q){J=Q,L--,f()})),L&&(I[Q]={}),f()):H(Q,n)}):b5["set"+E]=function(Q,n){H5(n)&&n.substr(0,12)==Vj&&(n=b5.parse(n)),l_(n)||V_(n)?Z[Q]=n:bE[x](Q)},b5["handle"+E+"Loaded"]=function(Q,n){},b5["handleUnfound"+E]=function(Q,n){}},lE=(b5.registerResourceLoader=function(Q,n){VE(Q,n)},SG.GraphView=function(Q){var n=this;n._24I={},n._34I=new m,n.enableDirtyRect(),n._25I={},n._56I={},n._view=h_(1,n),n._canvas=z_(n._view),n.dm(Q||new GG),this._coreInteractor=new iE(this),n.setEditable(!1),n.setScrollBarVisible(b5.graphViewScrollBarVisible),n._initView()},Q("GraphView",e,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[xZ,bZ,QZ,nZ,"resettable","editInteractor",Ci,"zoomable","pannable","rectSelectable","autoScrollZone",IZ,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_zoomable:b5.graphViewZoomable,_resettable:b5.graphViewResettable,_pannable:b5.graphViewPannable,_rectSelectable:b5.graphViewRectSelectable,_autoScrollZone:b5.graphViewAutoScrollZone,_rectSelectBackground:b5.graphViewRectSelectBackground,_rectSelectBorderColor:b5.graphViewRectSelectBorderColor,_editPointSize:b5.graphViewEditPointSize,_editPointBorderColor:b5.graphViewEditPointBorderColor,_editPointBackground:b5.graphViewEditPointBackground,_scrollBarColor:h1,_scrollBarSize:G,_autoHideScrollBar:n7,_autoMakeVisible:s1,_currentActionType:null,getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(Q){this._dataModel.setLayers(Q)},setEditable:function(Q){var n,x=this,b=x.__interactorMap__;b||(n=SG.XEditInteractor,b=x.__interactorMap__={scrollBar:new qE(x),select:new PE(x),edit:new(n||UE)(x),text:new FE(x),move:new cE(x),default:new rE(x),touch:new wE(x,{editable:!1})}),Q?(x._uieditable=!0,x.setInteractors([b.scrollBar,b.select,b.text,b.edit,b.move,b.default,b.touch])):(x._uieditable=!1,x.setInteractors([b.scrollBar,b.select,b.move,b.default,b.touch]))},getCanvas:function(){return this._canvas},_33I:function(Q){var n=Q.getUIClass();return n?new n(this,Q):x5},getDataUI:function(Q){var n=this._25I[Q._id];return n===n5&&(n=this._33I(Q),this._25I[Q._id]=n),n},getNodeRect:function(Q){return b5.getNodeRect(this,Q)},getFullscreenDatas:function(){return this._dataModel.getFullscreenDatas()},getEdgeInfo:function(Q){return(Q=this.getDataUI(Q))?(Q._79o(),Q._78o):null},getEdgeSourcePosition:function(Q){var n=(Q=this.getDataUI(Q)).s,Q=Q._data._40I;return vG(this,Q,n("edge.source.position"),n("edge.source.offset.x"),n("edge.source.offset.y"),n("edge.source.anchor.x"),n("edge.source.anchor.y"))},getEdgeTargetPosition:function(Q){var n=(Q=this.getDataUI(Q)).s,Q=Q._data._41I;return vG(this,Q,n("edge.target.position"),n("edge.target.offset.x"),n("edge.target.offset.y"),n("edge.target.anchor.x"),n("edge.target.anchor.y"))},invalidateAll:function(Q){var n=this;if(Q){for(var x in n._25I)(x=n._25I[x])&&x.dispose();n._25I={},n._56I={},n._24I={},n._34I.clear(),n.redraw()}else n.dm().each(function(Q){n.invalidateData(Q)})},invalidateSelection:function(){var n=this;n.sm().each(function(Q){n.invalidateData(Q)})},invalidateData:function(Q){this._24I[Q._id]=Q,this._21Q(Q),this.iv()},_21Q:function(Q){var n,x=this._24I;Z_(Q)&&yj[Q.s(gi)]&&((n=Q.getSourceAgent())&&n.getAgentEdges().each(function(Q){x[Q._id]=Q}),(n=Q.getTargetAgent())&&n.getAgentEdges().each(function(Q){x[Q._id]=Q}),this.iv())},redraw:function(Q){this._32I||(Q?this._34I.add(Q):(this._32I=1,this._34I.clear()),this.iv())},each:function(Q,n){var x=0,b=this.getLayers(),J=this._dataModel,L=J._datas._as,f=L.length;if(b)for(var V={},l=(J.isHierarchicalRendering()&&J.eachByHierarchical(function(Q){E=Q._layer,(Z=(Z=V[E])||(V[E]=[])).push(Q)}),b.length);x<l;x++){var H,I,Z,E=b[x];if(V_(E)&&(E=E.name),J.isHierarchicalRendering()){if((Z=V[E])&&0<(H=Z.length))for(var a=0;a<H;a++)if(I=Z[a],!1===(n?Q.call(n,I):Q(I)))return}else for(a=0;a<f;a++)if((I=L[a])._layer===E&&!1===(n?Q.call(n,I):Q(I)))return}else if(J.isHierarchicalRendering())this._dataModel.eachByHierarchical(Q,null,n);else for(;x<f;x++)if(I=L[x],!1===(n?Q.call(n,I):Q(I)))return},reverseEach:function(Q,n){var x,b=this._dataModel,J=b._layers,L=b._datas._as,f=L.length;if(J){var V={};for(b.isHierarchicalRendering()&&b.reverseEachByHierarchical(function(Q){Z=Q._layer,(I=(I=V[Z])||(V[Z]=[])).push(Q)}),x=J.length-1;0<=x;x--){var l,H,I,Z=J[x];if(V_(Z)&&(Z=Z.name),b.isHierarchicalRendering()){if((I=V[Z])&&0<(l=I.length))for(var E=0;E<l;E++)if(H=I[E],!1===(n?Q.call(n,H):Q(H)))return}else for(E=f-1;0<=E;E--)if((H=L[E])._layer===Z&&!1===(n?Q.call(n,H):Q(H)))return}}else if(b.isHierarchicalRendering())b.reverseEachByHierarchical(Q,null,n);else for(x=f-1;0<=x;x--)if(H=L[x],!1===(n?Q.call(n,H):Q(H)))return},getViewRect:function(){return this._29I},getContentRect:function(){var Q,n,x=this,b=x._84I;return b||(Q=this.dm().a("width"),n=this.dm().a("height"),0<Q&&0<n?x._84I={x:0,y:0,width:Q,height:n}:(x.each(function(Q){x.isVisible(Q)&&(b=Y7(b,x.getDataUIBounds(Q)))}),x._84I=b||sj)),x._84I},getScrollRect:function(){return Y7(this.getContentRect(),this._29I)},makeCenter:function(Q,n,x){var b,J,L,f,V=this;V.getWidth()&&V.getHeight()?(V.makeVisible(Q),V.validate(),(J=V.getDataUIBounds(Q))&&(f=V.getWidth(),b=V.getHeight(),L=J.x+J.width/2,J=J.y+J.height/2,L=-L*V._zoom+f/2,f=-J*V._zoom+b/2,V.setTranslate(L,f,n))):x||P7(V.makeCenter,V,[Q,n,!0],500)},fitData:function(n,x,b,J,Q){var L,f=this;f.getWidth()&&f.getHeight()?(L=function(){f.makeVisible(n),f.validate();var Q=f.getDataUIBounds(n);Q&&(Q=q7(Q),QS(Q,b==x5?20:b),f.fitRect(Q,x,J))},x?b5.callWhenLoaded(L):L()):Q||P7(f.fitData,f,[n,x,b,J,!0],500)},fitContent:function(n,x,b,Q){var J,L=this;L.getWidth()&&L.getHeight()?(J=function(){L.validate();var Q=q7(L.getContentRect());QS(Q,x==x5?20:x),L.fitRect(Q,n,b)},n?b5.callWhenLoaded(J):J()):Q||P7(L.fitContent,L,[n,x,b,!0],500)},fitRect:function(Q,n,x){var b=this,J=b.getWidth(),L=b.getHeight(),f=Q.x+Q.width/2,V=Q.y+Q.height/2,l=L5(J/Q.width,L/Q.height),f=-f*(Q=b._zoom)+J/2,J=-V*Q+L/2;0===l||isNaN(l)||(x&&(l=L5(1,l)),n?(b._65I&&(delete b._65I.finishFunc,b._65I.stop(!0)),b._14o&&b._14o.stop(!0),b.setTranslate(f,J,{finishFunc:function(){b.setZoom(l,n)}})):(b.setTranslate(f,J),b.setZoom(l)))},fitSelection:function(Q,n,x){var b=this,J=b.sm(),L=null;J.size()&&(J.each(function(Q){L=Y7(b.getDataUIBounds(Q),L)}),Q&&QS(L,Q),b.fitRect(L,n,x))},toCanvas:function(Q,n,x){n=n||this._zoom,this.validateImpl();var b=this.getContentRect(),x=(x&&QS(b,x),b.width||(b.width=10),b.height||(b.height=10),z_()),J=b.x*n,L=b.y*n,f=Math.ceil(b.width*n),b=Math.ceil(b.height*n),V=(R_(x,f,b,1),xh(x)),f=((Q=Q||this._dataModel.getBackground())&&Nh(V,0,0,f,b,Q),Jh(V,-J,-L),V.scale(n,n),this._zoom);return this._zoom=n,this._42(V),this._zoom=f,V.restore(),this.redraw(),x},toDataURL:function(Q,n,x,b){return this.toCanvas(Q,x,b).toDataURL(n||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(f,V){var Q,n,l=this,x=l.dm().getBackground(),b=(x&&(Q=l.dm().a("width"),n=l.dm().a("height"),0<Q&&0<n&&Nh(f,0,0,Q,n,x)),l.__htmlOrderList),H=[],I=l._forcedLayoutHTML;if(l._93db(f,V),l.each(function(Q){var n,x,b,J,L=l.getDataUI(Q);L&&(n=l._56I[Q._id],J=L._htmlView,n&&(x=L._79o(),J=L._htmlView,d.HtmlNode&&Q instanceof d.HtmlNode?L._42(f):(Q=l.getViewRect(),b=J&&J.layoutHTML,!V||N7(V,x)?(b&&(J.layoutHTML(),L.__outerLayout&&delete L.__outerLayout),L._42(f)):N7(Q,x)||!b||L.__outerLayout&&!I||(J.layoutHTML(),L.__outerLayout=!0))),J&&(H.push(J),(J=J.getView?J.getView():J).style.display=n?"block":Ii))}),b&&0<H.length){var J=!1;if(b.length!==H.length)J=!0;else for(var L=0;L<H.length;L++)if(H[L]!==b[L]){J=!0;break}J&&(H.forEach(function(Q){!1!==Q.autoAdjustIndex&&l.appendHTML(Q,!0)}),this.__htmlOrderList=H)}else this.__htmlOrderList=H;l._92db(f,V)},disableDirtyRect:function(){this._shouldRedrawAll=$},enableDirtyRect:function(){var Q=this;Q._shouldRedrawAll=function(){return Q._32I}},validateImpl:function(){this.tryUpdateRootData();var x,n,b,Q,J,L,f,V=this,l=V.tx(),H=V.ty(),I=V._zoom,Z=V._canvas,E=this.getWidth(),a=this.getHeight(),o=V._29I,B={x:-l/I,y:-H/I,width:E/I,height:a/I},G={},_=V._34I,$=V._24I,W=V._shouldRedrawAll(),D=V._23I;for(x in V._24I={},E===Z.clientWidth&&a===Z.clientHeight||(R_(Z,E,a),V._forcedLayoutHTML=W=1),W||i_(B,o)||(V._forcedLayoutHTML=W=1),V._29I=B,V.each(function(Q){x=Q._id;var n=G[x]=V.isVisible(Q);n!==V._56I[x]&&($[x]=Q,(b=V.getDataUI($[x]))&&b._84o(n),V._84o(Q,n))},V),$)(b=V.getDataUI($[x]))&&(!W&&V._56I[x]&&(Q=b._79o())&&_.add(Q),b.invalidate()),V._83I=1;if(V._56I=G,!W)for(x in $)G[x]&&(b=V.getDataUI($[x]))&&(Q=b._79o())&&_.add(Q);W?n=B:(_.each(function(Q){N7(B,Q)&&(n=Y7(n,Q))}),n&&(QS(n,J5(1,1/I)),n.x=t5(n.x*I)/I,n.y=t5(n.y*I)/I,n.width=i5(n.width*I)/I,n.height=i5(n.height*I)/I,n=j7(B,n))),(V._74O=n)&&0!==n.width&&0!==n.height&&(o=xh(Z),Z=n.x,J=n.y,L=n.width,f=n.height,Z=Math.floor((Z*I+l)*Q7),J=Math.floor((J*I+H)*Q7),L=Math.ceil(L*I*Q7)+1,f=Math.ceil(f*I*Q7)+1,W||(n.x=(Z/Q7-l)/I,n.y=(J/Q7-H)/I,n.width=L/Q7/I,n.height=f/Q7/I),o.beginPath(),o.rect(Z,J,L,f),o.clip(),o.clearRect(Z,J,L,f),bh(o,l,H,I),V._42(o,n),o.restore(),delete V._74O),_.clear(),delete V._32I,delete V._forcedLayoutHTML,D&&0<E&&0<a&&((b=V.getDataUI(D))&&(Q=b._79o(),J=(Z=V._29I).x,L=Z.y,f=Z.width,l=Z.height,I=V._zoom,Q&&!N7(Q,Z)&&(Q.x+Q.width<J&&V.tx(-Q.x*I),Q.x>J+f&&V.tx(-(Q.x+Q.width-f)*I),Q.y+Q.height<L&&V.ty(-Q.y*I),Q.y>L+l&&V.ty(-(Q.y+Q.height-l)*I))),delete V._23I),V._83I&&(delete V._83I,delete V._84I),V._98O(),V.countFrame(),M_(V._24I)||P7(V.iv,V)},isValidGuideLineSource:function(Q){return!0},tryUpdateRootData:function(){if(!this._rootDataUpdating){this._rootDataUpdating=!0;var Q,n,x=this.getFullscreenDatas();for(n in x)Q=x[n],this.scaleRootData(Q);this.onRootDataUpdated&&this.onRootDataUpdated(),this._rootDataUpdating=!1}},scaleRootData:function(Q){if("uniform"===(Z=Q.s("fullscreen"))||"fill"===Z){Q.getRotation()&&Q.setRotation(0);var n=Q.s("fullscreen.gap")||0,x=this.getWidth(),b=this.getHeight();if(x&&b){var x=x-2*n,b=b-2*n,J=Q.getAnchor(),L=(f=Q.getScaledSize()).width,f=f.height;if(H=Q.s("fullscreen.lock"))return"uniform"===Z?L/f<x/b?(I=b/f,L=f*x/b):(I=x/L,f=L*b/x):"v"===H?(L=x/(I=b/f),Q.getWidth()!==L&&Q.setWidth(L)):(f=b/(I=x/L),Q.getHeight()!==f&&Q.setHeight(f)),this.setZoom(I),V=n-(Q.getX()-J.x*L)*I,l=n-(Q.getY()-J.y*f)*I,V!==this.tx()&&this.tx(V),void(l!==this.ty()&&this.ty(l));var V=this.tx(),l=this.ty(),H={x:(-V+n)/(I=this._zoom),y:(-l+n)/I,width:x/I,height:b/I},I=("uniform"===Z&&(V=L/f,n=(l=Math.min(H.width,H.height*V))/V,H.x+=.5*(H.width-l),H.y+=.5*(H.height-n),H.width=l,H.height=n),x=H.width/Q.getScaleX(),b=H.height/Q.getScaleY(),Q.getWidth()==x&&Q.getHeight()===b||Q.setSize(x,b),H.x+J.x*H.width),Z=H.y+J.y*H.height;I===(L=Q.getPosition()).x&&Z===L.y||Q.setPosition(I,Z)}}},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(Q){var n=this;Q!==n.isScrollBarVisible()&&(Q?(g_(n._view,n._79O=p_()),g_(n._79O,n._27I=p_()),g_(n._79O,n._28I=p_())):(JS(n._79O),delete n._79O,delete n._27I,delete n._28I),n.fp("scrollBarVisible",!Q,Q))},getDebugTip:function(){return""},showScrollBar:function(){var Q=this;Q._79O&&(Q._85I||(h5(function(){Q._86I()},a7),Q.iv()),Q._85I=new Date)},_86I:function(){var Q=this;Q._85I&&((new Date).getTime()-Q._85I.getTime()>=a7?(delete Q._85I,Q.iv()):h5(function(){Q._86I()},a7))},getVScrollBar:function(){return this._27I},getHScrollBar:function(){return this._28I},_98O:function(){var Q=this._27I,n=this._28I;if(this._79O){if(this._autoHideScrollBar&&!this._85I)return Q.style.visibility=mi,void(n.style.visibility=mi);var x=this.getScrollBarColor(),b=this._zoom,J=this.getScrollBarSize(),L=this.getViewRect(),f=this.getScrollRect(),V=L.height*b,l=f.height*b,H=L.width*b-J-2,I=V*((L.y-f.y)*b/l),Z=V/l*V,E=Q.style,l=(V<l-.5?(Z<o7&&(V<(I=(I=I+Z/2-o7/2)<0?0:I)+o7&&(I=V-o7),Z=o7),F(Q,H,I,J,Z),E.visibility=Yi,E.background=x,E.borderRadius=J/2+Zi):E.visibility=mi,L.width*b),V=f.width*b,I=L.height*b-J-2,H=l*((L.x-f.x)*b/V),Q=l/V*l,E=n.style;l<V-.5?(Q<o7&&(l<(H=(H=H+Q/2-o7/2)<0?0:H)+o7&&(H=l-o7),Q=o7),F(n,H,I,Q,J),E.visibility=Yi,E.background=x,E.borderRadius=J/2+Zi):E.visibility=mi}},setDataModel:function(Q){var n=this,x=n._dataModel,b=n._selectionModel;x!==Q&&(x&&(x.ump(n.handleDataModelPropertyChange,n),x.umm(n.handleDataModelChange,n),x.umd(n.handleDataPropertyChange,n),x.removeIndexChangeListener(n._75O,n),x.removeHierarchyChangeListener(n.handleHierarchyChange,n),b||x.sm().ums(n.handleSelectionChange,n)),(n._dataModel=Q).mp(n.handleDataModelPropertyChange,n),Q.mm(n.handleDataModelChange,n),Q.md(n.handleDataPropertyChange,n),Q.addIndexChangeListener(n._75O,n),Q.addHierarchyChangeListener(n.handleHierarchyChange,n),b?b._21I(Q):Q.sm().ms(n.handleSelectionChange,n),n.invalidateAll(!0),n.fp(iZ,x,Q),n.updateBackground())},getLayersInfo:function(){var Q;return this._layersInfo===n5&&((Q=this.getLayers())?(this._layersInfo={},Q.forEach(function(Q){var n=V_(Q)?Q.name:Q;this._layersInfo[n]=Q},this)):this._layersInfo=null),this._layersInfo},calculateEdgePosition:function(Q,n,x){Q instanceof d.Data?(b=this.getDataUI(Q),V=NG(b)):(V=NG(null,Q,arguments[1]),n=arguments[2],x=arguments[3]);var V,b,J=function(x){var b=1/0,J=0,L=new R;function Q(Q){var n;return 0<=Q&&Q<=1&&(L=nV(V,100*Q),(n=(x.x-L.x)*(x.x-L.x)+(x.y-L.y)*(x.y-L.y))<b&&(b=n,J=Q,1))}for(var n=0;n<100;++n)Q(n/100);for(var f=.005;.001<f;)Q(J-f)||Q(J+f)||(f/=2);return J}(n=2===n.length?new R(n[0],n[1]):n),L=nV(V,100*J);if(!x)for(var f=b?xV(b):xV(Q,arguments[1]),l=new R(L.x,L.y),H=49/(this._zoom*this._zoom),I=0,Z=f.length;I<Z;I++)if(l.distanceToSquared(f[I])<H)return{index:I,point:f[I],distance:Math.sqrt((f[I].x-n.x)*(f[I].x-n.x)+(f[I].y-n.y)*(f[I].y-n.y))};return{percent:J,point:L,distance:Math.sqrt((L.x-n.x)*(L.x-n.x)+(L.y-n.y)*(L.y-n.y))}},getPercentPositionOfPath:function(Q,n){var x;return Q instanceof d.Data?(x=this.getDataUI(Q),x=NG(x)):(x=NG(null,Q,arguments[1]),n=arguments[2]),nV(x,n)},getNeareastPositionOfPath:function(){return this.calculateEdgePosition.apply(this,arguments)},getPointsOfPath:function(Q){for(var n,x,b,J,b=Q instanceof d.Data?(n=this.getDataUI(Q),x=(n=kG(n)).points,n.segments):(x=Q,arguments[1]),L=Q instanceof d.Shape?Q.getPointsMatrix2d():new s.Matrix2d,f=[],V=-1,l=-1,H=0,I=(b||x).length;H<I;H++)5!==(J=b?b.get(H):1)&&(l++,3===J?(Wa(f,x,V+1,l,"C",L),Wa(f,x,V+2,l,"M",L),V+=2):4===J?(Wa(f,x,V+1,l-1,"R",L),Wa(f,x,V+2,l,"L",L),Wa(f,x,V+3,l,"M",L),V+=3):(Wa(f,x,V+1,l,"M",L),V+=1));return f},calculateAttachPoint:(uK=new R,MK=new R,tK=new R,function(Q,n){var x=this.getAttachPoints(Q);if(!x||!x.length)return null;tK.set(n.x,n.y);for(var b,J,L,f,V=1/0,l=0,H=x.length;l<H;l++)L=x[l],MK.x=L.x,MK.y=L.y,uK.x=L.offsetX||0,uK.y=L.offsetY||0,L=vG(this,Q,0,uK.x,uK.y,MK.x,MK.y),(J=tK.distanceToSquared(L))<V&&(b=l,V=J,f=L);return V=Math.sqrt(V),"close"===(n=this.getAttachStyle(Q))&&Q.s("attach.close.threshold")/this._zoom<V?null:{index:b,distance:V,info:x[b],point:f}}),getAttachPoints:function(Q){var n=Q.s("attach.points");return n||((n=g(Q._image))?S(n.attachPoints,Q,this)||null:void 0)},getAttachStyle:function(Q){var n=Q.s("attach.style");return n||((n=g(Q._image))?S(n.attachStyle,Q,this)||"close":void 0)},updateLayers:function(){this._layersInfo=n5,this.invalidateSelection(),this.redraw()},updateBackground:function(){var Q=this.dm().a("width"),n=this.dm().a("height");this._canvas.style.background=!(0<Q&&0<n)&&this.dm().getBackground()||""},handleDataModelPropertyChange:function(Q){var n,x;"background"===Q.property?(n=this._canvas.style.background,x=Q.newValue||"",this.updateBackground(),this.fp("canvasBackground",n,x),this.redraw()):"a:width"===Q.property||"a:height"===Q.property?(this._83I=1,this.updateBackground(),this.redraw()):"layers"===Q.property?this.updateLayers():"hierarchicalRendering"===Q.property&&this.redraw()},handleDataPropertyChange:function(Q){this.dm().isHierarchicalRendering()&&"parent"===Q.property&&Q.data.hasChildren()&&this.redraw(),this.invalidateData(Q.data)},onPropertyChanged:function(Q){var n,x=Q.property;this.redraw(),"zoom"===x?(n=this.sm().getSelection()).size()&&n.each(function(Q){Q.invalidate()}):"dataModel"===x&&(this._83I=1),AG[x]?this.showScrollBar():x===Ci&&this.onCurrentSubGraphChanged(Q)},onCurrentSubGraphChanged:function(Q){this.sm().cs(),this.reset()},handleDataModelChange:function(Q){var n,x,b,J=this,L=Q.kind,Q=Q.data;J._83I=1,"add"===L?(J.invalidateData(Q),Z_(Q)&&Q.getEdgeGroup()&&Q.getEdgeGroup().eachSiblingEdge(J.invalidateData,J),Q.getHost&&Q.getHost()&&Q.getHost().updateLayoutAttaches()):L===Di?(J._21Q(Q),n=Q._id,(x=J._25I[n])&&(J._56I[n]&&(b=x._79o())&&J.redraw(b),x.dispose(),delete J._25I[n],delete J._24I[n],delete J._56I[n]),Q===J._currentSubGraph&&J.setCurrentSubGraph(x5)):L===Ai&&(J.invalidateAll(!0),J.setCurrentSubGraph(x5))},_75O:function(Q){this.invalidateData(Q.data)},handleHierarchyChange:function(Q){this.dm().isHierarchicalRendering()&&Q.data.hasChildren()&&this.redraw(),this.invalidateData(Q.data)},adjustIndex:function(Q){if(this.isVisible(Q)){this.dm().beginTransaction();for(var n=Q;n._parent&&this.isVisible(n._parent);)n=n._parent;n&&n!==Q&&this._dataModel.adjustIndex(n),this._dataModel.adjustIndex(Q),this.dm().endTransaction()}},getImage:function(Q){return Q.getImage?Q.getImage():n5},getSelectWidth:function(Q){var n=g(this.getImage(Q));return n&&S(n.disableSelectedBorder,Q,this)?0:Q.s("select.width")},getSelectColor:function(Q){return Q.s("select.color")},isSelectable:function(Q,n){return!!this.isSelected(Q)||!(!n&&Q.getParent()instanceof SV&&this.isSelectable(Q.getParent(),!0)&&Q.getParent().isSyncSize())&&((!(n=(n=this.getLayersInfo())&&n[Q._layer])||!1!==n.selectable)&&(Q.s("2d.selectable")&&this.sm().isSelectable(Q)))},isMovable:function(Q){if(Z_(Q)&&Q.getStyle(gi)!==Fi)return!1;var n=this.getLayersInfo();return(!(n=n&&n[Q._layer])||!1!==n.movable)&&(!!Q.s("2d.movable")&&(!this._movableFunc||this._movableFunc(Q)))},isEditable:function(Q){if(d._uiSerializing)return this._uieditable;if(!this._editInteractor||!this.isSelected(Q))return!1;if(E_(Q)){var n=this.getDataUI(Q);if(!n||n._88I)return!1}return(!Z_(Q)||Q.getStyle(gi)===Fi)&&((!(n=(n=this.getLayersInfo())&&n[Q._layer])||!1!==n.editable)&&(!!Q.s("2d.editable")&&(!this._editableFunc||this._editableFunc(Q))))},handleDelete:function(Q){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(Q){return(!v(Q)||0===Q.getRotation())&&(!this._pointEditableFunc||this._pointEditableFunc(Q))},isRectEditable:function(Q){return!this._rectEditableFunc||this._rectEditableFunc(Q)},isAnchorEditable:function(Q){return!this._anchorEditableFunc||this._anchorEditableFunc(Q)},isRotationEditable:function(Q){return!(!Q.setRotation||!1===Q.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(Q))},isSourceTargetEditable:function(Q,n,x){return!0},getRotationPoint:function(Q){var n=Q.getAnchor(),x=Q.getScale(),b=this._zoom,n=o1(Q.getRotation(),0,-Q.getHeight()*x.y*n.y-(x.y<0?-1:1)*(Y5?32:16)/b),x=Q.p();return n.x+=x.x,n.y+=x.y,n},getLogicalPoint:function(Q){return nS(Q,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getScreenPoint:function(Q,n){var x;return"object"==typeof Q?n=Q.x!==n5?(x=Q.x,Q.y):(x=Q[0],Q[1]):x=Q,xS(x,n,this._canvas,this.tx(),this.ty(),this._zoom,this._zoom)},getSelectedDataAt:function(Q){var n=this;return this.getDataAt(Q,function(Q){return n.isSelected(Q)})},getDataInfoAt:function(Q,n,x){var b=this.lp(Q),J=this.getDataAt(b,n,x);if(J){var L={data:J,ui:Q=this.getDataUI(J),point:b},f=Q._38o;if(f){var V,l=f.icons;for(V in l){var H=l[V],I=f.rects[V];if(I)for(var Z=S(H.names,J,this),H=Z?Z.length:0,E=I.rotation,a=H-1;0<=a;a--){var o=Z[a],B=I[a];if(T7(B,b,E))return L.part="icons",L.name=V,L.icon=o,L.rect=B,L.index=a,L.rotation=E,L}}}if(this.isNoteVisible(J)){if(Q.note2Info&&T7(Q.note2Info.clickRect,b,x5,Q.note2Info.scale))return L.part="note2",L;if(Q.noteInfo&&T7(Q.noteInfo.clickRect,b,x5,Q.noteInfo.scale))return L.part="note",L}if(this.isLabelVisible(J)){if(Q.label2Info&&T7(Q.label2Info.rect,b,Q.label2Info.rotation,Q.label2Info.scale))return L.part="label2",L;if(Q.labelInfo&&T7(Q.labelInfo.rect,b,Q.labelInfo.rotation,Q.labelInfo.scale))return L.part="label",L}if(J.isInRect&&J.isInRect(b))return L.part="body",L}return L},getDataAt:function(n,x,b){n.target&&(n=this.lp(n));var J,L=this._zoom;return this.reverseEach(function(Q){if((x?x(Q):this.isSelectable(Q))&&this.rectIntersects(Q,x_(n.x,n.y,b,L)))return J=Q,!1},this),J},getIconInfoAt:function(Q,n){if(Q.target&&(Q=this.lp(Q)),n=n||this.getDataAt(Q)){var x=this.getDataUI(n);if(x&&x._38o){var b=x._38o,J=new m;for(f in b.icons)J.add(f);for(var L=J.size()-1;0<=L;L--)for(var f=J.get(L),V=b.rects[f],l=V.rotation,H=V.length-1;0<=H;H--){var I=V[H],Z=I.width,E=I.height,a={x:Q.x-I.x-Z/2,y:Q.y-I.y-E/2};if(l!=x5&&(a=o1(-l,a.x,a.y)),T7(I={x:-Z/2,y:-E/2,width:Z,height:E},a))return{key:f,index:H,name:b.icons[f].names[H],rect:V[H],point:Q,rotation:l,relativeRect:I,relativePoint:a,data:n}}}}return x5},getDatasInRect:function(n,x,b){b===n5&&(b=1);var J=this,L=new m;return J.reverseEach(function(Q){b&&!J.isSelectable(Q)||(x?J.rectIntersects(Q,n):J.rectContains(Q,n))&&L.add(Q)}),L},moveSelection:function(Q,n){this.dm().beginTransaction(),D1(this.sm().toSelection(this.isMovable,this),Q,n),this.dm().endTransaction()},moveDatas:function(Q,n,x){this.dm().beginTransaction(),Q instanceof m||(Q=new m(Q)),D1(Q,n,x),this.dm().endTransaction()},getDataUIBounds:function(Q){return(Q=this.getDataUI(Q))?Q._79o():x5},drawData:function(n,Q,x){var b,J=this.getDataUI(Q);J&&(b=J._79o(),x&&!N7(x,b)||(J._42(n),Q instanceof d.Block&&Q.eachChild(function(Q){this.isVisible(Q)&&this.drawData(n,Q,x)},this)))},getBoundsForGroup:function(Q){return Q.s(ti)?this.getDataUIBounds(Q):x5},isPixelPerfect:function(Q){return Q.s("pixelPerfect")},rectIntersects:function(Q,n){this.validate();var x=x5;if(this._56I[Q._id]&&(J=this._25I[Q._id])){var b=J._79o();if(k7(n,b))x=!0;else if((n=j7(n,b))&&(x=J.rectIntersects?J.rectIntersects(n):x)==x5){if(!this.isPixelPerfect(Q))return!0;var b=n.x,J=n.y,L=n.width,f=n.height,V=this._zoom,l=L*f*V*V,H=((H=b5.hitMaxArea)<l&&(V*=Math.sqrt(H/l)),b*=V,J*=V,hh(L=(L*=V)<2?2:L,f=(f*=V)<2?2:f));Jh(H,-b,-J),H.scale(V,V),this._drawForChecking=!0,this.drawData(H,Q,n),this._drawForChecking=!1;try{for(var I=0,Z=H.getImageData(0,0,L,f).data;I<Z.length;I+=4)if(0!==Z[I+3]){x=!0;break}H.restore()}catch(Q){vh=x5,x=!1}}}return!!x},rectContains:function(Q,n){return!(!this._56I[Q._id]||!(Q=this._25I[Q._id]))&&k7(n,Q._79o())},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(Q){var n,x,b,J,L;b5.isInput(Q.target)||(x=(L=(n=this)._focusData)&&n._25I[L._id],J=0,b=n._dataModel._datas,L&&L._enabled&&L._editable&&x&&x.onKeyDown&&!0===x.onKeyDown(Q)||(9===Q.keyCode&&(L&&(J=b.indexOf(L),s7(Q)?-1==--J&&(J=0):++J===b.size()&&(J=0)),n._focusData=L=b.get(J),n.sm().setSelection(L)),Ah(Q)?n.selectAll():wh(Q)&&n.isResettable()&&n.reset(),n.sm().isEmpty()?n._editing||(x=n.tx(),b=n.ty(),J=!1,L=s7()?100:10,Ph(Q)&&(x-=L,J=!0),ch(Q)&&(b-=L,J=!0),Fh(Q)&&(x+=L,J=!0),qh(Q)&&(b+=L,J=!0),J&&n.setTranslate(x,b)):(uh(Q)&&n.handleDelete(Q),L=s7()?10:1,Ph(Q)&&(n.moveSelection(-L,0),n.fi({kind:"moveLeft"})),ch(Q)&&(n.moveSelection(0,-L),n.fi({kind:"moveUp"})),Fh(Q)&&(n.moveSelection(L,0),n.fi({kind:"moveRight"})),qh(Q)&&(n.moveSelection(0,L),n.fi({kind:"moveDown"})))))},handleScroll:function(Q,n){if(u7(Q),this.isZoomable()){if(!this.getEditInteractor()){var x=this.getDataAt(Q);if(x){var b=g(this.getImage(x));if(b&&S(b.scrollable,x,this))return}}var J,L=this.getFullscreenDatas();for(J in L)if(L[J].s("fullscreen.lock"))return;b=this.lp(Q),0<n?this.scrollZoomIn(b):n<0&&this.scrollZoomOut(b)}},handlePinch:function(Q,n,x){!this.isZoomable()||Math.abs(n-x)<b5.pinchZoomThreshold||(x<n?this.pinchZoomIn(Q):this.pinchZoomOut(Q))},checkDoubleClickOnNote:function(Q,n){var x=this.lp(Q),b=this.getDataUI(n),J=b.note2Info;return J&&n.s("note2.toggleable")&&T7(J.clickRect,x)?(n.s(si,!n.s(si)),this.fi({kind:"toggleNote2",event:Q,data:n}),!0):!!((J=b.noteInfo)&&n.s("note.toggleable")&&T7(J.clickRect,x))&&(n.s(zi,!n.s(zi)),this.fi({kind:"toggleNote",event:Q,data:n}),!0)},_84o:function(Q,n){},isNoteVisible:function(Q){return.15<this._zoom},isLabelVisible:function(Q){return.15<this._zoom},isEditVisible:function(Q){return.15<this._zoom},autoScroll:function(Q,n){var x=this,b=x.getAutoScrollZone(),J=b/x.getZoom(),L=b/4,f=x._29I,Q=x.lp(Q),V={x:x.tx(),y:x.ty()};return Q&&0<b&&f&&(Q.x-f.x<J?x.translate(L,0):f.x+f.width-Q.x<J&&x.translate(-L,0),Q.y-f.y<J?x.translate(0,L):f.y+f.height-Q.y<J&&x.translate(0,-L)),V.x=x.tx()-V.x,V.y=x.ty()-V.y,n&&(n.x+=V.x,n.y+=V.y),V},getMoveMode:function(Q,n){return(n=n.s("2d.move.mode"))||(cj[88]?"x":cj[89]?"y":"xy")},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(Q,n,x){return"currentSubGraph"===n?{__i:Q.getId()}:x.serializeProperty(Q,n,this)},deserializeProperty:function(Q,n,x){return"currentSubGraph"===n?this.dm().__idMap[Q.__i]:x.deserializeProperty(Q,n,this)},setDefaultCursor:function(Q,n){this._defaultCursor=Q,!1!==n&&this.setCursor(Q)},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function(Q){return!(Q!==x5&&!b5.getConnectAction(null,Q)||(this._currentActionType=Q,this.redraw(),0))},getEditStyle:function(Q){var n=this.getEditInteractor();return n?n.getStyle(Q):n5},setEditStyle:function(Q,n,x){var b=this.getEditInteractor();return!!b&&(b.setStyle(Q,n,x),!0)},isConnectActionVisible:function(Q){var n=b5.getConnectAction(this);return!!n&&(n=n.visible,l_(n)?n(this,Q):n)},isInteractive:function(Q){if(this._drawForChecking)return!1;var n=g(this.getImage(Q));return!(!n||!S(n.interactive,Q,this))||Q.s("interactive")},getRenderingStyleIconName:function(){return HE},appendHTML:function(Q,n){var x=this.getView();if(!(n||Q&&Q.parentNode!==x))return!1;var b=Q.getView&&Q.getView(),J=Q.beforeCanvas;return!(!n&&b&&b.parentNode===x)&&((Q.getView||Q.isSelfViewEvent)&&(Q=Q.getView()),n=this.getEditInteractor(),J?x.insertBefore(Q,this.getCanvas()):n&&n._canvas?x.insertBefore(Q,n._canvas):this.isScrollBarVisible()?x.insertBefore(Q,this.getView().lastChild):g_(x,Q),!0)},_layoutHTMLImpl:function(Q,n,x){var b,J,L,f,V,l;1<arguments.length?(J=this._zoom,(n=n.getView?(b=n).getView():n).style.position="absolute",x?(L=Q.getRect(),F(b||n,this.tx()+L.x*J,this.ty()+L.y*J,L.width*J,L.height*J)):(x=new vK,L=Q.getAnchorRect(),f=Q.getPosition(),V=Q.getScale(),l=n.style,F(b||n,L),x.appendTranslate(this.tx(),this.ty()),x.appendScale(J,J),x.append(new vK(Q.getRotation(),f.x,f.y,V.x,V.y)),Qh(l,"transform","matrix("+x.a.toFixed(5)+", "+x.b.toFixed(5)+", "+x.c.toFixed(5)+",\n    "+x.d.toFixed(5)+", "+x.tx.toFixed(5)+", "+x.ty.toFixed(5)+")"),Qh(l,"transformOrigin",(-L.x).toFixed(5)+"px "+(-L.y).toFixed(5)+"px"),n.updateAppendMatrix=!0)):this._layoutHTML&&this._layoutHTML()},getTextEditInfo:function(Q){if(Q instanceof mV)return{name:"text",accessType:"s",font:Q.s("text.font"),isMultiline:!0}},getState:function(Q){var n=Q.s("state");return n||((n=g(Q._image))?S(n.state,Q,this)||null:void 0)},getShape:function(Q){return Q.getStyle(_i)}}),e.defineProperties(SG.GraphView.prototype,{layoutHTML:{get:function(){return this._layoutHTMLImplBind||(this._layoutHTMLImplBind=this._layoutHTMLImpl.bind(this)),this._layoutHTMLImplBind},set:function(Q){this._layoutHTML=Q}}}),function(Q,n){this.gv=Q,this.s=function(Q){return n.getStyle(Q)},this._data=n,this._87I=new m}),HE=x5,IE=(HS(lE,e,{_6I:x5,ms_icons:1,_84o:function(Q){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){return!this.gv.isSelected(this._data)||this.isShadowed()?0:this.gv.getSelectWidth(this._data)},getSelectColor:function(){return this.gv.getSelectColor(this._data)},getBodyColor:function(Q){var n=this._data;return this.gv.getBodyColor(n)||(Q?n.getStyle(Q):x5)},_2Q:function(Q){return this.s(Q)},_1Q:function(Q,n,x,b){var J,L=this.s,f=L("2d.gray"),V=L(n+".dash.color");f&&(V=b5.toGrayColor(V)),Q.strokeStyle=V,Q.lineWidth=x,Q.stroke(),L(n+".dash.3d")&&(J=L(n+".dash.3d.color"),Th(Q,V,f?b5.toGrayColor(J):J,x,this.gv._zoom,L(n+".dash.3d.accuracy"))),eS(Q,b)},invalidate:function(){this._6I=x5},_79o:function(){var Q,n,x=this;return x._6I||(Q=x._data,n=x.gv,x.labelInfo=x.label2Info=x.noteInfo=x.note2Info=x._38o=x5,x._87I.clear(),x.interactiveInfo=n.isInteractive(Q)?{}:x5,x._3O(),x._55O=n.isEditable(Q)?{_42O:n.isRectEditable(Q),_43O:n.isPointEditable(Q),_56O:n.isRotationEditable(Q)}:x5,x._6I=x._81o()),x._6I},_3O:function(){},getPosition:function(Q,n,x,b){return sj},_68o:function(Q,n){var x,b;Q&&this._87I.add(n?(n=new OK(n),x=Q.width/2,b=Q.height/2,(n=m7([n.tf(-x,-b),n.tf(x,-b),n.tf(x,b),n.tf(-x,b)])).x+=Q.x+x,n.y+=Q.y+b,n):Q)},_81o:function(){var n,Q,x,b,J=this,L=J.s;return J._24O(Ki,"getLabel"),J._24O(Ui,"getLabel2"),J._26O(ei,"getNote"),J._26O(vi,"getNote2"),J._15O(),J._55O&&J._48O(),J._87I.each(function(Q){n=Y7(n,Q)}),n&&L("shadow.interactable")&&(Q=J.isShadowed(),x=L("shadow2"),b=q7(n),x?(b.x+=L("shadow2.offset.x"),b.y+=L("shadow2.offset.y"),QS(b,L("shadow2.blur"))):Q&&(b.x+=L("shadow.offset.x"),b.y+=L("shadow.offset.y"),QS(b,L("shadow.blur"))),n=Y7(n,b)),J._87I.clear(),n},_42:function(Q){var n,x,b,J,L,f,V,l=this,H=l._data,I=l.gv,Z=l.s,E=Z("opacity"),a=this.isShadowed(),o=Z("shadow2");(a||o)&&(n=Q.shadowOffsetX,x=Q.shadowOffsetY,b=Q.shadowBlur,J=Q.shadowColor,L=I.getZoom()*b5.devicePixelRatio,Q.shadowOffsetX=Z((f=a?"shadow":"shadow2")+".offset.x")*L,Q.shadowOffsetY=Z(f+".offset.y")*L,Q.shadowBlur=Z(f+".blur")*L,Q.shadowColor=a?l.getSelectColor():Z(f+".color")),E!=x5&&(V=Q.globalAlpha,Q.globalAlpha=E),l._80o(Q),I.isLabelVisible(H)&&(I._drawForChecking&&!Z("label.selectable")||hG(Q,l.labelInfo),I._drawForChecking&&!Z("label2.selectable")||hG(Q,l.label2Info)),I.isNoteVisible(H)&&(pG(Q,l.noteInfo),pG(Q,l.note2Info)),l._99O(Q),E!=x5&&(Q.globalAlpha=V),(a||o)&&(Q.shadowOffsetX=n,Q.shadowOffsetY=x,Q.shadowBlur=b,Q.shadowColor=J)},_80o:function(Q){},_47O:function(Q){},_24O:function(Q,n){var x,b,J,L=this._data,f=this.gv,V=this.s,l=f[n](L);l!=x5&&(x=V(Q+".scale"),J=V(Q+".max"),b=V(Q+".position"),f=this[Q+"Info"]={label:l,scale:x,color:f[n+"Color"](L),font:V(Q+".font"),opacity:V(Q+".opacity"),align:V(Q+".align"),decoration:V(Q+".decoration"),rotation:this.getRotation(V(Q+".rotation"),!1,b),background:f[n+"Background"](L)},n=S_(f,l),0<J&&J<n.width&&(f.labelWidth=n.width,n.width=J),1!==x&&(n.width*=x,n.height*=x),L=this.getPosition(b,V(Q+".offset.x"),V(Q+".offset.y"),n,V(Q+".position.fixed")),n.x=L.x-n.width/2,n.y=L.y-n.height/2,this._68o(f.rect=n,f.rotation),1!==x&&(l=n.width/x,J=n.height/x,f.rect={x:L.x-l/2,y:L.y-J/2,width:l,height:J}))},_26O:function(Q,n){var x,b,J,L,f,V=this.gv,l=this._data,H=this.s,I=V[n](l);I!=x5&&(x=H(Q+".scale"),V=this[Q+"Info"]={note:I,scale:x,data:l,view:V,expanded:H(Q+".expanded"),font:H(Q+".font"),color:H(Q+".color"),opacity:H(Q+".opacity"),align:H(Q+".align"),icon:H(Q+".icon"),backgroundImage:H(Q+".backgroundImage"),borderWidth:H(Q+".border.width"),borderColor:H(Q+".border.color"),background:V[n+"Background"](l)},b=(n=this.getPosition(H(Q+".position"),H(Q+".offset.x"),H(Q+".offset.y"))).x,n=n.y,V.expanded?(J=H(Q+".max"),(f=(f=H(Q+".backgroundImage"))?(f=g(f),{width:kS(f,l),height:NS(f,l)}):S_(V,I)).width+=6,f.height+=2,0<J&&J<f.width&&(V.labelWidth=f.width,f.width=J),J=f.width,L=f.height+8,V.clickRect={x:b-J*x/2,y:n-L*x,width:J*x,height:L*x*f.height/L}):(L=(I=H(Q+".icon"))?(I=g(I),J=kS(I,l),NS(I,l)):(J=12,18),V.clickRect={x:b-J*x/2,y:n-L*x,width:J*x,height:L*x}),V.rect={x:b-J/2,y:n-L*x/2-L/2,width:J,height:L},f=i5(V.borderWidth/2)*x,this._68o({x:b-J*x/2-f,y:n-L*x-f,width:J*x+2*f,height:L*x+2*f}))},_48O:function(){},_99O:function(Q){var n=this._38o;if(n){var x,b=this.gv,J=this._data,L=n.icons,f=this.interactiveInfo;for(x in f&&(f._38o={}),L){var V=L[x],l=n.rects[x];if(l){f&&(f._38o[x]=[]);var H,I=S(V.opacity,J,b),Z=S(V.names,J,b),E=Z?Z.length:0,a=l.rotation;I!=x5&&(H=Q.globalAlpha,Q.globalAlpha*=I);for(var o=0;o<E;o++){var B,G,_=Z[o],_=g(_),$=l[o],W=(a&&(B=$.x+$.width/2,G=$.y+$.height/2,Q.save(),Jh(Q,B,G),Lh(Q,a),Jh(Q,-B,-G)),f&&f._38o[x].push(Q.interactiveInfo={compInfos:[],matrix:a?new vK(a,B,G).appendTranslate(-B,-G):new vK}),HE);HE=x,i7(Q,_,S(V.stretch,J,b),$.x,$.y,$.width,$.height,this._data,this.gv),HE=W,Q.interactiveInfo=x5,a&&Q.restore()}I!=x5&&(Q.globalAlpha=H)}}}}}),function(Q,n){u_(IE,this,[Q,n])}),ZE=(HS(IE,lE,{_checkEmptyRect:!0,_40O:function(Q,n){var x,b=this.s,J=Q.rect,L=((Q.borderColor=this.gv.getBorderColor(this._data))&&(Q.borderType=b("border.type"),Q.borderWidth=b("border.width"),Q.borderPadding=b("border.padding"),n=J5(n,Q.borderPadding+Q.borderWidth/2)),this._data.getScale()),L=J5(1,J5(P5(L.x),P5(L.y)));(Q.selectWidth=this.getSelectWidth())&&(x=this.gv._zoom,Q.selectType=b("select.type"),Q._97o=this.getSelectColor(),Q.selectPadding=b("select.padding"),n=J5(n,(Q.selectPadding+Q.selectWidth/2/x)/L)),0<n&&(n*=L,J=q7(J),QS(J,n)),this._68o(J)},_39O:function(Q,n){var x,b,J,L,f,V=n.rect;0<n.borderWidth&&(f=n.borderPadding,Q.strokeStyle=n.borderColor,Q.lineWidth=n.borderWidth,jh(Q,n.borderType,{x:V.x-f,y:V.y-f,width:V.width+2*f,height:V.height+2*f}),Q.stroke()),0<n.selectWidth&&(b=this.gv._zoom,f=n.selectPadding,Q.strokeStyle=n._97o,Q.lineWidth=n.selectWidth/b,n.rotation!=x5&&(Q.save(),Q.translate(n.position.x,n.position.y),Q.rotate(n.rotation),x=(b=this._data).getWidth(),b=b.getHeight(),J=n.scale,L=n.anchor,V={x:J.x*(-x*L.x),y:J.y*(-b*L.y),width:J.x*x,height:J.y*b}),jh(Q,n.selectType,{x:V.x-f,y:V.y-f,width:V.width+2*f,height:V.height+2*f}),n.rotation!=x5&&Q.restore(),Q.stroke())},dispose:function(){var Q=this._htmlView;IE.superClass.dispose.call(this),Q&&(Q.onHTMLRemoved&&Q.onHTMLRemoved(),JS(Q))},_3O:function(){var Q,n=this,x=n.s,b=n._data,J=n.gv,L=J.getShape(b),f=n.getBodyColor(),V=x("shape.border.color"),l=((f=(V=n._83o=L?{shape:L,_53o:n.getBodyColor("shape.background"),_27Q:g(x("shape.repeat.image"),f),shapeRepeatImageStretch:x("shape.repeat.image.stretch"),shapeRepeatImageRotation:x("shape.repeat.image.rotation"),shapeGradientPack:x("shape.gradient.pack"),shapeBorderGradientPack:x("shape.border.gradient.pack"),_54o:x("shape.border.width"),_55o:V,shapeBorderRepeatImage:g(x("shape.border.repeat.image"),V),shapeBorderRepeatImageStretch:x("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:x("shape.border.repeat.image.rotation"),_56o:x("shape.border.3d"),_57o:x("shape.border.3d.color"),_58o:x("shape.border.3d.accuracy"),shapeGradient:x("shape.gradient"),_59o:x("shape.gradient.color"),_60o:x("shape.border.pattern"),_61o:x("shape.border.cap"),_62o:x("shape.border.join"),shapeForeground:x("shape.foreground"),bodyColor:f,gray:x("2d.gray")}:{img:g(J.getImage(b),f),bodyColor:f,gray:x("2d.gray"),stretch:x("image.stretch")}).img)&&f.renderHTML?(n._htmlInfo&&n._htmlInfo.img!==f&&(n._htmlInfo=x5),n._htmlInfo||(n._htmlInfo={img:f,cache:{}}),l=f.renderHTML(b,J,n._htmlInfo.cache)):n._htmlInfo=x5,n._htmlView&&n._htmlView!==l&&(n._htmlView.onHTMLRemoved&&n._htmlView.onHTMLRemoved(),JS(n._htmlView.getView?n._htmlView.getView():n._htmlView)),(n._htmlView=l)&&J.appendHTML(l)&&(l.onHTMLAddedSync&&l.onHTMLAddedSync(),l.onHTMLAdded&&P7(l.onHTMLAdded)),V.rect=b.getRect(),V.position=b.p(),V.scale=b.getScale(),V.anchor=b.getAnchor(),V.rotation=b.getRotation(),L===h&&(V._63o=x("shape.depth")),0);L?(l=Xh(x5,V._54o/2,V._62o),n.s("shape.dash")&&(l=J5(l,(n.s("shape.dash.width")||V._54o)/2))):f&&f.boundExtend&&(l=S(f.boundExtend,b,J),f.boundExtendAbsolute?(Q=b.getScale(),l/=J._zoom*J5(1,J5(P5(Q.x),P5(Q.y)))):S(f.fitSize,b,J)||(Q=S(f.width,b,J),f=S(f.height,b,J),l*=J5(b.getWidth()/Q,b.getHeight()/f))),n._40O(V,l),(J=x("clip.percentage"))!=n5&&(V.clipRect=y_(b.getAnchorRect(),x("clip.direction"),J)),L&&((Q=x("shape.fill.clip.percentage"))!=n5&&(V.shapeClipRect=y_(b.getAnchorRect(),x("shape.fill.clip.direction"),Q)),(f=x("shape.foreground.clip.percentage"))!=n5&&(V.shapeForegroundClipRect=y_(b.getAnchorRect(),x("shape.foreground.clip.direction"),f))),x("clip.host")&&b.getHost()&&(V.clipHost=!0)},getPosition:function(Q,n,x,b){return(Q=t1(Q,this._83o.rect,b)).x+=n,Q.y+=x,Q},clipHost:function(x){var n,b,Q,J,L,f,V,l,H,I,Z=this.gv,E=this._data.getHost(),a=Z.getDataUI(E)._83o,Z=Z.getShape(E);return E instanceof YV?(V=E.getPoints().toArray(),l=E.getSegments().toArray(),n=E.getMatrix(),b=E.p(),V=V.map(function(Q){return(Q=q7(Q)).x-=b.x,Q.y-=b.y,n.apply(Q)}),mh(x,V,l)):Z?("roundRect"===Z?Q=E.s("shape.corner.radius"):"polygon"===Z?(Q=E.s("shape.polygon.side"),J=E.s("shape.corner.radius"),L=E.s("shape.regular")):"arc"===Z&&(Q=E.s("shape.arc.from"),J=E.s("shape.arc.to"),L=E.s("shape.arc.close"),f=E.s("shape.arc.oval")),V=a.position,l=a.rotation,H=a.anchor,a=a.scale,(I=E.getSize()).x=-I.width*H.x,I.y=-I.height*H.y,x.save(),Jh(x,V.x,V.y),Lh(x,l),fh(x,a.x,a.y),a1[Z](x,I.x,I.y,I.width,I.height,Q,J,L,f),x.restore()):E.getCorners().forEach(function(Q,n){n?x.lineTo(Q.x,Q.y):x.moveTo(Q.x,Q.y)}),!0},_80o:function(Q){var n,x,b,J,L,f,V,l,H,I,Z,E,a,o=this,B=o.s,G=o.gv,_=o._data,$=o._83o,W=$.rect,D=$.position,A=$.rotation,u=$.anchor,M=$.scale,t=$.shape,i=$.clipHost,r=$.clipRect;(!o._checkEmptyRect||0<W.width&&0<W.height)&&(i&&(Q.save(),Q.beginPath(),o.clipHost(Q)&&Q.clip()),(W=_.getSize()).x=-W.width*u.x,W.y=-W.height*u.y,Q.save(),Jh(Q,D.x,D.y),Lh(Q,A),fh(Q,M.x,M.y),r&&(Q.beginPath(),Q.rect(r.x,r.y,r.width,r.height),Q.clip()),G._drawForChecking&&$.img&&!1===S($.img.pixelPerfect,_,G)?Nh(Q,W.x,W.y,W.width,W.height,"#888888"):o.freeDraw?o.freeDraw(Q,W,$):t?(u=$._60o,r=US(Q,u),Z=$._27Q,n=$._54o,a=$.shapeGradientPack,x=$.gray,b=Q.lineJoin,J=Q.lineCap,H=function(Q){return x?b5.toGrayColor(Q):Q},"roundRect"===t?L=B("shape.corner.radius"):"polygon"===t?(L=B("shape.polygon.side"),f=B("shape.corner.radius"),V=B("shape.regular")):"arc"===t&&(L=B("shape.arc.from"),f=B("shape.arc.to"),V=B("shape.arc.close"),l=B("shape.arc.oval")),Q.lineJoin=$._62o,Q.lineCap=$._61o,(I=H($._53o))||Z||a?((E=$.shapeClipRect)&&(Q.save(),Q.beginPath(),Q.rect(E.x,E.y,E.width,E.height),Q.clip()),jh(Q,t,W,L,f,V,l),a?gh(Q,a,function(Q){return ph(Q,$.bodyColor)},!1,W):Z?Q1(Q,Z,H($.bodyColor),null,_,G,$.shapeRepeatImageStretch,W,$.shapeRepeatImageRotation):Ch(Q,I,$.shapeGradient,H($._59o),W),Q.fill(),a&&Q.restore(),E&&Q.restore(),Q!==r&&jh(r,t,W,L,f,V,l)):jh(r,t,W,L,f,V,l),(Z=$.shapeForeground)&&(Q.save(),(a=$.shapeForegroundClipRect)&&(Q.beginPath(),Q.rect(a.x,a.y,a.width,a.height),Q.clip()),jh(Q,t,W,L,f,V,l),Ch(Q,Z,B("shape.foreground.gradient"),H(B("shape.foreground.gradient.color")),W),Q.fill(),Q.restore()),0<n&&((E=B("shape.border.width.absolute"))&&(Q.save(),Q.setTransform(1,0,0,1,0,0)),Q.lineWidth=n,a=H($._55o),(Z=$.shapeBorderGradientPack)?gh(Q,Z,H,!0,W):$.shapeBorderRepeatImage?n1(Q,$.shapeBorderRepeatImage,a,null,_,G,$.shapeBorderRepeatImageStretch,W,$.shapeBorderRepeatImageRotation):Q.strokeStyle=a,Q.stroke(),Z&&Q.restore(),E&&Q.restore(),$._56o&&Th(Q,a,H($._57o),n,G._zoom,$._58o)),eS(Q,u),B("shape.dash")&&0<(Z=B("shape.dash.width")||n)&&(u=B("shape.dash.pattern"),(r=US(Q,u,o._2Q("shape.dash.offset")))!==Q&&jh(r,t,W,L,f,V,l),o._1Q(Q,"shape",Z,u)),V1(Q,I,$._63o,W),Q.lineJoin=b,Q.lineCap=J):((E=o.interactiveInfo)&&(Q.interactiveInfo=E.bodyInfo={compInfos:[],matrix:new vK(A,D.x,D.y,M.x,M.y)}),$.gray&&(Q.compGray=!0),(a=$.img)&&a.cacheRule!=x5&&(a=YG(Q,a,$.stretch,W.width,W.height,_,G,$.bodyColor)),i7(Q,a,$.stretch,W.x,W.y,W.width,W.height,_,G,$.bodyColor),Q.compGray=!1,Q.interactiveInfo=x5),Q.restore(),i&&Q.restore()),o._39O(Q,$)},_48O:function(){},_47O:function(Q){}}),function(Q,n){u_(ZE,this,[Q,n])}),EE=function(Q,n,x,b){var J=S7(Q,n);return x=(b?L5:zG)(x,J),J?x/=J:x=0,{x:Q.x+(n.x-Q.x)*x,y:Q.y+(n.y-Q.y)*x}},aE=(HS(ZE,lE,{_3O:function(){var Q,n,x,b,J,L,f,V,l,H=this,I=H._data,Z=H.gv,E=H.s,a=E(gi),o=I.isLooped(),B=E("edge.width"),G=H.getBodyColor("edge.color"),_=E("edge.center"),$=E("edge.offset"),W=Z.getBorderColor(I),D=W?E("border.width"):0,A=H.getSelectWidth(),u=I._40I,M=I._41I;(G=H._78o=u&&M?{looped:o,type:a,width:B,center:_,color:G,repeatImage:g(E("edge.repeat.image"),G),borderColor:W,borderWidth:D,_97o:A?H.getSelectColor():x5,selectWidth:A,pattern:E("edge.pattern"),cap:E("edge.cap"),join:E("edge.join"),is3d:E("edge.3d"),_67o:E("edge.3d.color"),_66o:E("edge.3d.accuracy"),gray:E("2d.gray")}:x5)&&((W=b5.getEdgeType(a))?(W=W(I,RG(H,Z,I,o,a),Z,H._19Q)).points&&1<W.points.size()?(G.edgeTypeInfo=W,Q=m7(G.edgeTypeInfo.points)):W[Ni]&&W.rect&&(Q=(G.edgeTypeInfo=W).rect):(W=E("edge.source.anchor.x"),L=E("edge.source.anchor.y"),b=E("edge.target.anchor.x"),J=E("edge.target.anchor.y"),n=eG(Z,I,"source"),x=eG(Z,I,"target"),a===Fi?(V=(f=G.points=E(Ri)||aG).size(),G.segments=E("edge.segments"),W=W!==n5||L!==n5||Z_(u),L=b!==n5||J!==n5||Z_(M),_||($?(W||(n=EE(n,V?f.get(0):x,$,V)),L||(x=EE(x,V?f.get(V-1):n,$,V))):(W||(l=c_(n,V?f.get(0):x,$G(Z,u)))&&(n={x:l[0],y:l[1]}),L||(l=c_(V?f.get(V-1):n,x,$G(Z,M)))&&(x={x:l[0],y:l[1]}))),Q=Y7(m7(G.points),m7(n,x))):(b=RG(H,Z,I,o,a),H._19Q||(b=-b),o?((n=q7(n)).x=Z.getNodeRect(u).x,G.radius=b,Q={x:n.x-b,y:n.y-b,width:2*b,height:2*b}):(J=S7(n,x),L={x:W=zG($,J),y:b},f={x:J-W,y:b},V=K5(x.y-n.y,x.x-n.x),M=G.mat=new OK(V),G.orienAngle=V,G.angle=x.x<n.x?V+w:V,G.rect={x:L.x,y:L.y,width:f.x-L.x,height:0},G.origin=n,(L=M.tf(L)).x+=n.x,L.y+=n.y,(f=M.tf(f)).x+=n.x,f.y+=n.y,_?((l=M.tf(l={x:J,y:0})).x+=n.x,l.y+=n.y,Q=m7([n,L,f,l]),G.c1=n,G.c2=l):Q=m7(L,f),n=L,x=f)),G.sourcePoint=n,G.targetPoint=x,I._lastSourcePoint=n,I._lastTargetPoint=x),a=0,E("edge.dash")&&(a=E("edge.dash.width")||B),o="square"===G.cap?.71:.5,Xh(Q,J5(a*o,B*o+D+A),G.join),H._68o(Q))},getRotation:function(Q,n,x){Q=Q||0;var b=this._78o;if(b){var J,L=b.angle,f=b.points,V=b.edgeTypeInfo;if(L!=x5)return n?b.orienAngle+Q:L+Q;if(V&&V[Ni])return V.getRotation?V.getRotation(this,Q,n,x):0;if(V&&V.points)return J=(L=V.points).size(),DG[x]?J&&J%2==0?sG(L.get(J/2-1),L.get(J/2),n,Q):Q:WG[x]?sG(L.get(0),L.get(1),n,Q):sG(L.get(J-2),L.get(J-1),n,Q);if(f)return J=f.size(),DG[x]?J&&J%2==0?sG(f.get(J/2-1),f.get(J/2),n,Q):0===J?sG(b.sourcePoint,b.targetPoint,n,Q):Q:WG[x]?sG(b.sourcePoint,J?f.get(0):b.targetPoint,n,Q):sG(J?f.get(J-1):b.sourcePoint,b.targetPoint,n,Q)}return Q},getPosition:function(Q,n,x,b,J){var L=this._78o;if(L){var f=L.type,V=L.points,l=L.edgeTypeInfo,H=L.sourcePoint,I=L.targetPoint;if(!f)return L.looped?{x:H.x-L.radius+n,y:H.y+x}:(J&&H&&I&&(H.x>I.x||H.x===I.x&&H.y>I.y)&&(Q=M1[Q],x=-x),(Z=t1(Q,L.rect,b)).x+=n,Z.y+=x,(Z=L.mat.tf(Z)).x+=L.origin.x,Z.y+=L.origin.y,Z);if(l&&l[Ni])return l.getPosition?l.getPosition(this,Q,n,x,b,J):{x:(H.x+I.x)/2,y:(H.y+I.y)/2};if(V){var Z,E,a=V.size();if(DG[Q]){if(a){if(0==(E=a%2))return XG(V.get(a/2-1),V.get(a/2),Q,n,x,b,J);Z=V.get((a-E)/2)}else Z={x:(H.x+I.x)/2,y:(H.y+I.y)/2};return(Z=t1(Q,{x:Z.x,y:Z.y,width:0,height:0},b)).x+=n,Z.y+=x,Z}return WG[Q]?XG(H,a?V.get(0):I,Q,n,x,b,J):XG(a?V.get(a-1):H,I,Q,n,x,b,J)}if(l)return a=(f=l.points).size(),DG[Q]?0==(E=a%2)?XG(f.get(a/2-1),f.get(a/2),Q,n,x,b,J):(Z=f.get((a-E)/2),(Z=t1(Q,{x:Z.x,y:Z.y,width:0,height:0},b)).x+=n,Z.y+=x,Z):WG[Q]?XG(f.get(0),f.get(1),Q,n,x,b,J):XG(f.get(a-2),f.get(a-1),Q,n,x,b,J)}return sj},_42:function(Q){this._78o&&ZE.superClass._42.call(this,Q)},drawPath:function(n,Q){n.beginPath();var x,b,J,L,f=Q.type,V=Q.points,l=Q.segments,H=Q.edgeTypeInfo;!f||V?(x=(b=Q.sourcePoint).x,b=b.y,J=(L=Q.targetPoint).x,L=L.y,f?l?((f=new m({x:x,y:b})).addAll(V),f.add({x:J,y:L}),mh(n,f,l)):(n.moveTo(x,b),V.each(function(Q){n.lineTo(Q.x,Q.y)}),n.lineTo(J,L)):Q.looped?n.arc(x,b,Q.radius,0,l5,!0):Q.center?(n.moveTo(Q.c1.x,Q.c1.y),n.lineTo(x,b),n.lineTo(J,L),n.lineTo(Q.c2.x,Q.c2.y)):(n.moveTo(x,b),n.lineTo(J,L))):H&&(H.points?mh(n,H.points,H.segments):H[Ni]&&H[Ni](n,H))},_80o:function(Q){var n=this.s,x=this._78o,b=x.width,J=x.selectWidth,L=x.borderWidth,f=x.repeatImage,V=Q.lineJoin,l=Q.lineCap,H=x.gray,I=x.pattern,Z=(Q.lineJoin=x.join,Q.lineCap=x.cap,this.drawPath(US(Q,I),x),n("edge.width.absolute")),J=(Z&&(Q.save(),Q.setTransform(1,0,0,1,0,0)),J&&(Q.strokeStyle=x._97o,Q.lineWidth=b+2*(L+J),Q.stroke()),L&&(Q.strokeStyle=H?b5.toGrayColor(x.borderColor):x.borderColor,Q.lineWidth=b+2*L,Q.stroke()),H?b5.toGrayColor(x.color):x.color);f?n1(Q,f,J,null,this._data,this.gv):Q.strokeStyle=J,Q.lineWidth=b,Q.stroke(),x.is3d&&(L=H?b5.toGrayColor(x._67o):x._67o,Th(Q,J,L,b,this.gv._zoom,x._66o)),n("edge.dash")&&(I=n("edge.dash.pattern"),(f=US(Q,I,this._2Q("edge.dash.offset")))!==Q&&this.drawPath(f,x),this._1Q(Q,"edge",n("edge.dash.width")||b,I)),Z&&Q.restore(),eS(Q,I),Q.lineJoin=V,Q.lineCap=l},_48O:function(){},_47O:function(Q){}}),function(Q,n){u_(aE,this,[Q,n])}),oE=(HS(aE,IE,{_3O:function(){var n,x,Q,b,J,L,f,V,l,H,I,Z,E,a,o,B,G=this.s,_=this._data,$=this.gv;this._88I=x5,_.isExpanded()&&_.eachChild(function(Q){v(Q)&&(Q=$.getBoundsForGroup(Q))&&((x=x||[]).push(Q),n=Y7(n,Q))}),n?(L=$.getLabel(_),J=G("group.type"),b=(Q=G("group.border.width")||0)/2,G("group.border.width.absolute")&&(Q/=$._zoom),l=x,H=n,n="oval"===(V=J)?(I=0,E=H.height/H.width,Z=E*E,o=H.x+H.width/2,B=H.y+H.height/2,Ia(l).forEach(function(Q){var n=Q.x-o,Q=Q.y-B;I<(n=n*n+Q*Q/Z)&&(I=n)}),E*=I=r5(I),{x:o-I,y:B-E,width:2*I,height:2*E}):"circle"===V?(a=0,o=H.x+H.width/2,B=H.y+H.height/2,Ia(l).forEach(function(Q){var n=Q.x-o,Q=Q.y-B;a<(n=n*n+Q*Q)&&(a=n)}),a=r5(a),{x:o-a,y:B-a,width:2*a,height:2*a}):("roundRect"===V&&QS(H,L5(H.width,H.height)/16),H),wG(n,_,"group.padding",1),QS(n,Q),_=this._88I={type:J,rect:n,_64o:n},J||L==x5||(J=this.labelInfo={label:L,color:G("group.title.color"),font:G("group.title.font"),align:G("group.title.align")},E=(L=S_(J,L)).width+Q,L=L.height+Q,l=G("group.title.align"),(V=G("group.title.orientation"))===xi||V===bi?(n.height+=Q,E>n.width&&(n.width=E)):V!==Qi&&V!==ni||(n.width+=Q,E>n.height&&(n.height=E)),l=l===Qi?n.x:l===ni?n.x+n.width-E:n.x+n.width/2-E/2,V===bi?(_.titleRect={x:n.x,y:n.y+n.height,width:n.width,height:L},_.rect={x:n.x,y:n.y,width:n.width,height:n.height+L},J.rect={x:l,y:n.y+n.height,width:E,height:L}):V===Qi?(f=_.titleRect={x:n.x-L,y:n.y,width:L,height:n.height},_.rect={x:n.x-L,y:n.y,width:n.width+L,height:n.height},J.rect={x:f.x+L/2-n.height/2,y:f.y+n.height/2-L/2,width:n.height,height:L},J.rotation=-Math.PI/2):V===ni?(f=_.titleRect={x:n.x+n.width,y:n.y,width:L,height:n.height},_.rect={x:n.x,y:n.y,width:n.width+L,height:n.height},J.rect={x:f.x+L/2-n.height/2,y:f.y+n.height/2-L/2,width:n.height,height:L},J.rotation=Math.PI/2):(_.titleRect={x:n.x,y:n.y-L,width:n.width,height:L},_.rect={x:n.x,y:n.y-L,width:n.width,height:n.height+L},J.rect={x:l,y:n.y-L-b,width:E,height:L+Q})),this._40O(_,G("group.border.width")/2)):aE.superClass._3O.call(this)},getPosition:function(Q,n,x,b){var J=this._88I;return J?((Q=t1(Q,J.rect,b)).x+=n,Q.y+=x,Q):aE.superClass.getPosition.apply(this,arguments)},_24O:function(Q,n){var x=this._88I;x&&!x.type&&"label2"!==Q||aE.superClass._24O.call(this,Q,n)},_80o:function(Q){var n=this._88I;if(n){var x=this._data,b=this.s,J=this.gv,L=n.type,f=n.rect,V=n._64o,l=n.titleRect,H=this.getBodyColor(),I=g(b("group.image"),H),Z=b("group.image.stretch"),E=this.getBodyColor("group.background"),a=g(b("group.repeat.image"),H),o=b("group.gradient.pack"),B=b("group.gradient"),G=b("group.gradient.color"),_=b("group.border.width"),$=b("group.border.color"),W=b("group.border.pattern"),D=b("group.title.orientation"),A=b("group.depth"),u=b("group.border.radius"),M=b("group.border.join"),t=b("group.border.cap"),i=(b("group.border.width.absolute")&&(_/=J._zoom),$),r=b("group.border.repeat.image");if((r=r&&g(r,$))&&(i=x1(Q,r,$,null,x,J,b("group.border.repeat.image.stretch"),f)),L)r=Q.lineJoin,$=Q.lineCap,Q.lineJoin=M,Q.lineCap=t,I?(Q.save(),jh(Q,L,f,u),Q.clip(),i7(Q,I,Z,f.x,f.y,f.width,f.height,x,J,H),Q.restore(),0<_&&(P=US(Q,W),jh(P,L,f,u),Q.lineWidth=_,Q.strokeStyle=i,Q.stroke(),eS(Q,W))):(P=US(Q,W),E||a||o?(jh(Q,L,f,u),o?gh(Q,o,function(Q){return ph(Q,H)},!1,f):a?Q1(Q,a,H,null,x,J,b("group.repeat.image.stretch"),f,b("group.repeat.image.rotation")):Ch(Q,E,B,G,f),Q.fill(),o&&Q.restore(),Q!==P&&jh(P,L,f,u)):jh(P,L,f,u),0<_&&(Q.lineWidth=_,Q.strokeStyle=i,Q.stroke()),eS(Q,W),L===h&&V1(Q,E,A,f)),Q.lineJoin=r,Q.lineCap=$;else{var P,o=b("group.title.background");if((!u||u<0)&&(u=0),I)i7(Q,I,Z,V.x,V.y,V.width,V.height,x,J,this.getBodyColor());else if(E||a)if(a?Q1(Q,a,H,null,x,J,b("group.repeat.image.stretch"),f,b("group.repeat.image.rotation")):Ch(Q,E,B,G,V),0===_)jh(Q,h,V),Q.fill(),V1(Q,E,A,V);else{switch(Q.beginPath(),D){case bi:L1(Q,V.x,V.y,V.width,V.height,u,u,0,0);break;case Qi:L1(Q,V.x,V.y,V.width,V.height,0,u,0,u);break;case ni:L1(Q,V.x,V.y,V.width,V.height,u,0,u,0);break;case xi:L1(Q,V.x,V.y,V.width,V.height,0,0,u,u)}Q.fill()}if(l&&o)if(0===_)Nh(Q,l.x,l.y,l.width,l.height,o),V1(Q,o,A,l);else{switch(Q.beginPath(),Q.fillStyle=o,D){case bi:L1(Q,l.x,l.y,l.width,l.height,0,0,u,u);break;case Qi:L1(Q,l.x,l.y,l.width,l.height,u,0,u,0);break;case ni:L1(Q,l.x,l.y,l.width,l.height,0,u,0,u);break;case xi:L1(Q,l.x,l.y,l.width,l.height,u,u,0,0)}Q.fill()}0<_&&(P=US(Q,W),jh(P,"roundRect",f,u),Q.save(),Q.lineWidth=_,Q.strokeStyle=i,Q.lineJoin=M,Q.lineCap=t,Q.closePath(),Q.stroke(),l&&b("group.splitLine")&&(L=l.x,r=l.y,$=l.width,I=l.height,Q.beginPath(),D===bi?(Q.moveTo(L,r),Q.lineTo(L+$,r)):D===Qi?(Q.moveTo(L+$,r),Q.lineTo(L+$,r+I)):D===ni?(Q.moveTo(L,r),Q.lineTo(L,r+I)):(Q.moveTo(L,r+I),Q.lineTo(L+$,r+I))),Q.stroke(),Q.restore(),eS(P,W))}this._39O(Q,n)}else aE.superClass._80o.call(this,Q)}}),function(Q,n){u_(oE,this,[Q,n])}),BE=(HS(oE,IE,{_80o:function(Q){this._39O(Q,this._83o)}}),function(Q,n){u_(BE,this,[Q,n])}),GE=(HS(BE,IE,{_3O:function(){var Q=this._data,n=this.s,x=this.gv,b=Q.getPoints(),J=x.getBorderColor(Q),L=J?n("border.width"):0,f=this.getSelectWidth(),V=n("shape.border.width"),l=Q.getRect(),H=Q.getAnchorRect(),x=x.getBodyColor(Q),I=n("shape.border.color");(b=this._99o=b.isEmpty()?x5:{rect:l,rotation:Q.getRotation(),fillRule:n("shape.fill.rule"),scale:Q.getScale(),position:Q.p(),points:b,segments:Q.getSegments(),bodyColor:x,borderColor:J,borderWidth:L,_94o:n("shape.border.3d"),_95o:n("shape.border.3d.color"),_96o:n("shape.border.3d.accuracy"),_97o:f?this.getSelectColor():x5,selectWidth:f,_53o:n("shape.background"),_27Q:g(n("shape.repeat.image"),x),shapeRepeatImageStretch:n("shape.repeat.image.stretch"),shapeRepeatImageRotation:n("shape.repeat.image.rotation"),shapeGradientPack:n("shape.gradient.pack"),shapeBorderGradientPack:n("shape.border.gradient.pack"),_54o:V,_55o:I,shapeBorderRepeatImage:g(n("shape.border.repeat.image"),I),shapeBorderRepeatImageStretch:n("shape.border.repeat.image.stretch"),shapeBorderRepeatImageRotation:n("shape.border.repeat.image.rotation"),shapeGradient:n("shape.gradient"),_59o:n("shape.gradient.color"),_60o:n("shape.border.pattern"),_61o:n("shape.border.cap"),_62o:n("shape.border.join"),shapeForeground:n("shape.foreground"),gray:n("2d.gray")})&&(H.x+=b.position.x,H.y+=b.position.y,b.gradientRect=H,J=Q.getScale(),x=J5(1,J5(P5(J.x),P5(J.y))),n("shape.dash")&&n("shape.dash.width")>V&&(V=n("shape.dash.width")),(I=n("shape.border.width.absolute")?(V+L+f)/this.gv._zoom/x:V*("square"===b._61o?.71:.5)+L+f/this.gv._zoom/x)&&(I*=x,l=q7(l),Xh(l,I,b._62o)),this._68o(l),(H=n("clip.percentage"))!=n5&&(b.clipRect=y_(Q.getAnchorRect(),n("clip.direction"),H)),(J=n("shape.fill.clip.percentage"))!=n5&&(b.shapeClipRect=y_(Q.getAnchorRect(),n("shape.fill.clip.direction"),J)),(V=n("shape.foreground.clip.percentage"))!=n5&&(b.shapeForegroundClipRect=y_(Q.getAnchorRect(),n("shape.foreground.clip.direction"),V)))},getPosition:function(Q,n,x,b){var J=this._99o;return J?((Q=t1(Q,J.rect,b)).x+=n,Q.y+=x,Q):sj},_42:function(Q){this._99o&&BE.superClass._42.call(this,Q)},_80o:function(Q){function n(Q){return M?b5.toGrayColor(Q):Q}var x,b,J,L=this,f=L.s,V=L._99o,l=V.position,H=V.scale,I=V.rotation,Z=V.borderWidth,E=L.gv._zoom,a=V.selectWidth/E,o=V._27Q,B=V.shapeGradientPack,G=V._54o,_=V.clipRect,$=V.shapeClipRect,W=V.points,D=V.segments,A=L._data.isClosePath(),u=V.fillRule,M=V.gray,t=n(V._53o),i=t||o||B,I=(Q.save(),Jh(Q,l.x,l.y),Lh(Q,I),fh(Q,H.x,H.y),_&&(Q.beginPath(),Q.rect(_.x,_.y,_.width,_.height),Q.clip()),i&&$&&(Q.save(),Q.beginPath(),Q.rect($.x,$.y,$.width,$.height),Q.clip()),d.Default.extractShapeTranslation?((W=q7(W)).forEach(function(Q){Q.x-=l.x,Q.y-=l.y}),V.gradientRect.x-=l.x,V.gradientRect.y-=l.y):Jh(Q,-l.x,-l.y),f("shape.border.width.absolute")),H=V._60o,_=(I&&H&&(H=H.map(function(Q){return Q*E})),US(Q,H)),r=Q.lineJoin,P=Q.lineCap,c=(Q.lineJoin=V._62o,Q.lineCap=V._61o,n(V.bodyColor));i?(mh(Q,W,D,A),B?gh(Q,B,function(Q){return ph(Q,V.bodyColor)},!1,V.gradientRect):o?((J=V.shapeRepeatImageStretch)&&(x=m7(W)),Q1(Q,o,c,null,L._data,L.gv,J,x,V.shapeRepeatImageRotation)):Ch(Q,b=c||t,V.shapeGradient,n(V._59o),V.gradientRect),Q.fill(u),B&&Q.restore(),$&&(Q.restore(),Jh(Q,-l.x,-l.y)),_!==Q&&mh(_,W,D,A)):mh(_,W,D,A),(i=V.shapeForeground)&&(Q.save(),(o=V.shapeForegroundClipRect)&&(Jh(Q,l.x,l.y),Q.beginPath(),Q.rect(o.x,o.y,o.width,o.height),Q.clip(),Jh(Q,-l.x,-l.y)),mh(Q,W,D,A),Ch(Q,i,f("shape.foreground.gradient"),n(f("shape.foreground.gradient.color")),V.gradientRect),Q.fill(u),Q.restore()),I&&(Q.save(),Q.setTransform(1,0,0,1,0,0)),a&&(Q.strokeStyle=V._97o,Q.lineWidth=G+2*(Z+a),Q.stroke()),Z&&(Q.strokeStyle=n(V.borderColor),Q.lineWidth=G+2*Z,Q.stroke()),G&&(b=n(V._55o),(B=V.shapeBorderGradientPack)?gh(Q,B,n,!0,V.gradientRect):V.shapeBorderRepeatImage?((J=V.shapeBorderRepeatImageStretch)&&!x&&(x=m7(W)),n1(Q,V.shapeBorderRepeatImage,b,null,L._data,L.gv,J,x,V.shapeBorderRepeatImageRotation)):Q.strokeStyle=b=!t&&c?c:b,Q.lineWidth=G,Q.stroke(),B&&Q.restore(),V._94o&&Th(Q,b,n(V._95o),G,E,V._96o)),eS(Q,H),f("shape.dash")&&0<($=f("shape.dash.width")||G)&&(H=f("shape.dash.pattern"),I&&(H=H.map(function(Q){return Q*E})),(_=US(Q,H,L._2Q("shape.dash.offset")))!==Q&&mh(_,W,D,A),L._1Q(Q,"shape",$,H)),I&&Q.restore(),Q.lineJoin=r,Q.lineCap=P,Q.restore()},_48O:function(){},_47O:function(Q){}}),function(Q,n){u_(GE,this,[Q,n])}),_E=(HS(GE,BE,{getRotation:(cK=new R,FK=new R,qK=new vK,function(Q,n,x){Q=Q||0;var b,J,L=this._data,f=L.getPoints(),V=f.size();return 1<V?(J=L.p(),L=L.getScale(),qK.identity().translate(-J.x,-J.y).scale(L.x,L.y).translate(J.x,J.y),J=DG[x]?(b=f.get((L=(V-V%2)/2)-1),f.get(L)):WG[x]?(b=f.get(0),f.get(1)):(b=f.get(V-2),f.get(V-1)),qK.apply(b,cK),qK.apply(J,FK),sG(cK,FK,n,Q)):Q}),getPosition:(iK=new R,rK=new R,PK=new R,function(Q,n,x,b,J){var L=this._data,f=L.getPoints(),V=f.size();if(1<V){if(L=L.getPointsMatrix2d(),DG[Q]){var l=V%2,H=(V-l)/2,I=f.get(H-1),H=f.get(H);if(0!=l)return(l=t1(Q,sj,b)).x+=n,l.y+=x,L.apply(I,iK),L.apply(H,rK),L.identity().rotate(PK.copy(rK).sub(iK).angle()).apply(l,iK).add(rK)}else H=WG[Q]?(I=f.get(0),f.get(1)):(I=f.get(V-2),f.get(V-1));return L.apply(I,iK),L.apply(H,rK),XG(iK,rK,Q,n,x,b,J)}return sj})}),function(Q,n){u_(_E,this,[Q,n])}),$E=(HS(_E,IE,{_3O:function(){_E.superClass._3O.call(this);var Q=this.s,n=this._83o;this._82o=n.img||n.shape?x5:{background:this.getBodyColor("grid.background"),depth:Q("grid.depth"),rect:n.rect,_88o:Q("grid.cell.depth"),cellBorderColor:Q("grid.cell.border.color"),_89o:Q("grid.row.count"),_90o:Q("grid.column.count"),block:Q("grid.block"),_91o:Q("grid.block.color"),_92o:Q("grid.block.padding"),_93o:Q("grid.block.width")}},_80o:function(Q){var n=this._82o;if(n){var x,b,J=this._data,L=n.background,f=n.rect,V=n.block,l=n._91o,H=n._92o,I=n._93o,Z=n._88o,E=n.cellBorderColor,a=n._89o,o=n._90o;if(L)if(Nh(Q,f.x,f.y,f.width,f.height,L),V1(Q,L,n.depth,f),Z)for(x=0;x<a;x++)for(b=0;b<o;b++)(f=J.getCellRect(x,b))&&V1(Q,L,Z,f);else if(E){for(Q.beginPath(),x=0;x<a;x++)for(b=0;b<o;b++)(f=J.getCellRect(x,b))&&Q.rect(f.x,f.y,f.width,f.height);Q.strokeStyle=E,Q.lineWidth=1,Q.stroke()}if("h"===V)for(x=0;x<a;x++)f=Y7(J.getCellRect(x,0),J.getCellRect(x,o-1)),QS(f,H),f1(Q,l,f.x,f.y,f.width,f.height,I);else if("v"===V)for(b=0;b<o;b++)f=Y7(J.getCellRect(0,b),J.getCellRect(a-1,b)),QS(f,H),f1(Q,l,f.x,f.y,f.width,f.height,I);this._39O(Q,this._83o)}else _E.superClass._80o.call(this,Q)}}),function(Q,n){u_($E,this,[Q,n])}),WE=E?z_().getContext("2d"):x5,b=(HS($E,IE,{_checkEmptyRect:!1,_81o:function(){var f,Q,V,n,x,b,l,H,J,L,I,Z,E,a,o,B=this._data,G=$E.superClass._81o.call(this),_=B.s("text");return _!=x5&&(_+="",f=B.s("text.font"),a=B.s("text.align"),Q=B.s("text.vAlign"),Z=B.s("text.wrap"),I=B.s("text.vertical"),V=B.s("text.vertical.gap"),o=B.s("text.letter.gap")||0,n=B.getWidth(),x=B.getHeight(),null==V&&(V=1),I?(l=((E=Z?m_(_,x,f,o,I,V):[_]).length-1)*o,H=0,WE.textBaseline=xi,WE.font=f,E.forEach(function(Q){for(var n=Q.length,x=0,b=(n-1)*V,J=0;J<n;J++){var L=WE.measureText(Q[J]);b+=L.fontBoundingBoxDescent||v7(f,Q[J]).height,x=J5(x,L.width)}l+=x,H=J5(b,H)}),E.length,E.forEach(function(Q){}),b={width:l,height:H}):1<(Z=(E=Z?m_(_,n,f,o,I,V):_.split("\n")).length)?(I=v7(f,_).height,l=0,H=I*Z+V*(Z-1),E.forEach(function(Q){l=J5(l,v7(f,Q).width)}),b={width:l,height:H}):(b=v7(f,_),o&&(b.width+=(_.length-1)*o)),I=b.width,Z=b.height,E=B.getAnchor(),"left"===a?J=-n*E.x:"center"===a?J=-n*E.x+(n-I)/2:"right"===a&&(J=n*(1-E.x)-b.width),"top"===Q?L=-x*E.y:"middle"===Q?L=-x*E.y+(x-Z)/2:"bottom"===Q&&(L=x*(1-E.y)-b.height),_=B.getMatrix(),o=m7([_.tf(J,L),_.tf(J+I,L),_.tf(J+I,L+Z),_.tf(J,L+Z)]),(G=Y7(G,o))&&B.s("text.shadow")&&((a=q7(G)).x+=B.s("text.shadow.offset.x"),a.y+=B.s("text.shadow.offset.y"),QS(a,B.s("text.shadow.blur")),G=Y7(G,a))),G}}),SG.Interactor=function(Q){this.gv=this._graphView=Q}),DE=(Q("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(Q){this.gv.fi(Q)},setCursor:function(Q){Y5||this.gv.setCursor(Q)},startDragging:function(Q){this._lastClientPoint=R7(Q),this._lastLogicalPoint=this.gv.lp(Q),bS(this,Q)},clearDragging:function(Q){this._lastClientPoint=this._lastLogicalPoint=this._logicalPoint=x5},autoScroll:function(Q){return this.gv.autoScroll(Q,this._lastClientPoint)}}),x5),AE=function(Q){DE.handleWindowTouchMove(Q)},uE=function(Q){DE.handleWindowTouchEnd(Q),u5(O,xj,AE),u5(O,bj,uE),DE=x5},ME=function(Q){DE.handleWindowMouseMove(Q)},tE=function(Q){DE.handleWindowMouseUp(Q),u5(O,jZ,ME),u5(O,CZ,tE),DE=x5},iE=function(Q){var n=this;n.gv=Q,n._is2d=Q instanceof SG.GraphView,n._eventListeners={},["mousedown","mousemove","mouseleave","touchstart","touchmove","touchend","mouseup",fj,"wheel"].forEach(function(Q){n.addListener(Q)}),n.initImageResource()},rE=(HS(iE,b,{enableVR:function(Q){!!this._vrEnable!==Q&&((this._vrEnable=Q)?this.gv.vr.mp(this.onVRControllerChange,this):this.gv.vr.ump(this.onVRControllerChange,this))},onVRControllerChange:function(Q){var n=Q.property,x=(Q=Q.newValue).id,b=this.gv.vr.getController(x).getRay();if(b)switch(b.controllerId=x,this.gv.vr.getRayEventType(b,n,Q[rZ])){case"down":this.handle_mousedown(b);break;case"up":DE&&tE(b);break;case"move":this.handle_mousemove(b),DE&&this.handleWindowMouseMove(b)}},setPreventEventDefault:function(Q,n){var x=this._eventListeners[Q];x?x._prevent=n:this._eventListeners[Q]=x={_removal:n5,_prevent:n}},removeListener:function(Q){(Q=this._eventListeners[Q])&&Q._removal&&(Q._removal(),Q._removal=n5)},addListener:function(n){var Q,x=this,b=x._eventListeners[n];b||(x._eventListeners[n]=b={_removal:n5,_prevent:!0}),b&&b._removal||(Q=function(Q){b._prevent&&b5.preventDefault(Q),x.disabled||x.gv._48Q||("wheel"===n?W_(x,Q):x["handle_"+n](Q))},Q5(x.gv.getView(),n,Q),b._removal=function(){u5(x.gv.getView(),n,Q)})},handleWindowTouchMove:function(Q){this.handleWindowMouseMove(Q)},handleWindowMouseMove:function(Q){!this.downInfo||Eh(Q)&&1!==p7(Q)?this.isDragging&&(this.handleDownInfo("onEndDrag",Q),this.isDragging=!1):this.isDragging?this.handleDownInfo("onDrag",Q):(this.handleDownInfo("onBeginDrag",Q),this.isDragging=!0)},handleWindowTouchEnd:function(Q){this.handleWindowMouseUp(Q)},handleWindowMouseUp:function(Q){if(this.isDragging&&(this.handleDownInfo("onEndDrag",Q),this.isDragging=!1),this.downInfo){var n=this.handle("onUp",Q);if(n&&n.data===this.downInfo.data){this.handleMissingUp(Q);var x=this,b=2===Q.button?"onContextMenu":"onClick";if(n.data.s("disableDoubleClick")||!x._dbclickTimer)return void(x._dbclickTimer=h5(function(){delete x._dbclickTimer,x.handleClick(Q,b,n),this.downInfo=x5},b5.clickDelay));p5(x._dbclickTimer),delete x._dbclickTimer,b="onDoubleClick",x.handleClick(Q,b,n)}else this.handleDownInfo("onUp",Q);this.downInfo=x5,this.downComps=x5}},handle_mouseleave:function(Q){var n=this,x=n.gv,b=(n._hoverTimer&&(p5(n._hoverTimer),delete n._hoverTimer),n.currentInfo?n.currentInfo.data:x5);if(b){if(b.s("onLeave")&&b.s("onLeave")(Q,b,x),n.fire("data","onLeave",Q,b),x=n.currentInfo?n.currentInfo.hits:x5)for(var J in x)n.handleLeave(Q,J);n.currentInfo=x5}},handle_mousewheel:function(Q){Q.scrollDelta=Q.wheelDelta/40,this.handle("onScroll",Q)},handle_DOMMouseScroll:function(Q){Q.scrollDelta=2===Q.axis?-Q.detail:0,this.handle("onScroll",Q)},handle_touchstart:function(Q){this.handle_mousedown(Q)},handle_touchmove:function(Q){this.handle("onMove",Q)},handle_mousedown:function(Q){var n;this.isDragging&&(this.handleDownInfo("onEndDrag",Q),this.isDragging=!1),this.downComps=[],this.downInfo=this.handle("onDown",Q),this.downInfo&&this!==DE&&(n=Eh(Q),DE?n?DE.handleWindowTouchEnd(Q):DE.handleWindowMouseUp(Q):n?(Q5(O,xj,AE),Q5(O,bj,uE)):(Q5(O,jZ,ME),Q5(O,CZ,tE)),DE=this)},handle_touchend:function(Q){this.handle_touchend(Q)},handle_mouseup:function(Q){this.downInfo||this.isDragging||this.handle("onUp",Q)},handle_mousemove:function(Q){var n=this,x=n.gv;if(n._hoverTimer&&(p5(n._hoverTimer),delete n._hoverTimer),!x._panning&&!x._moving){var b,J,L,f=n.handle("onMove",Q),V=this.currentInfo?this.currentInfo.data:x5,l=this.currentInfo?this.currentInfo.hits:x5;if(f&&(J=f.data,L=f.hits,n._hoverTimer=h5(function(){p5(n._hoverTimer),delete n._hoverTimer,n.handle("onHover",Q,f)},x.getHoverDelay()||b5.hoverDelay)),J!==V){if(V&&(V.s("onLeave")&&V.s("onLeave")(Q,V,x),this.fire("data","onLeave",Q,V)),J&&(J.s("onEnter")&&J.s("onEnter")(Q,J,x),this.fire("data","onEnter",Q,J)),l)for(b in l)this.handleLeave(Q,b);if(L)for(b in L){var H,I,Z=L[b];(I=(H=J._interactPrefix=Z.prefix)&&J.a(H+"onEnter")||Z.target.onEnter)&&I.call(Z.target,Q,J,x,Z.point,Z.width,Z.height),this.fire(Z.type,"onEnter",Z.event,Z.data,Z.image,Z.comp,Z.point,Z),J._interactPrefix=null}}else{if(l)for(b in l)L&&L[b]||this.handleLeave(Q,b);if(L)for(b in L)l&&l[b]||(Z=L[b],(I=(H=J._interactPrefix=Z.prefix)&&J.a(H+"onEnter")||Z.target.onEnter)&&I.call(Z.target,Q,J,x,Z.point,Z.width,Z.height),this.fire(Z.type,"onEnter",Z.event,Z.data,Z.image,Z.comp,Z.point,Z),J._interactPrefix=null)}this.currentInfo=f}},handle:function(Q,n,x){var b,J=this.gv;if(this._is2d){if((x=x||J.getDataInfoAt(n))&&J.isInteractive(x.data))return(b=x.ui.interactiveInfo)&&((f=x.data).s(Q)&&f.s(Q)(n,f,J),this.fire("data",Q,n,f),"body"===x.part&&b.bodyInfo?x.hits=this.handleImage(L="body",J.getImage(f),Q,n,f,x.point,b.bodyInfo):"icons"===x.part&&b._38o&&(I=b._38o[x.name])&&I[x.index]&&(L="icons|"+x.name+"|"+x.index,x.hits=this.handleImage(L,x.icon,Q,n,f,x.point,I[x.index]))),x}else{if(!x)if(n&&n instanceof d.Math.Ray&&J.isVREnabled()){var L=J.vr.intersectWorld(n),f=L.data,V=L.intersect;if(J.vr.renderRayDuringInteraction(n,f,V),!f)return;if(!(b=(l=J.getData3dUI(f)).interactiveInfo))return;x={data:f,part:V.part,ui:l}}else{if(!(x=J.getDataInfoDuringInteract(n)))return;x=x&&{data:x.data,part:x.part}}if(J.isInteractive(x.data)){if(!V){f=x.data;var l=J.getData3dUI(f);if(!(b=(x.ui=l).interactiveInfo))return x}if(f.s(Q)&&f.s(Q)(n,f,J),this.fire("data",Q,n,f),!V&&!(V=J.intersectObject(n,f)))return x;var H,I=V.part;return(H=(H="body"!==I?f.s(I+".image")||f.s("shape3d."+I+".image"):H)||f.s("all.image")||f.s("shape3d.image"))&&(b="object"==typeof H?b[H.uuid]:b[H])&&b.bodyInfo&&(x.part="body",x.interactiveInfo=b,x.point=this._convertUVToPoint(V.uv,b,f,I,H),x.image=H,x.hits=this.handleImage("body",H,Q,n,f,x.point,b.bodyInfo)),x}}},_handleLeaveOrMissing:function(Q,n,x){var b,J,L,f,V,l="leave"===Q?this.currentInfo:this.downInfo;l&&(b=l.interactiveInfo||l.ui.interactiveInfo)&&(J=l.data,this._is2d?(f=this.gv.lp(n),"body"===l.part&&b.bodyInfo?(V="body","leave"===Q?this.handleLeaveImage(x,V,this.gv.getImage(J),n,J,f,b.bodyInfo):this.handleMissingUpImage(V,this.gv.getImage(J),n,J,f,b.bodyInfo)):"icons"===l.part&&b._38o&&(L=b._38o[l.name])&&L[l.index]&&(V="icons|"+l.name+"|"+l.index,"leave"===Q?this.handleLeaveImage(x,V,l.icon,n,J,f,L[l.index]):this.handleMissingUpImage(V,l.icon,n,J,f,L[l.index]))):b.bodyInfo&&(f=(V=this.gv.intersectObject(n,J))&&V.uv?this._convertUVToPoint(V.uv,b,J,V.part,l.image):{x:1/0,y:1/0},"leave"===Q?this.handleLeaveImage(x,"body",l.image,n,J,f,b.bodyInfo):this.handleMissingUpImage("body",l.image,n,J,f,b.bodyInfo)))},handleClick:function(Q,n,x){var b,J,L,f,V=this.downInfo;V&&x&&(b=x.interactiveInfo||x.ui.interactiveInfo,J=x.data,f=this.gv,J.s(n)&&J.s(n)(Q,J,f),this.fire("data",n,Q,J),b&&(this._is2d?V.part===x.part&&(L=f.lp(Q),"body"===x.part&&b.bodyInfo&&this.handleClickImage("body",f.getImage(J),n,Q,J,L,b.bodyInfo,x)):b.bodyInfo&&(f=f.intersectObject(Q,J))&&(L=this._convertUVToPoint(f.uv,b,J,f.part,V.image),this.handleClickImage("body",V.image,n,Q,J,L,b.bodyInfo,x))))},handleDownInfo:function(Q,n){var x,b,J,L,f,V,l,H;this.downInfo&&(x=this.downInfo,b=this.gv,(J=x.interactiveInfo||x.ui.interactiveInfo)&&((f=x.data).s(Q)&&f.s(Q)(n,f,b),this.fire("data",Q,n,f),this._is2d?(V=b.lp(n),"body"===x.part&&J.bodyInfo?this.handleDownInfoImage(L="body",b.getImage(f),Q,n,f,V,J.bodyInfo):"icons"===x.part&&J._38o&&(l=J._38o[x.name])&&l[x.index]&&(L="icons|"+x.name+"|"+x.index,this.handleDownInfoImage(L,x.icon,Q,n,f,V,l[x.index]))):J.bodyInfo&&("onBeginDrag"===Q?(H=b._raycaster.intersectObjectAndRecordTriangle(n,f))&&(J.beginDragIntersectInfo=H.triangleInfo):H=b.intersectObject(n,f),(H=H||("onDrag"!==Q&&"onEndDrag"!==Q||!J.beginDragIntersectInfo?H:b._raycaster.intersectLastTriangle(n,J.beginDragIntersectInfo)))&&(V=this._convertUVToPoint(H.uv,J,f,H.part,x.image),this.handleDownInfoImage("body",x.image,Q,n,f,V,J.bodyInfo)))))},fire:function(Q,n,x,b,J,L,f,V){this.gv.fi({kind:n,type:Q,event:x,data:b,image:J,comp:L,view:this.gv,point:f,width:V?V.width:n5,height:V?V.height:n5})},handleImage:function(Q,n,x,b,J,L,f){var V={};if(n=n&&g(n))for(var l,H=this.gv,I=f.rect,Z=((o=this.convertPoint(L,f)).inRect&&(n[x]&&n[x](b,J,H,o,I.width,I.height),this.fire("image",x,b,J,n,n5,o,I),V[Q+"|image"]={target:n,type:"image",image:n,data:J,event:b,point:o,width:I.width,height:I.height}),f.compInfos),E=n,a=Z.length-1;0<=a;a--){var o,B=(G=Z[a]).comp;if((o=this.convertPoint(L,G,E,B,H,J)).inRect){var G,I=G.rect,_=(G=J._interactPrefix=G.prefix)&&J.a(G+x)||B[x];if(_&&(l=_.call(B,b,J,H,o,I.width,I.height)),this.fire("comp",x,b,J,n,B,o,I),!0!==l&&(n=I.image)&&(n[x]&&(l=n[x](b,J,H,o,I.width,I.height)),this.fire("image",x,b,J,n,n5,o,I)),J._interactPrefix=null,V[Q+"|"+a]={target:B,type:"comp",comp:B,image:n,data:J,event:b,point:o,width:I.width,height:I.height,prefix:G},this.downComps&&this.downComps.push(B),n&&(V[Q+"|"+a+"|image"]={target:n,type:"image",image:n,data:J,event:b,point:o,width:I.width,height:I.height,prefix:G}),!0===l)break}}return V},handleLeave:function(Q,n){return this._handleLeaveOrMissing("leave",Q,n)},handleMissingUp:function(Q){return this._handleLeaveOrMissing("missing",Q)},handleLeaveImage:function(Q,n,x,b,J,L,f){if(x=x&&g(x))for(var V,l=this.gv,H=f.rect,I=this.convertPoint(L,f),Z=(Q===n+"|image"&&(x.onLeave&&x.onLeave(b,J,l,I,H.width,H.height),this.fire("image","onLeave",b,J,x,n5,I,H)),f.compInfos),E=x,a=Z.length-1;0<=a;a--){var o=(B=Z[a]).comp,I=this.convertPoint(L,B,E,o,l,J),H=B.rect,B=J._interactPrefix=B.prefix;if(Q===n+"|"+a&&((B=B&&J.a(B+"onLeave")||o.onLeave)&&(V=B.call(o,b,J,l,I,H.width,H.height)),this.fire("comp","onLeave",b,J,x,o,I,H)),!0!==V&&(x=H.image)&&Q===n+"|"+a+"|image"&&(x.onLeave&&(V=x.onLeave(b,J,l,I,H.width,H.height)),this.fire("image","onLeave",b,J,x,n5,I,H)),!(J._interactPrefix=null)===V)break}},handleMissingUpImage:function(Q,n,x,b,J,L){var f="onUp",V=this.downInfo.hits;if(V&&n&&(n=g(n)))for(var l,H=this.gv,I=L.rect,Z=(!(o=this.convertPoint(J,L)).inRect&&V[Q+"|image"]&&(n.onUp&&n.onUp(x,b,H,o,I.width,I.height),this.fire("image",f,x,b,n,n5,o,I)),L.compInfos),E=n,a=Z.length-1;0<=a;a--){var o,B=(G=Z[a]).comp;if(!(o=this.convertPoint(J,G,E,B,H,b)).inRect){var I=G.rect,G=b._interactPrefix=G.prefix;if(V[Q+"|"+a]&&((G=G&&b.a(G+f)||B.onUp)&&(l=G.call(B,x,b,H,o,I.width,I.height)),this.fire("comp",f,x,b,n,B,o,I)),!0!==l&&(n=I.image)&&V[Q+"|"+a+"|image"]&&(n.onUp&&(l=n.onUp(x,b,H,o,I.width,I.height)),this.fire("image",f,x,b,n,n5,o,I)),!(b._interactPrefix=null)===l)break}}},handleDownInfoImage:function(Q,n,x,b,J,L,f){var V=this.downInfo.hits;if(V&&n&&(n=g(n)))for(var l,H=this.gv,I=f.rect,Z=this.convertPoint(L,f),E=(V[Q+"|image"]&&(n[x]&&n[x](b,J,H,Z,I.width,I.height),this.fire("image",x,b,J,n,n5,Z,I)),f.compInfos),a=n,o=E.length-1;0<=o;o--){var B=(G=E[o]).comp,Z=this.convertPoint(L,G,a,B,H,J),I=G.rect,G=J._interactPrefix=G.prefix,_=0<=["onDrag","onEndDrag"].indexOf(x);if((!_&&V[Q+"|"+o]||_&&this.downComps&&0<=this.downComps.indexOf(B))&&((_=G&&J.a(G+x)||B[x])&&(l=_.call(B,b,J,H,Z,I.width,I.height)),this.fire("comp",x,b,J,n,B,Z,I)),!0!==l&&(n=I.image)&&V[Q+"|"+o+"|image"]&&(n[x]&&(l=n[x](b,J,H,Z,I.width,I.height)),this.fire("image",x,b,J,n,n5,Z,I)),!(J._interactPrefix=null)===l)break}},handleClickImage:function(Q,n,x,b,J,L,f,V){var l=this.downInfo.hits,H=V.hits;if(l&&n&&(n=g(n)))for(var I,Z=this.gv,E=f.rect,a=this.convertPoint(L,f),o=(l[Q+"|image"]&&(n[x]&&n[x](b,J,Z,a,E.width,E.height),this.fire("image",x,b,J,n,n5,a,E)),f.compInfos),B=n,G=o.length-1;0<=G;G--){var _=($=o[G]).comp,a=this.convertPoint(L,$,B,_,Z,J),E=$.rect,$=J._interactPrefix=$.prefix;if(l[Q+"|"+G]&&H[Q+"|"+G]&&(($=$&&J.a($+x)||_[x])&&(I=$.call(_,b,J,Z,a,E.width,E.height)),this.fire("comp",x,b,J,n,_,a,E)),!0!==I&&(n=E.image)&&l[Q+"|"+G+"|image"]&&(n[x]&&(I=n[x](b,J,Z,a,E.width,E.height)),this.fire("image",x,b,J,n,n5,a,E)),!(J._interactPrefix=null)===I)break}},initImageResource:function(){b5.setImage("coreInteractorRayHitImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",opacity:.3,rotation:-1.593,rect:[.73315,.6933,14.5337,14.61341]},{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",rotation:-1.593,rect:[3.56695,3.75073,8.8661,8.49856]}]})},_convertUVToPoint:function(Q,n,x,b,J){if(!Q)return{x:1/0,y:1/0};var L,n=n.bodyInfo.rect,b=(x&&J&&(b="body"===b?(L=x.s("shape3d.uv.scale"),x.s("shape3d.uv.offset")):(L=x.s(b+".uv.scale")||x.s("all.uv.scale"),x.s(b+".uv.offset")||x.s("all.uv.offset")),(L||b)&&(J=b5.getImage(J),x=s.isPOT(J.width)&&s.isPOT(J.height),J=Q.x*(L?L[0]:1)+(b?b[0]:0),L=Q.y*(L?L[1]:1)+(b?b[1]:0),x&&(J=J%1+(0<J?0:1),L=L%1+(0<L?0:1)),Q.set(J,L))),Q.clone());return(x=Q.multiply({x:n.width,y:n.height})).local=b,x},convertPoint:function(Q,n,x,b,J,L){var f=n.rect,V=n.matrix.applyInverse(Q).sub(f);if(!(0<=V.x&&0<=V.y&&V.x<=f.width&&V.y<=f.height))return V;if(b&&S(b.pixelPerfect,L,J)){var l=1,H=!1,Q=(f=this._is2d?(l=J.getZoom(),x_(Q.x,Q.y,n5,l)):x_(Q.x,Q.y)).x,I=f.y,Z=f.width,E=Z*(f=f.height)*l*l,a=((a=b5.hitMaxArea)<E&&(l*=Math.sqrt(a/E)),Q*=l,I*=l,hh(Z=(Z*=l)<2?2:Z,f=(f*=l)<2?2:f)),Q=((E=new vK(0,-Q,-I,l,l)).append(n.matrix),J._drawForChecking=!0,b.transform=E,x.fitSize),I=(n.refRect&&n.refRect.fitSize?(b.refRect=n.refRect,x.fitSize=!0):x.fitSize=!1,x.comps);x.comps=[b],jS(a,x,0,0,Z,f,L,self),x.comps=I,x.fitSize=Q,delete b.refRect,delete b.unionRect,delete b.transform,J._drawForChecking=!1;try{for(var o=0,B=a.getImageData(0,0,Z,f).data;o<B.length;o+=4)if(0!==B[o+3]){H=!0;break}a.restore()}catch(Q){vh=x5,H=!1}V.inRect=H}else V.inRect=!0;return V}}),SG.DefaultInteractor=function(Q){u_(rE,this,[Q])}),PE=(Q("DefaultInteractor",b,{handle_mousedown:function(Q){u7(Q);var n,x=this.gv,b=x.getDataAt(Q);!x.setFocus(Q)||x._editing||x._scrolling||(z7(Q)?x.handleDoubleClick(Q,b):x.handleClick(Q,b),n=d7(Q),!wh()&&!n&&b&&(x.isMovable(b)||x._39Q(b))||!x.isPannable()||!O7(Q)&&!n||X7(Q)||(this._tx=x.tx(),this._ty=x.ty(),this.startDragging(Q)))},handleWindowMouseUp:function(Q){var n=this.gv;n._panning&&(delete n._panning,n.onPanEnded(),this.fi({kind:"endPan",event:Q})),delete this._tx,delete this._ty,this.clearDragging()},handle_mousemove:function(Q){var n=this,x=n.gv;n._hoverTimer&&(p5(n._hoverTimer),delete n._hoverTimer),n._hoverTimer=h5(function(){n.fi({kind:"hover",event:Q}),p5(n._hoverTimer),delete n._hoverTimer},x.getHoverDelay()||b5.hoverDelay)},handle_mouseleave:function(Q){this._hoverTimer&&(p5(this._hoverTimer),delete this._hoverTimer)},handleWindowMouseMove:function(Q){var n=this.gv,Q=(this.fi({kind:n._panning?"betweenPan":"beginPan",event:Q}),n._panning=1,dG(n,Q,this._lastClientPoint));n.setTranslate(this._tx+Q.x,this._ty+Q.y)},handle_mousewheel:function(Q){this.gv.handleScroll(Q,Q.wheelDelta)},handle_DOMMouseScroll:function(Q){2===Q.axis&&this.gv.handleScroll(Q,-Q.detail)},handle_keydown:function(Q){this.gv.handleKeyDown(Q)}}),SG.SelectInteractor=function(Q){u_(PE,this,[Q])}),cE=(Q("SelectInteractor",b,{_42:function(){var Q=this.gv,n=Q.getZoom(),x=this.mark,b=this.div,J=(b||(b=this.div=p_(),g_(this.getView(),b)),{});J.x=x.x*n+Q.tx(),J.y=x.y*n+Q.ty(),J.width=x.width*n,J.height=x.height*n,F(b,J),this.intersects()?(b.style.border="",b.style.background=Q.getRectSelectBackground()):(b.style.background="",b.style.border="1px solid "+Q.getRectSelectBorderColor())},handle_mousedown:function(Q){var n,x,b=this.gv;this._57I=x5,this.pendingClickThrough=x5,b._editing||b._scrolling||wh()||d7(Q)||(n=b.getDataAt(Q),x=b.sm(),n?X7(Q)?x.co(n)?x.rs(n):x.as(n):x.co(n)?n instanceof SV&&n.isClickThroughEnabled()&&O7(Q)&&(this.pendingClickThrough=R7(Q)):x.ss(n):X7(Q)||!b.isPannable()?O7(Q)&&(X7(Q)||x.cs(),b.isRectSelectable()&&(this.startDragging(Q),b._77O=1)):O7(Q)&&(this._57I=R7(Q)))},handle_mouseup:function(Q){var n,x=this.gv,b=this._57I;b&&(S7(b,R7(Q))<=1&&x.sm().cs(),this._57I=x5),this.pendingClickThrough&&(S7(this.pendingClickThrough,R7(Q))<=1&&(n=x.getDataAt(Q))instanceof SV&&n.isClickThroughEnabled()&&(b=x.getDataAt(Q,function(Q){return Q.getParent()===n&&x.isSelectable(Q,!0)}))&&(Q.clickThrough=!0,x.sm().ss(b)),this.pendingClickThrough=x5)},handleWindowMouseUp:function(Q){this.clear(Q)},handleWindowMouseMove:function(Q){var n=this,x=n.gv;n._logicalPoint=x.lp(Q),n.mark?(n.fi({kind:"betweenRectSelect",event:Q}),x.isPannable()&&n.autoScroll(Q),n.redraw()):n.fi({kind:"beginRectSelect",event:Q}),n.mark=m7(n._lastLogicalPoint,n._logicalPoint),n.redraw()},intersects:function(){var Q=this._lastLogicalPoint,n=this._logicalPoint;return Q.x>n.x||Q.y>n.y},clear:function(Q){var n,x,b,J,L=this,f=L.gv,V=L.mark;L._57I=x5,L.pendingClickThrough=x5,L._lastLogicalPoint&&(V&&(0===V.width||0===V.height||(V=f.getDatasInRect(V,L.intersects())).isEmpty()||(n=f.sm(),x=n.toSelection(),b=s7(Q),J=Q.altKey,V.each(function(Q){n.co(Q)?b&&!J||x.remove(Q):(!J||b&&J)&&x.add(Q)}),n.ss(x)),JS(L.div),delete L.div,delete L.mark,L.redraw(),L.fi({kind:"endRectSelect",event:Q}),f.onRectSelectEnded()),L.clearDragging(),delete f._77O)},redraw:function(){var Q=this;Q._draw||(Q._draw=1,h5(function(){Q.mark&&Q._42(),delete Q._draw},16))}}),SG.MoveInteractor=function(Q){u_(cE,this,[Q])}),FE=(Q("MoveInteractor",b,{handle_mousedown:function(Q){var n,x=this.gv;!O7(Q)||x._editing||x._scrolling||wh()||(!(n=x.getSelectedDataAt(Q))||x._39Q(n)&&!x.isMovable(n)?x._focusData=x5:(this._data=n,x.handleMouseDown&&x.handleMouseDown(Q,n),this.startDragging(Q),x.isMovable(n)&&(x._moving=1)))},handleWindowMouseUp:function(Q){var n=this.gv;n.handleMouseUp&&n.handleMouseUp(Q,this._data),this.clear(Q)},handleWindowMouseMove:function(Q){var n,x,b,J,L=this,f=L._data,V=L.gv;V._93O&&V._93O(Q,f)||V._moving&&(L._logicalPoint||L.fi({kind:"prepareMove",event:Q}),n={kind:J=L._logicalPoint?"betweenMove":"beginMove",event:Q},x=L._logicalPoint=V.lp(Q),"beginMove"!=J||L._alreadyBeginTransaction||(L._alreadyBeginTransaction=!0,V.getDataModel().beginTransaction()),b=(J=L._calcShift(J,Q)).x,J=J.y,(f=L.gv.getMoveMode(Q,f))&&("x"===f?J=0:"y"===f?b=0:"xy"!==f&&(b=J=0)),V.moveSelection(b,J),L._lastLogicalPoint=x,L.autoScroll(Q),L.fi(n))},_calcShift:function(Q,n){var x=this._logicalPoint,b=this._lastLogicalPoint;return{x:x.x-b.x,y:x.y-b.y}},clear:function(Q){var n=this.gv;this._lastLogicalPoint&&(this._lastLogicalPoint=this._data=n._moving=x5,this._logicalPoint&&(this.fi({kind:"endMove",event:Q}),n.onMoveEnded()),this.clearDragging()),this._alreadyBeginTransaction&&(this._alreadyBeginTransaction=!1,n.getDataModel().endTransaction())}}),SG.TextEditInteractor=function(Q){u_(FE,this,[Q]),this.init()}),qE=(Q("TextEditInteractor",b,{setUp:function(){FE.superClass.setUp.call(this),this.gv.mp(this.handleGvPropertyChange,this)},teatDown:function(){FE.superClass.teatDown.call(this),this.gv.ump(this.handleGvPropertyChange,this)},handleGvPropertyChange:function(Q){this._editTarget&&this.endTextEdit()},init:function(){function Q(Q){Q.stopPropagation()}var x=this,n=this.input=E.createElement("input"),b=n.style,J=(n.text="text",b.border="1px solid #d8d8d8",b.position="absolute",b.padding="2px 3px",b.outline="none",b.marginLeft="-90px",b.marginTop="-16px",b.backgroundColor="rgba(255,255,255, 1)",b.fontSize="14px",b.width="180px",b.height="32px",b.boxShadow="0 0 13px rgba(16,142,233, 0.5)",b.textAlign="center",b.boxSizing="border-box",Q5(n,"keyup",function(Q){yh(Q)&&x.endTextEdit(),Kh(Q)&&x.endTextEdit(!0)}),Q5(n,"focus",function(Q){n.select()}),this.textarea=E.createElement("textarea")),L=this.wrap=E.createElement("div");L.appendChild(J),(b=J.style).margin=0,b.padding="4px",b.overflow="hidden",b.boxSizing="border-box",b.position="absolute",b.outline="none",b.backgroundColor="transparent",b.resize="none",b.textAlign="center",b.fontSize="14px",b.borderWidth=0,b.width="100%",(b=L.style).boxSizing="border-box",b.margin=0,b.padding=0,b.position="absolute",b.boxShadow="0 0 13px rgba(16,142,233, 0.5)",b.border="1px solid #d8d8d8",b.backgroundColor="rgba(255,255,255, 1)",b.zIndex="10",Q5(J,"keydown",function(Q){(s7()||X7())&&yh(Q)?x.endTextEdit():Kh(Q)?x.endTextEdit(!0):x._editTarget instanceof mV||x.calculateTextareaHeight(String.fromCharCode(Q.keyCode))}),Q5(J,"focus",function(Q){J.select()}),Q5(n,"mousedown",Q),Q5(n,"touchstart",Q),Q5(J,"mousedown",Q),Q5(J,"touchstart",Q),Q5(J,"click",Q),x.SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],x.HIDDEN_TEXTAREA_STYLE="visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important",x.handleWindowClick=function(Q){var n=x._editingDOM;n&&(n=n.getBoundingClientRect(),Q=R7(Q),T7(n,Q)||x.endTextEdit())}},handle_mousedown:function(Q){var n,x=this.gv;z7(Q)&&!x._editing&&(Q=x.getDataAt(Q))&&(n=x.getTextEditInfo(Q))&&(this._editInfo=n,this._editTarget=Q,x._editing=!0,n.isMultiline?this.handleMultilineEdit():this.handleTextEdit())},handleMultilineEdit:function(){var Q=this,n=Q.gv,x=Q._editTarget,b=Q.getTargetValue(),J=Q.textarea,L=Q.wrap,f=this._editInfo;this.hiddenTextarea||this.createHiddenTextarea(),J.value=b=null!==b&&b!==n5?b:"",f.font&&(J.style.font=f.font),Q._editingDOM=J,n.appendHTML(L),this.layoutHTML(L,x),x instanceof mV?J.style.height="100%":(J.style.height="auto",this.calculateTextareaHeight()),h5(function(){J.focus(),Q5(O,"mousedown",Q.handleWindowClick),Q5(O,"touchstart",Q.handleWindowClick)},10)},handleTextEdit:function(){var Q=this,n=Q.gv,x=Q._editTarget,b=Q.getTargetValue(),J=Q.input;J.value=b=null!==b&&b!==n5?b:"",Q._editingDOM=J,n.getView().appendChild(J),this.layoutHTML(J,x),h5(function(){J.focus(),Q5(O,"mousedown",Q.handleWindowClick),Q5(O,"touchstart",Q.handleWindowClick)},10)},layoutHTML:function(Q,n){var x,b,J,L,f=this.gv,V=f.getZoom();n instanceof mV?(L=(J=f.getDataUI(n))._6I,b=n.getScale(),x=Q.style,Q.style.left=L.x*V+f.tx()+"px",Q.style.top=L.y*V+f.ty()+"px",Q.style.width=J._6I.width+"px",Q.style.height=J._6I.height+"px",Qh(x,"transform","scale("+V*b.x+","+V*b.y+")"),Qh(x,"transformOrigin","0px 0px")):n instanceof OV?(b=(L=n.getRect()).width*V,Q.style.left=(L.x+L.width/2)*V+f.tx()+"px",Q.style.top=(L.y+L.height/2)*V+f.ty()+"px",Q.style.width=b+"px",Q.style.marginLeft=-b/2+"px"):n instanceof d.Edge&&(L=(J=f.getDataUI(n))._6I,Q.style.left=(L.x+L.width/2)*V+f.tx()+"px",Q.style.top=(L.y+L.height/2)*V+f.ty()+"px")},endTextEdit:function(Q){var n=this,x=n._editInfo.isMultiline?n.wrap:n.input,b=n._editInfo.isMultiline?n.textarea:n.input;Q||n.setTargetValue(b.value),n.gv.getView().removeChild(x),n.gv._editing=!1,delete n._editingDOM,delete n._editTarget,u5(O,"mousedown",n.handleWindowClick),u5(O,"touchstart",n.handleWindowClick)},setTargetValue:function(Q){var n=this._editTarget,x=this._editInfo,b=x.accessType;(x=x.name)&&b||(b="p",x="name"),"p"===b?n[d.Default.setter(x)](Q):"a"===b?n.a(x,Q):n.s(x,Q)},getTargetValue:function(){var Q=this._editTarget,n=this._editInfo,x=n.accessType;return(n=n.name)&&x||(x="p",n="name"),"p"===x?Q[d.Default.getter(n)]():"a"===x?Q.a(n):Q.s(n)},createHiddenTextarea:function(){this.hiddenTextarea=E.createElement("textarea"),this.hiddenTextarea.setAttribute("style","margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;pointer-events: none;opacity:0;"),this.hiddenTextarea.setAttribute("rows","1"),this.gv.getView().appendChild(this.hiddenTextarea)},calculateHTMLStyle:function(Q,n){if(n&&this.computedStyleCache)return this.computedStyleCache;var x=O.getComputedStyle(Q),Q=x.getPropertyValue("box-sizing")||x.getPropertyValue("-moz-box-sizing")||x.getPropertyValue("-webkit-box-sizing"),b=parseFloat(x.getPropertyValue("padding-bottom"))+parseFloat(x.getPropertyValue("padding-top")),J=parseFloat(x.getPropertyValue("border-bottom-width"))+parseFloat(x.getPropertyValue("border-top-width")),b={sizingStyle:this.SIZING_STYLE.map(function(Q){return Q+":"+x.getPropertyValue(Q)}).join(";"),paddingSize:b,borderSize:J,boxSizing:Q};return n&&(this.computedStyleCache=b),b},calculateTextareaHeight:function(Q){Q=Q||"";var n=this.textarea,x=this.hiddenTextarea,b=this.wrap,J=(V=this.calculateHTMLStyle(n,!1)).paddingSize,L=V.borderSize,f=V.boxSizing,V=V.sizingStyle,V=(x.setAttribute("style",V+";"+this.HIDDEN_TEXTAREA_STYLE),x.value=n.value+Q,x.scrollHeight);"border-box"===f?V+=L:"content-box"===f&&(V-=J),n.style.height=V+"px",b.style.height=Math.max(V,32)+"px",b.style.marginTop=-.5*V+"px"}}),SG.ScrollBarInteractor=function(Q){u_(qE,this,[Q])}),wE=(Q("ScrollBarInteractor",b,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(Q){var n=this.gv.getViewRect();return this._41o()&&(n.x+n.width-this.gv.lp(Q).x)*this.gv.getZoom()<B7},isH:function(Q){var n=this.gv.getViewRect();return this._40o()&&(n.y+n.height-this.gv.lp(Q).y)*this.gv.getZoom()<B7},handle_mousemove:function(Q){this.handle_touchmove(Q)},handle_touchmove:function(Q){var n;!oh&&O7(Q)&&this.gv.isScrollBarVisible()&&(n=this.isV(Q),Q=this.isH(Q),(n||Q)&&this.gv.showScrollBar(),this.gv._scrolling=n||Q)},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowTouchEnd:function(Q){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=x5,this.fi({kind:"endScroll",event:Q})},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_touchstart:function(Q){var n,x=this;x.gv.setFocus(Q),u7(Q),x.handle_touchmove(Q),1<p7(Q)||!x.gv._scrolling||!x.gv.isScrollBarVisible()||(x._cp=R7(Q),x._tx=x.gv.tx(),x._ty=x.gv.ty(),n=x.isV(Q),x._state=n?"vScroll":"hScroll",bS(x,Q),x.fi({kind:"beginScroll",event:Q}))},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){var n=R7(Q),x=this.gv.getViewRect(),b=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-n.y)*b.height/x.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-n.x)*b.width/x.width),this.fi({kind:"betweenScroll",event:Q})}}),SG.TouchInteractor=function(Q,n){(n=n||{}).selectable===n5&&(n.selectable=!0),n.movable===n5&&(n.movable=!0),n.pannable===n5&&(n.pannable=!0),n.pinchable===n5&&(n.pinchable=!0),n.editable===n5&&(n.editable=!0),this.params=n,u_(wE,this,[Q])});Q("TouchInteractor",b,{ms_edit:1,setUp:function(){wE.superClass.setUp.call(this),Y5&&this.params.editable&&this.gv.setEditInteractor(this)},tearDown:function(){wE.superClass.tearDown.call(this),Y5&&this.params.editable&&this.gv.setEditInteractor(x5)},clear:function(Q){var n=this,x=n.gv;x._moving&&(n.fi({kind:"endMove",event:Q}),delete x._moving,x.onMoveEnded(),x.dm().endTransaction()),x._panning&&(n.fi({kind:"endPan",event:Q}),delete x._panning,x.onPanEnded()),x._pinching&&(n.fi({kind:"endPinch",event:Q}),delete x._pinching,x.onPinchEnded()),x._editing&&(n._46O(Q),n._77I=n._node=n._edge=n._shape=n._rect=n._89I=n._index=x._editing=x5),n.pendingClickThrough=n._moving=n._panning=n._pinching=n._editing=n._57I=n._data=n._beginHistory=x5,n.clearDragging()},handle_touchstart:function(Q){var n,x,b,J,L,f=this;f.gv._editing||(u7(Q),f._57I=x5,f.pendingClickThrough=x5,n=f.params,b=(x=f.gv).sm(),J=x.getDataAt(Q),1===(L=p7(Q))?z7(Q)?x.handleDoubleClick(Q,J):(x.handleClick(Q,J),J&&(x.handleMouseDown&&x.handleMouseDown(Q,J),f._data=J),(J=n.selectable?J:x5)&&(b.co(J)?J instanceof SV&&J.isClickThroughEnabled()&&(f.pendingClickThrough=R7(Q)):b.ss(J),n.editable&&x.isEditable(J)&&f._79I(Q,J,!0)?(f._editing=1,f.startDragging(Q)):n.movable&&x.isMovable(J)&&(f._moving=1,f.startDragging(Q))),J&&(x.isMovable(J)||x._39Q(J))||(f._57I=R7(Q),n.pannable&&x.isPannable()&&(f._panning=1,f.startDragging(Q),f._translate={x:x.tx(),y:x.ty()}))):!n.pinchable||2!==L||!x.getEditInteractor()&&J&&(b=g(x.getImage(J)))&&S(b.scrollable,J,this)||(f._pinching=1,f.startDragging(Q),n=x.getView(),L=x.getZoom(),b=n.getBoundingClientRect(),J=Q.touches[0],n=Q.touches[1],(J={x:(J.clientX+n.clientX)/2-b.left,y:(J.clientY+n.clientY)/2-b.top}).x-=x.tx(),J.y-=x.ty(),J.x/=L,J.y/=L,f._p=J,f._d=B1(Q)))},handle_touchend:function(Q){var n=this.gv,x=this._57I,b=this._data;x&&(S7(x,R7(Q))<=1&&!n.getDataAt(Q)&&n.sm().cs(),this._57I=x5),b&&n.handleMouseUp&&n.handleMouseUp(Q,b),this.pendingClickThrough&&(S7(this.pendingClickThrough,R7(Q))<=1&&(b=n.getDataAt(Q))instanceof SV&&b.isClickThroughEnabled()&&(x=n.getDataAt(Q,function(Q){return Q.getParent()===b&&n.isSelectable(Q,!0)}))&&(Q.clickThrough=!0,n.sm().ss(x)),this.pendingClickThrough=x5)},handleWindowTouchEnd:function(Q){this.clear(Q)},handleWindowTouchMove:function(Q){var n,x,b=this,J=b.gv,L=p7(Q);1===L?(n=R7(Q),n=dG(J,n,b._lastClientPoint),x=S7({x:0,y:0},n),b._editing&&(b._beginHistory||(b._beginHistory=1,J.dm().beginTransaction()),J._editing=1,b._78I(Q)),b._moving?!J._moving&&x<b5.touchMoveThreshold||(b._beginHistory||(b._beginHistory=1,J.dm().beginTransaction()),b.handleMove(Q)):!b._panning||!J._panning&&x<b5.touchMoveThreshold||(J.setTranslate(b._translate.x+n.x,b._translate.y+n.y),b.fi({kind:J._panning?"betweenPan":"beginPan",event:Q}),J._panning=1)):2===L&&b._pinching&&(x=B1(Q),J.handlePinch(b._p,x,b._d),b._d=x,b.fi({kind:J._pinching?"betweenPinch":"beginPinch",event:Q}),J._pinching=1)},handleMove:function(Q){var n=this.gv,x=n.lp(Q);n._93O&&n._93O(Q,this._data)||(n.moveSelection(x.x-this._lastLogicalPoint.x,x.y-this._lastLogicalPoint.y),this._lastLogicalPoint=x,this.autoScroll(Q),this.fi({kind:n._moving?"betweenMove":"beginMove",event:Q}),n._moving=1)}});var yE,Y=(d=O.ht).graph._editor={Math:d.Math,Guide:{},getStyle:function(Q){var n=Y.StyleMap;return n&&(n=n[Q])!==n5?n:Y.DefaultStyleMap[Q]},setStyle:function(Q,n){(Y.StyleMap||(Y.StyleMap={}))[Q]=n},inEdit:function(Q){return!0===Q._inXEdit},startEdit:function(Q){Q._inXEdit=!0,Y.Inject.doInject(Q)},_46O:function(Q){Q._inXEdit=!1,Y.Inject.undoInject(Q)},toScreenPosition:function(Q,n){var x=Q.tx(),b=Q.ty(),Q=Q._zoom;return new Y.Math.Vector2(n.x*Q+x,n.y*Q+b)},checkHit:function(Q,n,x){return Q.distanceTo(n)<x},toWorldPosition:function(Q,n){var x=Q.tx(),b=Q.ty(),Q=Q._zoom;return{x:(n.x-x)/Q,y:(n.y-b)/Q}},setAntialias:function(Q,n){for(var x,b=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],J=0,L=b.length;J<L&&!((x=b[J])in Q);J++);Q[x],Q[x]=n},getTargetCornersOnScreen:function(n,Q){if(!Q)return null;var x=[];if(a_(Q,n))var b=[{x:(b=$G(n,Q)).x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}];else{if(!Q.getCorners)return null;b=Q.getCorners()}return b.forEach(function(Q){Q=Y.toScreenPosition(n,Q),x.push(Q.x,Q.y)}),x},log:function(){},updateTipInfo:function(Q,n,x){yE=x?((Q=d.Default.getLogicalPoint(Q,n._canvas)).x+=Y.Icons.TipShiftX,Q.y+=Y.Icons.TipShiftY,{helperPos:Q,text:x,size:x.length}):x5},drawTip:function(Q,n){yE&&Y.Icons.DrawIcon(n,Q,Y.Icons.TipHelper,yE)}},KE=Y.Inject={_modules:[],registAsModule:function(x,b){var Q,J={},n={};for(Q in x){var L=b.prototype[Q];J[Q]=L}x.getBackup=function(Q){return J[Q]},x.getBackups=function(){return J},n.doInject=function(Q){for(var n in x)"getBackup"!==n&&(b.prototype[n]=x[n])},n.undoInject=function(Q){for(var n in x)"getBackup"!==n&&(b.prototype[n]=J[n])},KE._modules.push(n)},doInject:function(Q){for(var n=KE._modules,x=0,b=n.length;x<b;x++)n[x].doInject(Q)},undoInject:function(Q){for(var n=KE._modules,x=0,b=n.length;x<b;x++)n[x].undoInject(Q)}},UE=b=d.graph.EditInteractor=function(Q){var n=this,x=E.createElement("canvas");x.className="editCanvas",x.style.position="absolute",n._uuid=d.Math.generateUUID(),n._styleMap={},n._canvas=x,n._context=x.getContext("2d"),b.superClass.constructor.call(n,Q),this._editDetail=!1,Y.setAntialias(n._context,!1),n._subModules=n.initSubModule(),n._gridGuide=new Y.Guide.Grid(n),n._rectGuide=new Y.Guide.Rect(n),n._hoverGuide=new Y.Guide.Hover(n)};d.Default.def(b,d.graph.Interactor,{ms_edit:1,ms_fire:1}),e.defineProperties(b.prototype,{editDetail:{get:function(){return!!this._editDetail},set:function(Q){var n=this._editDetail;n!==Q&&(this._editDetail=Q,this.gv._editing=Q,this.fp("editDetail",n,Q),this.fp("pointsEditingMode",n,Q),this.fi({kind:Q?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(Q){this._editDetail&&!Q||(this.gv._editing=Q)||(this.editDetail=!1)}},editing:{get:function(){return this._editing},set:function(Q){this._editing=Q,this.gvEditing=Q}},editingModule:{get:function(){return this._editMod}},pointsEditingMode:{get:function(){return this.editDetail},set:function(Q){this.editDetail!==Q&&(Q?this._tryEnterEditDetailMode():this._tryQuitEditDetailMode())}},gridEnabled:{get:function(){return!!this._gridEnabled&&(this.gv,!0)},set:function(Q){Q!==this._gridEnabled&&(this._gridEnabled=Q,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(Q){Q!==this._agEnabled&&(this._agEnabled=Q,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}},hoverGuide:{get:function(){return this._hoverGuide}}}),b.prototype.initSubModule=function(){return[new Y.Anchor(this),new Y.RotateX(this),new Y.MoveDummy(this),new Y.Rect(this),new Y.Curve(this),new Y.MoveHelper(this)]},b.prototype.getSubModule=function(Q){for(var n,x=this._subModules,b=0,J=x.length;b<J;b++)if((n=x[b]).catalog===Q)return n},b.prototype.invokeSubModule=function(Q,n){for(var x,b,J=this._subModules,L=Array.prototype.slice.call(arguments,2),f=0,V=J.length;f<V;f++)if((b=(x=J[f])[Q])&&b.apply(x,L)!=n5&&n)return x},b.prototype.invokeSubModuleInverse=function(Q,n){var x=this._subModules;if(x)for(var b,J,L=Array.prototype.slice.call(arguments,2),f=x.length-1;0<=f;f--)if((J=(b=x[f])[Q])&&J.apply(b,L)!=n5&&n)return b},b.prototype.setUp=function(){Y.log("setUp");var Q=this.gv,n=Q.getView(),x=this._canvas;b.superClass.setUp.call(this),Q.setEditInteractor(this),Q._79O?n.insertBefore(x,Q._79O):n.appendChild(x),Y.startEdit(Q),this.invokeSubModule("setUp"),Q.dm().mm(this._onDataModelChanged,this),Q.dm().md(this._onDataPropertyChanged,this)},b.prototype.tearDown=function(){Y.log("tearDown");var Q=this,n=Q.gv,x=n.getView();Q._resetCustomCursorStyle(),b.superClass.tearDown.call(Q),n.dm().umm(Q._onDataModelChanged,Q),n.dm().umd(Q._onDataPropertyChanged,Q),n.setEditInteractor(null),x.removeChild(Q._canvas),Q._drawTimer&&(p5(Q._drawTimer),Q._drawTimer=null),Y._46O(n),Q.invokeSubModule("tearDown")},b.prototype._onDataModelChanged=function(Q){("clear"===Q.kind||"remove"===Q.kind&&this.editDetail&&Q.data===this.getSubModule("Curve").target)&&(this.editDetail=!1,this._42())},b.prototype._onDataPropertyChanged=function(Q){var n,x;this.editDetail&&(n=this.getSubModule("Curve"),(x=Q.data)!==n.target||x._writing||n._handleDataChanged(Q))},b.prototype.clear=function(){Y.log("clear")},b.prototype.redraw=function(){this._42()},b.prototype._42=function(){var Q=this;Q._drawTimer||(Q._drawTimer=h5(function(){Q._drawTimer=null,Q.drawImpl()},0))},b.prototype.drawImpl=function(){for(var V in{_42:!0})break;return function(){var Q=this._canvas,n=this.gv,x=n.getWidth(),b=n.getHeight(),J=this._context,L=d.Default.getInternal(),f=b5.devicePixelRatio,L=(Q.width===x&&Q.height===b||L.setCanvas(Q,x,b,f),J.clearRect(0,0,Q.width,Q.height),this._getValidSelection());J.save(),J.scale(f,f),this._gridGuide._42(),this.invokeSubModuleInverse(V,!1,J,n,L),this._rectGuide._42(),this._hoverGuide._42(),J.restore()}}(),b.prototype._getValidSelection=function(){var n=this.gv,Q=n.sm().getSelection(),x=[];return Q.each(function(Q){n.isVisible(Q)&&n.isEditable(Q)&&x.push(Q)}),x},b.prototype.handle_touchmove=function(Q){return this.handle_mousemove(Q)},b.prototype.handle_mousemove=function(Q){if(!d.Default.isDragging()&&(this.editDetail||!wh()&&!d7(Q))&&!this.gv._externalEditing){if(this.gvEditing=!1,this._checkEdit(Q))this.gvEditing=!0;else{if(!this.getStyle("hoverGuideVisible"))return;this.hoverData=this.gv.getDataAt(Q)}this._42()}},b.prototype.handle_touchstart=function(Q){return this.handle_mousedown(Q)},b.prototype.handle_mousedown=function(Q){u7(Q);var n=this;if((n.editDetail||!wh()&&!d7(Q))&&!n.gv._externalEditing){if(z7(Q)&&!Q.clickThrough){if(n.editDetail){if(n._tryQuitEditDetailMode(Q))return}else if(n._tryEnterEditDetailMode())return;n.gv.dm().beginTransaction();var x=n.invokeSubModule("handleDoubleClick",!0,Q);if(n.gv.dm().endTransaction(),x)return}(x=n._checkEdit(Q))&&(n._downPosition=n._getLogicalPoint(Q),n.gv.dm().beginTransaction(),x.startEdit(n,Q),n.editing=!0)}},b.prototype._checkEdit=function(Q){var n=this.gv,x=this._getLogicalPoint(Q),n=this.invokeSubModule("check",!0,n,Q,x)||null;return this._editMod=n},b.prototype.handleWindowTouchMove=function(Q){return this.handleWindowMouseMove(Q)},b.prototype.handleWindowMouseMove=function(Q){var n=this._downPosition;if(n){if(this._getLogicalPoint(Q).distanceTo(n)<this.getStyle("moveSensitivity"))return;delete this._downPosition}(n=this._editMod)&&n.handleEdit(this.gv,Q),this.redraw()},b.prototype._getLogicalPoint=function(Q){return Q=d.Default.getLogicalPoint(Q,this._canvas),new Y.Math.Vector2(Q)},b.prototype.handleWindowTouchEnd=function(Q){return this.handleWindowMouseUp(Q)},b.prototype.handleWindowMouseUp=function(){for(var n in{_46O:!0})break;return function(Q){this.editing=!1,this.setCursor("default"),this.invokeSubModule(n,!1,Q),this._42(),this.gv.dm().endTransaction()}}(),b.prototype.handle_mousewheel=function(Q){u7(Q),this.invokeSubModule("preHandleScroll",!0)||this.gv.handleScroll(Q,Q.wheelDelta)},b.prototype.handleDelete=function(){var Q;if(!this.editDetail)return this.gv.dm().beginTransaction(),Q=this.invokeSubModule("handleNormalStateDelete",!0),this.gv.dm().endTransaction(),void(Q||this.gv.removeSelection());this.gv.dm().beginTransaction(),this.invokeSubModule("handleDelete",!0),this.gv.dm().endTransaction(),this._42()},b.prototype.handle_keydown=function(Q){var n,x=this;return(Q.metaKey||Q.ctrlKey)&&x._42(),wh(Q)&&!x.editing?(x.gvEditing=!1,x.setCursor("default"),void x._42()):(n=yh(Q),x.editDetail?((n||Kh(Q))&&(x.editDetail=!1,x._42()),x.gv.dm().beginTransaction(),x.invokeSubModule("handle_keydown",!0,Q),void x.gv.dm().endTransaction()):(x.gv.dm().beginTransaction(),x.invokeSubModule("handleNormalStateKeyDown",!0,Q),x.gv.dm().endTransaction(),void(n&&x._tryEnterEditDetailMode())))},b.prototype.handle_keyup=function(Q){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,Q),this.gv.dm().endTransaction()},b.prototype._tryEnterEditDetailMode=function(){if(!this.editDetail&&this.invokeSubModule("canEnterEditDetailMode",!0)&&1===this._getValidSelection().length)return this.editDetail=!0,this._42(),!0},b.prototype._tryQuitEditDetailMode=function(Q){return!(!this.editDetail||Q&&!this.invokeSubModule("canQuitEditDetailMode",!0,Q)||(this.editDetail=!1,this._42(),0))},b.prototype.setStyle=function(Q,n,x){x?Y.setStyle(Q,n):this._styleMap[Q]=n,"baseColor"===Q&&(dE=n),this.fp("styleChanged",null,{key:Q,value:n,base:x}),this._42()},b.prototype.getStyle=function(Q,n){var x=this._styleMap[Q];return x!==n5?x:Y.getStyle(Q)},b.prototype.setCursor=function(Q){this._resetCustomCursorStyle(),d.graph.EditInteractor.superClass.setCursor.call(this,Q)},b.prototype._drawHostGuide=function(Q){var n=this._context,x=this.gv,b=(Y.Icons.DrawIcon(this,n,Y.Icons.NodeHoverGuide,Q.corners),Q.host);if(b){var J=x.getAttachPoints(b);if(J&&J.length)for(var L=0,f=J.length;L<f;L++){var V=J[L],V=vG(x,b,0,V.offsetX||0,V.offsetY||0,V.x,V.y);(V=Y.toScreenPosition(x,V)).isAttach=Q.attach===L,Y.Icons.DrawIcon(this,n,Y.Icons.AttachPoint,V)}}},b.prototype._resetCustomCursorStyle=function(){var Q;this._customStyle&&((Q=this.gv.getView()).classList&&Q.classList.remove&&Q.classList.remove(this._customStyle),this._customStyle=null)},b.prototype._setRotateCursor=function(Q){var Q=(this._cursorFactory||(this._cursorFactory=new Y.CursorFactory(this))).getRotateCursor(Q),n=this.gv.getView();this._resetCustomCursorStyle(),this._customStyle=Q,n.classList&&n.classList.add&&n.classList.add(Q)};((L=Y.Group=function(Q){this._entities=Q,this._64O=0,this._position={x:0,y:0},this._scale={x:1,y:1},this._anchor={x:.5,y:.5},this._anchor2={x:.5,y:.5}}).prototype={}).constructor=L;var eE=null,vE=null;L.findOrCreateGroup=function(Q,n){return vE===n&&eE&&eE.checkIsMe(Q)?eE:(vE=n,(n=new Y.Group(Q)).getKeyOb()?eE=n:void 0)},L.prototype.checkIsMe=function(Q){var n=this._entities;if(n.length!==Q.length)return!1;for(var x={},b=Q.length,J=0;J<b;J++)x[Q[J]._id]=!0;for(J=0;J<b;J++)if(!x[n[J]._id])return!1;return!0},L.prototype.getRotation=function(){return this._64O},L.prototype.getPosition=function(){return this._position},L.prototype.getAnchor=function(){return this._anchor},L.prototype.getWidth=function(){return this._width},L.prototype.getScale=function(){return this._scale},L.prototype.getSize=function(){return{width:this._width,height:this._height}},L.prototype.getHeight=function(){return this._height},L.prototype.getKeyOb=function(){for(var Q=this._entities,n=Q.length-1;0<=n;n--){var x=Q[n];if(this.isNode(x))return x}},L.prototype.getAnchor2=function(){var Q=this.rotateCenter;if(Q)return Q;if(!(Q=this.getKeyOb()))return this._anchor;var n=this._anchor2;return Q.getMatrix().tf({x:Q.getWidth()*(n.x-Q.getAnchor().x),y:Q.getHeight()*(n.y-Q.getAnchor().y)})},L.prototype.setAnchor2=function(Q,n){var x=this.getKeyOb();x&&(n="number"==typeof Q?{x:Q,y:n}:Q,Q=x.getMatrix().tfi(n),this._anchor2={x:x.getAnchor().x+Q.x/x.getWidth(),y:x.getAnchor().y+Q.y/x.getHeight()})},L.prototype.setRotation=function(Q){},L.prototype.beginRotate=function(Q){this.rotateCenter=Q.pos,this.rotateMode=Q.groupRotateMode},L.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},L.prototype.addRotation=function(Q,n,x){return"batch"===n?this._addRotationInBatchMode(Q,x):"block"===n?this._addRotationInBlockMode(Q,x):void 0},L.prototype._addRotationInBlockMode=function(b,J){var L=this,f=L.rotateCenter||L.getPosition();L._entities.forEach(function(Q){var n,x;!L.isNode(Q)||J&&!J(Q)||((n=Q.getMatrix()).translate(-f.x,-f.y),n.rotate(b),n.translate(f.x,f.y),x=Math.sign(Q.getScale().x),Q.setRotation(K5(n.b*x,n.a*x)),Q.setPosition(n.tx,n.ty))})},L.prototype._addRotationInBatchMode=function(J,L){var f=this,V=f._anchor2;f._entities.forEach(function(Q){var n,x,b;!f.isNode(Q)||L&&!L(Q)||(n=Q.getAnchor(),n=(b=Q.getMatrix()).tf({x:Q.getWidth()*(V.x-n.x),y:Q.getHeight()*(V.y-n.y)}),(x=new Y.Math.Matrix2d).set(b.a,b.b,b.c,b.d,b.tx,b.ty),x.translate(-n.x,-n.y),x.rotate(J),x.translate(n.x,n.y),b=Math.sign(Q.getScale().x),Q.setRotation(K5(x.b*b,x.a*b)),Q.setPosition(x.tx,x.ty))})},L.prototype.setPosition=function(Q){for(var n,x,b=this._position,J=Q.x-b.x,L=Q.y-b.y,f=this._entities,V=0,l=f.length;V<l;V++)n=f[V],v(n)&&(x=n.getPosition(),n.setPosition(x.x+J,x.y+L));this._position=Q},L.prototype.setScale=function(Q,n){var x=Q/this._scale.x,b=n/this._scale.y;this._adjustChildScaleOrSize(x,b,"size"),this._scale={x:Q,y:n}},L.prototype.getRect=function(){var Q=this._position,n=this._width,x=this._height;return{x:Q.x-n/2,y:Q.y-x/2,width:n,height:x}},L.prototype.setSize=function(Q,n){var Q=Math.max(1,Q),n=Math.max(1,n),x=Q/this._width,b=n/this._height;this._adjustChildScaleOrSize(x,b,"size"),this._width=Q,this._height=n},L.prototype._adjustChildScaleOrSize=function(Q,n,x){for(var b,J=this._position,L=this._entities,f=new Y.Math.Matrix2d,V=0,l=L.length;V<l;V++){var H,I,Z,E,a,o,B,G=L[V];this.isNode(G)&&(H=G.getPosition(),I=G.getRotation(),Z=G.getWidth(),E=G.getHeight(),o=(a=G.getScale()).x*Z,B=a.y*E,f.identity().scale(o,B).rotate(I).translate(H.x,H.y).translate(-J.x,-J.y).rotate(-this._64O),I=K5(f.b*Math.sign(o),f.a*Math.sign(o)),f.scale(Q,n),B=Math.cos(I),H=Math.sin(I),o=Math.abs(B)<.001?(b=f.b/H,-f.c/H):(b=f.a/B,f.d/B),"scale"===x?G.setScale(b/Z,o/E):"size"===x&&(I=b/a.x,H=o/a.y,G.setScale(P_(b)*Math.abs(a.x),P_(o)*Math.abs(a.y)),G.setSize(Math.max(.1,Math.abs(I)),Math.max(.1,Math.abs(H)))),f.rotate(this._64O).translate(J.x,J.y),G.setPosition(f.tx,f.ty))}},L.prototype.getMatrix=function(){var Q=this._position,n=d.Default.getInternal(),x=this._scale;return new n.Mat(this._64O,Q.x,Q.y,x.x,x.y)},L.prototype.toGlobal=function(Q){return this.getMatrix().tf(Q)},L.prototype.getCorners=function(){var Q=this._width,n=this._height,x=-Q*(b=this._anchor).x,b=-n*b.y,J=this.getMatrix();return[J.tf(x,b),J.tf(x,b+n),J.tf(x+Q,b+n),J.tf(x+Q,b)]},L.prototype.calcInfo=function(){for(var Q,n,x=[],b=this._entities,J=this._64O,L=0,f=b.length;L<f;L++)n=b[L],this.isNode(n)&&n.getCorners&&x.push.apply(x,n.getCorners());if(x.length){for(var V=Math.cos(-J),l=Math.sin(-J),H=1/0,I=-1/0,Z=1/0,E=-1/0,L=0,f=x.length;L<f;L++)a=(Q=x[L]).x,o=Q.y,Q.x=V*a-l*o,Q.y=l*a+V*o,H=Math.min(H,Q.x),I=Math.max(I,Q.x),Z=Math.min(Z,Q.y),E=Math.max(E,Q.y);this._width=(I-H)/this._scale.x,this._height=(E-Z)/this._scale.y;var V=Math.cos(J),l=Math.sin(J),a=H+(I-H)*(J=this._anchor).x,o=Z+(E-Z)*J.y;this._position={x:V*a-l*o,y:l*a+V*o}}},L.prototype.isNode=function(Q){return!(!v(Q)||a_(Q)&&Q.size())},L.prototype._42=function(Q,n,x){var b,J,L,f,V,l=this._entities;for("batch"===this.rotateMode&&(V=this.getKeyOb()),b=0,J=l.length;b<J;b++)L=l[b],this.isNode(L)&&(f=L.getRect(),f={min:Y.toScreenPosition(x,{x:f.x,y:f.y}),max:Y.toScreenPosition(x,{x:f.x+f.width,y:f.y+f.height})},L===V&&(f.isKeyOb=!0),Y.Icons.DrawIcon(Q,n,Y.Icons.GroupSubEntityRect,f))},((n=Y.CurveActiving=function(Q,n){for(var x in this._curve=Q,this._interactor=Q._interactor,this.silent=!0,n)this[x]=n[x];delete this.silent}).prototype={}).constructor=n,e.defineProperties(n.prototype,{point:{get:function(){return this._point},set:function(Q){this._point=Q,this.editingCtrl||this.silent||this._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(Q){this._pairs=Q,this.editingCtrl&&!this.silent&&this._firePointChange()}}}),n.prototype._firePointChange=function(){var Q,n,x=this.getCurrentEditingPoint(),b=this._interactor;x?(n=this._curve.target)&&(n=Y.getDataMatrix(n).invert(),Q=x.e,(x=n.apply(Y.toWorldPosition(b.gv,x))).e=Q,(n=this._lastFirePoint)&&Math.abs(x.x-n.x)<1e-5&&Math.abs(x.y-n.y)<1e-5&&(x.e==n5&&n.e==n5||Math.abs(x.e-n.e)<1e-5)||(this._lastFirePoint=x,b.fi({kind:"selectPoint",x:x.x,y:x.y,e:x.e}))):b.fi({kind:"selectPoint"})},n.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},n.prototype.getCurrentEditingPoint=function(){var Q=this.editingCtrl;if(Q){var n=this.pairs;if(n=(n=n&&n[Q.pairId])&&n[Q.type])return n}return this._point},(((Q=Y.CursorFactory=function(Q){this._interactor=Q,this._rotateCursorStyles={}}).prototype={}).constructor=Q).prototype.getRotateCursor=function(Q){Q<0&&(Q+=2*Math.PI);var n=(x=this._interactor).getStyle("rotateCursorSize"),x=x.getStyle("rotateCursorRound"),Q=Math.round(Q/Math.PI*180/x),b=this._rotateCursorStyles,J="htCustomRotateStyle_"+n+"_"+x+"_"+(Q=360<=Q*x?0:Q);return b[J]||(this._produceRotateCursor(J,n,x,Q),b[J]=!0),J},Q.prototype._produceRotateCursor=function(Q,n,x,b){this._interactor;var J=(J=this._canvas)||(this._canvas=E.createElement("canvas")),L=b5.devicePixelRatio,f=(J.width=J.height=n*L,J.style.width=J.style.height=n+" px",J.getContext("2d"));Y.setAntialias(f,!1),f.scale(L,L);var V=(V=Math.round(n/2))+" "+V+",auto !important;",b=Math.PI/180*b*x;f.clearRect(0,0,n,n),f.save(),f.scale(n/32,n/32),f.translate(16,15),f.rotate(b+Math.PI/2),f.beginPath(),f.moveTo(-8,0),f.lineTo(-8,4),f.lineTo(-4,4),f.moveTo(8,0),f.lineTo(8,4),f.lineTo(4,4),f.moveTo(-8,4),f.quadraticCurveTo(0,-6,8,4),f.restore(),f.lineCap="round",f.lineJoin="miter",f.strokeStyle="white",f.lineWidth=4,f.stroke(),f.strokeStyle="black",f.lineWidth=2,f.stroke(),b="cursor:url("+(x=JSON.stringify(J.toDataURL()))+")"+V,1!==L&&(b=b+("cursor:url(data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+n+'px" height="'+n+'px"><image xlink:href='+x+' width="'+n+'" height="'+n+'"/></svg>'))+")"+V+"cursor:-webkit-image-set(url("+x+")"+L+"x,url("+x+")1x)"+V),(f=E.createElement("style")).textContent="body."+Q+" *, ."+Q+"{"+b+"}",E.head.appendChild(f)},((x=Y.Guide.Grid=function(Q){this._interactor=Q,this._alignmentGuideId=0,this._xAlignmentGuide=[],this._yAlignmentGuide=[]}).prototype={}).constructor=x,e.defineProperties(x.prototype,{gridBlockSize:{get:function(){return this._gridBlockSize||this._interactor.getStyle("gridBlockSize")},set:function(Q){this._gridBlockSize=Q,this._interactor._42()}},gridThickLinesEvery:{get:function(){return this._gridThickLinesEvery||this._interactor.getStyle("gridThickLinesEvery")},set:function(Q){this._gridThickLinesEvery=Q,this._interactor._42()}},gridEnabled:{get:function(){return this._interactor.gridEnabled&&this.isValidGrid()}}}),x.prototype._42=function(){var Q=this._interactor;this.gridEnabled&&this.drawGrid(),Q.alignmentGuideEnabled&&this.drawAlignmentGuide()},x.prototype.makeMatrix=function(){var Q=this._interactor.getStyle("gridAngle"),n=this._interactor.getStyle("gridRotation"),x=new Y.Math.Matrix2d,b=Math.sin(Q),Q=Math.cos(Q);return x.set(1,0,Q,b,0,0),x.rotate(n),x},x.prototype.isValidGrid=function(){var Q=Math.PI,n=this._interactor;return!(n.gv._zoom<n.getStyle("gridZoomThreshold"))&&(n=n.getStyle("gridAngle"),!((n=Math.abs(n%Q/Q*180))<1-1e-8||179.00000001<n))},x.prototype.drawAlignmentGuide=function(){var Q=this._interactor,n=Q.gv,x=Q._canvas,b=Q._context,J=x.width,L=x.height,f=n.tx(),V=n.ty(),l=n._zoom;b.beginPath(),b.strokeStyle=Q.getStyle("gridAlignmentGuideColor"),b.lineWidth=1,this._xAlignmentGuide.forEach(function(Q){Q=Q.p*l+f,b.moveTo(Q,0),b.lineTo(Q,L)}),this._yAlignmentGuide.forEach(function(Q){Q=Q.p*l+V,b.moveTo(0,Q),b.lineTo(J,Q)}),b.stroke()},x.prototype.drawGrid=function(){var Q,n,x,b=this._interactor,J=this.gridBlockSize,L=this.gridThickLinesEvery,f=b.getStyle("gridThickColor"),V=b.getStyle("gridLightColor"),l=b.gv,H=b._canvas,I=b._context,b=H.width,H=H.height,Z=this.makeMatrix(),E=Z.applyInverse(Y.toWorldPosition(l,{x:0,y:0})),a=Z.applyInverse(Y.toWorldPosition(l,{x:b,y:0})),o=Z.applyInverse(Y.toWorldPosition(l,{x:0,y:H})),b=Z.applyInverse(Y.toWorldPosition(l,{x:b,y:H})),B=Math.min(E.x,a.x,o.x,b.x),G=Math.max(E.x,a.x,o.x,b.x),_=Math.min(E.y,a.y,o.y,b.y),$=Math.max(E.y,a.y,o.y,b.y),H=Math.ceil(B/J),W=Math.floor(G/J),E=Math.ceil(_/J),D=Math.floor($/J);function A(Q,n,x,b){Q=Y.toScreenPosition(l,Z.apply({x:Q,y:n})),n=Y.toScreenPosition(l,Z.apply({x:x,y:b})),I.moveTo(Q.x,Q.y),I.lineTo(n.x,n.y)}for(l.tx(),l.ty(),l._zoom,I.save(),I.lineWidth=1,I.beginPath(),I.strokeStyle=f,x=Math.ceil(H/L)*L;x<=W;x+=L)A(Q=x*J,_,Q,$);for(x=Math.ceil(E/L)*L;x<=D;x+=L)A(B,n=x*J,G,n);for(I.stroke(),I.beginPath(),I.strokeStyle=V,x=H;x<=W;x++)x%L!=0&&A(Q=x*J,_,Q,$);for(x=E;x<=D;x++)x%L!=0&&A(B,n=x*J,G,n);I.stroke(),I.restore()},x.prototype.getAlignmentGuides=function(){return{x:this._xAlignmentGuide,y:this._yAlignmentGuide}},x.prototype.addAlignmentGuide=function(Q,n,x){var b,Q="x"===Q?this._xAlignmentGuide:this._yAlignmentGuide,n={p:n,id:x=x||++this._alignmentGuideId};return Q.length?(b=this._findClosestAlignmentGuide(n.p,Q)).dis<0?Q.splice(b.index+1,0,n):Q.splice(b.index,0,n):Q.push(n),this._interactor._42(),x},x.prototype.findClosest=function(Q,n,x){var b=this._interactor,J=b.gv,L=1/0,f=1/0,V=(Q=x?Y.toWorldPosition(J,Q):Q).x,l=Q.y;if(this.gridEnabled&&(I=this.gridBlockSize,Q=(H=this.makeMatrix()).applyInverse(Q),L=(Q=H.apply({x:Math.round(Q.x/I)*I,y:Math.round(Q.y/I)*I})).x-V,f=Q.y-l,H=!0),b.alignmentGuideEnabled&&(I=this._findClosestAlignmentGuide(V,this._xAlignmentGuide).dis,Q=this._findClosestAlignmentGuide(l,this._yAlignmentGuide).dis,Math.abs(I)<Math.abs(L)&&(L=I,H=!0),Math.abs(Q)<Math.abs(f)&&(f=Q,H=!0)),H){var H=!1,V=J._zoom,l=b.getStyle("smartGuideThreshold")/V,I={};if(Math.abs(L)<l&&"y"!==n&&(I.x=x?L*V:L,H=!0),Math.abs(f)<l&&"x"!==n&&(I.y=x?f*V:f,H=!0),H)return I}},x.prototype._findClosestAlignmentGuide=function(Q,n){if(!n.length)return{dis:1/0};for(var x,b=0,J=n.length-1;1<J-b;)n[x=Math.floor((b+J)/2)].p<Q?b=x:J=x;var L=n[b].p-Q,f=n[J].p-Q;return Math.abs(L)<=Math.abs(f)?{line:n[b],dis:L,index:b}:{line:n[J],dis:f,index:J}},x.prototype.removeAllAlignmentGuide=function(Q){"y"!==Q&&(this._xAlignmentGuide=[]),"x"!==Q&&(this._yAlignmentGuide=[]),this._interactor._42()},x.prototype.removeAlignmentGuide=function(Q){for(var n,x,b,J=this._xAlignmentGuide,L=0;L<2;L++)for(x=(J=(n=0)===L?this._xAlignmentGuide:this._yAlignmentGuide).length;n<x;n++)if((b=J[n]).id===Q)return J.splice(n,1),this._interactor._42(),{axis:0===L?"x":"y",position:b.p};return!1},x.prototype.adjustAlignmentGuide=function(Q,n){var x=this.removeAlignmentGuide(Q);return!!x&&(this.addAlignmentGuide(x.axis,n,Q),!0)},(((L=Y.Guide.Rect=function(Q){this._interactor=Q}).prototype={}).constructor=L).prototype.gatherRects=function(){var b,J,L,f,V=this._interactor.gv,l=[],H=[],Q={x:l,y:H},I={},n=V.getDataModel(),x=n.a("width"),Z=n.a("height");x&&Z&&(J=b=0,L=x,f=Z,l.push({node:n,type:0,p:b},{node:n,type:1,p:b+L/2},{node:n,type:2,p:b+L}),H.push({node:n,type:0,p:J},{node:n,type:1,p:J+f/2},{node:n,type:2,p:J+f}),I[n._id||0]={x:b,y:J,width:L,height:f}),n.each(function(n){var x,Q;v(n)&&!V.isSelected(n)&&V.isVisible(n)&&V.isValidGuideLineSource(n)&&(x=!1,V.sm().getSelection().each(function(Q){x||(n.isHostOn(Q)||n.isDescendantOf(Q))&&(x=!0)}),x||(Q=n.getRect(),b=Q.x,J=Q.y,L=Q.width,f=Q.height,l.push({node:n,type:0,p:b},{node:n,type:1,p:b+L/2},{node:n,type:2,p:b+L}),H.push({node:n,type:0,p:J},{node:n,type:1,p:J+f/2},{node:n,type:2,p:J+f}),I[n._id]=Q))}),l.sort(function(Q,n){return Q.p-n.p}),H.sort(function(Q,n){return Q.p-n.p}),this._grid=Q,this._87I=I},L.prototype.gatherLines=function(Q,n,x){var b,J,L,f,V,l,H,I,Z,E=[this.findClosest({x:Q.x,y:Q.y},n),this.findClosest({x:Q.x+Q.w/2,y:Q.y+Q.h/2},n),this.findClosest({x:Q.x+Q.w,y:Q.y+Q.h},n)],a={},o=this._87I;for(x=x||255,this._guideLine=[],b=0;b<2;b++)for(a={},H=0===b?(f="y",(l=Q.x)+Q.w):(f="x",(l=Q.y)+Q.h),J=0;J<3;J++)(V=E[J])&&isFinite(V[f])&&x&1<<3*b+J&&(a[Z=(V=V[f+"Line"]).node._id||0]||(a[Z]=!0,Z=o[Z],Z="y"===f?(I=Z.x,Z.x+Z.width):(I=Z.y,Z.y+Z.height),L=V.p,this._guideLine.push({type:f,a:l,b:H,c:I,d:Z,p:L,center:1===V.type})))},L.prototype._binarySearchClosest=function(Q,n){if(!n.length)return{dis:1/0};for(var x,b=0,J=n.length-1;1<J-b;)n[x=Math.floor((b+J)/2)].p<Q?b=x:J=x;var L=n[b].p-Q,f=n[J].p-Q;return Math.abs(L)<=Math.abs(f)?{line:n[b],dis:L}:{line:n[J],dis:f}},L.prototype.findClosest=function(Q,n,x){var b,J=(l=this._interactor).gv,L=this._grid,f=(x&&(Q=Y.toWorldPosition(J,Q)),this._binarySearchClosest(Q.x,L.x)),Q=this._binarySearchClosest(Q.y,L.y),L=f.dis,V=Q.dis,J=J._zoom,l=l.getStyle("smartGuideThreshold")/J,H={};if(Math.abs(L)<l&&"y"!==n&&(H.x=x?L*J:L,H.xLine=f.line,b=!0),Math.abs(V)<l&&"x"!==n&&(H.y=x?V*J:V,H.yLine=Q.line,b=!0),b)return H},L.prototype._42=function(){var Q=this._guideLine;if(Q&&!d.Default.isCtrlDown()){var n=this._interactor;if(n.getStyle("guideLineVisible"))for(var x,b,J,L,f,V,l,H,I,Z,E,a,o,B=n.gv,G=n._context,_=B.tx(),$=B.ty(),W=B._zoom,D=n.getStyle("guideLineTextSpacing"),A=0,u=Q.length;A<u;A++)f=(x=Q[A]).type,V=x.p,l=x.a,H=x.b,I=x.c,Z=x.d,E=Math.min(l,I),a=Math.max(H,Z),V="x"===f?(J=E*W+$,L=b=V*W+_,a*W+$):(b=E*W+_,L=a*W+_,J=V*W+$),Y.Icons.DrawIcon(n,G,Y.Icons.MoveLineGuide,{rect:[b,J,L,V],center:x.center}),l<=Z&&I<=H||(E=Z<l?Z:H,a=Z<l?l:I,"x"===f?(x.center2center||(L=b-=D),J=E*W+$,V=a*W+$,o=Y.Icons.MoveLineGuideDistanceV):"y"===f&&(x.center2center||(V=J-=D),b=E*W+_,L=a*W+_,o=Y.Icons.MoveLineGuideDistanceH),Y.Icons.DrawIcon(n,G,o,{x0:b,y0:J,x1:L,y1:V,dis:a-E}))}},L.prototype.clear=function(){this._guideLine=null};((n=Y.Guide.Hover=function(Q){this._interactor=Q}).prototype={}).constructor=n,e.defineProperties(n.prototype,{}),n.prototype._42=function(){var Q,n,x,b=this._interactor;b.getStyle("hoverGuideVisible")&&!b.gvEditing&&(Q=b.hoverData,x=b.gv,!v(Q)||x.isSelected(Q)?b.hoverData=null:(Q=$G(x,Q),n=Y.toScreenPosition(x,{x:Q.x,y:Q.y}),x=Y.toScreenPosition(x,{x:Q.x+Q.width,y:Q.y+Q.height}),Y.Icons.DrawIcon(b,b._context,Y.Icons.HoverDataRect,{min:n,max:x,color:b.getStyle("hoverGuideColor")||b.getStyle("baseColor"),borderWidth:b.getStyle("hoverGuideBorderWidth")||1,borderPattern:b.getStyle("hoverGuideBorderPattern")||[1,4]})))},Y.DefaultStyleMap={baseColor:"rgb(51,153,255)",pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,moveDummyThreshold:32,moveDummyPosition:[0,0,-16,-16],moveDummyLineExtraShift:[-32,0],moveDummySensitivity:16,keepAspectRatio:!1,rotateRound:Math.PI/2,shiftRotateRound:Math.PI/12,rotateSensitivity:Math.PI/60,rotateAsClock:!1,rotateTipVisible:!0,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideThreshold:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,edgeHostEdgeMaxDistance:12,edgeHostEdgeHighlighColor:"#5d5d5d",edgeHostPointHighlighColor:"red",edgeHostHighlighPeriod:1500,edgeElevationEditable:!1,attachThreshold:25,guideLineVisible:!0,guideLineTextSpacing:0,hoverGuideVisible:!1,hoverGuideColor:null,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:null,shapeCtrlPointHighlightBorder:null,shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],curveTipVisible:!0,connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var J=Y.Icons={},OE=null,dE=Y.DefaultStyleMap.baseColor,hE="rgb(255,204,153)",pE=(d.Default.setImage("Icons.RectPoint",{width:6,height:6,comps:[{type:"rect",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return dE}},rect:[0,0,6,6]}]}),J.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){if(!(n=J.GroupSubEntityRect.data))return[];var Q=n.min,n=n.max;return[Q.x,Q.y,Q.x,n.y,n.x,n.y,n.x,Q.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return J.GroupSubEntityRect.data.isKeyOb,dE}}}]},J.HoverDataRect={comps:[{type:"shape",points:{func:function(){if(!(n=J.HoverDataRect.data))return[];var Q=n.min,n=n.max;return Q.x-=4,Q.y-=4,n.x+=4,n.y+=4,[Q.x,Q.y,Q.x,n.y,n.x,n.y,n.x,Q.y]}},segments:[1,2,2,2,5],background:null,borderWidth:{func:function(){return J.HoverDataRect.data.borderWidth}},borderColor:{func:function(){return J.HoverDataRect.data.color}},borderCap:"butt",borderPattern:{func:function(){return J.HoverDataRect.data.borderPattern}}}]},J.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[J.Line.data.P1.x,J.Line.data.P1.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[J.Line.data.P2.x,J.Line.data.P2.y],6,6]}}}]},J.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return J.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},J.Rect={comps:[{type:"shape",points:{func:function(){if(!(b=J.Rect.data))return[];var Q=b.LT,n=b.LB,x=b.RB,b=b.RT;return[Q.x,Q.y,n.x,n.y,x.x,x.y,b.x,b.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return dE}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},rect:{func:function(){return[[J.Rect.data.LT.x,J.Rect.data.LT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},rect:{func:function(){return[[J.Rect.data.LB.x,J.Rect.data.LB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},rect:{func:function(){return[[J.Rect.data.RB.x,J.Rect.data.RB.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},rect:{func:function(){return[[J.Rect.data.RT.x,J.Rect.data.RT.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},visible:{func:function(){return!!J.Rect.data.L}},rect:{func:function(){return[[J.Rect.data.L.x,J.Rect.data.L.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},visible:{func:function(){return!!J.Rect.data.R}},rect:{func:function(){return[[J.Rect.data.R.x,J.Rect.data.R.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},visible:{func:function(){return!!J.Rect.data.T}},rect:{func:function(){return[[J.Rect.data.T.x,J.Rect.data.T.y],6,6]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return J.Rect.data.rotation}},visible:{func:function(){return!!J.Rect.data.B}},rect:{func:function(){return[[J.Rect.data.B.x,J.Rect.data.B.y],6,6]}}}]},d.Default.setImage("Icons.Anchor",{width:12,height:12,comps:[{type:"shape",borderWidth:1,borderColor:{func:function(){return dE}},borderCap:"round",shadowColor:"#1ABC9C",points:[.50928,6,11.49072,6,6,6,6,.50928,6,11.49072]},{type:"circle",borderWidth:1,borderColor:{func:function(){return dE}},shadowColor:"#1ABC9C",rect:[2.84391,2.84391,6.53697,6.53697]}]}),J.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[J.Anchor.data.POS.x,J.Anchor.data.POS.y],16,16]}}}]},J.TipShiftX=12,J.TipShiftY=12,[8,28]);J.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[J.TipHelper.data.helperPos.x,J.TipHelper.data.helperPos.y,pE[0]*J.TipHelper.data.size,pE[1]]}},background:{func:function(){return OE.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return J.TipHelper.data.text}},rect:{func:function(){return[J.TipHelper.data.helperPos.x,J.TipHelper.data.helperPos.y,pE[0]*J.TipHelper.data.size,pE[1]]}},color:{func:function(){return OE.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]},J.ShapePoint={comps:[{type:"circle",visible:{func:function(){return!!J.ShapePoint.data.dynamicVisible}},rect:{func:function(){var Q=J.ShapePoint.data.point,n=J.ShapePoint.data.size||7;return[Q,n+10,n+10]}},background:{func:function(){var Q=Date.now(),n=J.ShapePoint.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.5*Math.sin(Q%n/n*Math.PI)+")"}},borderWidth:0},{type:"circle",rect:{func:function(){var Q=J.ShapePoint.data.point,n=J.ShapePoint.data.size||7;return[Q,n,n]}},background:{func:function(){return J.ShapePoint.data.isEnd?"rgba(27,124,222,0.7)":"#ffffff"}},borderWidth:1,borderColor:{func:function(){return J.ShapePoint.data.color||dE}}},{type:"rect",visible:{func:function(){return!!J.ShapePoint.data.dynamicVisible}},background:"red",borderWidth:0,rotation:Math.PI/4,borderColor:{func:function(){return dE}},rect:{func:function(){return[J.ShapePoint.data.point,5,5]}}}]},J.ShapeBgCurve={comps:[{type:"shape",visible:{func:function(){return!!J.ShapeBgCurve.data.dynamicVisible}},points:{func:function(){return J.ShapeBgCurve.data.P}},segments:{func:function(){return J.ShapeBgCurve.data.S}},background:null,borderWidth:6,borderColor:{func:function(){var Q=Date.now(),n=J.ShapeBgCurve.data.dynamicPeriod||1500;return"rgba(27,124,22,"+.3*Math.sin(Q%n/n*Math.PI)+")"}}},{type:"shape",points:{func:function(){return J.ShapeBgCurve.data.P}},segments:{func:function(){return J.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:{func:function(){return J.ShapeBgCurve.data.color||dE}}}]},J.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var Q=J.ShapeHighlighPoint.data;return[[Q.x,Q.y],8,8]}},background:{func:function(){return OE.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]},J.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var Q=J.ShapeHighlighRealPoint.data;return[[Q.x,Q.y],10,10]}},background:"#ffffff",borderWidth:2,borderColor:{func:function(){return dE}}}]},J.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var Q=J.ShapeHighlighCtrlPoint.data,n=Q.x;return[n-4,(Q=Q.y)-4,n-4,Q+4,n+4,Q+4,n+4,Q-4]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return OE.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return OE.getStyle("shapeCtrlPointBorderColor")||dE}}}]},J.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return J.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:3,borderColor:{func:function(){return OE.getStyle("curveHighlightColor")}}}]},J.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return J.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"rgb(255,204,153)"}]},J.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return J.MoveLineGuide.data.rect}},background:null,borderWidth:1,borderColor:{func:function(){return J.MoveLineGuide.data.center?"rgb(183,232,135)":hE}}}]},J.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var Q=J.MoveLineGuideDistanceH.data,n=Q.x0;return[n,(Q=Q.y0)-5,n,Q+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:hE},{type:"shape",points:{func:function(){var Q=J.MoveLineGuideDistanceH.data,n=Q.x1;return[n,(Q=Q.y1)-5,n,Q+5]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:hE},{type:"text",text:{func:function(){return Math.round(J.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var Q=J.MoveLineGuideDistanceH.data;return[[(Q.x0+Q.x1)/2,Q.y0-10],20,20]}},color:hE,font:"12px Arial",align:"center"}]},J.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var Q=J.MoveLineGuideDistanceV.data,n=Q.x0;return[n-5,Q=Q.y0,n+5,Q]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:hE},{type:"shape",points:{func:function(){var Q=J.MoveLineGuideDistanceV.data,n=Q.x1;return[n-5,Q=Q.y1,n+5,Q]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:hE},{type:"text",text:{func:function(){return Math.round(J.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var Q=J.MoveLineGuideDistanceV.data;return[[Q.x0-10,(Q.y0+Q.y1)/2],20,20]}},color:hE,font:"12px Arial",align:"center"}]},d.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),J.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var Q=(n=J.EdgeElevationGuide.data).x,n=n.y,x=OE.getStyle("curveElevationIntersectSize"),b=OE.getStyle("curveElevationGuideShift");return[(Q+=b[0])-x,(n+=b[1])-x,2*x,2*x]}}}]},d.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),d.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),J.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return J.ConnectGuide.data.rotation}},rect:{func:function(){var Q=J.ConnectGuide.data.connect,n=(Q.x,Q.y,OE.getStyle("connectGuideIntersectSize"));return[[Q.x,Q.y],2*n,2*n]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var Q=J.ConnectGuide.data.cursorPos||J.ConnectGuide.data.connect,n=OE.getStyle("connectGuideIntersectSize");return[[Q.x,Q.y],2*n-2,2*n-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var Q=J.ConnectGuide.data.connect,n=J.ConnectGuide.data.cursorPos||Q;return[Q.x,Q.y,Q.x+.5*(n.x-Q.x),Q.y,n.x+.5*(Q.x-n.x),n.y,n.x,n.y]}}}]},d.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),d.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),J.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){return J.ConnectGuideGarbage.data.hover?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var Q=J.ConnectGuideGarbage.data,n=OE.getStyle("connectGuideGarbageIntersectsize");return Q.hover&&(n+=5),[[Q.x,Q.y],2*n,2*n]}}}]},J.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return!!J.ShapeActivingCtrl.data.c1}},points:{func:function(){var Q=J.ShapeActivingCtrl.data;return[Q.point.x,Q.point.y,Q.c1.x,Q.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return dE}}},{type:"shape",visible:{func:function(){return!!J.ShapeActivingCtrl.data.c2}},points:{func:function(){var Q=J.ShapeActivingCtrl.data;return[Q.point.x,Q.point.y,Q.c2.x,Q.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return dE}}},{type:"shape",visible:{func:function(){return!!J.ShapeActivingCtrl.data.c1}},points:{func:function(){var Q=(n=J.ShapeActivingCtrl.data.c1).x,n=n.y,x=3;return"c1"===J.ShapeActivingCtrl.data.hl&&(x+=.5),[Q-x,n-x,Q-x,n+x,Q+x,n+x,Q+x,n-x]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return OE.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===J.ShapeActivingCtrl.data.hl?OE.getStyle("shapeCtrlPointHighlightBorder")||dE:OE.getStyle("shapeCtrlPointBorderColor")||dE}}},{type:"shape",visible:{func:function(){return!!J.ShapeActivingCtrl.data.c2}},points:{func:function(){var Q=(n=J.ShapeActivingCtrl.data.c2).x,n=n.y,x=3;return"c2"===J.ShapeActivingCtrl.data.hl&&(x+=.5),[Q-x,n-x,Q-x,n+x,Q+x,n+x,Q+x,n-x]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return OE.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c2"===J.ShapeActivingCtrl.data.hl?OE.getStyle("shapeCtrlPointHighlightBorder")||dE:OE.getStyle("shapeCtrlPointBorderColor")||dE}}}]},J.RoundPoint={comps:[{type:"circle",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return dE}},rect:{func:function(){return[[J.RoundPoint.data.x,J.RoundPoint.data.y],6,6]}}}]},J.AttachPoint={comps:[{type:"rect",background:{func:function(){return J.AttachPoint.data.isAttach?"rgb(51,153,255)":"rgb(247,247,247)"}},borderWidth:1,rotation:Math.PI/4,borderColor:{func:function(){return dE}},rect:{func:function(){var Q=J.AttachPoint.data.isAttach?10:6;return[[J.AttachPoint.data.x,J.AttachPoint.data.y],Q,Q]}}}]},J.SimpleRect={comps:[{type:"rect",background:null,borderWidth:{func:function(){return J.SimpleRect.data.borderWidth||1}},borderColor:{func:function(){return J.SimpleRect.data.color||dE}},rect:{func:function(){var Q=J.SimpleRect.data;return[Q.x,Q.y,Q.width,Q.height]}}}]},d.Default.setImage("Icons.MoveDummyImage",{width:32,height:32,boundExtend:12,attachStyle:"close",comps:[{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",shadow:!0,shadowColor:"rgba(0,0,0,0.25)",shadowOffsetX:0,rect:[0,0,32,32]},{type:"shape",background:"rgb(51,153,255)",pixelPerfect:!0,points:[8.65079,11.90713,9.05502,11.46921,9.70629,11.46921,10.11052,11.90713,10.51476,12.28891,10.51476,12.92895,10.11052,13.34441,8.49359,14.97258,12.2889,14.97258,12.85034,14.97258,13.29949,15.42172,13.29949,15.99439,13.29949,16.57828,12.85034,17.0162,12.2889,17.0162,8.49359,17.0162,10.11052,18.6556,10.51476,19.0486,10.51476,19.7111,10.11052,20.09288,9.70629,20.50834,9.05502,20.50834,8.65079,20.09288,5.32709,16.76917,5.28217,16.71303,4.87794,16.32002,4.87794,15.67998,5.28217,15.26452,8.65079,11.90713,8.65079,11.90713,8.65079,11.90713,13.3444,10.09931,13.3444,10.09931,12.94017,10.50354,12.2889,10.50354,11.88467,10.09931,11.48043,9.69507,11.48043,9.0438,11.88467,8.63957,15.27574,5.25973,15.66874,4.86672,16.32001,4.86672,16.73547,5.25973,16.76917,5.31586,20.10409,8.63957,20.50832,9.0438,20.50832,9.68385,20.10409,10.09931,19.69986,10.49231,19.07105,10.50354,18.64436,10.09931,17.02742,8.45991,17.02742,12.26646,17.02742,12.83912,16.55581,13.31072,15.99438,13.31072,15.43295,13.31072,14.98379,12.83912,14.98379,12.26646,14.96134,8.45991,13.3444,10.09931,13.3444,10.09931,13.3444,10.09931,21.90069,13.33318,21.90069,13.33318,21.49646,12.91771,21.49646,12.27768,21.90069,11.89591,22.31615,11.45798,22.94497,11.45798,23.36043,11.89591,26.72904,15.2533,27.12205,15.66876,27.12205,16.3088,26.72904,16.7018,26.6729,16.75794,23.36043,20.08165,22.94497,20.49711,22.31615,20.49711,21.90069,20.08165,21.49646,19.69987,21.49646,19.03737,21.90069,18.64437,23.51763,17.00498,19.72231,17.00498,19.14965,17.00498,18.71173,16.56705,18.71173,15.98316,18.71173,15.41049,19.14965,14.96135,19.72231,14.96135,23.51763,14.96135,21.90069,13.33318,21.90069,13.33318,21.90069,13.33318,11.88467,23.32675,11.88467,23.32675,11.48043,22.94498,11.48043,22.27125,11.88467,21.88948,12.2889,21.48523,12.94017,21.48523,13.3444,21.88948,14.96134,23.52887,14.98379,19.7111,14.98379,19.14966,15.43295,18.67805,15.99438,18.67805,16.55581,18.67805,17.02742,19.14966,17.02742,19.7111,17.02742,23.52887,18.64436,21.88948,19.07105,21.48523,19.69986,21.48523,20.10409,21.88948,20.50832,22.27125,20.50832,22.94498,20.10409,23.32675,16.76917,26.65045,16.73547,26.72905,16.32001,27.13329,15.66874,27.13329,15.27574,26.72905,11.88467,23.32675,11.88467,23.32675,11.88467,23.32675],segments:[1,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2]}]}),J.MoveDummy={comps:[{type:"image",name:"Icons.MoveDummyImage",rect:{func:function(){var Q=J.MoveDummy.data;return[[Q.pos.x,Q.pos.y],2*Q.size,2*Q.size]}}}]},Y.Icons.DrawIcon=function(Q,n,x,b){x.width=x.height=1e4,x.data=b,OE=Q,d.Default.drawImage(n,x,0,0,1e4,1e4),OE=n5},Y.Icons.MapPoints=function(Q,n){for(var x=0,b=Q.length;x<b;x++)Q[x]/=n},Y.roundTo=function(Q,n,x){var b=Math.abs(Q%n);return b<x||n-b<x?n*Math.round(Q/n):Q},Y.toFixed=function(Q){return Math.round(100*Q)/100},Y.getDataMatrix=function(Q){var n,x;return Q instanceof d.Shape?(n=new d.Math.Matrix2d,x=Q.getPosition(),n.translate(-x.x,-x.y).scale(Q.getScale().x,Q.getScale().y).rotate(Q.getRotation()).translate(x.x,x.y),n):Q.getMatrix?Q.getMatrix():new d.Math.Matrix2d},(((Q=Y.Math.Curve=function(){this._curves=[]}).prototype={}).constructor=Q).prototype.createFromHtShape=function(n,Q,x){Q instanceof d.List&&(Q=Q.toArray());for(var b,J,L,f,V=null,l=null,H=0,I=Y.Math.Vector2,Z=Y.Math.CubicBezier,E=function(Q){return new I(n[Q],n[Q+1],x?x[Q/2]:n5)},a=0,o=Q.length;a<o;a++){switch(J=null,Q[a]){case 1:V=l=E(H),H+=2;break;case 2:b=E(H),H+=2,J=new Z(l,l.clone(),b.clone(),b),l=b;break;case 3:L=E(H),b=E(H+2),H+=4,J=new Z(l,L.clone().sub(l).multiplyScalar(2/3).add(l),L.clone().sub(b).multiplyScalar(2/3).add(b),b),l=b;break;case 4:L=E(H),f=E(H+2),b=E(H+4),H+=6,J=new Z(l,L,f,b),l=b;break;case 5:if(!V)break;J=new Z(l,l.clone(),V.clone(),V),V=l=null}J&&(J._index=this._curves.length,this._curves.push(J))}},Q.prototype.checkPoint=function(Q,n){for(var x,b,J,L=this._curves,f=0,V=L.length;f<V;f++)if((J=(b=L[f]).intersectRect(Q,n,n)).length)return x=0,J.forEach(function(Q){x+=Q.t}),x/=J.length,(Q=b.getPointAt(x)).t=x,{bezier:b,intersection:Q}},Q.prototype.insertKnot=function(Q,n){n=Q.insertKnot(n),this._curves.splice(Q._index,1,n[0],n[1])},Q.prototype._isCloseEnough=function(Q,n){return Math.abs(Q.x-n.x)<1e-6&&Math.abs(Q.y-n.y)<1e-6},Q.prototype._isSamePoint=function(Q,n){return Q===n},Q.prototype.moveRealPoint=function(b,J){var L=this,Q=L._curves,f=J.clone().sub(b);Q.forEach(function(Q){var n=Q._p1,x=(Q._p2,Q._p3,Q._p4);L._isSamePoint(n,b)&&(Q._p2.add(f),Q._p1=J),L._isSamePoint(x,b)&&(Q._p3.add(f),Q._p4=J)})},Q.prototype.moveCtrlDueToRealPointMovement=function(b,n){function J(Q){Q.add(n),Q.e&&n.e&&(Q.e+=n.e)}var L=this;L._curves.forEach(function(Q){var n=Q._p1,x=(Q._p2,Q._p3,Q._p4);L._isSamePoint(n,b)&&J(Q._p2),L._isSamePoint(x,b)&&J(Q._p3)})},Q.prototype.moveCtrlPoint=function(Q,x,b){var J,n,L=Q[b];L&&(L.e!==n5&&(x.e=L.e),n=(J=this)._curves,x.clone().sub(L),n.forEach(function(Q){var n;"c2"===b?n="_p2":"c1"===b&&(n="_p3"),J._isSamePoint(Q[n],L)&&(Q[n]=x)}),Q[b]=x)},Q.prototype.deleteRealPoint=function(Q,n){for(var x,b,J,L,f=this._curves,V={},l=[],H=Y.Math.CubicBezier,I=0,Z=f.length;I<Z;I++)b=(x=f[I])._p1,J=x._p2,x._p3,L=x._p4,!V[I]&&this._isSamePoint(b,Q)||(this._isSamePoint(L,Q)?I+1<Z&&this._isSamePoint(f[I+1]._p1,Q)&&(n||l.push(new H(b,J,f[I+1]._p3,f[I+1]._p4))):l.push(x));this._curves=l},Q.prototype.findPairs=function(Q,n){for(var x,b,J,L,f=this._curves,V={},l=[],H=0,I=f.length;H<I;H++)x=(J=f[H])._p1,L=J._p2,b=J._p3,J=J._p4,!V[H]&&this._isSamePoint(x,Q)&&(n?l.push({point:x,r2:J}):l.push({point:x,c2:L})),this._isSamePoint(J,Q)&&(L=n?{point:J,r1:x}:{point:J,c1:b},H+1<I&&this._isSamePoint(f[H+1]._p1,Q)&&(n?L.r2=f[H+1]._p4:L.c2=f[H+1]._p2,V[H+1]=!0),l.push(L));return l},Q.prototype.toHtShape=function(){var J=this,Q=J._curves,L=[],f=[],V={x:1/0,y:1/0};return Q.forEach(function(Q){var n=Q._p1,x=Q._p2,b=Q._p3,Q=Q._p4;if(J._isCloseEnough(n,V)||(L.push(1),f.push(n.clone())),V=Q,J._isCloseEnough(n,x)&&J._isCloseEnough(b,Q))return L.push(2),void f.push(Q.clone());L.push(4),f.push(x.clone(),b.clone(),Q.clone())}),{segments:L,points:f}};(x=Y.Math.CubicBezier=function(Q,n,x,b){this._id=Y.Math.CubicBezier._globalId++,this._p1=Q,this._p2=n,this._p3=x,this._p4=b})._globalId=1,((x.prototype={}).constructor=x).prototype.toString=function(){return this._id},x.prototype.intersectRect=function(Q,n,x){var n=n/2,x=x/2,b=Q.x,Q=Q.y,J=new(L=Y.Math.Vector2)(-n+b,-x+Q),n=new L(n+b,x+Q),b=new L(n.x,J.y),x=new L(J.x,n.y),Q=this.intersectLine(J,b),L=this.intersectLine(b,n),b=this.intersectLine(n,x),n=this.intersectLine(x,J);return Q.concat(L).concat(b).concat(n)},x.prototype.intersectLine=function(Q,n){var x=Q.clone().min(n),b=Q.clone().max(n),J=this._p1,L=this._p2,f=this._p3,V=this._p4,l=J.clone().multiplyScalar(-1),H=L.clone().multiplyScalar(3),I=f.clone().multiplyScalar(-3),V=l.add(H).add(I).add(V);l=J.clone().multiplyScalar(3),H=L.clone().multiplyScalar(-6),I=f.clone().multiplyScalar(3),f=l.add(H).add(I),l=J.clone().multiplyScalar(-3),H=L.clone().multiplyScalar(3);for(var I=l.add(H),L=J.clone(),l=new Y.Math.Vector2(Q.y-n.y,n.x-Q.x),H=Q.x*n.y-n.x*Q.y,Z=this.getRoots(l.dot(V),l.dot(f),l.dot(I),l.dot(L)+H),E=new Array,a=0,o=Z.length;a<o;a++){var B,G=Z[a];G<0||1<G||((B=this.getPointAt(G)).t=G,Q.x==n.x?x.y<=B.y&&B.y<=b.y&&E.push(B):Q.y==n.y?x.x<=B.x&&B.x<=b.x&&E.push(B):B.x>=x.x&&B.y>=x.y&&B.x<=b.x&&B.y<=b.y&&E.push(B))}return E},x.prototype.solveTForPoint=function(Q){for(var n=this._p1.x-Q.x,x=this._p2.x-Q.x,b=this._p3.x-Q.x,J=this._p4.x-Q.x,L=this.getRoots(J-3*b+3*x-n,3*b-6*x+3*n,3*x-3*n,n),f=n5,V=1/0,l=0,H=L.length;l<H;l++){var I,Z=L[l];Z<0||1<Z||((I=this.getPointAt(Z)).t=Z,(Z=Math.abs(I.y-Q.y))<V&&(V=Z,f=I))}return f},x.prototype.getPointAt=function(Q){var n=this._p1,x=this._p2,b=this._p3,J=this._p4,n=n.clone().lerp(x,Q),x=x.clone().lerp(b,Q),b=b.clone().lerp(J,Q),J=n.lerp(x,Q),n=x.lerp(b,Q);return J.lerp(n,Q)},x.prototype.getPointByPercentage=function(Q){var n=this.length*Q,x=this._cacheLength,b=x.length;if(0==n)return x[0].point;if(1<=Q)return x[b-1].point;for(var J=0;J<b;J++){var L,f=x[J];if(!(f.len<n))return L=x[J-1],f.point.clone().sub(L.point).setLength(n-L.len).add(L.point)}},x.prototype.getTByPercentage=function(Q){var n=this.length*Q,x=this._cacheLength,b=x.length;if(0==n||Q<=0)return x[0].t;if(1<=Q)return x[b-1].t;for(var J=0;J<b;J++){var L,f=x[J];if(!(f.len<n))return(n-(L=x[J-1]).len)/(f.len-L.len)*(f.t-L.t)+L.t}},x.prototype.getRoots=function(Q,n,x,b){var J,L,f,V,l=new Array,H=(Math.abs(Q)<1e-6&&(0<(H=(J=x/(f=n))*J-b/f*4)?(L=Math.sqrt(H),l.push(.5*(-J+L)),l.push(.5*(-J-L))):0==H&&l.push(.5*-J)),(n/=Q)/3),Q=(J=(2*n*n*n-9*(x/=Q)*n+27*(b/=Q))/27)*J/4+(f=(3*x-n*n)/3)*f*f/27,b=J/2;return 0<(Q=Math.abs(Q)<=1e-6?0:Q)?(x=0<=(V=-b+(L=Math.sqrt(Q)))?Math.pow(V,1/3):-Math.pow(-V,1/3),0<=(V=-b-L)?x+=Math.pow(V,1/3):x-=Math.pow(-V,1/3),l.push(x-H)):Q<0?(n=Math.sqrt(-f/3),J=Math.atan2(Math.sqrt(-Q),-b)/3,L=Math.cos(J),x=Math.sin(J),f=Math.sqrt(3),l.push(2*n*L-H),l.push(-n*(L+f*x)-H),l.push(-n*(L-f*x)-H)):(V=0<=b?-Math.pow(b,1/3):Math.pow(-b,1/3),l.push(2*V-H),l.push(-V-H)),l},x.prototype._70I=function(){return this._p1.distanceToSquared(this._p2)<1e-10&&this._p3.distanceToSquared(this._p4)<1e-10},x.prototype.insertKnot=function(Q){var n=this._p1,x=this._p2,b=this._p3,J=this._p4,L=n.clone().lerp(x,Q),x=x.clone().lerp(b,Q),b=b.clone().lerp(J,Q),f=L.clone().lerp(x,Q),x=x.clone().lerp(b,Q),V=f.clone().lerp(x,Q);return this._70I()?(n.clone().lerp(J,Q),[new Y.Math.CubicBezier(n,n.clone(),V.clone(),V),new Y.Math.CubicBezier(V,V.clone(),J.clone(),J)]):[new Y.Math.CubicBezier(n,L,f,V),new Y.Math.CubicBezier(V,x,b,J)]},e.defineProperties(x.prototype,{length:{get:function(){if(!(Q=this._cacheLength))for(var Q=this._cacheLength=[],n=this._p1,x=0,b=0;x<=1;){var J=this.getPointAt(x+=.001);b+=J.clone().sub(n).length(),Q.push({len:b,t:x,point:(n=J).clone()})}return Q[Q.length-1].len}},p1:{get:function(){return this._p1},set:function(Q){this._p1=Q,this._cacheLength=n5}},p2:{get:function(){return this._p2},set:function(Q){this._p2=Q,this._cacheLength=n5}},p3:{get:function(){return this._p3},set:function(Q){this._p3=Q,this._cacheLength=n5}},p4:{get:function(){return this._p4},set:function(Q){this._p4=Q,this._cacheLength=n5}}});var zE,sE,XE,RE,ZE=d.Default.getInternal().ui().EdgeUI,gE={_47O:function(Q){var n=gE.getBackups()._47O;Y.inEdit(this.gv)||n.call(this,Q)}},IE=(Y.Inject.registAsModule(gE,ZE),d.Default.getInternal().ui().NodeUI),SE={_47O:function(Q){var n=SE.getBackups()._47O;Y.inEdit(this.gv)||n.call(this,Q)},getSelectWidth:function(){var Q=this.gv,n=this._data;return Q.isEditable(n)&&Y.inEdit(Q)?0:SE.getBackup("getSelectWidth").call(this)}},mE=(Y.Inject.registAsModule(SE,IE),d.graph.GraphView),YE={_editPointSize:(n=d.Default.isTouchable,Y.getStyle("pointSize")[n?0:1]),isPointEditable:function(Q){if(Y.inEdit(this))return!this._pointEditableFunc||this._pointEditableFunc(Q);YE.getBackup("isPointEditable").call(this,Q)},isEditable:function(Q){var n=YE.getBackup("isEditable"),n=Q instanceof Y.Group||n.call(this,Q);return Y.inEdit(this)&&Q instanceof d.Edge?!!Q.s("2d.editable")&&(!(n=this.getEditableFunc())||n(Q)):n},_42:function(Q,n){YE.getBackups()._42.call(this,Q,n),Y.inEdit(this)&&this.getEditInteractor().drawImpl()}},BE=(Y.Inject.registAsModule(YE,mE),d.Default.getInternal().ui().ShapeUI),TE={_47O:function(Q){var n=TE.getBackups()._47O;Y.inEdit(this.gv)||n.call(this,Q)}},rE=(Y.Inject.registAsModule(TE,BE),d.graph.DefaultInteractor),kE={handle_mousewheel:function(Q){var n=kE.getBackup("handle_mousewheel");Y.inEdit(this.gv)||n.call(this,Q)}},cE=(Y.Inject.registAsModule(kE,rE),d.graph.MoveInteractor),NE={_calcShift:function(Q,n){var x=NE.getBackup("_calcShift"),b=this.gv;return Y.inEdit(b)&&b.getEditInteractor().getSubModule("Move").calcShift(Q,n,this)||x.call(this,Q,n)},clear:function(Q){NE.getBackup("clear").call(this,Q);var n=this.gv;Y.inEdit(n)&&n.getEditInteractor().getSubModule("Move").clear(Q)}};Y.Inject.registAsModule(NE,cE),(((L=Y.Rect=function(Q){this.catalog="Rect",this._interactor=Q}).prototype={}).constructor=L).prototype.gatherInfo=function(Q,n){var x;return 1===n.length?(x=n[0])instanceof d.Shape&&x._70I()?this.gatherLine(Q,x):!a_(x,Q)&&this.gatherSingleTarget(Q,x):1<n.length&&this.gatherMultiTargets(Q,n)},L.prototype.gatherSingleTarget=function(Q,n){if(n.getCorners){var x,b,J=this.info,L=(this.target=n,x=this.screenInfo={},n.getCorners());for(b in J.LT=new Y.Math.Vector2(L[0]),J.LB=new Y.Math.Vector2(L[1]),J.RB=new Y.Math.Vector2(L[2]),J.RT=new Y.Math.Vector2(L[3]),J.T=J.LT.clone().add(J.RT).divideScalar(2),J.B=J.LB.clone().add(J.RB).divideScalar(2),J.L=J.LT.clone().add(J.LB).divideScalar(2),J.R=J.RT.clone().add(J.RB).divideScalar(2),J)x[b]=Y.toScreenPosition(Q,J[b]);var f=this._interactor.getStyle("checkSize");return x.rotLT=(L=function(Q,n,x){return n=n.clone().sub(Q).setLength(-f),x=x.clone().sub(Q).setLength(-f),n.add(x).add(Q)})(x.LT,x.RT,x.LB),x.rotLB=L(x.LB,x.LT,x.RB),x.rotRB=L(x.RB,x.LB,x.RT),x.rotRT=L(x.RT,x.LT,x.RB),x.rotT=x.rotLT.clone().add(x.rotRT).divideScalar(2),x.rotB=x.rotLB.clone().add(x.rotRB).divideScalar(2),x.rotL=x.rotLT.clone().add(x.rotLB).divideScalar(2),x.rotR=x.rotRT.clone().add(x.rotRB).divideScalar(2),x.rotation=n.getRotation(),this.gatherConnectInfo(),!0}},L.prototype.gatherConnectInfo=function(){var Q,n,x=this.target,b=this._interactor,J=this.screenInfo,L=b.gv;L.isConnectActionVisible(x)&&b.getStyle("connectGuideVisible")&&(Q=(Q=x.s?x.s("connectGuideShift"):Q)||b.getStyle("connectGuideShift"),b=x.getAnchor(),n=x.getSize(),x=x.toGlobal({x:n.width*(Q[0]-b.x),y:n.height*(Q[1]-b.y)}),x=Y.toScreenPosition(L,x),J.P1?x.add(J.P2.clone().sub(J.P1).setLength(Q[2])):(x.add(J.RT.clone().sub(J.LT).setLength(Q[2])),x.add(J.LB.clone().sub(J.LT).setLength(Q[3]))),J.connect=x)},L.prototype.gatherMultiTargets=function(Q,n){return!!(n=Y.Group.findOrCreateGroup(n,this._interactor._uuid))&&(this.editing&&"rotate"!==this.editing.mode||n.calcInfo(),this.gatherSingleTarget(Q,n))},L.prototype.gatherLine=function(Q,n){this.target=n;var x=this.screenInfo={},b=n.getPoints(),n=Y.getDataMatrix(n);return x.P1=Y.toScreenPosition(Q,n.apply(b.get(0))),x.P2=Y.toScreenPosition(Q,n.apply(b.get(1))),this.gatherConnectInfo(),!0},L.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],L.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],L.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],L.prototype.check=function(Q,n,x){if(d.Default.isLeftButton(n)){var b=this;if(b.editing=null,b.tipInfo=null,b.screenInfo){var J=b.target,L=Q.isEditable(J),f=b.screenInfo;if(L&&f.connect)if(H=b._checkConnect(x))return H;if(f.P1)return b._checkLine(x);var V,l,H,I=null,Z=(H=b._interactor).getStyle("checkSize");if(L&&Q.isRectEditable(J))for(a=0;a<Y.Rect.ResizeKeys.length;a++)if(l=Y.Rect.ResizeKeys[a],Y.checkHit(x,f[l],Z)){I=l,V="resize";break}if(!I&&L&&Q.isRotationEditable(J)&&!H.getStyle("rotateAsClock"))for(var E=H.getStyle("rotateCheckSize"),a=0;a<Y.Rect.RotateKeys.length;a++)if(l=Y.Rect.RotateKeys[a],Y.checkHit(x,f[l],E)){I=l,V="rotate";break}if(I){if("rotate"===V){if(L=Q.lp(n),J instanceof Y.Group){for(var o=H.getStyle("groupRotateModeKey"),B=!1,G=0,_=(o="string"==typeof o?[o]:o).length;G<_;G++)if(n[o[G]]){B=!0;break}var Q=H.getStyle("groupRotateModeDefault"),$=B?"batch"===Q?"block":"batch":Q}Q="batch"===$?J.getAnchor2():J.getPosition(),L=Math.atan2(L.y-Q.y,L.x-Q.x),H._setRotateCursor(L),b.editing={mode:V,key:I,pos:Q,flipY:J.getScale().y<0,rotation:J.getRotation(),hitRot:L},$&&(b.editing.groupRotateMode=$)}else{var Q=Y.Rect.ResizeKeys.indexOf(I),L=Y.Rect.ResizeDirection[Q],$=Math.cos(J.getRotation()),Q=Math.sin(J.getRotation()),W=L.x*Math.sign(J.getScale().x),L=L.y*Math.sign(J.getScale().y),$=Math.atan2(-Q*W-$*L,$*W-Q*L),W=(Math.round($/(Math.PI/4))+8)%8,Q=(this._interactor.setCursor(["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][W]),J.getWidth()),L=J.getHeight(),$=J.getAnchor();b.editing={mode:V,key:I,rect:{x:-Q*$.x,y:-L*$.y,width:Q,height:L},anchor:$,matrix:J.getMatrix()}}return I}H.setCursor("default")}}},L.prototype._checkLine=function(Q){this.screenInfo;var n,x=this._interactor.getStyle("checkSize");if(Y.checkHit(Q,this.screenInfo.P1,x))n="P1";else{if(!Y.checkHit(Q,this.screenInfo.P2,x))return void this._interactor.setCursor("default");n="P2"}return this.editing={mode:"line",key:n},n},L.prototype._checkConnect=function(Q){var n,x,b=this.screenInfo,J=this._interactor,L=J.getStyle("connectGuideIntersectSize"),b=b.connect,f=Q.x,V=b.x;if(f<V&&V-f<L&&Math.abs(b.y-Q.y)<L||V<=f&&Y.checkHit(Q,b,L))return n=b5.getConnectAction(J.gv),this.editing={mode:"connect"},n&&n.delete&&(this.target instanceof Y.Group?(x=!0,J.gv.sm().getSelection().each(function(Q){n.delete.visible.call(null,J.gv,Q)||(x=!1)}),this.editing.hasDeleteAction=x):n.delete.visible.call(null,J.gv,this.target)&&(this.editing.hasDeleteAction=!0)),J.setCursor("default"),"connect"},L.prototype._fireEditEvent=function(Q,n){var x=this._interactor,b=this.editing;b&&(b="rotate"===(b=b.mode)?"Rotation":"connect"===b?"Connection":"resize"===b?"Rect":b[0].toUpperCase()+b.slice(1),x.fi({kind:Q+"Edit"+b,event:n}))},L.prototype.startEdit=function(Q,n){Q.startDragging(n),this._interactor.fi({kind:"prepareEdit",event:n});var x,b=this.editing,J=this.target;if(b){if(this._fireEditEvent("begin",n),b.started=!0,"rotate"===b.mode)return b.groupRotateMode&&J.beginRotate(b),void Q._42();"connect"===b.mode?b.hasDeleteAction&&(n=Q.gv,x=this._interactor.getStyle("connectGuideGarbageShift"),b.garbageInfo={x:n.getWidth()*x[0]+x[2],y:n.getHeight()*x[1]+x[3],size:this._interactor.getStyle("connectGuideGarbageIntersectsize")},Q._42()):("line"===b.mode||J&&0===J.getRotation())&&(this._inSmartGuide=!0,this._interactor.rectGuide.gatherRects())}},L.prototype._46O=function(Q){var n,x,b=this,J=b.editing,L=b.target;if(J){if("connect"===J.mode&&!J.canceled&&!J.deleted)try{J.garbageInfo&&J.garbageInfo.hover?b5.doDeleteConnectionAction(b._interactor.gv,L):b5.doConnectAction(b._interactor.gv,L,J.target)}catch(Q){console.error(Q)}x=J.freezeFlag,n=b.editing.groupRotateMode,b._fireEditEvent("end",Q),b.editing=null}b.tipInfo=null,b._inSmartGuide&&(b._interactor.rectGuide.clear(),b._inSmartGuide=!1),n&&L&&L.endRotate(),L instanceof d.Block&&(x===n5?delete L._freezeSyncFromChildren:L._freezeSyncFromChildren=x,L.updateFromChildren())},L.prototype.handleNormalStateDelete=function(){var Q=this.editing;if(Q&&"connect"===Q.mode&&!Q.canceled&&!Q.deleted){if(Q.garbageInfo){try{b5.doDeleteConnectionAction(this._interactor.gv,this.target)}catch(Q){console.error(Q)}Q.garbageInfo=null}return Q.cursorPos=null,Q.targetCorners=null,Q.deleted=!0,this._interactor._42(),!0}},L.prototype.handleNormalStateKeyDown=function(Q){var n=this.editing;if(n&&"connect"===n.mode&&!n.canceled&&!n.deleted)return d.Default.isEsc(Q)?(n.cursorPos=null,n.targetCorners=null,n.canceled=!0,this._interactor._42(),!0):void 0},L.prototype.handleEdit=function(n,Q){var x=this,b=x.editing;if(b){var J,L,f=x.target,V=b.key,l=b.mode,H=n.lp(Q),I=x._interactor;if("connect"===l)return b.canceled?void 0:b.deleted?void 0:(b.cursorPos=I._getLogicalPoint(Q),($=b.garbageInfo)&&Y.checkHit(b.cursorPos,$,$.size)?($.hover=!0,b.target=null,b.targetCorners=null):($&&($.hover=!1),b.target=n.getDataAt(H,function(Q){return!!n.isSelectable(Q)&&!!v(Q)})||null,b.targetCorners=Y.getTargetCornersOnScreen(n,b.target)),void I._42());if("rotate"===l){$=b.pos,$=Math.atan2(H.y-$.y,H.x-$.x),W=b.groupRotateMode?$-b.hitRot:(_=$-b.hitRot,b.rotation+_),(W%=2*Math.PI)<0&&(W+=2*Math.PI),d.Default.isCtrlDown(Q)||(o=s7(Q)?(Z=I.getStyle("shiftRotateRound"))/2:(Z=I.getStyle("rotateRound"),I.getStyle("rotateSensitivity")),W=Y.roundTo(W,Z,o)),b.groupRotateMode?0!=(_=W-(b.lastRotation||0))&&(f.addRotation(_,b.groupRotateMode,function(Q){return n.isRotationEditable(Q)}),b.lastRotation=W):f.setRotation(W),I._setRotateCursor($),W>Math.PI&&(W-=2*Math.PI);var Z=(W/Math.PI*180).toFixed(2)+"°"}else if("resize"===l){var E,a,o=b.rect,B=o.x,G=o.y,_=o.width,$=o.height,W=b.anchor,D=b.matrix,A=f.s&&f.s("keepAspectRatio")||I.getStyle("keepAspectRatio"),u=(s7(Q)&&(A=!A),x._unionPointMode1),M=x._unionPointMode2,M=(!x._inSmartGuide||d.Default.isCtrlDown(Q)||A||("L"===V||"R"===V?E="x":"T"!==V&&"B"!==V||(E="y"),x._adsorbedToClosest(H,E),L=!0),t=D.tfi(H),"LT"===V?(o=u(t,{x:B+_,y:G+$},_,$,A),a=9):"T"===V?(o=M({x:B,y:t.y},{x:B+_,y:G+$},_,$,A,"v"),a=1):"RT"===V?(o=u(t,{x:B,y:G+$},_,$,A),a=33):"L"===V?(o=M({x:t.x,y:G},{x:B+_,y:G+$},_,$,A,"h"),a=8):"R"===V?(o=M({x:B,y:G},{x:t.x,y:G+$},_,$,A,"h"),a=32):"LB"===V?(o=u(t,{x:B+_,y:G},_,$,A),a=12):"B"===V?(o=M({x:B,y:G},{x:B+_,y:t.y},_,$,A,"v"),a=4):"RB"===V&&(o=u(t,{x:B,y:G},_,$,A),a=36),D.tf(o.x+o.width*W.x,o.y+o.height*W.y));f instanceof d.Block&&(b.hasOwnProperty("freezeFlag")||(b.freezeFlag=f._freezeSyncFromChildren,f._freezeSyncFromChildren=!0)),f.setPosition(M),f.setSize(o.width,o.height),L&&(J=f.getRect(),I.rectGuide.gatherLines({node:f,x:J.x,y:J.y,w:J.width,h:J.height},E,a)),Z=Math.round(o.width)+" * "+Math.round(o.height)}else if("line"===l){if(s7(Q)){var u=f.getPoints(),t="P1"===V?u.get(1):u.get(0),i=H.x-t.x,r=H.y-t.y,P=I.getStyle("shiftLineRotateRound"),c=x._shiftDirList;if(!c||x._shiftRotateRound!==P){x._shiftRotateRound=P,x._shiftDirList=c=[];for(var F=0;F<Math.PI;F+=P)c.push({x:V5(F),y:f5(F)})}for(var q,w=0,y=0,K=c.length;y<K;y++){var U=c[y],e=U.x*i+U.y*r;Math.abs(e)>Math.abs(w)&&(w=e,q=U)}H={x:t.x+q.x*w,y:t.y+q.y*w},I.rectGuide.clear()}else x._inSmartGuide&&!d.Default.isCtrlDown(Q)&&(x._adsorbedToClosest(H),L=!0);_=Y.getDataMatrix(f).applyInverse(H),f.setPoint("P1"===V?0:1,_,!0),A=($=f.getPoints()).get(0),D=$.get(1),B=A.x-D.x,G=A.y-D.y,Z=" "+Math.round(Math.sqrt(B*B+G*G))+" ",L&&(J=f.getRect(),I.rectGuide.gatherLines({node:f,x:J.x,y:J.y,w:J.width,h:J.height}))}Z&&((W=d.Default.getLogicalPoint(Q,I._canvas)).x+=Y.Icons.TipShiftX,W.y+=Y.Icons.TipShiftY,x.tipInfo={helperPos:W,text:Z,size:Z.length}),x._fireEditEvent("between",Q)}},L.prototype._unionPointMode1=function(Q,n,x,b,J){var L;return J&&x&&b&&(J=Q.x-n.x,L=Q.y-n.y,Math.abs(J*b)<Math.abs(L*x)?(L=Math.sign(L)*Math.abs(J*b/x),Q.y=n.y+L):(J=Math.sign(J)*Math.abs(L*x/b),Q.x=n.x+J)),d.Default.unionPoint(Q,n)},L.prototype._unionPointMode2=function(Q,n,x,b,J,L){var f,Q=d.Default.unionPoint(Q,n);return J&&x&&b&&("v"===L?(f=Q.x+Q.width/2,Q.width=x*Q.height/b,Q.x=f-Q.width/2):(f=Q.y+Q.height/2,Q.height=b*Q.width/x,Q.y=f-Q.height/2)),Q},L.prototype._adsorbedToClosest=function(Q,n){var x=(b=this._interactor).rectGuide.findClosest(Q,n),b=b.gridGuide.findClosest(Q,n),n=1/0,J=1/0;x&&(isFinite(x.x)&&(n=x.x),isFinite(x.y)&&(J=x.y)),b&&(isFinite(b.x)&&Math.abs(b.x)<Math.abs(n)&&(n=b.x),isFinite(b.y)&&Math.abs(b.y)<Math.abs(J)&&(J=b.y)),isFinite(n)&&(Q.x+=n),isFinite(J)&&(Q.y+=J)},L.prototype._42=function(Q,n,x){var b=this,J=(b.info={},b.screenInfo=null,b._interactor);if(!J.editDetail&&b.gatherInfo(n,x)){var L=b.editing,x=L?L.groupRotateMode:null,f=b.screenInfo;if("block"!==x||!L||!L.started){if(f.P1?Y.Icons.DrawIcon(J,Q,Y.Icons.Line,f):Y.Icons.DrawIcon(J,Q,Y.Icons.Rect,f),f.connect&&(Y.Icons.DrawIcon(J,Q,Y.Icons.ConnectGuide,{rotation:f.rotation,connect:f.connect,cursorPos:L?L.cursorPos:null}),L)){if(L.targetCorners){for(var V={x:1/0,y:1/0},l={x:-1/0,y:-1/0},H=0,I=L.targetCorners.length;H<I;H+=2)V.x=Math.min(V.x,L.targetCorners[H]),l.x=Math.max(l.x,L.targetCorners[H]),V.y=Math.min(V.y,L.targetCorners[H+1]),l.y=Math.max(l.y,L.targetCorners[H+1]);Y.Icons.DrawIcon(J,Q,Y.Icons.HoverDataRect,{min:V,max:l,color:J.getStyle("hoverGuideColor")||J.getStyle("baseColor")})}L.garbageInfo&&Y.Icons.DrawIcon(J,Q,Y.Icons.ConnectGuideGarbage,L.garbageInfo)}J.getStyle("rotateTipVisible")&&b.tipInfo&&Y.Icons.DrawIcon(J,Q,Y.Icons.TipHelper,b.tipInfo)}b.target instanceof Y.Group&&b.target._42(J,Q,n)}},(((x=Y.Anchor=function(Q){this.catalog="Anchor",this._interactor=Q}).prototype={}).constructor=x).prototype.gatherInfo=function(Q,n){if(1!==n.length)return 1<n.length&&this.gatherMultiTargets(Q,n);var x=n[0];return x.getAnchor&&!(x instanceof d.Shape&&x._70I()||a_(x,Q))?this.gatherSingleTarget(Q,n[0]):void 0},x.prototype.gatherSingleTarget=function(Q,n){return this.info.POS=n.getPosition(),this.screenInfo.POS=Y.toScreenPosition(Q,this.info.POS),this.target=n,!0},x.prototype.gatherMultiTargets=function(Q,n){return!!(n=Y.Group.findOrCreateGroup(n,this._interactor._uuid))&&(this.screenInfo.POS=Y.toScreenPosition(Q,n.getAnchor2()),this.target=n,!0)},x.prototype.isVisible=function(){var Q=this._interactor;if(!1===Q.getStyle("anchorVisible"))return!1;var n=this.target;if(n){if(this.editing)return!0;var x=n.getAnchor(),b=Q.getStyle("anchorOutsideVisibleThreshold");if(x.x<-b||x.x>1+b||x.y<-b||x.y>1+b)return!0;if(x=n.getSize(),b=n.getScale(),Math.min(Math.abs(x.width*b.x),Math.abs(x.height*b.y))*Q.gv._zoom<Q.getStyle("anchorHideThreshold"))return!1}return!0},x.prototype.check=function(Q,n,x){if(d.Default.isLeftButton(n)&&(n=this._interactor,this.isVisible()&&!1!==n.getStyle("anchorMovable"))){this.editing=null,this.tipInfo=null;var b=this.target;if(b&&Q.isAnchorEditable(b)&&Q.isEditable(b)&&this.screenInfo&&(Q=this.screenInfo.POS)&&Y.checkHit(x,new Y.Math.Vector2(Q),n.getStyle("checkSize")))return b instanceof Y.Group?this.editing={}:(x=b.getWidth(),Q=b.getHeight(),n=b.getAnchor(),this.editing={rect:{x:-x*n.x,y:-Q*n.y,width:x,height:Q},anchor:n,matrix:b.getMatrix()}),!0}},x.prototype.startEdit=function(Q,n){Q.startDragging(n),Q.fi({kind:"beginEditAnchor",event:n})},x.prototype._46O=function(Q){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditAnchor",event:Q})),this.tipInfo=null},x.prototype.handleEdit=function(Q,n){var x=this.target;if(x&&(J=this.editing)){var Q=Q.lp(n),b=this._interactor;if(x instanceof Y.Group)return x.setAnchor2(Q),void b._42();var Q=J.matrix.tfi(Q),J=J.rect,L=(Q.x-J.x)/J.width,Q=(Q.y-J.y)/J.height;d.Default.isCtrlDown(n)||(J=b.getStyle("anchorRound"),f=b.getStyle("anchorSensitivity"),L=Y.roundTo(L,J,f),Q=Y.roundTo(Q,J,f)),x.setAnchor(L,Q,!0);(J=d.Default.getLogicalPoint(n,b._canvas)).x+=Y.Icons.TipShiftX,J.y+=Y.Icons.TipShiftY;var f=L.toFixed(2)+", "+Q.toFixed(2);this.tipInfo={helperPos:J,text:f,size:f.length},b.fi({kind:"betweenEditAnchor",event:n})}},x.prototype._42=function(Q,n,x){this.info={},this.screenInfo={};var b=this._interactor;b.editDetail||this.gatherInfo(n,x)&&this.isVisible()&&(Y.Icons.DrawIcon(b,Q,Y.Icons.Anchor,this.screenInfo),this.tipInfo&&Y.Icons.DrawIcon(b,Q,Y.Icons.TipHelper,this.tipInfo))},(((n=Y.MoveDummy=function(Q){this.catalog="MoveDummy",this._interactor=Q}).prototype={}).constructor=n).prototype.gatherInfo=function(Q,n){var x=this._interactor.getSubModule("Rect");if(x&&(l=x.screenInfo)){var b=this._interactor;if(this.getMovableTarget(x.target)&&!1!==(x=b.getStyle("moveDummyThreshold"))){var J=l.LT||l.P1,L=l.RT||l.P2,f=l.LB||J;if(J){var V,l=l.P1,H=Math.min(J.distanceTo(f),J.distanceTo(L));if(!(!0!==x&&x<H))return x=b.getStyle("moveDummyPosition"),H=L.clone().sub(J),L=f.clone().sub(J),f=x[2],V=x[3],(l=l&&b.getStyle("moveDummyLineExtraShift"))&&(f+=l[0],V+=l[1]),l=J.clone().add(H.clone().multiplyScalar(x[0])).add(H.setLength(f)).add(L.clone().multiplyScalar(x[1])).add(L.setLength(V)),this.screenInfo.pos=l,this.screenInfo.size=b.getStyle("moveDummySensitivity"),!0}}}},n.prototype.getMovableTarget=function(Q){var n=this._interactor.gv;if(v(Q)){if(n.isMovable(Q))return Q}else if(Q instanceof Y.Group)for(var x=Q._entities,b=x.length-1;0<=b;b--){var J=x[b];if(v(J)&&n.isMovable(J))return J}return null},n.prototype.getMoveInteractor=function(){for(var Q,n=this._interactor.gv.getInteractors(),x=0,b=n.length;x<b;x++)if((Q=n.get(x))instanceof cE)return Q},n.prototype.startEdit=function(Q,n){Q.startDragging(n);var x,b=this.getMoveInteractor();b&&(x=this.selectedTarget,(Q=Q.gv)._moving=1,b._data=x,Q.handleMouseDown&&Q.handleMouseDown(n,x))},n.prototype._46O=function(Q){var n=this.getMoveInteractor();n&&(n.handleWindowMouseUp(Q),this.selectedTarget=null)},n.prototype.handleEdit=function(Q,n){var x=this.getMoveInteractor();x&&x.handleWindowMouseMove(n)},n.prototype.check=function(Q,n,x){if(this.selectedTarget=null,d.Default.isLeftButton(n)&&!Q._scrolling&&!wh()&&this.screenInfo&&(n=this.screenInfo.pos)&&!(x.distanceTo(n)>this.screenInfo.size))return Q=this._interactor,this.selectedTarget=this.getMovableTarget(Q.getSubModule("Rect").target),Q.setCursor("default"),!0},n.prototype._42=function(Q,n,x){this.screenInfo={};var b=this._interactor;b.editDetail||!this.gatherInfo(n,x)||b.editing&&!this.selectedTarget||Y.Icons.DrawIcon(b,Q,Y.Icons.MoveDummy,this.screenInfo)},(((L=Y.RotateX=function(Q){this.catalog="RotateX",this._interactor=Q}).prototype={}).constructor=L).prototype.gatherInfo=function(Q,n){var x;return 1===n.length?!((x=n[0])instanceof d.Shape&&x._70I()||a_(x,Q))&&this.gatherSingleTarget(Q,x):1<n.length&&this.gatherMultiTargets(Q,n)},L.prototype.gatherSingleTarget=(zE=new d.Math.Vector2,sE=new d.Math.Vector2,XE=new d.Math.Vector2,RE=new d.Math.Vector2,function(Q,n){var x,b;if(n.getCorners)return b=n.getCorners(),x=n.getPosition(),zE.copy(b[0]),XE.copy(b[1]),RE.copy(b[3]),sE.copy(zE).add(RE).divideScalar(2).add(zE.sub(XE).setLength(15/Q.getZoom())),b=Math.max(Da(x,b[0]),Da(x,b[1]),Da(x,b[2]),Da(x,b[3])),this.info.POS=sE.clone(),this.screenInfo.POS=Y.toScreenPosition(Q,this.info.POS),this.screenInfo.LEN=Math.sqrt(b)*Q.getZoom()+15,this.screenInfo.CENTER=Y.toScreenPosition(Q,x),this.target=n,!0}),L.prototype.gatherMultiTargets=function(Q,n){return!!(n=Y.Group.findOrCreateGroup(n,this._interactor._uuid))&&this.gatherSingleTarget(Q,n)},L.prototype.isVisible=function(){var Q=this._interactor;if(!Q.getStyle("rotateAsClock"))return!1;var n=this.target;return!n||!(!(Q=Q.gv).isEditable(n)||!Q.isRotationEditable(n))},L.prototype.check=function(Q,n,x){return((Q=this._checkImpl(Q,n,x))||this._clockPainted)&&this._interactor._42(),Q},L.prototype._checkImpl=function(Q,n,x){if(d.Default.isLeftButton(n)){var b=this;if(b.editing=null,b.tipInfo=null,b.screenInfo&&(J=b.screenInfo.POS)&&b.isVisible()){var J,L=b._interactor;if(Y.checkHit(x,J,L.getStyle("checkSize")))return x=b.target,J=Q.lp(n),Q=x.getPosition(),n=Math.atan2(J.y-Q.y,J.x-Q.x),L._setRotateCursor(n),b.editing={pos:Q,rotation:x.getRotation(),hitRot:n,groupRotateMode:"block",screenInfo:{CENTER:b.screenInfo.CENTER,LEN:b.screenInfo.LEN}},!0}}},L.prototype.startEdit=function(Q,n){Q.startDragging(n),Q.fi({kind:"beginEditRotation",event:n}),this.target instanceof Y.Group&&this.target.beginRotate(this.editing)},L.prototype._46O=function(Q){this.editing&&(this.editing=null,this._interactor.fi({kind:"endEditRotation",event:Q})),this.target instanceof Y.Group&&this.target.endRotate(),this.tipInfo=null},L.prototype.handleEdit=function(n,Q){var x,b,J,L,f,V,l,H,I=this.editing;I&&(x=this.target,J=n.lp(Q),b=this._interactor,f=I.pos,J=Math.atan2(J.y-f.y,J.x-f.x),V=(f=x instanceof Y.Group)?J-I.hitRot:(L=J-I.hitRot,I.rotation+L),(V%=2*Math.PI)<0&&(V+=2*Math.PI),d.Default.isCtrlDown(Q)||(H=s7(Q)?(l=b.getStyle("shiftRotateRound"))/2:(l=b.getStyle("rotateRound"),b.getStyle("rotateSensitivity")),V=Y.roundTo(V,l,H)),f?0!=(L=V-(I.lastRotation||0))&&(x.addRotation(L,I.groupRotateMode,function(Q){return n.isRotationEditable(Q)}),I.lastRotation=V):x.setRotation(V),b._setRotateCursor(J),V>Math.PI&&(V-=2*Math.PI),l=(V/Math.PI*180).toFixed(2)+"°",(H=d.Default.getLogicalPoint(Q,b._canvas)).x+=Y.Icons.TipShiftX,H.y+=Y.Icons.TipShiftY,this.tipInfo={helperPos:H,text:l,size:l.length},b.fi({kind:"betweenEditRotation",event:Q}))},L.prototype._42=function(Q,n,x){var b=this,J=(b._clockPainted=!1,b.info={},b.screenInfo={},b._interactor);J.editDetail||b.gatherInfo(n,x)&&b.isVisible()&&(Y.Icons.DrawIcon(J,Q,Y.Icons.RoundPoint,b.screenInfo.POS),J.getStyle("rotateTipVisible")&&b.tipInfo&&Y.Icons.DrawIcon(J,Q,Y.Icons.TipHelper,b.tipInfo),b.editing&&b.drawClock(Q))},L.prototype.drawClock=function(Q){Q.save(),this._clockPainted=!0;var n,x,b,J,L,f=this.editing||{},V=f.screenInfo||this.screenInfo,l=V.LEN,H=l+8,I=l+18;Q.save(),Q.translate(V.CENTER.x,V.CENTER.y),Q.beginPath(),Q.strokeStyle="rgb(150, 150, 150)";for(var Z=0;Z<360;Z++)n=Z*Math.PI/180,Z%5==0&&(x=f5(n)*l,b=V5(n)*l,J=f5(n)*H,L=V5(n)*H,Q.moveTo(x,b),Q.lineTo(J,L)),Z%45==0&&(x=f5(n)*l,b=V5(n)*l,J=f5(n)*I,L=V5(n)*I,Q.moveTo(x,b),Q.lineTo(J,L));Q.stroke(),Q.rotate(-w5),V=f.lastRotation||this.target.getRotation(),Q.beginPath(),Q.fillStyle="rgba(255, 0, 0, 0.1)",Q.strokeStyle="rgb(157, 157, 157)",Q.moveTo(0,0),Q.arc(0,0,I,0,V,!1),Q.fill(),Q.beginPath(),Q.moveTo(0+I,0),Q.arc(0,0,I,0,V,!1),Q.stroke(),Q.restore()},((Q=Y.Curve=function(Q){this.catalog="Curve",this._interactor=Q}).prototype={}).constructor=Q,e.defineProperties(Q.prototype,{activing:{get:function(){return this._activing},set:function(Q){Q?(this._activing=new Y.CurveActiving(this,Q),this.gatherSingleTarget(this._interactor.gv,this.target)):((Q=this._activing)&&Q.dispose(),this._activing=null)}}}),Q.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},Q.prototype.setUp=function(){var Q=this._interactor;Q&&Q.gv.mp(this._onGraphviewPropertyChanged,this)},Q.prototype._onGraphviewPropertyChanged=function(Q){"zoom"!==Q.property&&"translateX"!==Q.property&&"translateY"!==Q.property||this._handleDataChanged()},Q.prototype.tearDown=function(){var Q=this._interactor;Q&&Q.gv.ump(this._onGraphviewPropertyChanged,this)},Q.prototype.canEnterEditDetailMode=function(){var Q=gG(this._interactor);if(Q)return this.target=Q},Q.prototype.canQuitEditDetailMode=function(Q){var n=this._interactor._getLogicalPoint(Q);if(!this._checkEditRealPoint(n))return this._interactor.gv.getDataAt(Q)!==this.target||void 0},Q.prototype.preHandleScroll=function(Q){var n=this.editing;if(n&&n.inEdit)return!0},Q.prototype.getCurrentSelectintStatus=function(){var x=this;if(x.activing&&!x.activing.selections){if(x.activing.status!=n5)return x.activing.status;var Q=function(Q){var n=x.activing.status;x.activing.status=Q,x._interactor.fp("shapePointStatus",n,Q)},n=Y.Curve.PointType,b=x.activing.point,J=x.activing.pairs;if(!J||1!==J.length)return Q(n.Mirrored);var L=(J=J[0]).c1&&J.c1.isNearEnough(b),f=J.c2&&J.c2.isNearEnough(b);return J.c1&&J.c2?L&&f?Q(n.Straight):L||f?Q(n.Asymmetric):(L=J.c1.clone().sub(b),f=J.c2.clone().sub(b),1e-5<Math.abs(L.x*f.y-L.y*f.x)||0<L.x*f.x?Q(n.Disconnected):1e-5<Math.abs(L.length()-f.length())?Q(n.Asymmetric):Q(n.Mirrored)):Q(L||f?n.Straight:n.Disconnected)}},Q.prototype.handle_keydown=function(Q){var n;this._interactor.editDetail&&(n=Y.Curve.PointType,"1"===Q.key?this._setCurrentSelectionStatus(n.Straight):"2"===Q.key?this._setCurrentSelectionStatus(n.Mirrored):"3"===Q.key?this._setCurrentSelectionStatus(n.Disconnected):"4"===Q.key&&this._setCurrentSelectionStatus(n.Asymmetric))},Q.prototype.setCurrentSelectionStatus=function(Q){var n=this._interactor;n&&((n=n.gv).dm().beginTransaction(),this._setCurrentSelectionStatus(Q),n.dm().endTransaction())},Q.prototype._setCurrentSelectionStatus=function(Q){var n=this,x=n.activing;if(x){var b=n.getCurrentSelectintStatus();if(null!==b&&b!==Q){x.status=Q;var J=n.activing.point;if((L=n.activing.pairs)&&1===L.length){var L=L[0],f=n.screenInfo.curve,V=Y.Curve.PointType,l=n._interactor,H=function(){n._writeToHt(),l.fp("shapePointStatus",b,Q),n.check(l.gv,null,new Y.Math.Vector2(l._lastLogicalPoint))};if(Q===V.Straight)return f.moveCtrlPoint(L,J,"c1"),f.moveCtrlPoint(L,J,"c2"),void H();if(b===V.Straight)return Z=(I=f.findPairs(J,!0)[0]).r1||J,I=(I.r2||J).clone().sub(Z).multiplyScalar(.25),f.moveCtrlPoint(L,J.clone().sub(I),"c1"),f.moveCtrlPoint(L,J.clone().add(I),"c2"),void H();var I,Z=L.c1,E=L.c2;if(Z&&E){if(Q===V.Mirrored)return f.moveCtrlPoint(L,J.clone().multiplyScalar(2).sub(E),"c1"),void H();if(Q===V.Asymmetric&&b===V.Disconnected)return V=Z.clone().sub(J).length(),I=J.clone().sub(E).setLength(V).add(J),f.moveCtrlPoint(L,I,"c1"),void H()}x._firePointChange(),l.fp("shapePointStatus",b,Q),n.check(l.gv,null,new Y.Math.Vector2(l._lastLogicalPoint))}}}},Q.prototype._handleDataChanged=(jE="s:edge.points,s:edge.segments,points,segments,shape,position,rotation,scale".split(","),function(Q){this.screenInfo&&this.target&&(Q&&jE.indexOf(Q.property)<0||(Q=this._interactor,this.gatherSingleTarget(Q.gv,this.target,!0),this.check(Q.gv,null,new Y.Math.Vector2(Q._lastLogicalPoint)),Q._42()))}),Q.prototype.gatherSingleTarget=function(n,Q,x){var b,J,L,f,V=this,l=(V.screenInfo&&V.screenInfo.curve&&(b=V.screenInfo.curve._curves),V.editing),H=l?V.screenInfo:V.screenInfo={},I=Q instanceof d.Edge,Z=I?(f=Q.s("edge.segments"),Q.s("edge.points")||new d.List):(f=Q._58O,Q._59O),E=(H.S=f,H.P=[]),a=Y.getDataMatrix(Q);if(Q instanceof d.Polyline||Q instanceof d.Edge&&V._interactor.getStyle("edgeElevationEditable")?(J=Q.getElevation&&Q.getElevation()||0,H.E=[]):(L=!1,Z.each(function(Q){Q.e!==n5&&(L=!0)}),L&&(H.E=[])),Z.each(function(Q){H.E&&H.E.push(Q.e!=n5?Q.e:J),Q=a.apply(Q),Q=Y.toScreenPosition(n,Q),E.push(Q.x,Q.y)}),I&&(f=E.length,Z=Y.toScreenPosition(n,Q._lastSourcePoint||(f?{x:E[0],y:E[1]}:{x:0,y:0})),I=Y.toScreenPosition(n,Q._lastTargetPoint||(f?{x:E[f-2],y:E[f-1]}:{x:0,y:0})),E.splice(0,0,Z.x,Z.y),E.push(I.x,I.y),H.E&&((f=Q.getSourceAgent())instanceof d.Edge?H.E.splice(0,0,Q.s("edge.source.offset.elevation")):H.E.splice(0,0,((Q.s("edge.source.anchor.elevation")||.5)-.5)*f.getTall()*f.getScaleTall()+f.getElevation()+Q.s("edge.source.offset.elevation")),(Z=Q.getTargetAgent())instanceof d.Edge?H.E.push(Q.s("edge.target.offset.elevation")):H.E.push(((Q.s("edge.target.anchor.elevation")||.5)-.5)*Z.getTall()*Z.getScaleTall()+Z.getElevation()+Q.s("edge.target.offset.elevation")))),!H.S||!H.S.size()){H.S=new d.List,H.S.add(1);for(var o=0;o<E.length/2-1;o++)H.S.add(2)}l&&!x||V.convertToCubicBezier(b),!V.activing||!x&&V.editing&&"realPoint"!==V.editing.type||(I=H.curve.findPairs(V.activing.point),V.activing.pairs=I)},Q.prototype._convertToNewPoint=function(Q,n,x,b){for(var J,L=0,f=n.length;L<f;L++){if((J=n[L])._p1.isNearEnough(Q)&&(!b||b.indexOf(J._p1)<0))return J._p1;if(J._p4.isNearEnough(Q)&&(!b||b.indexOf(J._p4)<0))return J._p4}if(x)for(L=0,f=Math.min(x.length,f);L<f;L++){if((J=x[L])._p1===Q&&(!b||b.indexOf(n[L]._p1)<0))return n[L]._p1;if(J._p4===Q&&(!b||b.indexOf(n[L]._p4)<0))return n[L]._p4}},Q.prototype.convertToCubicBezier=function(n){var x,b,J,L,f,V=this,Q=new Y.Math.Curve,l=V.screenInfo;Q.createFromHtShape(l.P,l.S,l.E),l.curve=Q,V.activing&&(x=Q._curves,l=V.activing.point,b=V._convertToNewPoint(l,x,n),J=[],b&&(V.activing.point=b,J.push(b)),V.activing.selections&&(L=-1,(f=V.activing.selections).forEach(function(Q){L++,(b=V._convertToNewPoint(Q,x,n,J))&&(f[L]=b,J.push(b))})))},Q.prototype.check=function(Q,n,x){if(!n||O7(n)||d7(n)){var b=this;if(b._interactor.setCursor("default"),b.editing=null,b.highlight=null,b.tipInfo=null,b.edgeEditResult=null,b.screenInfo)return wh()||n&&d7(n)||b._checkEditCtrlPoint(x)||b._checkEditRealPoint(x)||b._checkEditElevation(x)||(n=b.screenInfo.curve.checkPoint(x,b._interactor.getStyle("curveIntersectSize")))&&((x=b.highlight={type:"insertKnot"}).bezier=n.bezier,x.point=n.intersection),b._interactor._42(),!0}},Q.prototype.getAdjacentBeziers=function(Q){var n=this.screenInfo;if(n){for(var x,b=n.curve._curves,J=[],L=n5,f=0,V=b.length;f<V;f++)if(x=b[f],L===n5){if(x._p4.isNearEnough(Q))J.push(x),L=f;else if(x._p1.isNearEnough(Q))return J.push(x),J}else{if(x._p1.isNearEnough(Q))return J.push(x),J;x._p4.isNearEnough(Q)&&(J[0]=x,L=f)}return J}},Q.prototype.roundCorner=function(Q){if(this.activing&&this.screenInfo){var n=this.screenInfo.curve._curves,x=(I=this.activing).point,b=this.getAdjacentBeziers(x);if(b&&2===b.length)var J=(L=b[1])._index,L=L.insertKnot(L.getTByPercentage(Q/L.length))[1],f=(n[J]=L).p1,V=(l=b[0])._index,l=l.insertKnot(l.getTByPercentage(1-Q/l.length))[0],H=(n[V]=l).p4;else{var I=I.pairs[0],Z=n.length;if(I.c1){if(I.c2)return;var V=(l=b[0])._index,H=(l=l.insertKnot(l.getTByPercentage(1-Q/l.length))[0]).p4,f=(f=(L=n[(V+1)%Z]).p1).clone().sub(x).setLength(Q).add(x),J=V+1;if(1-Math.abs(H.clone().sub(x).normalize().dot(f.clone().sub(x).normalize()))<1e-8)return;n[V]=l}else{if(J=(L=b[0])._index,f=(L=L.insertKnot(L.getTByPercentage(Q/L.length))[1]).p1,H=(H=(l=n[(J-1+Z)%Z]).p4).clone().sub(x).setLength(Q).add(x),1-Math.abs(H.clone().sub(x).normalize().dot(f.clone().sub(x).normalize()))<1e-8)return;n[J]=L}}V=new Y.Math.CubicBezier(H,(I=x).clone().sub(H).multiplyScalar(2/3).add(H),I.clone().sub(f).multiplyScalar(2/3).add(f),f),n.splice(J,0,V),this._writeToHt(),this.activing=null,this._interactor._42()}},Q.prototype._checkEditRealPoint=function(Q){var n,x,b,J,L,f,V=this.screenInfo.curve._curves,l=this._interactor.getStyle("curvePointIntersectSize"),H=1/0;for(l*=l,b=0,J=V.length;b<J;b++)L=(n=V[b])._p1,(f=Q.distanceToSquared(L))<H&&(H=f,x=L),L=n._p4,(f=Q.distanceToSquared(L))<H&&(H=f,x=L);return!(l<H)&&((l=this.highlight={type:"changeRealPoint"}).point=x,this.editing={type:"realPoint",point:x,shiftGuide:{point:x.clone(),dir:"x",limit:0}},this._interactor.setCursor("crosshair"),!0)},Q.prototype._checkEditElevation=function(Q){if(!this._interactor.getStyle("curveElevationVisible"))return!1;if(this.target instanceof d.Edge&&!this._interactor.getStyle("edgeElevationEditable"))return!1;var n=this.activing;if(!n)return!1;if(!(n=n.getCurrentEditingPoint()))return!1;var x=this._interactor,b=x.getStyle("curveElevationGuideShift");return(x=x.getStyle("curveElevationIntersectSize"))*x<Q.distanceToSquared({x:n.x+b[0],y:n.y+b[1]})?void 0:(this.highlight={type:"elevation"},x=new Y.Math.Vector2(Q.x,Q.y,n.e),this.editing={type:"elevation",startPoint:x},this._interactor.setCursor("crosshair"),!0)},Q.prototype._checkEditCtrlPoint=function(Q){var n=this;if(n.activing&&!n.activing.selections&&(l=n.getCurrentSelectintStatus())!==Y.Curve.PointType.Straight){var x=n.activing.pairs;if(x){var b,J,L,f,V,l=n._interactor.getStyle("curvePointIntersectSize");l*=l;for(var H,I,Z=1/0,E=0,a=x.length;E<a;E++)for(f=x[E],I=0;I<2;I++)f[V=0===I?"c1":"c2"]&&(H=Q.distanceToSquared(f[V]))<Z&&(Z=H,b=f,J=E,L=V);return l<Z?!1:(n.activing.hlpair=b,n.activing.hltype=L,(l=n.highlight={type:"changeCtrlPoint"}).point=b[L],n.editing={type:"ctrlPoint",pair:b,pairId:J,ctrlType:L,direction:b[L].clone().sub(n.activing.point).normalize()},n._interactor.setCursor("crosshair"),!0)}}},Q.prototype.startEdit=function(Q,n){Q.startDragging(n);var x,b,J,L,f=this;f.highlight&&"insertKnot"===f.highlight.type&&(f.insertKnot(),f.gatherSingleTarget(f._interactor.gv,f.target),f.activing=null,f._checkEditRealPoint(f._interactor._getLogicalPoint(n)));(l=f._activing)&&("ctrlPoint"===(V=f.editing?f.editing.type:null)?l.editingCtrl={pairId:f.editing.pairId,type:l.hltype}:"realPoint"===V&&(l.editingCtrl=!1));var V=f.highlight,l=d.Default.isCtrlDown(n);if(!V||wh()||d7(n))return!(x=f._interactor.gv).setFocus(n)||x._scrolling?void 0:void(l?f._multiSelect={startPoint:x.lp(n)}:x.isPannable()&&(O7(n)||d7(n))&&(f._pan={tx:x.tx(),ty:x.ty()},Q.fi({kind:"beginPan",event:n})));"changeRealPoint"===V.type&&(x=f.activing?f.activing.point:null,b=f.activing?f.activing.selections:null,l&&f.activing?x===V.point?(b?(f.activing={point:b[0]},1<b.length&&(b.splice(0,1),f.activing.selections=b)):f.activing=null,f.editing=null):b&&0<=(J=b.indexOf(V.point))?(1<b.length?b.splice(J,1):delete f.activing.selections,f.editing=null):b?(b.push(x),f.activing={point:V.point,selections:b}):f.activing={point:V.point,selections:[x]}:b?x!==V.point&&(0<=(J=b.indexOf(V.point))?(b.splice(J,1,x),f.activing={point:V.point,selections:b}):f.activing={point:V.point}):(x===V.point&&(L=f.activing.status),f.activing={point:V.point},L&&(f.activing.status=L)),Q.fi({kind:"beginEditPoint",event:n}))},Q.prototype.insertKnot=function(){var Q=this.highlight;this.screenInfo.curve.insertKnot(Q.bezier,Q.point.t),this._writeToHt()},Q.prototype._writeToHt=function(){var Q,n,x,b=(L=this.screenInfo.curve.toHtShape()).points,J=[],L=L.segments,f=this._interactor.gv,V=(f.dm().beginTransaction(),this.target),l=V instanceof d.Edge,H=Y.getDataMatrix(V).invert();(V instanceof d.Polyline||l&&this._interactor.getStyle("edgeElevationEditable"))&&(x=V.getElevation&&V.getElevation()||0);for(var I=0,Z=b.length;I<Z;I++)Q=b[I],n=Y.toWorldPosition(f,Q),n=H.apply(n),isFinite(Q.e)&&Q.e!==x&&(n.e=Q.e),J.push(n);V._writing=!0,l?(V.s("edge.type","points"),V.setStyle("edge.segments",L),V.setStyle("edge.points",J.slice(1,J.length-1)),V.setStyle("edge.source.offset.x",0),V.setStyle("edge.source.offset.y",0),V.setStyle("edge.target.offset.x",0),V.setStyle("edge.target.offset.y",0),l=this._nextChangeEdgeHost,delete this._nextChangeEdgeHost,l&&("source"===l.type?V.setSource(l.host):V.setTarget(l.host)),this._writeEdgeHostAnchor("source",J[0]),this._writeEdgeHostAnchor("target",J[J.length-1])):J.length?(V.setSegments(L),V.setPoints(J,!0)):V.removeFromDataModel(),f.dm().endTransaction(),delete V._writing},Q.prototype._writeEdgeHostAnchor=function(Q,n){var x=this.target,b=this._calcHostAnchor(x,Q,n);b.index!==n5?(x.setStyle("edge."+Q+".index",b.index),x.setStyle("edge."+Q+".percent",n5),x.setStyle("edge."+Q+".anchor.x",n5),x.setStyle("edge."+Q+".anchor.y",n5),x.setStyle("edge."+Q+".anchor.elevation",n5),x.setStyle("edge."+Q+".offset.elevation",n.e)):b.percent!==n5?(x.setStyle("edge."+Q+".percent",b.percent),x.setStyle("edge."+Q+".index",n5),x.setStyle("edge."+Q+".anchor.x",n5),x.setStyle("edge."+Q+".anchor.y",n5),x.setStyle("edge."+Q+".anchor.elevation",n5),x.setStyle("edge."+Q+".offset.elevation",n.e)):(x.s("edge."+Q+".anchor.x",b.x),x.s("edge."+Q+".anchor.y",b.y),x.s("edge."+Q+".anchor.elevation",b.e),b.offsetX||b.offsetY||b.offsetElevation?(x.s("edge."+Q+".offset.x",b.offsetX),x.s("edge."+Q+".offset.y",b.offsetY),x.s("edge."+Q+".offset.elevation",b.offsetElevation)):(x.s("edge."+Q+".offset.x",0),x.s("edge."+Q+".offset.y",0),x.s("edge."+Q+".offset.elevation",0)))},Q.prototype._calcHostAnchor=function(Q,n,x,b){b=b||("source"===n?Q.getSource():Q.getTarget());var J=this._interactor.gv;if(L=J.calculateAttachPoint(b,x))return L.info;if(Z_(b))return J.calculateEdgePosition(b,x);var L=b.getRotation(),f=b.getAnchor(),V=(a_(b,J)&&(L=0),b.getElevation()),l=b.getTall()*b.getScaleTall(),V=((x.e||0)-Q.s("edge."+n+".offset.elevation")-V)/l+.5,Q=b.getScale();return L||Q.x<0||Q.y<0?(n=b.getMatrix().tfi(x),l=b.getSize(),{x:n.x/l.width+f.x,y:n.y/l.height+f.y,e:V}):(L=$G(J,b),{x:(x.x-L.x)/L.width,y:(x.y-L.y)/L.height,e:V})},Q.prototype._handlePanning=function(Q){var n,x,b,J,L=this._pan;L&&(L.started=!0,x=(n=this._interactor).gv,b=n._lastClientPoint,J=R7(Q),J=dG(x,J,b),x.setTranslate(L.tx+J.x,L.ty+J.y),this.gatherSingleTarget(n.gv,this.target),n._42(),n.fi({kind:"betweenPan",event:Q}))},Q.prototype.handleEdit=function(Q,n){var x,b,J,L,f,V,l,H,I,Z,E,a,o,B,G,_,$,W,D=this,A=D.editing;if(D._pan)D._handlePanning(n);else{if(D._multiSelect)return D._multiSelect.endPoint=Q.lp(n),void D._interactor.redraw();A&&(A.inEdit=!0,b=D._interactor._getLogicalPoint(n),B=d.Default.isCtrlDown(n),H=d.Default.isShiftDown(n),G=A.type,x=D.activing,D._guideInfo=null,"ctrlPoint"===G&&H?(I=D.editing.direction.clone(),E=x.point,o=I.dot(b.clone().sub(E)),b=I.setLength(o).add(E)):"ctrlPoint"!==G&&"realPoint"!==G||("realPoint"===G&&H&&(J=(H=D.editing.shiftGuide).point,a=Math.abs(b.x-J.x),(_=Math.abs(b.y-J.y))<a&&a>H.limit&&"y"===H.dir&&(H.dir="x"),a<_&&_>H.limit&&"x"===H.dir&&(H.dir="y"),"x"===(I=H.dir)?(b.y=J.y,H.limit=Math.max(H.limit,a)):"y"===I&&(b.x=J.x,H.limit=Math.max(H.limit,_))),B||((a=D._isEditEdgeSourceTarget())&&(Z=b.clone()),H=D._guidingToEdit(b,I),$=_=1/0,(G="realPoint"===G?D._interactor.gridGuide.findClosest(b,I,!0):null)&&(G.x&&(_=G.x),G.y&&($=G.y)),I=!1,H&&(H.xList&&(Math.abs(H.x)<=Math.abs(_)?(I=!0,_=H.x):delete H.xList),H.yList&&(Math.abs(H.y)<=Math.abs($)?(I=!0,$=H.y):delete H.yList),I&&(D._guideInfo=H)),isFinite(_)&&(b.x+=_),isFinite($)&&(b.y+=$),I&&(H.v=b),a&&(G=I?b.clone():null,b.copy(Z),(_=D._editEdgeSourceTarget(a,b,B,G))&&(W=(D.edgeEditResult=_).tipText,_.isFixed&&(D._guideInfo=null))))),L=D.screenInfo.curve,"realPoint"===A.type?((E=A.point).e!==n5&&(b.e=E.e),L.moveRealPoint(E,b),A.point=b,D.highlight.point=b,$=x.status,f=x.selections,D.activing={point:b,status:$},f&&(V=b.clone().sub(E),l=0,f.forEach(function(Q){var n=Q.clone().add(V);L.moveRealPoint(Q,n),f[l++]=n}),D.activing.selections=f)):"ctrlPoint"===A.type?(H=x.pairs[A.pairId],L.moveCtrlPoint(H,b,A.ctrlType),((I=x.status)===(Z=Y.Curve.PointType).Mirrored||I===Z.Asymmetric)&&H.c1&&H.c2&&(E=new Y.Math.Vector2(x.point),a="c1"===A.ctrlType?"c2":"c1",I===Y.Curve.PointType.Mirrored?L.moveCtrlPoint(H,E.clone().multiplyScalar(2).sub(b),a):I===Z.Asymmetric&&(o=H[a].clone().sub(E).length(),B=E.clone().sub(H[A.ctrlType]).setLength(o).add(E),isNaN(B.x)||L.moveCtrlPoint(H,B,a))),x._firePointChange()):"elevation"===A.type&&(G=(J=A.startPoint).e+(J.y-b.y)/Q._zoom,D._setCurrentPointImpl("e",G),x._firePointChange(),W="E: "+Y.toFixed(G)),(_=d.Default.getLogicalPoint(n,D._interactor._canvas)).x+=Y.Icons.TipShiftX,_.y+=Y.Icons.TipShiftY,W||($=Y.toWorldPosition(Q,b),W=Y.toFixed($.x)+", "+Y.toFixed($.y)),D.tipInfo={helperPos:_,text:W,size:W.length},D._writeToHt(),D._interactor.fi({kind:"betweenEditPoint",event:n}))}},Q.prototype._setCurrentPointImpl=function(Q,n){var x=this._activing;if(!x)return!1;var b=this.target;if(!b)return!1;var J=x.getCurrentEditingPoint();if(!J)return!1;var L,f,V,l,H,I,Z=x.editingCtrl;return Z||(L=J.clone()),"e"===Q?J.e=n:("x"===Q||"y"===Q?(f=x._lastFirePoint,f="x"===Q?{x:n,y:f?f.y:0}:{x:f?f.x:0,y:n}):"object"==typeof Q?(f=Q).e!==n5&&(J.e=Q.e):(f={x:Q,y:n},arguments[2]!==n5&&(J.e=arguments[2])),Q=Y.getDataMatrix(b),f=Y.toScreenPosition(this._interactor.gv,Q.apply(f)),J.x=f.x,J.y=f.y),Z||(V=L.multiplyScalar(-1).add(J),L_(J.e)&&L_(L.e)&&(V.e=J.e-L.e),(l=this.screenInfo.curve).moveCtrlDueToRealPointMovement(J,V),(H=x.selections)&&(I=0,H.forEach(function(Q){var n=Q.clone().add(V);isFinite(V.e)&&(n.e=(isFinite(Q.e)?Q.e:b.getElevation()||0)+V.e),l.moveRealPoint(Q,n),H[I++]=n}),x.selections=H)),!0},Q.prototype.setCurrentPoint=function(Q,n){return!!this._setCurrentPointImpl(Q,n)&&(this._writeToHt(),!0)},Q.prototype._isEditEdgeSourceTarget=function(){if(!(this.target instanceof d.Edge))return!1;var Q=this.editing.point,n=this.screenInfo.curve._curves;return Q===n[0]._p1?"source":Q===n[n.length-1]._p4&&"target"},Q.prototype._editEdgeSourceTarget=function(n,Q,x,b){var J,L,f,V,l,H,I,Z,E,a=this,o=a.target;if(f="source"===n?o.getSource():o.getTarget())return J=a._interactor.gv,l=Y.toWorldPosition(J,Q),(H=(H=(L=a._calcHostAnchor(o,n,l,f)).index!==n5||L.percent!==n5?L.distance*J.getZoom()>a._interactor.getStyle("edgeHostEdgeMaxDistance"):!!a._interactor.getStyle("edgeHostDetectPerFrame")||L.x<0||1<L.x||L.y<0||1<L.y)&&J.getDataAt(l,function(Q){return!!J.isSelectable(Q)&&!!J.isSourceTargetEditable(o,Q,n)&&!!o.canSetSourceTarget(Q,n)}))&&(I=a._calcHostAnchor(o,n,l,H),a._nextChangeEdgeHost={type:n,host:f=H},L=I),H=!1,x||L.x===n5?L.percent===n5&&L.index===n5||(H=!0,V=L.point):(I=a._interactor.getStyle("anchorRound"),x=a._interactor.getStyle("anchorSensitivity"),(Z=J.calculateAttachPoint(f,l))?(L=Z.info,H=!0):((L=b?a._calcHostAnchor(o,n,Y.toWorldPosition(J,b),f):L).x=Y.roundTo(L.x,I,x),L.y=Y.roundTo(L.y,I,x)),V=vG(J,f,0,L.offsetX||0,L.offsetY||0,L.x,L.y)),V&&(l=Y.toScreenPosition(J,V),Q.x=l.x,Q.y=l.y),a._edgeHostGuideInfo={corners:Y.getTargetCornersOnScreen(J,f),attach:Z?Z.index:-1,host:f},L.percent!==n5?E="percent: "+L.percent.toFixed(2):L.index!==n5?E="index: "+L.index:(E=L.x.toFixed(2)+", "+L.y.toFixed(2),(L.offsetX||L.offsetY)&&(E+=" offset: "+L.offsetX.toFixed(2)+", "+L.offsetY.toFixed(2))),{host:f,anchor:L,tipText:E,isFixed:H}},Q.prototype._guidingToEdit=function(Q,n){if(o=this.screenInfo.curve){var x,b,J,L,f,V,l,H,I=o._curves,Z=1/0,E=1/0,a=[];for(this.editing&&"realPoint"===this.editing.type&&(H=this.editing.point),f=0,V=2*I.length;f<V;f++)l=I[Math.floor(f/2)][f%2?"_p4":"_p1"],0<=a.indexOf(l)||(a.push(l),H&&H===l||(J=l.x-Q.x,L=l.y-Q.y,Math.abs(J)<Math.abs(Z)?(Z=J,x=[l]):J===Z&&x.push(l),Math.abs(L)<Math.abs(E)?(E=L,b=[l]):L===E&&b.push(l)));var o=this._interactor.getStyle("smartGuideThreshold");if((Math.abs(Z)>o||"y"===n)&&(x=null),(Math.abs(E)>o||"x"===n)&&(b=null),(x||b)&&(o=!1,n={},x&&(o=!0,n.xList=x,n.x=Z),b&&(o=!0,n.yList=b,n.y=E),o))return n}},Q.prototype._46O=function(Q){var n=this;n.editing&&(n.editing=null,n._interactor.fi({kind:"endEditPoint",event:Q})),n._guideInfo=null,n._edgeHostGuideInfo=null,n._pan&&(n._pan=null,n._interactor.fi({kind:"endPan",event:Q})),n._multiSelect&&(n._handleMultiSelect(n._multiSelect,Q),n._multiSelect=null),n.tipInfo=null,n.edgeEditResult=null},Q.prototype._handleMultiSelect=function(Q,n){if(Q.startPoint&&Q.endPoint){for(var x,b,J,L,f=this._interactor,V=f.gv,l=Y.toScreenPosition(V,Q.startPoint),V=Y.toScreenPosition(V,Q.endPoint),H=d.Default.unionPoint(l,V),I=this.screenInfo.curve._curves,Z=[],E=function(Q){Q.x>=H.x&&Q.y>=H.y&&Q.x<=H.x+H.width&&Q.y<=H.y+H.height&&Z.indexOf(Q)<0&&Z.push(Q)},a=0,o=I.length;a<o;a++)E((J=I[a])._p1),E(J._p4);if(Z.length){var B=(Q=this.activing||{}).selections||[],G=(Q.point&&B.push(Q.point),d.Default.isShiftDown(n)),_=n.altKey;if(_&&!G)for(L=Z,Z=[],a=0,o=L.length;a<o;a++)x=L[a],0<=(b=B.indexOf(x))&&Z.push(x);for(a=0,o=B.length;a<o;a++)x=B[a],0<=(b=Z.indexOf(x))?G&&!_||(Z[b]=n5):Z.push(x);for(L=Z,Z=[],a=0,o=L.length;a<o;a++)L[a]&&Z.push(L[a]);0===(o=Z.length)?this.activing=null:1===o?this.activing={point:Z[0]}:(x=Z[o-1],this.activing={point:x,selections:Z.splice(0,o-1)}),f.redraw()}}},Q.prototype._canDeletePoint=function(Q,n){if(!(this.target instanceof d.Edge))return!0;var x=Q._curves[0],Q=Q._curves[Q._curves.length-1];return x._p1!==n&&Q._p4!==n},Q.prototype.handleDelete=function(){var n,x,b=this;b.activing&&b.screenInfo&&(n=d.Default.isShiftDown(),x=b.screenInfo.curve,b._canDeletePoint(x,b.activing.point)&&x.deleteRealPoint(b.activing.point,n),b.activing.selections&&b.activing.selections.forEach(function(Q){b._canDeletePoint(x,Q)&&x.deleteRealPoint(Q,n)}),b.activing=null,delete b.editing,delete b.tipInfo,delete b.edgeEditResult,delete b._pan,delete b._multiSelect,b._writeToHt(),b._interactor.fp("deleteShapePoint",!1,!0))},Q.prototype.handleDoubleClick=function(Q){var n,Q=this._interactor._getLogicalPoint(Q);if(this.screenInfo&&this._checkEditRealPoint(Q))return Q=(Q=this.getCurrentSelectintStatus())===(n=Y.Curve.PointType).Mirrored?n.Straight:n.Mirrored,this._setCurrentSelectionStatus(Q),this._interactor._42(),!0},Q.prototype._drawHighlight=function(Q){var n,x,b=this.highlight;b&&(x=b.bezier,n=this._interactor,x&&Y.Icons.DrawIcon(n,Q,Y.Icons.ShapeHighlightCurve,[x._p1.x,x._p1.y,x._p2.x,x._p2.y,x._p3.x,x._p3.y,x._p4.x,x._p4.y]),(x=b.point)&&"insertKnot"===b.type&&Y.Icons.DrawIcon(n,Q,Y.Icons.ShapeHighlighPoint,x))},Q.prototype._drawGuide=function(Q){var n=this._guideInfo;if(n)for(var x,b,J,L=n.v,f=0;f<2;f++)if(J=0===f?n.xList:n.yList)for(x=0,b=J.length;x<b;x++)Y.Icons.DrawIcon(this._interactor,Q,Y.Icons.ShapeGuideLine,[L.x,L.y,J[x].x,J[x].y])},Q.prototype._drawCurrentPoint=function(n){if(this.activing){var Q=this.activing,x=this.getCurrentSelectintStatus(),b=this._interactor;if(x!==Y.Curve.PointType.Straight){var J=Q.pairs,L=(Q.hlpair,Q.hltype,Q.selections),f=Q.editingCtrl;if(J&&!L)for(var V,l=0,H=J.length;l<H;l++)V=J[l],f&&l===f.pairId&&V[f.type]?Y.Icons.DrawIcon(b,n,Y.Icons.ShapeActivingCtrl,{point:V.point,c1:V.c1,c2:V.c2,hl:f.type}):Y.Icons.DrawIcon(b,n,Y.Icons.ShapeActivingCtrl,V)}Y.Icons.DrawIcon(b,n,Y.Icons.ShapeHighlighRealPoint,this.activing.point),L&&L.forEach(function(Q){Y.Icons.DrawIcon(b,n,Y.Icons.ShapeHighlighRealPoint,Q)})}},Q.prototype.clear=function(){this.editing=null,this._guideInfo=null,this.activing=null,this.highlight=null},Q.prototype._42=function(n){var Q=this,x=(Q.info={},Q.editing||(Q.screenInfo=null),Q._interactor);if(x.editDetail){var b,J,L=x.gv;if(!Q.target||!L.isSelected(Q.target)||!L.isVisible(Q.target))return x.editDetail=!1,void Q.clear();Q.gatherSingleTarget(L,Q.target),Y.Icons.DrawIcon(x,n,Y.Icons.ShapeBgCurve,Q.screenInfo),Q._interactor.getStyle("curveElevationVisible")&&(Q.target instanceof d.Polyline||Q.target instanceof d.Edge&&Q._interactor.getStyle("edgeElevationEditable"))&&Q.activing&&(b=Q.activing.getCurrentEditingPoint())&&"string"!=typeof b.e&&Y.Icons.DrawIcon(x,n,Y.Icons.EdgeElevationGuide,b),Q._drawHighlight(n),Q._drawCurrentPoint(n),Q._getRealPoint().forEach(function(Q){Y.Icons.DrawIcon(x,n,Y.Icons.ShapePoint,Q)}),Q._drawGuide(n),Q.tipInfo&&Q._interactor.getStyle("curveTipVisible")&&Y.Icons.DrawIcon(x,n,Y.Icons.TipHelper,Q.tipInfo),Q._edgeHostGuideInfo&&x._drawHostGuide(Q._edgeHostGuideInfo),Q.edgeEditResult&&Q._drawEdgeHostHighlight(n,Q.edgeEditResult.host,Q.edgeEditResult.anchor),Q._multiSelect&&Q._multiSelect.endPoint&&((b=d.Default.unionPoint(Y.toScreenPosition(L,Q._multiSelect.startPoint),Y.toScreenPosition(L,Q._multiSelect.endPoint))).color=L.getRectSelectBorderColor(),n.save(),n.setTransform(1,0,0,1,0,0),L=b5.devicePixelRatio,J=b.borderWidth=Math.round(L),J/=2,b.x=Math.round(b.x*L)+J,b.y=Math.round(b.y*L)+J,b.width=Math.round(b.width*L),b.height=Math.round(b.height*L),Y.Icons.DrawIcon(x,n,Y.Icons.SimpleRect,b),n.restore())}else Q.clear()},Q.prototype._drawEdgeHostHighlight=function(Q,n,x){this.drawEdgeHostHighlight(Q,n,x),this._interactor.redraw()},Q.prototype.drawEdgeHostHighlight=function(Q,n,x){if(Z_(n)){for(var b,J,L=this._interactor,f=L.gv,n=f.getDataUI(n),V=kG(n),l=[],H=0,I=V.points.length;H<I;H++)J=Y.toScreenPosition(f,V.points.get(H)),l.push(J.x,J.y);V.segments&&(b=V.segments.toArray());for(var Z=L.getStyle("edgeHostHighlighPeriod"),E=L.getStyle("edgeHostEdgeHighlighColor"),a=(Y.Icons.DrawIcon(L,Q,Y.Icons.ShapeBgCurve,{P:l,S:b,color:E,dynamicVisible:x.index===n5,dynamicPeriod:Z}),E=L.getStyle("edgeHostPointHighlighColor"),xV(n)),H=0,I=a.length;H<I;H++){var o=a[H],o=Y.toScreenPosition(f,o);Y.Icons.DrawIcon(L,Q,Y.Icons.ShapePoint,{point:{x:o.x,y:o.y},color:E,size:12,dynamicVisible:H===x.index,dynamicPeriod:Z})}}},Q.prototype._getRealPoint=function(){var x,Q=this.screenInfo,b=Q.P,J=Q.S,L=-1,f=[],V=-1,l=J.length;return J.each(function(Q){V++;var n=1;if(3===Q)n=2;else if(4===Q)n=3;else if(5===Q)return;L+=n,x=l<=V+1||1===J.get(V+1),f.push({point:{x:b[2*L],y:b[2*L+1]},segmentIndex:V,pointIndex:L,isEnd:x})}),f},Q.prototype.getEditingPointsInfo=function(Q){var n=this,x=n.activing;if(!x)return!1;var b=x.point;if(!b)return!1;var J=this._getRealPoint(),L=[{screen:b}];x.selections&&x.selections.forEach(function(Q){L.push({screen:Q})});var f,V,l=J.length;return L.forEach(function(Q){for(f=0;f<l;f++)if(V=J[f],Q.screen.isNearEnough(V.point)){Q.segmentIndex=V.segmentIndex,Q.pointIndex=V.pointIndex,Q.point=n.target.getPoints().get(V.pointIndex);break}}),Q&&L.sort(function(Q,n){return Q.segmentIndex-n.segmentIndex}),L};(((x=Y.MoveHelper=function(Q){this.catalog="Move",this._interactor=Q}).prototype={}).constructor=x).prototype.calcShift=function(Q,n,x){var b,J=this,L=J._interactor.gv,f=L.lp(n);if("beginMove"===Q&&J._gatherGridInfo(x._lastLogicalPoint||f),Q=J._target){if(x=Q.downPosition){var V=J._interactor.getStyle("moveSensitivity")/L._zoom;if(x.distanceTo(f)<V)return{x:0,y:0};delete Q.downPosition}d.Default.isShiftDown(n)&&(f=J._dealShiftDown(f),b=Q.shiftGuide.dir);var l,x=Q.rawPos={x:Q.pos.x+f.x-Q.lp.x,y:Q.pos.y+f.y-Q.lp.y};if(d.Default.isCtrlDown(n))return l=J._calcShiftByAddon(),J._target.node instanceof Y.Group&&((I=J._target.node)._position.x+=l.x,I._position.y+=l.y),l;if(V=J._interactor.rectGuide,Q.node instanceof d.Data&&Q.node.s("2d.attachable")&&(f=J._calcAttachNodeShift(Q.node,x),V.clear(),f))return f;for(var H,I,Z=Q.x+x.x,E=Q.y+x.y,n={x:Z,y:E},f={x:Z+Q.w/2,y:E+Q.h/2},a={x:Z+Q.w,y:E+Q.h},o=J._interactor.gridGuide,B=[V.findClosest(n,b),V.findClosest(f,b),V.findClosest(a,b),o.findClosest(n,b),o.findClosest(f,b),o.findClosest(a,b)],G=1/0,_=1/0,$=0,W=B.length;$<W;$++)(H=B[$])&&(Z=H.x,E=H.y,isFinite(Z)&&Math.abs(Z)<Math.abs(G)&&(G=Z),isFinite(E)&&Math.abs(E)<Math.abs(_)&&(_=E));return isFinite(G)||(G=0),isFinite(_)||(_=0),l=J._calcShiftByAddon(G,_),J._target.node instanceof Y.Group&&((I=J._target.node)._position.x+=l.x,I._position.y+=l.y),V=Q.node,a_(V,L)||J._interactor.rectGuide.gatherLines({node:V,x:Q.x+(x.x+G),y:Q.y+(x.y+_),w:Q.w,h:Q.h},b),l}},x.prototype._calcShiftByAddon=function(Q,n){var x=(b=this._target).rawPos,b=b.node.getPosition();return{x:x.x-b.x+(Q=Q||0),y:x.y-b.y+(n=n||0)}},x.prototype._dealShiftDown=function(Q){var n=this._target.shiftGuide,x=this._target.lp,b=Math.abs(Q.x-x.x),J=Math.abs(Q.y-x.y),L=(J<b&&b>n.limit&&"y"===n.dir&&(n.dir="x"),b<J&&J>n.limit&&"x"===n.dir&&(n.dir="y"),n.dir);return"x"===L?(Q.y=x.y,n.limit=Math.max(n.limit,b)):"y"===L&&(Q.x=x.x,n.limit=Math.max(n.limit,J)),Q},x.prototype._isAttachableLineShape=function(Q){if(!Q.getSegments)return!1;var n=Q.getSegments();if(!n)return!0;for(var x=1,b=(n=n instanceof d.List?n.getArray():n).length;x<b;x++)if(2!==n[x])return!1;return!0},x.prototype._calcAttachNodeShift=(CE=new R,Q$=new R,n$=new R,x$=new R,function(Q,n){var x=this._interactor.gv,b=Q.getHost(),J=x.getDataAt(n,function(Q){return!!Q.s("2d.hostable")});if(J&&b!==J&&Q.setHost(J),!J)return this._edgeHostGuideInfo=null,Q.setHost(null);var L,f,b=this._edgeHostGuideInfo={corners:Y.getTargetCornersOnScreen(x,J),host:J,attach:-1};if(!this._isAttachableLineShape(J))return(L=x.calculateAttachPoint(J,n))?(f=L.point,b.attach=L.index,this._calcShiftByAddon(f.x-n.x,f.y-n.y)):void 0;for(var V,l,H,I,Z,E,a=J.getPoints(),o=a.size(),B=J.getPointsMatrix2d(),G=1/0,_=0;_<o&&(_!==o-1||J.isClosePath());_++)0!==_?Q$.copy(n$):B.apply(a.get(_),Q$),B.apply(_===o-1?a.get(0):a.get(_+1),n$),CE.copy(n).sub(Q$),x$.copy(n$).sub(Q$),V=x$.length(),x$.divideScalar(V),(l=CE.dot(x$))<0?l=0:V<l&&(l=V),x$.multiplyScalar(l).add(Q$),(H=CE.copy(n).sub(x$).lengthSq())<G&&(G=H,E=_,I=l,Z=V);return Math.sqrt(G)*x.getZoom()>this._interactor.getStyle("attachThreshold")?(Q.s({"attach.index":-1}),void Q.setHost(null)):(Q.s("attach.offset.opposite")&&(I=Z-I),Q.s({"attach.index":E,"attach.offset":Q.s("attach.offset.relative")?I/Z:I}),{x:0,y:0})}),x.prototype._gatherGridInfo=function(Q){var n,x,b=this._interactor;if((J=b._getValidSelection()).length){if(1===J.length){if(!(n=J[0]).getRect)return void(this._target=null)}else if(!(n=Y.Group.findOrCreateGroup(J,b._uuid)))return void(this._target=null)}else{var J=b.gv.sm().getSelection();if(J.length&&!(n=J.get(0)).getRect)return void(this._target=null)}n&&(J=n.getPosition(),x=n.getRect(),this._target={node:n,x:x.x-J.x,y:x.y-J.y,w:x.width,h:x.height,lp:{x:Q.x,y:Q.y},pos:{x:J.x,y:J.y},shiftGuide:{dir:"x",limit:0},downPosition:new Y.Math.Vector2(Q)},b.rectGuide.gatherRects())},x.prototype.clear=function(){this._edgeHostGuideInfo=null,this._interactor.rectGuide.clear(),this._interactor._42()},x.prototype._42=function(){var Q=this._edgeHostGuideInfo;Q&&this._interactor._drawHostGuide(Q)};var jE,CE,Q$,n$,x$,b$,J$,L$,f$,V$,l$,H$,I$,Z$,E$,a$,o$,B$,G$,_$,$$,W$,D$,A$,u$,M$,t$,i$,r$,P$,c$,F$,q$,w$,y$,K$,Z5,U$,e$,v$,O$,d$,h$,p$,z$,s$,X$,R$,g$,S$,m$,Y$,T$,k$,N$,j$,C$,Qv,nv,xv,bv,Jv,Lv,fv,Vv,lv,Hv,Iv,Zv,Ev,av,ov,Bv,Gv,_v,$v,Wv,Dv,Av,uv,Mv,tv,iv,rv,Pv,cv,Fv,qv,wv,yv,Kv,Uv,ev,vv,Ov,dv,hv,pv,zv,sv,Xv,Rv,Sv,mv,Yv,Tv,kv,Nv,jv,Cv,Qe,ne,xe,be,Je,Le,fe,Ve,le,He,Ie,Ze,Ee,ae,oe,Be,Ge,_e,$e,We,De,Ae,ue,Me,te,ie,re,Pe,ce,Fe,qe,we,ye,Ke,Ue=d.WebGLConstants=e.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),ee=(b$="undefined"!=typeof WebGL2RenderingContext,J$={aliasedLineWidthRange:33902,aliasedPointSizeRange:33901,maxCombinedTextureImageUnits:35661,maxCubeMapTextureSize:34076,maxFragmentUniformVectors:36349,maxRenderBufferSize:34024,maxTextureImageUnits:34930,maxTextureSize:3379,maxVaryingVectors:36348,maxVertexAttribs:34921,maxVertexTextureImageUnits:35660,maxVertexUniformVectors:36347,maxViewportDIMs:3386},L$={max3DTextureSize:32883,maxArrayTextureLayers:35071,maxColorAttachments:36063,maxCombinedFragmentUniformComponents:35379,maxCombinedUniformBlocks:35374,maxCombinedVertexUniformComponents:35377,maxDrawBuffers:34852,maxElementIndex:36203,maxElementsIndices:33001,maxElementsVertices:33e3,maxFragmentInpuComponents:37157,maxFragmentUniformBlocks:35373,maxFragmentUniformComponents:35657,maxProgramTexelOffset:35077,maxSamples:36183,maxTextureLODBias:34045,maxTransformFeedbackInterleavedComponents:35978,maxTransformFeedbackSeparateAttribs:35979,maxTransformFeedbackSeparateComponents:35968,maxUniformBlockSize:35376,maxUniformBufferBindings:35375,maxVaryingComponents:35659,maxVertexOutputComponents:37154,maxVertexUniformBlocks:35371,maxVertexUniformComponents:35658,minProgramTexelOffset:35076},{for:function(Q){var n=Q._info;return n||(Q._info=n=function(b,Q){(Q=Q==n5?{}:Q).version=b$&&(b instanceof WebGL2RenderingContext||"[object WebGL2RenderingContext]"===e.prototype.toString.call(b))?2:1,Q.extensions=function(){for(var Q={},n=b.getSupportedExtensions(),x=n.length;x--;)Q[n[x]]=function(Q,n){var x=n5;return function(){return x=x||Q.getExtension(n)}}(b,n[x]);return Q}();for(var n=e.keys(J$),x=0,J=n.length;x<J;++x)Q[L=n[x]]=b.getParameter(J$[L]);if(1<Q.version)for(var L,x=0,J=(n=e.keys(L$)).length;x<J;++x)Q[L=n[x]]=b.getParameter(L$[L]);return Q}(Q,n)),n}}),ve=(f$="undefined"!=typeof Float32Array&&new Float32Array(4),n={viewport:{def:[0,0,NaN,NaN],getter:function(Q){return Q.getParameter(2978)},setter:function(Q,n){var x=n[2]!=n[2]?Q.drawingBufferWidth-n[0]:n[2],b=n[3]!=n[3]?Q.drawingBufferHeight-n[1]:n[3];Q.viewport(n[0],n[1],x,b)}},dither:{def:!1,getter:function(Q){return Q.isEnabled(3024)},setter:function(Q,n){n?Q.enable(3024):Q.disable(3024)}},rasterizerDiscard:{def:!1,getter:function(Q){return 1<ee.for(Q).version&&Q.isEnabled(35977)},setter:function(Q,n){1!==ee.for(Q).version&&(n?Q.enable(35977):Q.disable(35977))}},lineWidth:{def:1,getter:function(Q){return Q.lineWidth?Q.getParameter(2849):1},setter:function(Q,n){Q.lineWidth&&Q.lineWidth(n)}},color:{clear:{def:[0,0,0,0],getter:function(Q){return Q.getParameter(3106)},setter:function(Q,n){Q.clearColor(n[0],n[1],n[2],n[3])},parse:ua},mask:{def:[!0,!0,!0,!0],getter:function(Q){return Q.getParameter(3107)},setter:function(Q,n){Q.colorMask(n[0],n[1],n[2],n[3])}}},blend:{enabled:{def:!1,getter:function(Q){return Q.isEnabled(3042)},setter:function(Q,n){n?Q.enable(3042):Q.disable(3042)}},color:{def:[0,0,0,0],getter:function(Q){return Q.getParameter(32773)},setter:function(Q,n){Q.blendColor(n[0],n[1],n[2],n[3])},parse:ua},equation:{def:[32774,32774],getter:function(Q){return[Q.getParameter(32777),Q.getParameter(34877)]},setter:function(Q,n){Q.blendEquationSeparate(n[0],n[1])},parse:function(Q){var n=Q.length;return 1<n?Q:(f$[1]=f$[0]=1===n?Q[0]:Q,f$)}},func:{def:[1,Ue.ZERO,1,Ue.ZERO],getter:function(Q){return[Q.getParameter(32969),Q.getParameter(32968),Q.getParameter(32971),Q.getParameter(32970)]},setter:function(Q,n){Q.blendFuncSeparate(n[0],n[1],n[2],n[3])},parse:function(Q){return 3<Q.length?Q:(f$[2]=f$[0]=Q[0],f$[3]=f$[1]=Q[1],f$)}}},cullFace:{enabled:{def:!1,getter:function(Q){return Q.isEnabled(2884)},setter:function(Q,n){n?Q.enable(2884):Q.disable(2884)}},mode:{def:1029,getter:function(Q){return Q.getParameter(2885)},setter:function(Q,n){Q.cullFace(n)}},frontFace:{def:2305,getter:function(Q){return Q.getParameter(2886)},setter:function(Q,n){Q.frontFace(n)}}},scissor:{enabled:{def:!1,getter:function(Q){return Q.isEnabled(3089)},setter:function(Q,n){n?Q.enable(3089):Q.disable(3089)}},box:{def:[0,0,NaN,NaN],getter:function(Q){return Q.getParameter(3088)},setter:function(Q,n){var x=n[2]!=n[2]?Q.drawingBufferWidth-n[0]:n[2],b=n[3]!=n[3]?Q.drawingBufferHeight-n[1]:n[3];Q.scissor(n[0],n[1],x,b)}}},depth:{enabled:{def:!1,getter:function(Q){return Q.isEnabled(2929)},setter:function(Q,n){n?Q.enable(2929):Q.disable(2929)}},clear:{def:1,getter:function(Q){return Q.getParameter(2931)},setter:function(Q,n){Q.clearDepth(n)}},mask:{def:!0,getter:function(Q){return Q.getParameter(2930)},setter:function(Q,n){Q.depthMask(n)}},range:{def:[-1,1],getter:function(Q){return Q.getParameter(2928)},setter:function(Q,n){Q.depthRange(n[0],n[1])}},func:{def:513,getter:function(Q){return Q.getParameter(2932)},setter:function(Q,n){Q.depthFunc(n)}}},stencil:{enabled:{def:!1,getter:function(Q){return Q.isEnabled(2960)},setter:function(Q,n){n?Q.enable(2960):Q.disable(2960)}},clear:{def:0,getter:function(Q){return Q.getParameter(2961)},setter:function(Q,n){Q.clearStencil(n)}},frontMask:{def:255,getter:function(Q){return Q.getParameter(2968)},setter:function(Q,n){Q.stencilMaskSeparate(1028,n)}},frontOp:{def:[7680,7680,7680],getter:function(Q){return[Q.getParameter(2964),Q.getParameter(2965),Q.getParameter(2966)]},setter:function(Q,n){Q.stencilOpSeparate(1028,n[0],n[1],n[2])}},frontFunc:{def:[519,0,255],getter:function(Q){return[Q.getParameter(2962),Q.getParameter(2967),Q.getParameter(2963)]},setter:function(Q,n){Q.stencilFuncSeparate(1028,n[0],n[1],n[2])}},backMask:{def:255,getter:function(Q){return Q.getParameter(36005)},setter:function(Q,n){Q.stencilMaskSeparate(1029,n)}},backOp:{def:[7680,7680,7680],getter:function(Q){return[Q.getParameter(34817),Q.getParameter(34818),Q.getParameter(34819)]},setter:function(Q,n){Q.stencilOpSeparate(1029,n[0],n[1],n[2])}},backFunc:{def:[519,0,255],getter:function(Q){return[Q.getParameter(34816),Q.getParameter(36003),Q.getParameter(36004)]},setter:function(Q,n){Q.stencilFuncSeparate(1029,n[0],n[1],n[2])}}},hint:{generateMipmap:{def:4352,getter:function(Q){return Q.getParameter(33170)},setter:function(Q,n){Q.hint(33170,n)}},fragmentShaderDerivative:{def:4352,getter:function(Q){var n=ee.for(Q);return 1!==n.version||n.extensions.OES_standard_derivatives?Q.getParameter(35723):4352},setter:function(Q,n){var x=ee.for(Q);(1<x.version||x.extensions.OES_standard_derivatives)&&Q.hint(35723,n)}}},pixelStore:{packAlignment:Aa(4,3333,!1),unpackAlignment:Aa(4,3317,!1),unpackFlipY:Aa(!1,37440,!1),unpackPremultiplyAlpha:Aa(!1,37441,!1),unpackColorspaceConversion:Aa(37444,37443,!1),packRowLength:Aa(0,3330,!0),packSkipPixels:Aa(0,3332,!0),packSkipRows:Aa(0,3331,!0),unpackRowLength:Aa(0,3314,!0),unpackImageHeight:Aa(0,32878,!0),unpackSkipPixels:Aa(0,3316,!0),unpackSkipRows:Aa(0,3315,!0),unpackSkipImages:Aa(0,32877,!0)},polygonOffset:{enabled:{def:!1,getter:function(Q){return Q.isEnabled(32823)},setter:function(Q,n){n?Q.enable(32823):Q.disable(32823)}},value:{def:[0,0],getter:function(Q){return[Q.getParameter(32824),Q.getParameter(10752)]},setter:function(Q,n){Q.polygonOffset(n[0],n[1])}}},sampleCoverage:{enabled:{def:!1,getter:function(Q){return Q.isEnabled(32928)},setter:function(Q,n){n?Q.enable(32928):Q.disable(32928)}},alpha:{def:!1,getter:function(Q){return Q.isEnabled(32926)},setter:function(Q,n){n?Q.enable(32926):Q.disable(32926)}},value:{def:[1,!1],getter:function(Q){return[Q.getParameter(32938),Q.getParameter(32939)]},setter:function(Q,n){Q.sampleCoverage(n[0],n[1])}}}},n=xG.create(n,function(Q){return"def"in Q}),ta.prototype.reset=function(){for(var Q=this._struct.children,n=Q.length;n--;){var x=Q[n],b=x.name;x.isLeaf?this[b]=x.desc.def:this._branches[b].reset()}},ta.prototype.save=function(Q){Q==n5&&(Q={});for(var n=this._struct.children,x=n.length;x--;){var b=n[x],J=b.name;b.isLeaf?Q[J]=Ma(this._record[J]):((b=Q[J])==n5&&(Q[J]=b={}),this._branches[J].save(b))}return Q},ta.prototype.sync=function(Q,n){for(var x=this._struct.children,b=x.length;b--;){var J=x[b],L=J.name;J.isLeaf?!n&&this._leafSync[L]||(Q?this._record[L]=J.desc.getter(this.gl):J.desc.setter(this.gl,this._record[L]),this._leafSync[L]=!0):this._branches[L].sync(Q,n)}},ta.prototype.syncLoss=function(){for(var Q=this._struct.children,n=Q.length;n--;){var x=Q[n];x.isLeaf?this._leafSync[x.name]=!1:this._branches[x.name].syncLoss()}},ta.prototype.apply=function(Q){for(var n=this._struct.children,x=n.length;x--;){var b=n[x],J=b.name;J in Q&&(b.isLeaf?this[J]=Q[J]:this._branches[J].apply(Q[J]))}},ta.prototype.append=function(Q){var n,x=this._struct.childMap;for(n in Q){var b=x[n];b&&(b.isLeaf?this[n]=Q[n]:this._branches[n].append(Q[n]))}},V$=function V(J){var l=[];function Q(Q,n){ta.call(this,J,Q,n);for(var x=l.length;x--;){var b=l[x];this._branches[b._name]=new b._type(Q,this._record[b._name])}}return Ja(Q,ta),J.forEach(function(Q,n){var x,b,J=Q.name,L=La(Q.desc.def),f=L&&Q.desc.def.length;Q.isLeaf?(x=Q.desc.setter,b=Q.desc.parse,e.defineProperty(n,J,{configurable:!1,enumerable:!0,get:function(){return this._record[J]},set:L?function(Q){b&&(Q=b(Q)),!function(Q,n){for(var x=f,b=!1;x--;)Q[x]!==n[x]&&(Q[x]=n[x],b=!0);return b}(this._record[J],Q)&&this._leafSync[J]||(x(this.gl,this._record[J]),this._leafSync[J]=!0)}:function(Q){this._record[J]===Q&&this._leafSync[J]||(x(this.gl,Q),this._record[J]=Q,this._leafSync[J]=!0)}})):(l.push({_name:J,_type:V(Q)}),e.defineProperty(n,J,{configurable:!1,enumerable:!0,get:function(){return this._branches[J]},set:function(Q){this._branches[J].apply(Q)}}))},Q.prototype),Q}(n),function(){var l=[];if("function"==typeof Float32Array)for(var Q=1;Q<17;++Q)l[Q]=new Float32Array(Q);function H(Q,n,x,b){if(Q)if(Q.length!=n5)for(J=0;J<b;++J)n[x+J]=Q[J];else Q.toArray&&Q.toArray(n,x);else for(var J=0;J<b;++J)n[x+J]=0}function x(Q,n,x){var b=Q[0];if(b<=0||0<b)return Q;var J=n*x,L=l[J];if(L==n5&&(l[J]=L=new Float32Array(J)),0!==n){H(b,L,0,x);for(var f=1,V=0;f!==n;++f)H(Q[f],L,V+=x,x)}return L}function n(Q,n){Q.uniform1iv(this.addr,n)}function b(Q,n){Q.uniform2iv(this.addr,n)}function J(Q,n){Q.uniform3iv(this.addr,n)}function L(Q,n){Q.uniform4iv(this.addr,n)}var f=[0,1],V=[];function I(Q,n,x){V[Q]=[n,x]}I(5126,function(Q,n){var x=this.cache;x[0]!==n&&(Q.uniform1f(this.addr,n),x[0]=n)},function(Q,n){Q.uniform1fv(this.addr,n)}),I(35664,function(Q,n){var x,n=n.x!=n5?(x=n.x,n.y):(x=n[0],n[1]),b=this.cache;b[0]===x&&b[1]===n||(Q.uniform2f(this.addr,x,n),b[0]=x,b[1]=n)},function(Q,n){n=x(n,this.size,2),Q.uniform2fv(this.addr,n)}),I(35665,function(Q,n){n=(n="string"==typeof n?sh(n):n).x!=n5?(x=n.x,b=n.y,n.z):n.r!=n5?(x=n.r,b=n.g,n.b):n.red!=n5?(x=n.red,b=n.green,n.blue):(x=n[0],b=n[1],n[2]);var x,b,J=this.cache;J[0]===x&&J[1]===b&&J[2]===n||(Q.uniform3f(this.addr,x,b,n),J[0]=x,J[1]=b,J[2]=n)},function(Q,n){n=x(n,this.size,3),Q.uniform3fv(this.addr,n)}),I(35666,function(Q,n){n=(n="string"==typeof n?sh(n):n).x!=n5?(x=n.x,b=n.y,J=n.z,n.w):n.r!=n5?(x=n.r,b=n.g,J=n.b,n.a):n.red!=n5?(x=n.red,b=n.green,J=n.blue,n.alpha):(x=n[0],b=n[1],J=n[2],n[3]==x5?1:n[3]);var x,b,J,L=this.cache;L[0]===x&&L[1]===b&&L[2]===J&&L[3]===n||(Q.uniform4f(this.addr,x,b,J,n),L[0]=x,L[1]=b,L[2]=J,L[3]=n)},function(Q,n){n=x(n,this.size,4),Q.uniform4fv(this.addr,n)}),I(5124,function(Q,n){var x=this.cache;x[0]!==n&&(Q.uniform1i(this.addr,n),x[0]=n)},n),I(35667,b,b),I(35668,J,J),I(35669,L,L),I(35670,function(Q,n){var x=this.cache;x[0]!==(n=f[n?1:0])&&(Q.uniform1i(this.addr,n),x[0]=n)},n),I(35671,b,b),I(35672,J,J),I(35673,L,L),I(35674,function(Q,n){var x=l[4];x.set(n,0),Q.uniformMatrix2fv(this.addr,!1,x)},function(Q,n){Q.uniformMatrix2fv(this.addr,!1,x(n,this.size,4))}),I(35675,function(Q,n){var x=l[9];x.set(n,0),Q.uniformMatrix3fv(this.addr,!1,x)},function(Q,n){Q.uniformMatrix3fv(this.addr,!1,x(n,this.size,9))}),I(35676,function(Q,n){var x=l[16];x.set(n,0),Q.uniformMatrix4fv(this.addr,!1,x)},function(Q,n){Q.uniformMatrix4fv(this.addr,!1,x(n,this.size,16))}),I(35678,function(Q,n){Q.uniform1i(this.addr,this.slots[0]),Q.activeTexture(33984+this.slots[0]),Q.bindTexture(3553,n||Q._emptyTexture)},function(Q,n){Q.uniform1iv(this.addr,this.slots);for(var x=this.slots.length;x--;)Q.activeTexture(33984+this.slots[x]),Q.bindTexture(3553,n[x]||Q._emptyTexture)}),I(35680,function(Q,n){Q.uniform1i(this.addr,this.slots[0]),Q.activeTexture(33984+this.slots[0]),Q.bindTexture(34067,n||Q._emptyCubeTexture)},function(Q,n){Q.uniform1iv(this.addr,this.slots);for(var x=this.slots.length;x--;)Q.activeTexture(33984+this.slots[x]),Q.bindTexture(34067,n[x]||Q._emptyCubeTexture)});var $=/([\w\d_]+)(\])?(\[|\.)?/g;function W(Q,n,x,b,J){this.name=Q,this.addr=n,this.cache=[],this.size=b?x.size:0,this.activeInfo=x,this.setter=V[x.type][b?1:0],this.slots=function(Q,n,x){switch(Q.type){case 35678:case 35680:if("uSampler"===x)return[0];if("uBlendSampler"===x)return[1];for(var b=Q.size,J=new Int32Array(b),L=0;L<b;++L)J[L]=n.usedTextureSlot++;return J}return n5}(x,J,Q),nG(this)}function D(Q,n,x){this.gl=n,this._program=x,this._leaves={},this._branches={},this._struct=Q}function Z(Q,n){for(var x=Q.getProgramParameter(n,35718),b={},J={usedTextureSlot:2};x--;){var L=Q.getActiveUniform(n,x),f=L.name,V=(G=a=B=H=void 0,L),l=Q.getUniformLocation(n,f),H=b,I=J,Z=V.name,E=Z.length;for($.lastIndex=0;;){var a=$.exec(Z),o=$.lastIndex,B=a[1],G="]"===a[2];if(G&&(B|=0),(a=a[3])===n5||"["===a&&o+2===E){H[B]=new W(B,l,V,a!==n5,I);break}(G=H[B])==n5&&(H[B]=G={}),H=G}}var _=function J(L){var f=[];function Q(Q,n){D.call(this,L,Q,n);for(var x=f.length;x--;){var b=f[x];this._branches[b._name]=new b._type(Q,n)}this.uuid=s.generateUUID()}return Ja(Q,D),L.forEach(function(Q,n){var x,b=Q.name;Q.isLeaf?(x=fa("d.setter(this.gl, v);",["v"],["d"],[Q.desc]),e.defineProperty(n,b,{configurable:!1,enumerable:!0,get:function(){return x},set:x})):(f.push({_name:b,_type:J(Q)}),e.defineProperty(n,b,{configurable:!1,enumerable:!0,get:function(){return this._branches[b]},set:function(Q){this._branches[b].apply(Q)}}))},Q.prototype),Q}(xG.create(b,function(Q){return"addr"in Q}));return e.defineProperty(_.prototype,"textureCount",{configurable:!1,enumerable:!1,writable:!1,value:J.usedTextureSlot}),new _(Q,n)}return D.prototype.apply=function(Q,n){for(var x=this._struct.children,b=x.length;b--;){var J,L=x[b],f=L.name,V=L.desc.activeInfo;if(n){if((J=n(Q,f,V?V.type:null))===n5)continue}else{if(!(f in Q))continue;J=Q[f]}L.isLeaf?this[f]=J:this._branches[f].apply(J)}},D.prototype.append=function(Q){var n,x=this._struct.childMap;for(n in Q){var b=x[n];b&&(b.isLeaf?this[n]=Q[n]:this._branches[n].append(Q[n]))}},function(Q,n){var x=n._uniforms;return x||(n._uniforms=x=Z(Q,n)),x}}()),Oe=function(){for(var J=[],Q=1;Q<17;++Q)J[Q]=new oS(Q);function H(Q,n,x,b){for(var J=x?1:0,L=n.addr,f=Q._4MQ,V=0;V<b;V++)(f[L+V]||0)!==J&&(f[L+V]=J,Q.vertexAttribDivisor(L+V,J))}var b=[],I="undefined"!=typeof WebGLBuffer&&WebGLBuffer.prototype;function n(Q,f,V,l){b[Q]=function(Q,n,x,b,J,L){this.addr==n5||this.addr<0||(n==n5||!1===n?l(Q,this.addr):QG(n)===I?V(this,Q,n,n.glType,b,J,L):(l(Q,this.addr),f(this,Q,n)))}}function x(Q,n){Q.disableVertexAttribArray(n)}function V(Q,n,x){this.name=Q,this.addr=n,this.activeInfo=x,this.setter=b[x.type],nG(this)}function l(Q,n,x){this.gl=n,this.program=x,this._branches={},this._struct=Q}return n(5126,function(Q,n,x){n.vertexAttrib1f(Q.addr,x)},function(Q,n,x,b,J,L,f){n.bindBuffer(34962,x);var V=Q.addr;n.enableVertexAttribArray(V),H(n,Q,x.instanced,1),n.vertexAttribPointer(V,1,b||5126,!!J,L||0,f||0),n.bindBuffer(34962,null)},x),n(35664,function(Q,n,x){var b;x.x!=n5?n.vertexAttrib2f(Q.addr,x.x,x.y):((b=J[2]).set(x,0),n.vertexAttrib2fv(Q.addr,b))},function(Q,n,x,b,J,L,f){n.bindBuffer(34962,x);var V=Q.addr;n.enableVertexAttribArray(V),H(n,Q,x.instanced,1),n.vertexAttribPointer(V,2,b||5126,!!J,L||0,f||0),n.bindBuffer(34962,null)},x),n(35665,function(Q,n,x){var b;x.x!=n5?n.vertexAttrib3f(Q.addr,x.x,x.y,x.z):x.r!=n5?n.vertexAttrib3f(Q.addr,x.r,x.g,x.b):x.red!=n5?n.vertexAttrib3f(Q.addr,x.red,x.green,x.blue):((b=J[3]).set(x,0),n.vertexAttrib3fv(Q.addr,b))},function(Q,n,x,b,J,L,f){n.bindBuffer(34962,x);var V=Q.addr;n.enableVertexAttribArray(V),H(n,Q,x.instanced,1),n.vertexAttribPointer(V,3,b||5126,!!J,L||0,f||0),n.bindBuffer(34962,null)},x),n(35666,function(Q,n,x){var b;(x="string"==typeof x?sh(x):x).x!=n5?n.vertexAttrib4f(Q.addr,x.x,x.y,x.z,x.w):x.r!=n5?n.vertexAttrib4f(Q.addr,x.r,x.g,x.b,x.a):x.red!=n5?n.vertexAttrib4f(Q.addr,x.red,x.green,x.blue,x.alpha):((b=J[4]).set(x,0),n.vertexAttrib4fv(Q.addr,b))},function(Q,n,x,b,J,L,f){n.bindBuffer(34962,x);var V=Q.addr;n.enableVertexAttribArray(V),H(n,Q,x.instanced,1),n.vertexAttribPointer(V,4,b||5126,!!J,L||0,f||0),n.bindBuffer(34962,null)},x),n(35674,function(Q,n,x){x=x.el||x;for(var b=0,J=0;b<2;++b)n.vertexAttrib2f(Q.addr,x[J++],x[J++])},function(Q,n,x,b,J,L,f){var L=L||16,f=f||0,V=Q.addr;n.bindBuffer(34962,x),n.enableVertexAttribArray(V),n.vertexAttribPointer(V,2,b||5126,!!J,L,f),n.enableVertexAttribArray(V+1),n.vertexAttribPointer(V+1,2,b||5126,!!J,L,f+8),H(n,Q,x.instanced,2),n.bindBuffer(34962,null)},function(Q,n){Q.disableVertexAttribArray(n),Q.disableVertexAttribArray(n+1)}),n(35675,function(Q,n,x){x=x.el||x;for(var b=0,J=0;b<3;++b)n.vertexAttrib3f(Q.addr,x[J++],x[J++],x[J++])},function(Q,n,x,b,J,L,f){var L=L||36,f=f||0,V=Q.addr;n.bindBuffer(34962,x);for(var l=0;l<3;l++)n.enableVertexAttribArray(V+l),n.vertexAttribPointer(V+l,3,b||5126,!!J,L,f+12*l);H(n,Q,x.instanced,3),n.bindBuffer(34962,null)},function(Q,n){Q.disableVertexAttribArray(n),Q.disableVertexAttribArray(n+1),Q.disableVertexAttribArray(n+2)}),n(35676,function(Q,n,x){x=x.el||x;for(var b=0,J=0;b<4;++b)n.vertexAttrib4f(Q.addr,x[J++],x[J++],x[J++],x[J++])},function(Q,n,x,b,J,L,f){var L=L||64,f=f||0,V=Q.addr;n.bindBuffer(34962,x);for(var l=0;l<4;l++)n.enableVertexAttribArray(V+l),n.vertexAttribPointer(V+l,4,b||5126,!!J,L,f+16*l);H(n,Q,x.instanced,4),n.bindBuffer(34962,null)},function(Q,n){Q.disableVertexAttribArray(n),Q.disableVertexAttribArray(n+1),Q.disableVertexAttribArray(n+2),Q.disableVertexAttribArray(n+3)}),l.prototype.disable=function(){for(var Q=this._struct.children,n=Q.length;n--;){var x=Q[n],b=x.name;x.isLeaf?this[b]=n5:this._branches[b].disable()}},l.prototype.apply=function(Q,n){for(var x=this._struct.children,b=x.length;b--;){var J,L=x[b],f=L.name;if(n){if((J=n(Q,f,L))===n5)continue}else{if(!(f in Q))continue;J=Q[f]}L.isLeaf?this[f]=J:this._branches[f].apply(J)}},l.prototype.append=function(Q){var n,x=this._struct.childMap;for(n in Q){var b=x[n];b&&(b.isLeaf?this[n]=Q[n]:this._branches[n].append(Q[n]))}},function(Q,n){var x=n._attribs;return x||(n._attribs=x=function(Q,n){for(var x=Q.getProgramParameter(n,35721),b={};x--;){var J=Q.getActiveAttrib(n,x),L=J.name,f=Q.getAttribLocation(n,L);0<=f&&(b[L]=new V(L,f,J))}return new(function J(L){var f=[];function Q(Q,n){l.call(this,L,Q,n);for(var x=f.length;x--;){var b=f[x];this._branches[b._name]=new b._type(Q,n)}}return Ja(Q,l),L.forEach(function(Q,n){var x,b=Q.name;Q.isLeaf?(x=fa("d.setter(this.gl, v);",["v"],["d"],[Q.desc]),e.defineProperty(n,b,{configurable:!1,enumerable:!0,get:function(){return x},set:x})):(f.push({_name:b,_type:J(Q)}),e.defineProperty(n,b,{configurable:!1,enumerable:!0,get:function(){return this._branches[b]},set:function(Q){this._branches[b].apply(Q)}}))},Q.prototype),Q}(xG.create(b,function(Q){return"addr"in Q})))(Q,n)}(Q,n)),x}}(),E5=function(Q){var n;e.defineProperties(this,{gl:{configurable:!1,enumerable:!1,value:Q,writable:!1},glState:{configurable:!1,enumerable:!1,value:((n=(Q=Q)._state)||(Q._state=n=new V$(Q)),n),writable:!1}}),this._currProgram=n5,this._currUniforms=n5,this._currAttribs=n5,this._sync=!0},de=(e.defineProperties(E5.prototype,{program:{configurable:!1,enumerable:!1,get:function(){return this._currProgram},set:function(Q){this._sync&&Q===this._currProgram||(this.gl.useProgram(Q),this._currProgram=Q,this._currUniforms=ve(this.gl,Q),this._currAttribs=Oe(this.gl,Q),this._sync=!0)}},uniforms:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms},set:function(Q){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currUniforms.apply(Q))}},attribs:{configurable:!1,enumerable:!1,get:function(){return this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs},set:function(Q){this._currUniforms&&(this._currProgram&&!this._sync&&(this.gl.useProgram(this._currProgram),this._sync=!0),this._currAttribs.apply(Q))}}}),E5.prototype.useProgram=function(Q){this._sync&&Q===this._currProgram||(this.gl.useProgram(Q),this._currProgram=Q,this._currUniforms=ve(this.gl,Q),this._currAttribs=Oe(this.gl,Q),this._sync=!0)},E5.prototype.directState=function(){return this.glState},E5.prototype.directUniforms=function(){return this._currUniforms},E5.prototype.directAttribs=function(){return this._currAttribs},E5.prototype.syncLoss=function(){this._sync=!1,this.glState.syncLoss()},E5.for=function(Q){var n=Q._renderState;return n||(Q._renderState=n=new E5(Q)),n},"light.color"),he=4294967295,pe=0,ze={},se={},Xe=function(Q){var n;if(Q=b5.convertShape3dModelName(Q),V_(Q)){if(Q.modelType){if(Q.uuid){if(n=rj[Q.uuid])return n}else Q.uuid=d.Math.generateUUID();return n!==n5||TO&&TO[Q.uuid]||CO(Q.uuid,Q),n5}return Q}return n=rj[Q],Q&&n===n5&&Uj.test(Q)&&(TO&&TO[Q]||jO(Q,Q)),n},Re="undefined"!=typeof WebGLTexture&&WebGLTexture.prototype,ge=function(Q){return Q&&QG(Q)===Re},Se=function(Q,n){Q.frameStack?Q.frameStack.push(n):Q.frameStack=[n],Q.bindFramebuffer(36160,n)},me=function(Q){var n=Q.frameStack;if(n){if(n.pop(),n.length)return void Q.bindFramebuffer(36160,n[n.length-1]);Q.frameStack=null}Q.bindFramebuffer(36160,null)},Ye=($_(b5,{graph3dViewAttributes:x5,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:w/60,graph3dViewSortable:!1,graph3dViewOpaqueSortable:!1,graph3dViewBlockSelectable:!0,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Qj,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewRotateMaxPhi:w,graph3dViewRotateMinPhi:0,graph3dViewShadowDisabled:!0,graph3dViewShadowQuality:"high",graph3dViewShadowIntensity:.3,graph3dViewShadowBias:-.005,graph3dViewShadowRadius:.1,graph3dViewShadowType:"hard",graph3dViewShadowDegreeX:30,graph3dViewShadowDegreeZ:-10,graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewSyncEyeWithOrthoWidth:!1,graph3dViewFovy:w/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewDataNumWarningLine:1e4,graph3dViewHeadlightDirection:"camera",graph3dViewHeadlightRange:0,graph3dViewHeadlightGroup:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewHeadlightAmbientIntensity:.7,graph3dViewHeadlightRatioForPhysicalMaterial:.5,graph3dViewFogDisabled:!0,graph3dViewFogMode:"linear",graph3dViewFogDensity:5e-4,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewPickerResolution:.5,graph3dViewDashDisabled:!0,graph3dViewUvClipEnabled:!1,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,graph3dViewBatchInstancedDisabled:!0,graph3dViewFlowBlendMode:"addRGB",graph3dViewEnvmapType:"legacy",graph3dMaxVectorCacheTime:50,graph3dEnvmapCapabilityRequire:8,setShape3dModel:function(Q,n){H5(n)&&Uj.test(n)?jO(Q,n):V_(n)&&n.modelType?CO(Q,n):n===n5?delete rj[Q]:rj[Q]=n},getShape3dModel:Xe,convertShape3dModelName:function(Q){return Q},getShape3dModelMap:function(){return rj},getCachedShape3dModelMap:function(){return Pj},createMatrix:function(Q,n){for(var x=(Q=H_(Q)?Q:[Q]).length-1;0<=x;x--){var b=Q[x];n=qS(b.mat,b.s3,b.r3,b.rotationMode,b.t3,n)}return n},transformVec:uS,glBindFrame:Se,glUnbindFrame:me,createBoxModel:function(){return{vs:J8,ns:V8,uv:f8,is:L8}},createRoundRectModel:function(Q,n){return W8.roundRect(Q,n)},createStarModel:function(Q,n){return W8.star(Q,n)},createRectModel:function(Q,n){return W8.rect(Q,n)},createTriangleModel:function(Q,n){return W8.triangle(Q,n)},createRightTriangleModel:function(Q,n){return W8.rightTriangle(Q,n)},createParallelogramModel:function(Q,n){return W8.parallelogram(Q,n)},createTrapezoidModel:function(Q,n){return W8.trapezoid(Q,n)},createSmoothSphereModel:function(Q,n,x,b,J,L,f){return JV(new wV(Q,n,x,b,J,L,f))},createSphereModel:function(Q,n,x,b,J,L,f){return Q?Z8(Q,n,x,b,J,L,f):b5.createSmoothSphereModel()},createSmoothConeModel:function(Q,n,x,b,J){return G8(Q,n,x,b,J)},createConeModel:function(Q,n,x,b,J,L,f,V){return Q?_8(Q,n,x,b,J,L,f,V):G8(L)},createSmoothCylinderModel:function(Q,n,x,b,J,L,f,V){return JV(new qV(Q,n,x,b,J,L,f,V))},createCylinderModel:function(Q,n,x,b,J,L,f,V){return Q?B8(Q,n,x,b,J,L,f,V):o8(L,f)},createSmoothTorusModel:function(Q,n,x,b,J,L){return JV(new yV(Q,n,x,b,J,L))},createTorusModel:function(Q,n,x,b,J,L,f,V){return Q?a8(Q,n,x,b,J,L,f,V):E8(L,f)},createExtrusionModel:function(Q,n,x,b,J,L,f,V){return $8(Q,n,x,b,J,L,f,V)},createSmoothRingModel:function(Q,n,x,b,J,L){for(var f=[],V=0;V<Q.length-1;V+=2)f.push({x:Q[V],y:Q[V+1]});for(Q=Yh(f,n,x)[0],f=[],V=0;V<Q.length;V++){var l=Q[V];f.push(new I5(l.x,0,l.y))}return JV(new eV(f,L,b,J))},createTextGeometry:function(Q,n){var x=JV(new vV(Q,n));if(n.cube)for(var n=(Q=function(Q){for(var n,x,b,J,L,f,V=H_(Q)?Q:[Q],l=1/0,H=1/0,I=1/0,Z=-1/0,E=-1/0,a=-1/0,o=["vs","top_vs","bottom_vs"],B=0,G=V.length;B<G;B++)for(f=V[B],n=0,x=o.length;n<x;n++)if(L=f[o[n]])for(b=0,J=L.length;b<J;b+=3)l=L5(l,L[b]),H=L5(H,L[b+1]),I=L5(I,L[b+2]),Z=J5(Z,L[b]),E=J5(E,L[b+1]),a=J5(a,L[b+2]);return Q.boundingBox={min:{x:l,y:H,z:I},max:{x:Z,y:E,z:a}}}(x)).min,Q=Q.max,b=n.x,J=n.y,L=n.z,f=Q.x-b||1,V=Q.y-J||1,l=Q.z-L||1,H=["vs","top_vs","bottom_vs"],I=0,Z=H.length;I<Z;I++){var E=x[H[I]];if(E)for(var a=0,o=E.length;a<o;a+=3)E[a]=(E[a]-b)/f-.5,E[a+1]=(E[a+1]-J)/V-.5,E[a+2]=(E[a+2]-L)/l-.5}return x},loadFontFace:function(Q,b){b5.xhrLoad(Q,function(n){if(!n)return b();var x;try{x=JSON.parse(n)}catch(Q){x=JSON.parse(n.substring(65,n.length-2))}uV.loadFace(x),b&&b(x.familyName.toLowerCase())},b?null:{sync:!0})},createRingModel:function(Q,v,O,n,x,b,J,L,f,V){for(var l=[],H=0;H<Q.length-1;H+=2)l.push({x:Q[H],y:Q[H+1]});b=b||b5.shapeSide,J=J||0,L=L||b;var I,Z,E,a,o,B,G,_,$,W,D,A,u,M,t,i,r,P=[],c=[],F=f?[]:x5,q=f?[]:x5,w=V?[]:x5,y=V?[]:x5,K=n?[]:x5,d=n?[]:x5,h=x?[]:x5,p=x?[]:x5,Q=Yh(l,v,O),z=v_(Q),U=0,e=2*Math.PI/b;return Q.forEach(function(Q){if(1<(E=Q.length)){if(a=Q[0],n)for(B=a.x,_=a.y,H=J;H<L;H++)u=(D=H+1)*e,M=f5(A=H*e),t=V5(A),i=f5(u),r=V5(u),K.push(M*B,_,-t*B,i*B,_,-r*B,0,_,0),d.push(.5-.5*M,.5-.5*t,.5-.5*i,.5-.5*r,.5,.5);for(W=0;W<E;W++){for(o=Q[W],B=a.x,G=o.x,_=a.y,$=o.y,I=U/z,U+=S7(a,o),Z=U/z,H=J;H<L;H++)u=(D=H+1)*e,M=f5(A=H*e),t=V5(A),i=f5(u),r=V5(u),P.push(M*G,$,-t*G,i*G,$,-r*G,M*B,_,-t*B,i*G,$,-r*G,i*B,_,-r*B,M*B,_,-t*B),c.push(H/b,Z,D/b,Z,H/b,I,D/b,Z,D/b,I,H/b,I),f&&H===J&&(F.push(0,_,0,0,$,0,M*G,$,-t*G,M*G,$,-t*G,M*B,_,-t*B,0,_,0),q.push(0,.5-_,0,.5-$,2*G,.5-$,2*G,.5-$,2*B,.5-_,0,.5-_)),V&&D===L&&(w.push(0,_,0,i*G,$,-r*G,0,$,0,i*G,$,-r*G,0,_,0,i*B,_,-r*B),y.push(1,.5-_,1-2*G,.5-$,1,.5-$,1-2*G,.5-$,1,.5-_,1-2*B,.5-_));a=o}if(x)for(B=a.x,_=a.y,H=J;H<L;H++)u=(D=H+1)*e,M=f5(A=H*e),t=V5(A),i=f5(u),r=V5(u),h.push(i*B,_,-r*B,M*B,_,-t*B,0,_,0),p.push(.5-.5*i,.5+.5*r,.5-.5*M,.5+.5*t,.5,.5)}}),{vs:P,uv:c,bottom_vs:h,bottom_uv:p,top_vs:K,top_uv:d,from_vs:F,from_uv:q,to_vs:w,to_uv:y}}},!0),$_(o5,{"3d.move.mode":n5,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"3d.clip.direction":null,"3d.clip.percentage":1,"3d.reflectable":!0,"shape.border.gradient.color":n5,"edge.gradient.color":n5,"edge.source.t3":n5,"edge.target.t3":n5,"light.type":"point","light.group":0,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":w/4,"light.range":0,"light.exponent":1,"light.intensity":1,"light.rotation.enable":!1,"light.size":[100,100],"light.specular.disable":!1,"light.mask":he,"headlight.ambientIntensity":n5,"wf.visible":!1,"wf.width":1,"wf.fog":!0,"wf.group":0,"wf.color":O1,"wf.short":!1,"wf.mat":n5,"wf.boundingBox":!1,"wf.material":null,"wf.geometry":!1,"wf.loadQuadWireframe":!1,"wf.combineTriangle":!0,batch:n5,static:n5,"static.group":0,"transparent.mask":!1,"transparent.separate":!1,brightness:n5,"select.brightness":.7,"repeat.uv.length":n5,"rotate.uv.length":n5,"rotate.vs.length":n5,"shadow.cast":!0,"shadow.receive":!0,"3d.clipbox":n5,"3d.clipbox.mask":he,"3d.clipbox.group":0,"3d.clipbox.shape":"cube","effect.flow":!1,"effect.flow.gradient":"spread.horizontal","effect.flow.uvshape":"rect","effect.flow.size":512,"effect.flow.group":0,"effect.flow.intensity":1,"effect.flow.blend":n5,"effect.flow.mask":he,bloom:!1,envmap:0,"envmap.probe":0,roughness:0,renderTextureSamples:4,alphaTest:.4,autorotate:!1,fixSizeOnScreen:!1,"texture.cache":!1,"hide.overlapping.group":n5,"vector.dynamic":!1,"vector.dynamic.maxsize":2048,"texture.scale":1,"geometry.cache":!1,"highlight.mode":!1,"highlight.type":"hard","highlight.visible":!0,"highlight.width":.8,"highlight.color":"rgba(190, 210, 250, 1)","highlight.glow":.8,"highlight.strength":2,"color.empty":[0,0,0,0],"label.face":j5,"label.t3":n5,"label.r3":n5,"label.texture.scale":2,"label.rotationMode":aV,"label.light":!1,"label.blend":n5,"label.reverse.flip":!1,"label.reverse.color":i1,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":j5,"label2.t3":n5,"label2.r3":n5,"label2.texture.scale":2,"label2.rotationMode":aV,"label2.light":!1,"label2.blend":n5,"label2.reverse.flip":!1,"label2.reverse.color":i1,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":j5,"note.t3":n5,"note.r3":n5,"note.texture.scale":2,"note.rotationMode":aV,"note.light":!1,"note.blend":n5,"note.reverse.flip":!1,"note.reverse.color":i1,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":j5,"note2.t3":n5,"note2.r3":n5,"note2.texture.scale":2,"note2.rotationMode":aV,"note2.light":!1,"note2.blend":n5,"note2.reverse.flip":!1,"note2.reverse.color":i1,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,"part.boundingBox":!1,shape3d:n5,"shape3d.color":o,"shape3d.top.color":n5,"shape3d.bottom.color":n5,"shape3d.from.color":n5,"shape3d.to.color":n5,"shape3d.image":n5,"shape3d.image.projection":n5,"shape3d.top.image":n5,"shape3d.bottom.image":n5,"shape3d.from.image":n5,"shape3d.to.image":n5,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":n5,"shape3d.side.to":n5,"shape3d.smooth":n5,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":n5,"shape3d.opacity":n5,"shape3d.reverse.flip":!1,"shape3d.reverse.color":i1,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":n5,"shape3d.uv.scale":n5,"shape3d.uv.rotation":n5,"shape3d.uv.anchor":n5,"shape3d.uv.union":n5,"shape3d.top.uv.offset":n5,"shape3d.top.uv.scale":n5,"shape3d.top.uv.rotation":n5,"shape3d.top.uv.anchor":n5,"shape3d.bottom.uv.offset":n5,"shape3d.bottom.uv.scale":n5,"shape3d.bottom.uv.rotation":n5,"shape3d.bottom.uv.anchor":n5,"shape3d.from.uv.offset":n5,"shape3d.from.uv.scale":n5,"shape3d.from.uv.rotation":n5,"shape3d.from.uv.anchor":n5,"shape3d.to.uv.offset":n5,"shape3d.to.uv.scale":n5,"shape3d.to.uv.rotation":n5,"shape3d.to.uv.anchor":n5,"shape3d.top.cap":n5,"shape3d.bottom.cap":n5,"shape3d.start.angle":0,"shape3d.sweep.angle":l5,"shape3d.point.epsilon":1e-6,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.transmission":n5,"shape3d.reflector":!1,"shape3d.reflector.color":"rgb(128,128,128)","shape3d.reflector.blur":0,"shape3d.reflector.blur.iterations":1,"shape3d.reflector.background":null,"shape3d.reflector.clip":.003,"shape3d.reflector.shadow":"scene","camera.type":"perspective","camera.aspect":1,"camera.fovy":n5,"camera.ortho.width":n5,"camera.near":n5,"camera.far":n5,"camera.background":0,"camera.renderSky":!0,"camera.renderShadowMap":!0,"camera.renderAxis":!1,"camera.renderGrid":!1,"camera.renderEdit":!1,"camera.onlySky":!1,"camera.skybox.blur":n5,"skybox.blur.size":0,"skybox.blur.resolution":0,"texture.mipmap.max":n5,"texture.filter":n5,"texture.filter.min":n5,"texture.filter.mag":n5,"texture.wrap":n5,"texture.flipY":!1,"points.image":"rect","points.color":"white","points.transparent":!1,"points.size":20,"points.opacity":1,"points.uv.scale":[1,1],"points.uv.offset":[0,0],"points.discard.selectable":!1,"all.light":!0,"all.visible":!0,"all.color":o,"all.image":n5,"all.blend":n5,"all.opacity":n5,"all.reverse.flip":!1,"all.reverse.color":i1,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":n5,"all.uv.offset":n5,"all.uv.scale":n5,"all.uv.rotation":n5,"all.uv.anchor":n5,"all.uv.union":n5,"all.discard.selectable":!0,"all.material":n5,mat:n5,"left.mat":n5,"right.mat":n5,"top.mat":n5,"bottom.mat":n5,"front.mat":n5,"back.mat":n5,"edge.source.anchor.elevation":n5,"edge.target.anchor.elevation":n5,"edge.source.offset.elevation":0,"edge.target.offset.elevation":0,"3d.bone.visible":!1},!0),[0,0,0,0]),Te=function(Q){return Q instanceof m8},ke=function(Q){return[Q.x,Q.e||0,Q.y]},Ne=function(Q,n,x){for(var b=(n=sh(n||0))[0],J=n[1],L=n[2];x--;)Q.push(b,J,L)},je=function(Q,n,x){for(var b=(n=sh(n||0))[0],J=n[1],L=n[2],f=n[3];x--;)Q.push(b,J,L,f)},Ce=function(Q,n,x){if(n)for(var b,J,L,f=n[0],V=n[1],l=n[2],H=n[4],I=n[5],Z=n[6],E=n[8],a=n[9],o=n[10],B=n[12],G=n[13],_=n[14],$=x.length,W=0,W=0;W<$;W+=3)b=x[W],J=x[W+1],L=x[W+2],Q.push(f*b+H*J+E*L+B,V*b+I*J+a*L+G,l*b+Z*J+o*L+_);else G_(Q,x);return Q},Qs=function(Q,n,x){var b=n.s("light.intensity"),J=(f=sh(n.s(de)))[0],L=f[1],f=f[2],b=(1!==b&&(J*=b,L*=b,f*=b),n.s("light.disabled"));Q.push(J,L,f,b?1:0),x.c.push(J,L,f),x.g.push(b?-1:n.s("light.group")),x.e.push(b?1:0)},ns=(u$=new I5,M$=new mK,function(Q,n){return u$.copy(Q).applyEuler(n.getEuler(M$)),[u$.x,u$.y,u$.z]}),xs=function(Q,n,x,b){if((b=b===n5?Q._headlightAmbientIntensity:b)!==n._lastHeadlightAmbientIntensity&&(n.uHeadlightAmbientIntensity=n._lastHeadlightAmbientIntensity=b),x!==n._lastLightMask&&(n._lastLightMask=x,b=Q._lastLightUploadInfo)){for(var J,L=b.g,f=b.e,V=L.length,l=new Array(V),H=!1,I=0;I<V;I++)J=L[I],(l[I]=!(J<0||32<=J)&&x&1<<J?0:1)!==f[I]&&(H=!0);if(H){b.e=f=l;var Z,E=b.c,b=(n.uHeadlightColor=[E[0],E[1],E[2],f[0]],Q._59O),a=Q._spots,Q=Q._dirs,o=3,B=1;if(V=b.length){for(I=0,Z=[];I<V;I++)Z.push(E[o++],E[o++],E[o++],f[B++]);n.uPointColor=Z}if(V=a.length){for(I=0,Z=[];I<V;I++)Z.push(E[o++],E[o++],E[o++],f[B++]);n.uSpotColor=Z}if(V=Q.length){for(I=0,Z=[];I<V;I++)Z.push(E[o++],E[o++],E[o++],f[B++]);n.uDirColor=Z}}}},bs=function(Q,n){return Math.max(Q.getRotateMinPhi()+ZS,Math.min(Q.getRotateMaxPhi()-ZS,n))},Js=function(){return.05+U5()/2},Ls=function(Q,n,x,b){var J=Q.getEye(),Q=(Q.isOrtho()?((L=BS(Q.getCenter(),J))[0]+=b[0],L[1]+=b[1],L[2]+=b[2]):L=J,n),J=x,n=b,x=L,b=_S(Q,J),L=BS(x,n,!0),Q=_S(L,J);return P5(Q)<ZS?x5:(x=(b-_S(n,J))/Q,[n[0]+L[0]*x,n[1]+L[1]*x,n[2]+L[2]*x])},fs=function(Q,n){return{x:2*Q.x-n.x,y:2*Q.y-n.y}},Vs=function(Q,n,x,b){if(!Q)return L=K5(n.y-x.y,x.x-n.x),{x:n.x+b*V5(L),y:n.y+b*f5(L)};if(!x)return L=K5(Q.y-n.y,n.x-Q.x),{x:n.x+b*V5(L),y:n.y+b*f5(L)};var J,L,f,V,l=BS([Q.x,Q.y,0],[n.x,n.y,0],!0),H=BS([x.x,x.y,0],[n.x,n.y,0],!0),I=-(l[0]+H[0])/2,Z=-(l[1]+H[1])/2,E=r5(I*I+Z*Z);return E<ZS?(L=K5(Q.y-n.y,n.x-Q.x),{x:n.x+b*V5(L),y:n.y+b*f5(L)}):(J=Q.x-n.x,Q=Q.y-n.y,f=x.x-n.x,V=x.y-n.y,J=r5(J*J+Q*Q),Q=r5(f*f+V*V),L=c5(_S(l,H))/2,f=0<l[1]*H[0]-l[0]*H[1]?-1:1,I/=E,Z/=E,V=b/V5(L),l=J5(J,Q)/f5(L),E=Math.min(V,l),H={x:n.x+f*E*I,y:n.y+f*E*Z},x.b&&V>Q/f5(L)&&(H.adjust=!0),H)},ls=function(Q){var n=Q[0],x=Q[1],b=Q[2],J=Q[3],L=Q[4],f=Q[5],V=Q[6],l=Q[7],H=Q[8],I=Q[9],Z=Q[10],E=Q[11],a=Q[12],o=Q[13],B=Q[14],G=Q[15],_=n*f-x*L,$=n*V-b*L,W=n*l-J*L,D=x*V-b*f,A=x*l-J*f,u=b*l-J*V,M=H*o-I*a,t=H*B-Z*a,i=H*G-E*a,r=I*B-Z*o,P=I*G-E*o,c=Z*G-E*B,F=_*c-$*P+W*r+D*i-A*t+u*M;if(!F)return x5;Q[0]=(f*c-V*P+l*r)*(F=1/F),Q[1]=(b*P-x*c-J*r)*F,Q[2]=(o*u-B*A+G*D)*F,Q[3]=(Z*A-I*u-E*D)*F,Q[4]=(V*i-L*c-l*t)*F,Q[5]=(n*c-b*i+J*t)*F,Q[6]=(B*W-a*u-G*$)*F,Q[7]=(H*u-Z*W+E*$)*F,Q[8]=(L*P-f*i+l*M)*F,Q[9]=(x*i-n*P-J*M)*F,Q[10]=(a*A-o*W+G*_)*F,Q[11]=(I*W-H*A-E*_)*F,Q[12]=(f*t-L*r-V*M)*F,Q[13]=(n*r-x*t+b*M)*F,Q[14]=(o*$-a*D-B*_)*F,Q[15]=(H*D-I*$+Z*_)*F},Hs=function(Q,n){var x,b;n&&(x=n[0],b=n[1],n=n[2],Q[12]=Q[0]*x+Q[4]*b+Q[8]*n+Q[12],Q[13]=Q[1]*x+Q[5]*b+Q[9]*n+Q[13],Q[14]=Q[2]*x+Q[6]*b+Q[10]*n+Q[14],Q[15]=Q[3]*x+Q[7]*b+Q[11]*n+Q[15])},Is=function(Q,n){var x,b;n&&(x=n[0],b=n[1],n=n[2],Q[0]=Q[0]*x,Q[1]=Q[1]*x,Q[2]=Q[2]*x,Q[3]=Q[3]*x,Q[4]=Q[4]*b,Q[5]=Q[5]*b,Q[6]=Q[6]*b,Q[7]=Q[7]*b,Q[8]=Q[8]*n,Q[9]=Q[9]*n,Q[10]=Q[10]*n,Q[11]=Q[11]*n)},Zs=function(Q,n,x){var b=n[0],J=n[1],L=n[2],f=n[3],V=n[4],l=n[5],H=n[6],I=n[7],Z=n[8],E=n[9],a=n[10],o=n[11],B=n[12],G=n[13],_=n[14],n=n[15],$=x[0],W=x[1],D=x[2],A=x[3];return Q[0]=$*b+W*V+D*Z+A*B,Q[1]=$*J+W*l+D*E+A*G,Q[2]=$*L+W*H+D*a+A*_,Q[3]=$*f+W*I+D*o+A*n,$=x[4],W=x[5],D=x[6],A=x[7],Q[4]=$*b+W*V+D*Z+A*B,Q[5]=$*J+W*l+D*E+A*G,Q[6]=$*L+W*H+D*a+A*_,Q[7]=$*f+W*I+D*o+A*n,$=x[8],W=x[9],D=x[10],A=x[11],Q[8]=$*b+W*V+D*Z+A*B,Q[9]=$*J+W*l+D*E+A*G,Q[10]=$*L+W*H+D*a+A*_,Q[11]=$*f+W*I+D*o+A*n,$=x[12],W=x[13],D=x[14],A=x[15],Q[12]=$*b+W*V+D*Z+A*B,Q[13]=$*J+W*l+D*E+A*G,Q[14]=$*L+W*H+D*a+A*_,Q[15]=$*f+W*I+D*o+A*n,Q},Es=function(Q,n,x,b){var J,L,f,V,l=n[0],H=n[1],n=n[2],I=b[0],Z=b[1],b=b[2],E=x[0],a=x[1],x=x[2];return P5(l-E)<ZS&&P5(H-a)<ZS&&P5(n-x)<ZS?AS(Q):(V=1/r5((E=l-E)*E+(a=H-a)*a+(x=n-x)*x),(V=r5((J=Z*(x*=V)-b*(a*=V))*J+(b=b*(E*=V)-I*x)*b+(I=I*a-Z*E)*I))?(J*=V=1/V,b*=V,I*=V):I=b=J=0,(V=r5((Z=a*I-x*b)*Z+(L=x*J-E*I)*L+(f=E*b-a*J)*f))?(Z*=V=1/V,L*=V,f*=V):f=L=Z=0,Q[0]=J,Q[1]=Z,Q[2]=E,Q[3]=0,Q[4]=b,Q[5]=L,Q[6]=a,Q[7]=0,Q[8]=I,Q[9]=f,Q[10]=x,Q[11]=0,Q[12]=-(J*l+b*H+I*n),Q[13]=-(Z*l+L*H+f*n),Q[14]=-(E*l+a*H+x*n),Q[15]=1,Q)},as=function(Q,n,x,b,J){var n=1/y5(n/2),L=1/(b-J);return Q[0]=n/x,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=0,Q[5]=n,Q[6]=0,Q[7]=0,Q[8]=0,Q[9]=0,Q[10]=(J+b)*L,Q[11]=-1,Q[12]=0,Q[13]=0,Q[14]=2*J*b*L,Q[15]=0,Q},os=function(Q,n,x,b,J,L,f){var V=1/(n-x),l=1/(b-J),H=1/(L-f);return Q[0]=-2*V,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=0,Q[5]=-2*l,Q[6]=0,Q[7]=0,Q[8]=0,Q[9]=0,Q[10]=2*H,Q[11]=0,Q[12]=(n+x)*V,Q[13]=(J+b)*l,Q[14]=(f+L)*H,Q[15]=1,Q},Bs=function(Q,n){var x=n[0],b=n[1],J=n[2],L=(L=x*x+b*b+J*J+(n=n[3])*n)?1/L:0;return Q[0]=-x*L,Q[1]=-b*L,Q[2]=-J*L,Q[3]=n*L,Q},Gs=function(Q,n){var x=n[0]+n[5]+n[10],b=0;return 0<x?(b=2*Math.sqrt(x+1),Q[3]=.25*b,Q[0]=(n[6]-n[9])/b,Q[1]=(n[8]-n[2])/b,Q[2]=(n[1]-n[4])/b):n[0]>n[5]&n[0]>n[10]?(b=2*Math.sqrt(1+n[0]-n[5]-n[10]),Q[3]=(n[6]-n[9])/b,Q[0]=.25*b,Q[1]=(n[1]+n[4])/b,Q[2]=(n[8]+n[2])/b):n[5]>n[10]?(b=2*Math.sqrt(1+n[5]-n[0]-n[10]),Q[3]=(n[8]-n[2])/b,Q[0]=(n[1]+n[4])/b,Q[1]=.25*b,Q[2]=(n[6]+n[9])/b):(b=2*Math.sqrt(1+n[10]-n[0]-n[5]),Q[3]=(n[1]-n[4])/b,Q[0]=(n[8]+n[2])/b,Q[1]=(n[6]+n[9])/b,Q[2]=.25*b),Q},_s=function(Q,n,x){var b=n[0],J=n[1],L=n[2],f=L+L,V=b*(I=b+b),l=b*(Z=J+J),b=b*f,H=J*Z,J=J*f,I=(n=n[3])*I,Z=n*Z,n=n*f;return Q[0]=1-(H+(L=L*f)),Q[1]=l+n,Q[2]=b-Z,Q[3]=0,Q[4]=l-n,Q[5]=1-(V+L),Q[6]=J+I,Q[7]=0,Q[8]=b+Z,Q[9]=J-I,Q[10]=1-(V+H),Q[11]=0,Q[12]=x[0],Q[13]=x[1],Q[14]=x[2],Q[15]=1,Q},$s=function(Q,n){if(Q.isVREnabled()){var x=Q.vr.getViewMatrix(n);if(x)return x}return Q._camera?Q._camera.getViewMatrix(n):Es(n||$S(),Q._eye,Q._center,Q._up)},Ws=function(Q,n){if(Q.isVREnabled()&&(b=Q.vr.getProjectMatrix()))return b;if(Q._camera)return Q._camera.getProjectMatrix();if(!n&&Q._computedProjectMatrix)return DS(Q._computedProjectMatrix);var x,b=Q.getAspect(),n=Q._near,J=Q._far,L=$S();return Q._ortho?(x=Q._orthoWidth/2,os(L,-x,x,-(x/=b),x,n,J)):as(L,Q._fovy,b,n,J),L},Ds=function(Q,n){if(!Q)return x5;var x=[],b=0,J=Q.length,L=J/3;if(n){for(;b<J;b++)x[b]=0;for(b=0;b<n.length;b+=3){var f=[],V=[];(H=[])[0]=Q[3*n[b+1]+0]-Q[3*n[b]+0],H[1]=Q[3*n[b+1]+1]-Q[3*n[b]+1],H[2]=Q[3*n[b+1]+2]-Q[3*n[b]+2],f[0]=Q[3*n[b+2]+0]-Q[3*n[b+1]+0],f[1]=Q[3*n[b+2]+1]-Q[3*n[b+1]+1],f[2]=Q[3*n[b+2]+2]-Q[3*n[b+1]+2],V[0]=H[1]*f[2]-H[2]*f[1],V[1]=H[2]*f[0]-H[0]*f[2],V[2]=H[0]*f[1]-H[1]*f[0];for(var l=0;l<3;l++)x[3*n[b+l]+0]+=V[0],x[3*n[b+l]+1]+=V[1],x[3*n[b+l]+2]+=V[2]}}else for(b=0;b<L;b+=3){var H,f=[],V=[];for((H=[])[0]=Q[3*(b+1)+0]-Q[3*b+0],H[1]=Q[3*(b+1)+1]-Q[3*b+1],H[2]=Q[3*(b+1)+2]-Q[3*b+2],f[0]=Q[3*(b+2)+0]-Q[3*(b+1)+0],f[1]=Q[3*(b+2)+1]-Q[3*(b+1)+1],f[2]=Q[3*(b+2)+2]-Q[3*(b+1)+2],V[0]=H[1]*f[2]-H[2]*f[1],V[1]=H[2]*f[0]-H[0]*f[2],V[2]=H[0]*f[1]-H[1]*f[0],l=0;l<3;l++)x[3*(b+l)+0]=V[0],x[3*(b+l)+1]=V[1],x[3*(b+l)+2]=V[2]}for(b=0;b<J;b+=3){var I=[],Z=(I[0]=x[b+0],I[1]=x[b+1],I[2]=x[b+2],r5(I[0]*I[0]+I[1]*I[1]+I[2]*I[2]));0===Z&&(Z=ZS),I[0]=I[0]/Z,I[1]=I[1]/Z,I[2]=I[2]/Z,x[b+0]=I[0],x[b+1]=I[1],x[b+2]=I[2]}return new oS(x)},As=function(Q,n,x,b,J){return b=b||n.createTexture(),x&&(J?(J.image=x,Q.createTexture(J,b)):Q.createTexture({image:x},b)),b},us=function(Q,n,x){return x=new Uint8Array(x||4),n=n||Q.createTexture(),Q.activeTexture(33984),ts(Q,n),is(Q,10241,9729),Q.texImage2D(3553,0,6408,1,1,0,6408,5121,x),n},Ms=function(Q){return Q.createBuffer()},ts=function(Q,n){Q.bindTexture(3553,n||Q._emptyTexture)},is=function(Q,n,x){Q.texParameteri(3553,n,x)},rs=function(Q,n){(Q=E5.for(Q).directState()).polygonOffset.enabled=!0,Q.polygonOffset.value=n},Ps=function(Q){E5.for(Q).directState().polygonOffset.enabled=!1},cs=function(Q,n){return Q=E5.for(Q).directState().color.clear,n&&Q?Q.slice(0):Q},Fs=function(Q,n){n&&(E5.for(Q).directState().color.clear=sh(n))},qs=function(Q,n,x){if(x!==n._lastClipboxEnabled){var b=Q._boxClipperGroups,J=Q._boxClipperShape,L=b?b.length:0,f=new Array(L);if(x)for(var V=0;V<L;V++)f[V]=x&1<<b[V]?J[V]:0;n._lastClipboxEnabled=x,n.uClipperShape=f}},ws=qs,ys=function(Q){var n=(Q=E5.for(Q)).directUniforms(),Q=Q.directAttribs();n.uFix=!0,Q.aNormal=!1},Ks=function(Q){E5.for(Q).directUniforms().uFix=!1},Us=function(Q,n,x,b,J,L,f){var V=(l=E5.for(Q)).directState(),l=l.directUniforms();Q._picking||(n?(l.uBlend=!0,l.uBlendColor=n):l.uBlend=!1,l.uLight=l.uFog=x==x5||x,L_(b)&&1!==b&&(l.uPartOpacity=b),l.uReverseFlip=J!=x5&&J,l.uFixPickReverseColor=L||i1),V.cullFace.enabled=!!f},es=function(Q){Q._picking||(E5.for(Q).directUniforms().uPartOpacity=1)},vs=(A$=[1,0,0,0,1,0,0,0,0],function(Q,n,x,b,J,L,f,V,l,H){var I=(Z=E5.for(Q)).directUniforms(),Z=Z.directAttribs();if(!n)return I.uSampler=Q._emptyTexture,void(I.uBlendSampler=Q._emptyBlendTexture);I.uTexture=!0,I.uDiscardSelectable=!f_(x)||x,Z.aUv=gs(Q,b,J,x5,2),H?(I.uBlendTexture=!0,I.uBlendSampler=H):(I.uBlendTexture=!1,I.uBlendSampler=Q._emptyBlendTexture),I.uSampler=n,I.uUvMatrix=L||f||V||l?ZO(V,L,f,l):A$}),Os=function(Q,n){var x=(b=E5.for(Q)).directUniforms(),b=b.directAttribs();Q.activeTexture(33984),ts(Q,x5),Q.activeTexture(33985),ts(Q,x5),n&&(b.aUv=!1,x.uTexture=!1,x.uSampler=Q._emptyTexture,x.uBlendTexture=!1,x.uBlendSampler=Q._emptyBlendTexture)},ds=function(Q,n,x,b){var J=n.getBrightness(x),L=x.s("alphaTest"),f=E5.for(Q),V=f.directUniforms(),l=n._picking,H=!0;return J!=x5&&1!==J&&(V.uBrightness=J),V.uAlphaTest=L,V.shadowReceive=!l&&x.s("shadow.receive"),V.shadowCull=!l&&!!x.s("shadow.cull"),ws(n,V,x.s("3d.clipbox")?pe:x.s("3d.clipbox.mask")),(J=x.s("3d.clip.direction"))?(0===(L=x.s("3d.clip.percentage"))&&(H=!1),J=n.getData3dUI(x)._formatClipUniforms(J,L,x),V.uClipPercent=J[1],V.uClipDirection=J[0]):V.uClipDirection=0,V.blackout=!(!Q._blooming||x.s("bloom")),l||(n._flowObjects.length&&n.flowMap.resetDataFlowEnabld(x,V),b||(L=x.s("envmap"),V.uUseEnvMap=!!L,V.roughness=x.s("roughness"),n._setEnvmapByProbeId(V,x.s("envmap.probe"),L||.01),xs(n,V,x.s("light.mask"),x.s("headlight.ambientIntensity"))),V.uFog=x.s("shape3d.light")!=x5),b||!!x._flipSide!=(2===x._forceSingleFace)&&(f.directState().cullFace.frontFace=2304),H},hs=function(Q,n,x,b,J){var L=(f=E5.for(Q)).directUniforms(),f=f.directAttribs();!n||X5||g5||Q.lineWidth(n),x&&!Q._picking&&(L.uFixPickReverseColor=x),b&&(f.aPosition=gs(Q,b,J,x5))},ps=function(Q,n,x,b){Q&&(b&&(x*=b),Q.calls++,Q.vertices+=x,n==x5||4===n?Q.faces+=x/3:1===n?Q.lines+=x/2:n===Ue.POINTS?Q.points+=x:5===n||6===n?Q.faces+=x-2:3===n?Q.lines+=x-1:2===n&&(Q.lines+=x))},zs=function(Q,n,x,b,J){l$&&(b=Q[l$]),J?Q.drawArraysInstanced(b==x5?4:b,n,x,J):Q.drawArrays(b==x5?4:b,n,x),ps(Q._renderInfo,b,x,J)},ss=function(Q,n,x,b,J,L){l$&&(b=Q[l$]),L?Q.drawElementsInstanced(b==x5?4:b,x,J==x5?5123:J,n==x5?0:2*n,L):Q.drawElements(b==x5?4:b,x,J==x5?5123:J,n==x5?0:2*n),ps(Q._renderInfo,b,x,L)},Xs=function(Q,n,x,b,J){return Q.bindBuffer(34962,n),x&&Q.bufferData(34962,x,35044),n},Rs=function(Q,n,x,b,J){return(n=gs(Q,n,x,b,J)).instanced=!0,n},gs=function(Q,n,x,b,J){return x?Ys(Q,34962,n,x):Xs(Q,n,x)},Ss=function(Q,n,x){Q.bindBuffer(34963,n),x&&Q.bufferData(34963,x,35044)},ms=function(Q,n,x){Ys(Q,34963,n,x)},Ys=function(Q,n,x,b){var J,L=b._bufId||(b._bufId=d.Math.generateIncreasingID()),f=Q._4NQ;return(x=f[L])&&x._buf?Q.bindBuffer(n,x._buf):(J=Ms(Q),x=f[L]={_buf:J},Q.bindBuffer(n,J),Q.bufferData(n,b,35044),f=5126,b instanceof Uint16Array?f=5123:b instanceof Int16Array?f=5122:b instanceof Uint32Array?f=5125:b instanceof Int32Array?f=5124:b instanceof Int8Array?f=5120:(b instanceof Uint8Array||b instanceof Uint8ClampedArray)&&(f=5121),J.glType=f),x._fid=Q._renderInfo.frame,x._buf},Ts=function(Q,n){n!=x5&&0<=n&&Q.disableVertexAttribArray(n)},ks=function(Q,n){var x=Q.getGL(),x=E5.for(x).directUniforms();Q._7O=Q._8O.pop(),Q._modelMatrix=Q._modelMatrixStack.pop(),n&&(x.uModelViewMatrix=Q._7O,Q._6O=n,x.uNormalMatrix=n)},Ns=function(Q,n){var x,b,J,L,f,V;return(x=n=n||$S())[0]=Q[0],x[1]=Q[1],x[2]=Q[2],x[3]=Q[3],x[4]=Q[4],x[5]=Q[5],x[6]=Q[6],x[7]=Q[7],x[8]=Q[8],x[9]=Q[9],x[10]=Q[10],x[11]=Q[11],x[12]=Q[12],x[13]=Q[13],x[14]=Q[14],x[15]=Q[15],ls(n),Q=(x=n)[1],b=x[2],J=x[3],L=x[6],f=x[7],V=x[11],x[1]=x[4],x[2]=x[8],x[3]=x[12],x[4]=Q,x[6]=x[9],x[7]=x[13],x[8]=b,x[9]=L,x[11]=x[14],x[12]=J,x[13]=f,x[14]=V,n},js=function(Q,n){var x=Q.getGL(),b=Q._7O,x=E5.for(x).directUniforms();n?(Q._8O.push(DS(b)),Q._modelMatrixStack.push(DS(Q._modelMatrix)),x.uModelMatrix=Zs(Q._modelMatrix,Q._modelMatrix,n),Q._7O=Zs(b,b,n)):x.uModelMatrix=Q._modelMatrix=DS(WS),x.uModelViewMatrix=b,x.uNormalMatrix=Ns(b,Q._6O)},Cs={body:0,label:1,label2:2,note:3,note2:4,symbol:5},QO=function(Q,n,x,b,J,L){var f,V=x?((x=b._pickId)||(x=b._pickId=n._pickIdUsed,n._pickIdUsed+=10),null!=(V=Cs[J])?f=x+V:(f=(x=(x=b._pickExtraPartMap)||(b._pickExtraPartMap={}))[J])||(f=x[J]=n._pickIdUsed++),n[f]||(n[f]={data:b.data,part:J}),Hu(f)):Ye;return L||(E5.for(Q).directUniforms().uFixPickReverseColor=V),V},nO=QO,xO=function(Q,n,x){var b,J="target"===(x="target"!==x?"source":x)?n.getTargetAgent():n.getSourceAgent(),x="edge."+x+".";if(v(J))return $=n.s(x+"anchor.x"),f=n.s(x+"anchor.elevation"),G=n.s(x+"anchor.y"),b=FS(J,Q.getMat(J)),W=J.getAnchor3d(),($=uS([($===n5?.5:$)-W.x,(f===n5?.5:f)-W.y,(G===n5?.5:G)-W.z],b))[1]+=n.s(x+"offset.elevation"),$;var L=n.s(x+"index"),f=Q.getData3dUI(J);if(!f.info||!f.info.list)return!1;if(0<=L){for(var V,l,H,I=(_=f.info._lastPointsSegments).points,Z=_.segments,E=-1,a=-1,o=0,B=(Z||I).length;o<B;o++){if(3===(l=Z?Z.get(o):1))H=2;else if(4===l)H=3;else{if(5===l)continue;H=1}if(E+=H,++a===L){V=I.get(E);break}}return[(V=V||I.get(I.length-1)).x,(V.e||0)+n.s(x+"offset.elevation"),V.y]}var G=n.s(x+"percent")||0,G=Math.max(0,Math.min(G,1));if(!f||!f.getCache)return!1;var _,$,W=f.getCache(),B=W[W.length-1].length;return[($=(_=Q.getLineOffset(J,G*B)).point).x,$.y+n.s(x+"offset.elevation"),$.z]},bO=(D$={center:function(Q,n,x,b,J){var L=-n[1]/2,L={x:-n[0]/2,y:L,width:n[0],height:n[1]};return[(n=t1(Q,L,x)).x+b,-n.y-J,b5.getPosition3dGap()]},front:function(Q,n,x,b,J){var L=-n[1]/2,L={x:-n[0]/2,y:L,width:n[0],height:n[1]};return[(Q=t1(Q,L,x)).x+b,-Q.y-J,n[2]/2+b5.getPosition3dGap()]},back:function(Q,n,x,b,J){var L={x:-n[0]/2,y:-n[1]/2,width:n[0],height:n[1]};return[-(Q=t1(Q,L,x)).x-b,-Q.y-J,-n[2]/2-b5.getPosition3dGap()]},left:function(Q,n,x,b,J){var L=-n[1]/2,L={x:-n[2]/2,y:L,width:n[2],height:n[1]},Q=t1(Q,L,x);return[-n[0]/2-b5.getPosition3dGap(),-Q.y-J,Q.x+b]},right:function(Q,n,x,b,J){var L={x:-n[2]/2,y:-n[1]/2,width:n[2],height:n[1]},Q=t1(Q,L,x);return[n[0]/2+b5.getPosition3dGap(),-Q.y-J,-Q.x-b]},top:function(Q,n,x,b,J){var L={x:-n[0]/2,y:-n[2]/2,width:n[0],height:n[2]};return[(Q=t1(Q,L,x)).x+b,n[1]/2+b5.getPosition3dGap(),Q.y+J]},bottom:function(Q,n,x,b,J){var L=-n[2]/2,L={x:-n[0]/2,y:L,width:n[0],height:n[2]};return[(Q=t1(Q,L,x)).x+b,-n[1]/2-b5.getPosition3dGap(),-Q.y-J]}},function(Q,n,x,b,J,L){return D$[b](Q,n,x,J||0,L||0)}),JO=function(Q,n,x,b,J,L,f,V,l,H){return J&&(n[0]+=J[0],n[1]+=J[1],n[2]+=J[2]),Hs(Q,x),V?(J=$S(),sV(J,l,H),uS(n,J),Hs(Q,n),Q.auto=V,Q.pos=uS([0,0,0],Q),L&&(x=Q.mat2=$S(),sV(x,L,f))):(sV(Q,l,H),Hs(Q,n),b===Qi?PS(Q,-w5):b===ni?PS(Q,w5):b===xi?rS(Q,-w5):b===bi?rS(Q,w5):b===C5&&PS(Q,w),sV(Q,L,f)),Q},LO=function(Q,n){var x,b,J=n.auto,L=n.mat2,Q=Q.gv;J?(x=$S(),b=[0,0,0,0],J="string"==typeof J?[(J.indexOf("x")<0?Q._eye:Q._center)[0],(J.indexOf("y")<0?Q._eye:Q._center)[1],(J.indexOf("z")<0?Q._eye:Q._center)[2]]:Q._eye,Gs(b,Es($S(),J,Q._center,Q._up)),_s(x,Bs(b,b),n.pos),L&&Zs(x,x,L),js(Q,x)):js(Q,n)},fO=function(Q,n,x,b,J){var L=Q.s,f=Q.gv,V=f.getGL(),l=f._buffer,H=f._1O,I=E5.for(V).directAttribs();As(f,V,vh,H),LO(Q,x),Us(V,L(n+".blend"),L(n+".light"),L(n+".opacity"),L(n+".reverse.flip"),L(n+".reverse.color"),Q.data._forceSingleFace||L(n+".reverse.cull")),vs(V,H,J,l.uv,n8),I.aPosition=gs(V,l.vs,b,x5),I.aNormal=gs(V,l.ns,x8,x5),ms(V,l.is,b8),ss(V,0,b8.length),Os(V,H),es(V),ks(f)},VO=function(Q,n,x){var b=Q.gv,J=Q.data,Q=Q[n]={blend:b.getBodyColor(J)||b.getFaceBlend(J,n),light:b.getFaceLight(J,n),color:b.getFaceColor(J,n),opacity:b.getFaceOpacity(J,n),transparent:b.getFaceTransparent(J,n),reverseFlip:b.getFaceReverseFlip(J,n),reverseColor:b.getFaceReverseColor(J,n),reverseCull:b.getFaceReverseCull(J,n),texture:b.getFaceImage(J,n),blendTexture:b.getFaceBlendImage(J,n),discardSelectable:b.getFaceDiscardSelectable(J,n),material:b.getFaceMaterial(J,n)};return"csg"!==n&&(Q.uv=b.getFaceUv(J,n)||x&&x[n+"Uv"],Q.uvScale=b.getFaceUvScale(J,n)||x&&x[n+"UvScale"],Q.uvOffset=b.getFaceUvOffset(J,n)||x&&x[n+"UvOffset"],Q.uvRotation=b.getFaceUvRotation(J,n)||x&&x[n+"uvRotation"],Q.uvAnchor=b.getFaceUvAnchor(J,n)||x&&x[n+"uvAnchor"],(x=b.getFaceMat(J,n))&&(b=FS(J,x),J.appendAnchorMatrix3d(b),Q.mat=b)),Q},lO=function(Q,n,x,b,J){var L,f,V,l,H=Q[b];H&&(L=Q.data,!(Q=Q.gv)._picking&&H.material?(f={mesh:{vs:H.vs,ns:H.ns,uv:H.tuv},mat:H.material},Q._prefabRenderer.render(n,f,L)):J(H.transparent)&&(f=Q._buffer,J=Q.getTexture(H.texture,L,b),b=Q.getTexture(H.blendTexture,L),V=(l=E5.for(n)).directUniforms(),l=l.directAttribs(),vs(n,J,H.discardSelectable,f.uv,H.tuv,H.uvOffset,H.uvScale,H.uvRotation,H.uvAnchor,b),Us(n,H.blend,H.light,H.opacity,H.reverseFlip,H.reverseColor,L._forceSingleFace||H.reverseCull),H.cs&&!Q._batchColorDisabled?(V.uBatchColor=!0,l.aBatchColor=gs(n,f.batchColor,H.cs,x.aBatchColor,4)):V.uDiffuse=H.color||o5["color.empty"],l.aPosition=gs(n,f.vs,H.vs,x5),l.aNormal=gs(n,f.ns,H.ns,x5),zs(n,0,H.vs.length/3),H.cs&&!Q._batchColorDisabled&&(V.uBatchColor=!1,Ts(n,x.aBatchColor)),es(n),Os(n,J)))},HO=function(Q,n,b){var J,L,f,V;H_(Q)?Q.forEach(function(Q){HO(Q,n,b)}):H5(Q)?HO(c8(n,Q),n,b):V_(Q)?Q.model3d?b5.traverse(Q,function(Q,n){J=Q.position,L=Q.scale,(f=Q.quaternion)||(f=Q.euler)&&(V=V||[0,0,0],f=s.eulerArrayToQuaternionArray(f,V));var x=Q._matrixWorld;(x=x||(Q._matrixWorld=new X)).composeFromArray(J,f,L),n&&x.premultiply(n._matrixWorld),Q.mesh&&b.push({matrix:x,mesh:Q.mesh})},null,"comps"):Q.shape3d?HO(Q.shape3d,n,b):b.push({mesh:Q}):b.push({mesh:Q})},IO=(W$=new s.Matrix2d,function(Q,n,x,b,J){return(J=J||W$).identity(),b&&J.translate(-b[0],-b[1]),x&&J.scale(x[0],x[1]),Q&&J.rotate(Q),b&&J.translate(b[0],b[1]),n&&J.translate(n[0],n[1]),J}),ZO=(_$=[1,0,0,0,1,0,0,0,1],$$=[1,0,0,0,1,0,0,0,1],function(Q,n,x,b){return Q||n||x||b?(G$=Q?(B$=V5(Q),f5(Q)):(B$=0,1),o$=x?(a$=x[0],x[1]):a$=1,H$=G$*a$,I$=B$*a$,Z$=-B$*o$,G$*=o$,o$=b?(E$=b[0]-(H$*b[0]+Z$*b[1]),b[1]-(I$*b[0]+G$*b[1])):E$=0,n&&(E$+=n[0],o$+=n[1]),$$[0]=H$,$$[1]=I$,$$[3]=Z$,$$[4]=G$,$$[6]=E$,$$[7]=o$,$$):_$}),EO=function(Q,n,x,b,J,L){for(var f,V,l,H,I,Z,E,a,o,B=[b-n,J-x],G=Q?Q.length:0,_=0;_<G;_++){for(V=2,l=(f=Q[_])[0],H=f[1];V+1<f.length;){if(I=f[V],Z=f[V+1],F_(n,x,b,J,l,H,I,Z,!0)){a=S7(E=[I-l,Z-H]),E[0]/=a,E[1]/=a,a=_S(B,E),o=[E[0]*(a=0<a?L:-L),E[1]*a];break}l=I,H=Z,V+=2}if(o)break}if(o)for(b=n+o[0],J=x+o[1],_=0;_<G;_++)for(V=2,l=(f=Q[_])[0],H=f[1];V+1<f.length;){if(I=f[V],Z=f[V+1],F_(n,x,b,J,l,H,I,Z,!0))return[0,0];l=I,H=Z,V+=2}return o||[b-n,J-x]},aO=function(Q){return"nearest"===Q?9728:"linear"===Q?9729:Q},oO=d.graph3d={WebGLConstants:Ue},L=function(Q,n,x){HS("ht.graph3d."+Q,n,x)},BO="~!<yfusfw!+!yjsubNudfkpsQv!>!opjujtpQ`mh!\v?zepc/tw/qbNxpmg=!fevmdoj$\v!\v?zepc/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!~!<fdobutjEfojMb!>!fdobutjEfojMw!|!*itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!~!<ttfouihjsCidubCb!>!ttfouihjsCidubCw!|!*ttfouihjsCidubCv)!gj!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!~!<eofmCidubCb!>!eofmCidubCw!|!*eofmCidubCv)!gj!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!~!<spmpDidubCb!>!spmpDidubCw!|!*spmpDidubCv)!gj!\vSPMPDIDUBC!gfegj$\v!\vgjeof$\v!~!<**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw!>!wVw!|!*fsvuyfUv)!gj!\vftmf$\v!<*y/wVb!-**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw)4dfw!>!wVw!\vQJMD`WV!gfegj$\v!<*efnspgtobsu!+!yjsubNmfepNv)4dfw!>!opjujtpQemspXw!<*yfusfw)4dfw!>!opjujtpQwNw!\vgjeof$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!\vftmf$\v!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf!~!<**1/2!-mbnspOw!+!n)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!<**^3]n!-^3]n)upe!-*^2]n!-^2]n)upe!-*^1]n!-^1]n)upe)4dfw!0!mbnspOudfkcp!>!mbnspOw!<*!efdobutoJyjsubNb!)4ubn!>!n!4ubn!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<efnspgtobsu!+!yjsubNxfjWmfepNv!>!yfusfw!5dfw!\vgjeof$\v!~!<efnspgtobsu!+!efdobutoJyjsubNb!>!efnspgtobsu!|!*fdobutoJftVv)!gj!\vFDOBUTOJIDUBC!gfegj$\v!<*mbnspOb)4dfw!>!mbnspOudfkcp!4dfw!<*opjujtpQb)4dfw!>!opjujtpQmbdpMw!<*1/2!-opjujtpQb)5dfw!>!efnspgtobsu!5dfw!|!*)ojbn!ejpw!\v?ebfi/tw/qbNxpmg=!fevmdoj$\v!\v?ebfi/tw/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEfojMb!ubpmg!fuvcjsuub!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<yjGv!mppc!nspgjov!\vgjeof$\v!\v?ebfi/tw/hojdobutoj=!fevmdoj$\v!\vHOJDOBUTOJ`FTV!fojgfe$\v!<fdobutoJftVv!mppc!nspgjov!\vFDOBUTOJIDUBC!gfegj$\v!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCb!4dfw!fuvcjsuub!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCb!ubpmg!fuvcjsuub!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCb!5dfw!fuvcjsuub!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<wVb!3dfw!fuvcjsuub!<opjujtpQb!4dfw!fuvcjsuub!<mbnspOb!4dfw!fuvcjsuub!<yjsubNmbnspOv!5ubn!nspgjov!<yjsubNxfjWmfepNv!5ubn!nspgjov!<yjsubNmfepNv!5ubn!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!<yjsubNudfkpsQv!5ubn!nspgjov!<yjsubNwVv!4ubn!nspgjov!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!\vYJGFSQ$!00^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",GO=($_(b5,{setBatchInfo:function(Q,n){ij[Q]=n},getBatchInfo:function(Q){return ij[Q]},getBatchInfoMap:function(){return ij},setBatchInfoMap:function(Q){ij=Q}},!0),[1,1,1]),_O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],$O=[1,0,0,0,0,1,0,1,1,1,1,0],WO=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],DO=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],AO=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],uO=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],MO=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],tO=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],iO=function(Q,n){Q._40Q.each(function(Q){Q.ivBatch(n)})},rO=function(Q,n,x,b){var J=n[x=x._id];if(J){var L=(_=Q[l=J.batch]).ds,f=J.index;if(_.invalidate=!0,delete n[x],L.splice(f,1),t_(L))return!1!==(x=b.getBatchInfo(l)||Oj).keepData&&_.ms&&_.ms.length&&x.instanced&&!b.isBatchInstancedDisabled()?(_.ms=[],_.ics&&(_.ics=[]),void(_.ps&&(_.ps=[]))):void delete Q[l];for(var x=f,b=J.begin,V=J.size;f<L.length;f++)(J=n[L[f]._id]).index--,J.begin-=V;if(_.ms&&_.ms.length)return _.ms.splice(16*x,16),_.ics&&_.ics.splice(4*x,4),void(_.ps&&(_.ps.splice(4*x,4),_.ps._invalidateThisFrame=!0));var Q=3*b,l=3*V,x=4*b,H=4*V,I=_.vs,Z=_.ps,E=_.uv,a=_.cs,o=_.bs,B=_.rs,G=_.ns,_=_.ls;I.splice(Q,l),Z.splice(x,H),Z._invalidateThisFrame=!0,E&&E.splice(2*b,2*V),a&&a.splice(x,H),o&&o.splice(Q,l),B&&B.splice(b,V),G&&G.splice(Q,l),_&&_.splice(b,V)}},PO=function(Q,n,x,b,J){if(!b)return x5;var L,f,V=n[b];return V||(f=(L=J.getBatchInfo(b)||Oj).image||L.material?[]:x5,J=L.instanced&&!J.isBatchInstancedDisabled(),V=n[b]={vs:[],ns:[],uv:f,cs:f||L.color?x5:[],bs:L.blend?[]:x5,ps:[],rs:L.brightness?[]:x5,ds:[],ms:J?[]:x5,ics:f||L.color||!J?x5:[]}),V.invalidate=!0,Q[x._id]={index:V.ds.length,begin:V.vs.length/3,batch:b},V.ds.push(x),V},cO=function(Q,n){return n!=x5&&1!==n?[Q[0]*n,Q[1]*n,Q[2]*n,Q[3]]:Q},FO=function(Q){Q&&(Q._ctlineModel=[],Q._lineModel=n5)},qO=function(Q,n,x){var A=Q.getData3dUI(n);if((V=(V=A.shapeModel)||c8(A))||!A.shapeName){var b,J=n.s("wf.combineTriangle");if(x.geometry){if(!V&&!(V=n instanceof d.Node&&!(n instanceof d.Shape)?r$=r$||{vs:J8,is:L8,uv:f8}:[A.left,A.front,A.right,A.back,A.top,A.bottom]))return n5;if(!(b=J?(b=n.s("wf.normEpsilon"),isNaN(b)&&(b=2),J=0|Math.min(3,Math.max(1,isNaN(J)?1:J)),fV[J-1](V,A,180/(Math.PI*b))):function(Q){var n,x,b,J,L;if(I=Q._lineModel)return I;for(var f,V,l,H=["","top_","bottom_"],I=[],Z=[],E=(HO(Q,A,Z),s.requestVector3()),a=s.requestVector3(),o=s.requestVector3(),B=0,G=Z.length;B<G;B++)if((J=Z[B])&&(L=J.mesh))for(n=0,x=H.length;n<x;n++)if(b=L[H[n]+"vs"])for(var _=L[H[n]+"is"],$=J.matrix,W=_?_.length:b.length/3,D=0;D<W;D+=3)l=_?(f=_[D],V=_[D+1],_[D+2]):(V=(f=D)+1,D+2),f*=3,V*=3,l*=3,$?(E.fromArray(b,f).applyMatrix4($),a.fromArray(b,V).applyMatrix4($),o.fromArray(b,l).applyMatrix4($),I.push(E.x,E.y,E.z,a.x,a.y,a.z,a.x,a.y,a.z,o.x,o.y,o.z,o.x,o.y,o.z,E.x,E.y,E.z)):I.push(b[f],b[f+1],b[f+2],b[V],b[V+1],b[V+2],b[V],b[V+1],b[V+2],b[l],b[1+l],b[2+l],b[l],b[1+l],b[2+l],b[f],b[f+1],b[f+2]);return s.releaseVector3(E),s.releaseVector3(a),s.releaseVector3(o),Q._lineModel=I}(V))||0===b.length)return}else b=x.short?I8:H8,n.s("wf.boundingBox")&&(J=A.getBoundingBox(!0))&&(V=(new X).scale(J.max.clone().sub(J.min)).setPosition(J.max.clone().add(J.min).divideScalar(2)).toArray(),b=Ce([],V,b));var L,f,J=Q.getBrightness(n),V=n.s("bloom"),l=n.s("3d.reflectable"),H=sh(x.color||"white"),I=H[3]<1,Z=Math.ceil(x.width)||1,E=n.s("3d.clipbox")?pe:n.s("3d.clipbox.mask"),a=n.s("wf.fog"),o=n.s("wf.group"),B=n.getRenderLayer(),Q=Q._40Q.get(B),B=n.s("wf.material"),G=Q.wireframeIndexMap,Q=Q.wireframeModelMap,_=n.s("batch"),$=n.s("3d.clip.direction");if(B||$){if($){if(0===(f=n.s("3d.clip.percentage")))return;f=A._formatClipUniforms($,f,n)}L="_"+n._id}else L=_?(I?"T":"O")+o+"_"+_:(I?"T":"O")+o+(V?"_1":"_0")+(l?"1_":"0_")+E+"_"+Z+(a?"1_":"0_");$=($=Q[L])||(Q[L]={vs:[],cs:[],ps:[],ds:[],T:I,B:V,clipboxMask:E,reflectable:!!l,W:Z,batch:_,fog:a}),B&&($.material=B),$.invalidate=!0,o=$.vs,Q=$.cs,I=$.ds,V=G[n._id]={index:I.length,begin:o.length/3,batch:L},I.push(n),E=A.mat,x.geometry&&n instanceof d.Shape&&(b5.extractShapeTranslation||b5.extractPolylineTranslation||b5.extractVerticesTranslation)&&(l=A._vsTranslation)&&E&&(E=(new s.Matrix4).fromArray(E).multiply(l).toArray()),n instanceof d.Edge||!(!E||!x.geometry&&n instanceof d.Shape)||(E=FS(n,x.mat),n.appendAnchorMatrix3d(E)),f?($.mat=DS(E),$.clipDirection=f[0],$.clipPercent=f[1],Ce(o,null,b)):Ce(o,E,b),Z=V.size=o.length/3-V.begin,je(Q,cO(H,J),Z)}},wO=function(Q,n,x,b){if(n){var J=(x=x[n.batch]).ps,L=(x=x.ms&&x.ms.length)?4*n.index:4*n.begin,f=x?1:n.size;if(J[L]!==Q[0]||J[L+1]!==Q[1]||J[L+2]!==Q[2]||J[L+3]!==Q[3]){for(var V=0;V<f;V++)J[L++]=Q[0],J[L++]=Q[1],J[L++]=Q[2],J[L++]=Q[3];J._invalidateThisFrame=!0}}},yO=(t$=new d.Math.Vector3,i$=new d.Math.Vector3,function(Q,n){var x=n+["32"],b=Q[n],J=Q[x];if(b){if(b5.extractBatchTranslation||b5.extractVerticesTranslation)if("vs"!==n||Q.ms&&Q.ms.length){if("ms"===n&&Q.ms&&Q.ms.length){for(i$.set(0,0,0),f=b.length,V=12;V<f;V+=16)i$.add(t$.fromArray(b,V));for(i$.divideScalar(f/16),l=i$.x,H=i$.y,I=i$.z,Z=new Array(f),V=0;V<f;V+=16){for(var L=0;L<12;L++)Z[V+L]=b[V+L];Z[V+12]=b[V+12]-l,Z[V+13]=b[V+13]-H,Z[V+14]=b[V+14]-I,Z[V+15]=b[V+15]}b=Z,Q.translate=[l,H,I]}}else{i$.set(0,0,0);for(var f=b.length,V=0;V<f;V+=3)i$.add(t$.fromArray(b,V));i$.divideScalar(f/3);for(var l=i$.x,H=i$.y,I=i$.z,Z=new Array(f),V=0;V<f;V+=3)Z[V]=b[V]-l,Z[V+1]=b[V+1]-H,Z[V+2]=b[V+2]-I;b=Z,Q.translate=[l,H,I]}J&&J.length===b.length?(J.set(b),J._bufId=null):Q[x]=new oS(b)}else delete Q[x]}),KO=function(Q,n,x,b,J,L,f,V){var l,H,I=n instanceof d.Shape,Z=L[0],E=L.length;if(1<E)for(var Z=DS(Z),a=1;a<E;a++)Zs(Z,Z,L[a]);I&&(l=n.p3(),Hs(Z,l)),G_(f.ms,Z),f.ics&&je(f.ics,n.s("shape3d.color")||o,1),f.vs.length||(H=DS(_O),I&&Hs(H,GS(l)),UO(Q,n,x,b,J,[H],f,V))},UO=function(n,x,Q,b,J,L,f,V){if(H_(Q))Q.forEach(function(Q){UO(n,x,Q,b,J,L,f,V)});else if(H5(Q))UO(n,x,c8(b,Q),b,J,L,f,V);else if(V_(Q)){var l,H=S(Q.mat,x,n),I=S(Q.s3,x,n),Z=S(Q.t3,x,n),E=S(Q.r3,x,n);if((I||E||Z||H)&&(l=qS(H,I,E,S(Q.rotationMode,x,n),Z),L.push(l)),Q.shape3d)UO(n,x,Q.shape3d,b,J,L,f,Q);else{var H=b.s,a=(V=V||Oj,L[0]),o=L.length,I=H("shape3d.color",Q.color,V.color);if(J=J||H("shape3d.blend",Q.blend,V.blend),1<o)for(var a=DS(a),B=1;B<o;B++)Zs(a,a,L[B]);E=a?Ns(a):x5,Q.vs&&H(qZ,Q.visible,V.visible)&&eO(a,f,Q.vs,Q.uv,Q.is,Q.ns,E,J,I),Q.top_vs&&H(KZ,Q.topVisible,V.topVisible)&&eO(a,f,Q.top_vs,Q.top_uv,Q.top_is,Q.top_ns,E,J,H("shape3d.top.color",Q.topColor,V.topColor)||I),Q.bottom_vs&&H(UZ,Q.bottomVisible,V.bottomVisible)&&eO(a,f,Q.bottom_vs,Q.bottom_uv,Q.bottom_is,Q.bottom_ns,E,J,H("shape3d.bottom.color",Q.bottomColor,V.bottomColor)||I),Q.from_vs&&H(wZ,Q.fromVisible,V.fromVisible)&&eO(a,f,Q.from_vs,Q.from_uv,Q.from_is,Q.from_ns,E,J,H("shape3d.from.color",Q.fromColor,V.fromColor)||I),Q.to_vs&&H(yZ,Q.toVisible,V.toVisible)&&eO(a,f,Q.to_vs,Q.to_uv,Q.to_is,Q.to_ns,E,J,H("shape3d.to.color",Q.toColor,V.toColor)||I)}l&&L.pop()}},eO=function(x,Q,b,J,n,L,f,V,l){var H,I=Q.cs,Z=Q.uv,E=Q.bs,a=Q.ns,o=Q.vs,Q=(L&&0!==L.length||(L=Ds(b,n)),X.determinantOfArray(x)<0);n||Q?(H=n?n.length:b.length/3,tS(n||H,Q,function(Q){var n=3*Q;Ce(o,x,[b[n],b[1+n],b[2+n]]),Ce(a,f,[L[n],L[1+n],L[2+n]]),Z&&G_(Z,[J[2*Q],J[2*Q+1]])})):(H=b.length/3,Ce(o,x,b),Ce(a,f,L),Z&&G_(Z,J)),I&&je(I,l,H),E&&(V?Ne(E,V,H):G_(E,GO,H))},vO=function(Q,n,x){var b=Q.data.p3();n=DS(n),Hs(n,b),G_(x.ms,n),x.ics&&je(x.ics,Q.data.s("shape3d.color")||o,1),x.vs.length||(n=DS(_O),Hs(n,GS(b)),OO(Q,n,x))},OO=function(Q,n,x){zO(Q,Qi,n,x),zO(Q,ni,n,x),zO(Q,j5,n,x),zO(Q,C5,n,x),zO(Q,xi,n,x),zO(Q,bi,n,x),zO(Q,"csg",n,x)},dO=function(Q,n,x,b,J,L){G_(x.ms,J),x.ics&&je(x.ics,n.s("all.color")||o,1),x.vs.length||hO(Q,n,x,b,DS(_O),L)},hO=function(Q,n,x,b,J,L){sO(Q,n,x,b,J,L,Qi,WO),sO(Q,n,x,b,J,L,ni,DO),sO(Q,n,x,b,J,L,xi,AO),sO(Q,n,x,b,J,L,bi,uO),sO(Q,n,x,b,J,L,j5,MO),sO(Q,n,x,b,J,L,C5,tO)},pO=function(Q,n,x,b,J){b?J.instanced?Q.gv.batchInstancedModel(Q.data,b,Q,Q.getBodyColor(),[n],x):UO(Q.gv,Q.data,b,Q,Q.getBodyColor(),[n],x):J.instanced?Q.gv.batchInstancedShapeFace(Q,n,x):OO(Q,n,x)},zO=function(Q,n,x,b){if(Q=Q[n]){var J=Q.tuv;if(J){var n=Q.uvScale,L=Q.uvOffset,f=Q.uvRotation,V=Q.uvAnchor;if(n||L||f)for(var l,H,I=(f=IO(f,L,n,V)).a,Z=f.b,E=f.c,a=f.d,o=f.tx,B=f.ty,G=J.length,_=0;_<G;_+=2)l=J[_],H=J[_+1],J[_]=I*l+E*H+o,J[_+1]=Z*l+a*H+B}eO(x,b,Q.vs,J,x5,x5,x?Ns(x):x5,Q.blend,Q.color)}},sO=function(Q,n,x,b,J,L,f,V){var l,H,I,Z,E,a,o,B,G,_,$,W,D,A,u,M=x.cs,t=x.uv,i=x.bs,r=x.vs,P=x.ns,c=Ds(V);Q.getFaceVisible(n,f)&&((x=Q.getFaceMat(n,f))&&(J=FS(n,x),L=Ns(J)),X.determinantOfArray(J)<0?(x=V.length/3,tS(x,!0,function(Q){Ce(r,J,[V[Q*=3],V[1+Q],V[2+Q]]),Ce(P,L,[c[Q],c[1+Q],c[2+Q]])})):(Ce(r,J,V),Ce(P,L,c)),M&&je(M,Q.getFaceColor(n,f),6),t&&(x=Q.getFaceUv(n,f)||b[f+"Uv"],M=Q.getFaceUvScale(n,f)||b[f+"UvScale"],l=Q.getFaceUvOffset(n,f)||b[f+"UvOffset"],Z=Q.getFaceUvRotation(n,f)||b[f+"UvRotation"],b=Q.getFaceUvAnchor(n,f)||b[f+"UvAnchor"],E=(x=x?[x[6],x[7],x[0],x[1],x[2],x[3],x[2],x[3],x[4],x[5],x[6],x[7]]:$O)[0],a=x[1],o=x[2],B=x[3],G=x[4],_=x[5],$=x[6],W=x[7],D=x[8],A=x[9],u=x[10],x=x[11],(M||l||Z||b)&&(l=(Z=IO(Z,l,M,b)).a,M=Z.b,b=Z.c,H=Z.d,a=M*(E=l*E+b*a+(I=Z.tx))+H*a+(Z=Z.ty),B=M*(o=l*o+b*B+I)+H*B+Z,_=M*(G=l*G+b*_+I)+H*_+Z,W=M*($=l*$+b*W+I)+H*W+Z,A=M*(D=l*D+b*A+I)+H*A+Z,x=M*(u=l*u+b*x+I)+H*x+Z),t.push(E,a,o,B,G,_,$,W,D,A,u,x)),i&&((M=Q.getBodyColor(n)||Q.getFaceBlend(n,f))?Ne(i,M,6):G_(i,GO,6)))},XO=function(Q,n,x,b){var J,L,f,V,x=Q._picking?Q.pickColorMap:null,l=Q.getGL(),H=Q._buffer;if(!M_(n)){for(V in js(Q,_O),ys(l),n){var I,Z,E,a,o,B,G,_,$,W=n[V],D=(a=W.batch?(I=(a=Q.getBatchInfo(W.batch)||Oj).wfBloom===n5?a.bloom:a.wfBloom,Z=a.wfReflectable===n5?a.reflectable:a.wfReflectable,E=a.wfClipboxMask===n5?a.clipboxMask:a.wfClipboxMask,a.width):(I=W.B,Z=W.reflectable,E=W.clipboxMask,W.W),!x&&W.material);!D&&(b&&!W.T||!b&&W.T||Q.isReflecting(l)&&!1===Z)||(G=x&&!Q.drawFilter,W.invalidate?(W.invalidate=!1,yO(W,"vs"),yO(W,"cs"),yO(W,"ls"),G&&yO(W,"ps")):G&&W.ps&&W.ps._invalidateThisFrame&&(W.ps._invalidateThisFrame=!1,yO(W,"ps")),G=W.translate,J=W.clipDirection,D?("lines"!==(o=(D=W.material).renderMode)?D.renderMode="lines":o=null,Q._prefabRenderer.render(l,{position:G,mesh:{vs:W.vs32,aLineDistance:W.ls32,aBatchColor:W.cs32,_complete_:!0},mat:D},W),o&&(D.renderMode=o)):(G||J?(L=J?DS(W.mat):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G&&Hs(L,G),f=DS(Q._6O),js(Q,L)):L=null,D=W.vs32,o=x?W.ps32:W.cs32,hs(l,a,x5,H.vs,D),B=(G=E5.for(l)).directUniforms(),G=G.directAttribs(),$=W.D,_=!Q._dashDisabled&&$,B.uAlphaTest=o5.alphaTest,l._blooming&&!I&&(B.blackout=!0),J&&(B.uClipPercent=W.clipPercent,B.uClipDirection=J),ws(Q,B,E===n5?he:E),_&&(B.uDash=!0,B.uDashDistance=$,B.uDashGapDistance=W.G,B.uDiffuse=W.A||o5["color.empty"],G.aLineDistance=gs(l,H.lineDistance,W.ls32,x5,1)),($=!Q._batchColorDisabled)&&o&&o.length?(B.uBatchColor=!0,G.aBatchColor=gs(l,H.batchColor,o,x5,4)):(B.uBatchColor=!1,G.aBatchColor=!1),(W=!1!==W.fog)||(B.uFog=!1),vs(l),zs(l,0,D.length/3,1),Os(l),W||(B.uFog=!0),$&&(B.uBatchColor=!1,G.aBatchColor=!1),_&&(B.uDash=!1,G.aLineDistance=!1),l._blooming&&!I&&(B.blackout=!1),L&&(J&&(B.uClipDirection=0),ks(Q,f),B.uModelMatrix=WS)))}Ks(l),ks(Q)}},RO=function(Q,n){Q.invalidate=!1,yO(Q,"vs"),yO(Q,"ns"),yO(Q,"cs"),yO(Q,"rs"),n&&yO(Q,"ps"),yO(Q,"bs"),yO(Q,"uv"),yO(Q,"ms"),yO(Q,"ics")},gO=function(Q,n,v,x,b,J){var L,f,V,l,H,I,Z,x=Q._picking?Q.pickColorMap:null,E=Q.getGL(),a=E5.for(E),o=a.directUniforms(),B=a.directAttribs(),G=Q._buffer;if(!M_(n)){var _,$,W,D=Q._flowObjects.length?Q.flowMap:null,A=Q.drawFilter;for(L in js(Q,_O),n)if(!1!==(f=Q.getBatchInfo(L)||Oj).visible)if((F=!x&&f.material)||!(b&&!f.transparent||!b&&f.transparent||Q.isReflecting(E)&&!1===f.reflectable)){var u=f.renderLayerMask;if(HG(J=J==x5?fG:J,u=u==x5?fG:u)&&(u=n[L],x||!f.transparentMask)){if($=!1,A){if(!1===f.highlight)continue;if(_=u.ds){for(var M=0,t=_.length;M<t;M++)if(!A(_[M])){$=!0;break}if(!$)continue}}var i,r=b&&!0===f.autoSort&&(Q._33Q||u.invalidate)&&!$,P=x&&!$,c=(u.invalidate?RO(u,P):P&&u.ps&&u.ps._invalidateThisFrame&&(u.ps._invalidateThisFrame=!1,yO(u,"ps")),u.ms32);if(c){if(!c.length)continue;W=!0}else W=!1;if(P=u.vs32,V=x?u.ps32:W?u.ics32:u.cs32,H=u.uv32,y=u.bs32,l=u.rs32,Z=P.length/3,r&&((i=mO(P,Q.getEye(),Q,c))?(u.is=i.is,u.elementTypeUint=i.useUint32):(u.is=null,u.elementTypeUint=null)),Z){if((i=f.polygonOffset)&&rs(E,i),F&&!$){var F={vs:P,uv:H,ns:u.ns32,is:u.is,_complete_:!0},F={position:u.translate,mesh:F,mat:f.material};W&&(F.instances={aMatrixInstanced:u.ms32}),Q._prefabRenderer.render(E,F,f)}else{(F=u.translate)&&js(Q,[1,0,0,0,0,1,0,0,0,0,1,0,F[0],F[1],F[2],1]),f.light,I=Q.getTexture(f.image),Us(E,x5,f.light,f.opacity,f.reverseFlip,f.reverseColor,f.reverseCull),V?Q._batchColorDisabled?(o.uBatchColor=!1,B.aBatchColor=!1):(o.uBatchColor=!0,B.aBatchColor=$?[0,1,1,1]:W?Rs(E,G.instancedBatchColor,V,x5,4):gs(E,G.batchColor,V,x5,4)):(o.uBatchColor=!1,o.uDiffuse=f.color||o5["color.empty"]);var q,w=f.alphaTest;o.uAlphaTest=w===n5?o5.alphaTest:w,o.shadowReceive=!x&&!1!==f.shadowReceive,ws(Q,o,f.clipboxMask===n5?he:f.clipboxMask),xs(Q,o,f.lightMask===n5?he:f.lightMask,f.headlightAmbientIntensity),D&&D.resetFlowUniform(f.effectFlowMask===n5?he:f.effectFlowMask,o),E._blooming&&!f.bloom&&(o.blackout=!0),f.envmap!==n5?(o.uUseEnvMap=!0,o.roughness=f.roughness||0,Q._setEnvmapByProbeId(o,f.envmapProbe||0,f.envmap)):(o.uUseEnvMap=!1,o.envMapIntensity=0);(w=y&&!Q._batchBlendDisabled)&&(o.uBatchBlend=!0,B.aBatchBlend=gs(E,G.batchBlend,y,x5));var y=l&&!Q._batchBrightnessDisabled;if(y&&(o.uBatchBrightness=!0,B.aBatchBrightness=gs(E,G.batchBrightness,l,x5,1)),H?vs(E,I,f.discardSelectable,G.uv,H,f.uvOffset,f.uvScale,f.uvRotation,f.uvAnchor):vs(E),B.aPosition=gs(E,G.vs,P,x5),B.aNormal=gs(E,G.ns,u.ns32,x5),W&&(o.uUseInstance=!0),$){for(W&&!(q=Q._highlightInstancedFloatArray)&&(q=Q._highlightInstancedFloatArray=new oS(16)),M=0,t=_.length;M<t;M++)if(!A(_[M])){var K=v[_[M]._id];if(W){for(var U=0;U<16;U++)q[U]=c[16*K.index+U];e=Rs(E,G.ms,q,x5),E.bufferSubData(34962,0,q),B.aMatrixInstanced=e,zs(E,0,Z,null,1)}else{var e=K.begin,O=K.size;zs(E,e,O)}}}else W&&(r&&(c=SO(c,Q.getEye())),B.aMatrixInstanced=Rs(E,G.ms,c,x5)),u.is?(Ss(E,G.is,u.is),ss(E,0,Z,null,u.elementTypeUint?5125:null,W?u.ms32.length/16:0)):zs(E,0,Z,null,W?u.ms32.length/16:0);H?Os(E,I):Os(E),V&&!Q._batchColorDisabled&&(o.uBatchColor=!1,B.aBatchColor=!1),w&&(o.uBatchBlend=!1,B.aBatchBlend=!1),y&&(o.uBatchBrightness=!1,B.aBatchBrightness=!1),E._blooming&&!f.bloom&&(o.blackout=!1),W&&(o.uUseInstance=!1,B.aMatrixInstanced=n5),es(E),F&&(ks(Q),o.uModelMatrix=WS)}i&&Ps(E)}}}ks(Q)}},SO=function(x,b){for(var Q,n,J,L=x.length/16,f=new Array(L),V=0;V<L;V++)f[V]=V;f.sort(function(Q,n){return Q=[x[16*Q+12],x[16*Q+13],x[16*Q+14]],n=[x[16*n+12],x[16*n+13],x[16*n+14]],S7(b,n)-S7(b,Q)});var l=x._sortedByEye;for(l&&l.length===x.length||(l=x._sortedByEye=new oS(16*L)),V=0;V<L;V++)for(n=16*V,J=16*f[V],Q=0;Q<16;Q++)l[n+Q]=x[J+Q];return l._bufId=null,l},mO=function(b,J,Q,n){var x=b.length/3,L=65535<x;if(!(Q=Q._glCapabilities.elementTypeUint&&L)&&L)return null;n&&n.length&&((L=s.requestMatrix4()).fromArray(n).invert(),J=pK(J).applyMatrix4(L).toArray(),s.releaseMatrix4(L));for(var f=new Array(x),V=x/3,l=new Array(V),H=0;H<V;H++)l[H]=H;for(l.sort(function(Q,n){var x=[(b[Q=9*Q]+b[3+Q]+2*b[6+Q])/4,(b[1+Q]+b[4+Q]+2*b[7+Q])/4,(b[2+Q]+b[5+Q]+2*b[8+Q])/4],n=[(b[Q=9*n]+b[3+Q]+2*b[6+Q])/4,(b[1+Q]+b[4+Q]+2*b[7+Q])/4,(b[2+Q]+b[5+Q]+2*b[8+Q])/4];return 0<(Q=S7(J,x)-S7(J,n))?-1:Q<0?1:0}),H=0;H<V;H++){var I=3*H,Z=3*l[H];f[I]=Z,f[1+I]=1+Z,f[2+I]=2+Z}return{useUint32:Q,is:new(Q?Uint32Array:ES)(f)}},YO={obj:function(L,f){var Q={mat:L.mat,s3:L.s3,r3:L.r3,rotationMode:L.rotationMode,t3:L.t3,cube:L.cube==x5||L.cube,center:L.center==x5||L.center,ignoreMtls:L.ignoreMtls,ignoreTransparent:L.ignoreTransparent,ignoreColor:L.ignoreColor,ignoreImage:L.ignoreImage,ignoreNormal:L.ignoreNormal,prefix:L.prefix,flipY:L.flipY,flipFace:L.flipFace,reverseFlipMtls:L.reverseFlipMtls,finishFunc:function(Q,n,x){if(Q){var b,n=[];for(b in Q){var J=Q[b];n.rawS3=J.rawS3,J.center&&(n.center=J.center),n.push(J),L.eachModel&&L.eachModel(b,J)}n.json=L,f(n)}else f()}};b5.loadObj(L.obj,L.mtl,Q)},bin:function(Q,b){b5.loadBin(Q.url,{finishFunc:function(Q,n,x){Q?b(Q):b()}})},fbx:function(x,b){var Q={matDef:x.matDef,flipY:x.flipY,cube:x.cube,center:x.center,shape3d:x.shape3d,playAutomatically:x.playAutomatically,animations:!1!==x.animations,rotationInterpolation:x.rotationInterpolation,finishFunc:function(n){n||b();var Q=(n.json=x).animationSources;Q&&Q.length?b5.asyncEach(Q,function(Q,x){jO(Q,Q,function(Q,n){P7(function(){x(null,n)})})},function(Q){b(b5.completeFbxAnimation(x.url,n,x.animations,Q))}):b(b5.completeFbxAnimation(x.url,n,x.animations))}};b5.loadFbx(x.url,Q)},gltf:function(n,x){var Q={matDef:n.matDef,flipY:n.flipY,cube:n.cube,center:n.center,shape3d:n.shape3d,playAutomatically:n.playAutomatically,finishFunc:function(Q){Q?(Q.json=n,x(Q)):x()}};b5.loadGltf(n.url,Q)}},TO=(b5.getModelTypeHandlers=function(){return YO},b5.setModelTypeHandler=function(Q,n){YO[Q]=n},b5.getModelTypeHandler=function(Q){return YO[Q]},b5.handleModelLoaded=function(Q,n){},b5.handleUnfoundModel=function(Q,n,x){},x5),kO=x5,NO=function(Q){TO&&!Q._loadingModelView_&&((kO=kO||{})[Q._loadingModelView_=r7()]=Q)},jO=function(x,b,J){var L,Q=(TO=TO||{})[x];if(Q){if(Q.url===b)return;Q.request.onload=hj,Q.request.onerror=hj}return b.indexOf(".bin")===b.length-4?CO(x,{modelType:"bin",url:b},b,J):b.indexOf(".fbx")===b.length-4?CO(x,{modelType:"fbx",url:b},b,J):b.indexOf(".gltf")===b.length-5||b.indexOf(".glb")===b.length-4?CO(x,{modelType:"gltf",url:b},b,J):void((b=b5.beforeLoadURL(b)).data?(Q=b5.parse(b.data),CO(x,Q,b,J)):(L=new nE,TO[x]={request:L,url:b},L.onload=function(Q){var n;200===this.status||0===this.status?(delete TO[x],n=b5.parse(L.getResponseText()),CO(x,n,b,J)):Q8(x,b5.handleUnfoundModel(x,b)||x5,J)},L.onerror=function(Q){Q8(x,b5.handleUnfoundModel(x,b)||x5,J)},(Q={}).url=encodeURI(b),Q.sync=!1,L.send(Q)))},CO=function(n,x,b,J){var Q=x.modelType;if(!Q)return Q8(n,x,J),void b5.handleModelLoaded(n,x);(Q=b5.getModelTypeHandler(Q))?(TO=TO||{})[n]||(TO[n]=!0,Q(x,function(Q){Q?(Q8(n,Q,J),b5.handleModelLoaded(n,Q)):Q8(n,b5.handleUnfoundModel(n,b,x)||x5,J)})):Q8(n,b5.handleUnfoundModel(n,b,x)||x5,J)},Q8=function(Q,n,x){if(delete TO[Q],H5(n)&&Uj.test(n))jO(Q,n,x);else{if(rj[Q]=n,x&&x(Q,n),M_(TO)&&(TO=x5,kO)){for(var b in kO)(J=kO[b]).invalidateAll&&J.invalidateAll(n5,"modelLoaded",Q),J.redraw&&J.redraw(),J.iv(),delete J._loadingModelView_;kO=x5}if(n&&kO)for(var b in kO){var J;(J=kO[b]).invalidateAll&&J.invalidateAll(n5,"modelLoading",Q),J.redraw&&J.redraw(),J.iv()}}},n8=new oS([0,0,0,1,1,1,1,0]),x8=new oS([0,0,1,0,0,1,0,0,1,0,0,1]),b8=new ES([0,1,2,2,3,0]),J8=new oS([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),L8=new ES([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),f8=new oS([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),V8=Ds(J8,L8),l8=(new oS([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new ES([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[Qi,j5,ni,C5,xi,bi]),H8=[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5],I8=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Z8=function(Q,n,x,b,J,L,f){Q=Q||16,n=n||0,x=x||Q;var V,l,H,I,Z,E,a=[],o=[],B=l5/Q,G=w/(L=L||16);for($=0;$<L;$++)for(l=$*G,E=(H=$+1)*G,V=n;V<x;V++)u=V*B,Z=(I=V+1)*B,a.push(.5*V5(l)*f5(u),.5*f5(l),-.5*V5(l)*V5(u),.5*V5(E)*f5(Z),.5*f5(E),-.5*V5(E)*V5(Z),.5*V5(l)*f5(Z),.5*f5(l),-.5*V5(l)*V5(Z),.5*V5(l)*f5(u),.5*f5(l),-.5*V5(l)*V5(u),.5*V5(E)*f5(u),.5*f5(E),-.5*V5(E)*V5(u),.5*V5(E)*f5(Z),.5*f5(E),-.5*V5(E)*V5(Z)),o.push(V/Q,$/L,I/Q,H/L,I/Q,$/L,V/Q,$/L,V/Q,H/L,I/Q,H/L);if(f)for(var _=[],$=0,W=a.length;$<W;$+=3)_.push(2*a[$],2*a[$+1],2*a[$+2]);if(b)for(var D=[],A=[],u=n*B,$=0;$<L;$++)l=$*G,D.push(0,0,0,.5*V5(E=(H=$+1)*G)*f5(u),.5*f5(E),-.5*V5(E)*V5(u),.5*V5(l)*f5(u),.5*f5(l),-.5*V5(l)*V5(u)),A.push(0,.5,n/Q,H/L,n/Q,$/L);if(J){var M=[],t=[],u=x*B;for($=0;$<L;$++)E=(H=$+1)*G,M.push(0,0,0,.5*V5(l=$*G)*f5(u),.5*f5(l),-.5*V5(l)*V5(u),.5*V5(E)*f5(u),.5*f5(E),-.5*V5(E)*V5(u)),t.push(1,.5,x/Q,$/L,x/Q,H/L)}return b={vs:a,uv:o,from_vs:D,from_uv:A,to_vs:M,to_uv:t},f&&(b.ns=_),b},E8=function(Q,n,x){(Q=Q||.17)<0?Q=0:.25<Q&&(Q=.25);for(var b,J,L,f,V,l=[],H=[],I=[],Z=l5/(x=x||18),E=l5/(n=n||12),a=.5-Q,o=0;o<=n;o++)for(f=f5(J=o*E-w),L=V5(J),_=0;_<=x;_++)V=a+Q*f,l.push(f5(b=_*Z)*V,L*Q,-V5(b)*V),H.push(_/x,1-o/n);for(o=0;o<n;o++)for(var B=o*(x+1),G=(o+1)*(x+1),_=0;_<x;_++)I.push(B+_,G+_+1,G+_,B+_,B+_+1,G+_+1);return{vs:l,uv:H,is:I}},a8=function(Q,n,x,b,J,L,f,V){Q=Q||18,n=n||0,x=x||Q,(L=L||.17)<0?L=0:.25<L&&(L=.25);var l,H,I,Z,E,a,o,B,G,_=[],$=[],W=l5/Q,D=l5/(f=f||12),A=.5-L,u=V?[]:n5;for(i=0;i<f;i++)for(a=i*D-w,o=(I=i+1)*D-w,l=n;l<x;l++)Z=l*W,E=(H=l+1)*W,B=A+L*f5(a),G=A+L*f5(o),_.push(f5(Z)*B,V5(a)*L,-V5(Z)*B,f5(E)*B,V5(a)*L,-V5(E)*B,f5(E)*G,V5(o)*L,-V5(E)*G,f5(Z)*B,V5(a)*L,-V5(Z)*B,f5(E)*G,V5(o)*L,-V5(E)*G,f5(Z)*G,V5(o)*L,-V5(Z)*G),$.push(l/Q,1-i/f,H/Q,1-i/f,H/Q,1-I/f,l/Q,1-i/f,H/Q,1-I/f,l/Q,1-I/f),V&&u.push(f5(Z)*f5(a),V5(a),-V5(Z)*f5(a),f5(E)*f5(a),V5(a),-V5(E)*f5(a),f5(E)*f5(o),V5(o),-V5(E)*f5(o),f5(Z)*f5(a),V5(a),-V5(Z)*f5(a),f5(E)*f5(o),V5(o),-V5(E)*f5(o),f5(Z)*f5(o),V5(o),-V5(Z)*f5(o));if(b)for(var M=[],t=[],i=0;i<f;i++)o=(I=i+1)*D-w,Z=n*W,B=A+L*f5(a=i*D-w),G=A+L*f5(o),M.push(f5(Z)*B,V5(a)*L,-V5(Z)*B,f5(Z)*G,V5(o)*L,-V5(Z)*G,f5(Z)*A,0,-V5(Z)*A),t.push(.5+.5*f5(a),.5-.5*V5(a),.5+.5*f5(o),.5-.5*V5(o),.5,.5);if(J)for(var r=[],P=[],i=0;i<f;i++)o=(I=i+1)*D-w,Z=x*W,B=A+L*f5(a=i*D-w),G=A+L*f5(o),r.push(f5(Z)*B,V5(a)*L,-V5(Z)*B,f5(Z)*A,0,-V5(Z)*A,f5(Z)*G,V5(o)*L,-V5(Z)*G),P.push(.5-.5*f5(a),.5-.5*V5(a),.5,.5,.5-.5*f5(o),.5-.5*V5(o));return b={vs:_,uv:$,from_vs:M,from_uv:t,to_vs:r,to_uv:P},V&&(b.ns=u),b},o8=function(Q,n){for(var x,b,J,L,f,V=[],l=[],H=[],I=[],Z=l5/16,E=0;E<=16;E++)L=.5*(b=f5(x=E*Z)),J=V5(x),V.push(L,-.5,f=.5*J,L,.5,f),H.push(b,0,J,b,0,J),l.push(1-E/16,1,1-E/16,0);for(E=0;E<16;E++)I.push(2*E,2*E+1,2*E+3,2*E,2*E+3,2*E+2);if(n){var a=[],o=[],B=[];for(a.push(0,-.5,0),o.push(.5,.5),E=0;E<=16;E++)b=f5(x=E*Z),J=V5(x),a.push(.5*b,-.5,.5*-J),o.push(.5+.5*b,.5+.5*J);for(E=0;E<16;E++)B.push(0,E+2,E+1)}if(Q){var G=[],_=[],$=[];for(G.push(0,.5,0),_.push(.5,.5),E=0;E<=16;E++)b=f5(x=E*Z),J=V5(x),G.push(.5*b,.5,.5*-J),_.push(.5+.5*b,.5-.5*J);for(E=0;E<16;E++)$.push(0,E+1,E+2)}return{vs:V,uv:l,is:I,ns:H,bottom_vs:a,bottom_uv:o,bottom_is:B,top_vs:G,top_uv:_,top_is:$}},B8=function(Q,n,x,b,J,L,f,V){Q=Q||12,x=x||Q;for(var l,H,I,Z,E,a,o,B,G,_,$,W,D=[],A=[],u=l5/Q,M=n=n||0;M<x;M++)H=(l=M+1)*u,B=.5*f5(o=M*u),G=.5*V5(o),I=.5*f5(H),Z=.5*V5(H),D.push(B,-.5,-G,I,-.5,-Z,B,.5,-G,I,-.5,-Z,I,.5,-Z,B,.5,-G),A.push(M/Q,1,l/Q,1,M/Q,0,l/Q,1,l/Q,0,M/Q,0);if(V)for(var t=[],M=0,i=D.length;M<i;M+=3)t.push(2*D[M],0,2*D[M+2]);if(f){var r=[],P=[];for(M=n;M<x;M++)H=u*(M+1),B=f5(o=u*M),G=V5(o),I=f5(H),Z=V5(H),r.push(.5*B,-.5,.5*-G,0,-.5,0,.5*I,-.5,.5*-Z),P.push(.5+.5*B,.5+.5*G,.5,.5,.5+.5*I,.5+.5*Z)}if(L){var c=[],F=[];for(M=n;M<x;M++)H=u*(M+1),B=f5(o=u*M),G=V5(o),I=f5(H),Z=V5(H),c.push(.5*B,.5,.5*-G,.5*I,.5,.5*-Z,0,.5,0),F.push(.5+.5*B,.5-.5*G,.5+.5*I,.5-.5*Z,.5,.5)}return b&&(E=[],a=[],B=.5*f5(o=u*n),G=.5*V5(o),_=n/Q,E.push(0,.5,0,0,-.5,0,B,-.5,-G,B,-.5,-G,B,.5,-G,0,.5,0),a.push(0,0,0,1,_,1,_,1,_,0,0,0)),J&&($=[],W=[],B=.5*f5(o=u*x),G=.5*V5(o),_=x/Q,$.push(0,-.5,0,0,.5,0,B,.5,-G,B,.5,-G,B,-.5,-G,0,-.5,0),W.push(1,1,1,0,_,0,_,0,_,1,1,1)),f={vs:D,uv:A,bottom_vs:r,bottom_uv:P,top_vs:c,top_uv:F,from_vs:E,from_uv:a,to_vs:$,to_uv:W},V&&(f.ns=t),f},G8=function(Q,n,x,b,J){x=x||0,J=J==x5?.5:J;for(var L,f,V,l,H,I=[0,.5,.75,.875,.9375],Z=[],E=[],a=[],o=(b=b==x5?l5:b)/(n=n||18),B=0;B<I.length;B++)for(var G=B%2==0?0:.5,_=0;_<=n;_++)f=1-I[B],Z.push(f5(L=(_+G)*o+x)*J*f,I[B]*J*2-J,-V5(L)*J*f),E.push((_+G)/n,f);for(B=0;B<I.length-1;B++)for(var $=B*(n+1),W=(B+1)*(n+1),_=0;_<n;_++)a.push($+_,W+_+1,W+_,$+_,$+_+1,W+_+1);for(H=Z.length/3-(n+1),_=0;_<n;_++)Z.push(0,J,0),E.push((_+.5)/n,0);for(_=0;_<n;_++)a.push(H+_,H+_+1,H+(n+1)+_);if(Q){var D=[],A=[],u=[];for(D.push(0,-J,0),A.push(.5,.5),_=0;_<=n;_++)V=f5(L=_*o+x),l=V5(L),D.push(V*J,-J,-l*J),A.push(.5+.5*V,.5+.5*l);for(_=0;_<n;_++)u.push(0,_+2,_+1)}return{vs:Z,uv:E,is:a,bottom_vs:D,bottom_uv:A,bottom_is:u}},_8=function(Q,n,x,v,O,b,J,L){Q=Q||16,x=x||Q;var f,V,l,H,I,Z,E,a,o,B=[],G=[],_=l5/Q,$=n=n||0,W=1/(J=J||1),D=new I5,A=new I5,u=new I5,M=new I5,t=new I5,i=new I5,r=new I5;for(L&&(f=[],l=new I5,H=new I5,I=new I5);$<x;$++){var P=$+1,c=_*$,F=_*P;for(D.set(.5*f5(c),-.5,.5*-V5(c)),A.set(.5*f5(F),-.5,.5*-V5(F)),u.set(0,.5,0),L&&(l.set(f5(c),.5,-V5(c)).normalize(),H.set(f5(F),.5,-V5(F)).normalize(),I.copy(l).add(H).normalize()),M.lerpVectors(u,D,W),t.lerpVectors(u,A,W),B.push(M.x,M.y,M.z,t.x,t.y,t.z,u.x,u.y,u.z),G.push($/Q,W,P/Q,W,($+P)/2/Q,0),L&&f.push(l.x,l.y,l.z,H.x,H.y,H.z,I.x,I.y,I.z),V=1;V<J;V++)M.lerpVectors(u,D,W*(V+1)),t.lerpVectors(u,A,W*(V+1)),i.lerpVectors(u,D,W*V),r.lerpVectors(u,A,W*V),B.push(M.x,M.y,M.z,t.x,t.y,t.z,i.x,i.y,i.z,i.x,i.y,i.z,t.x,t.y,t.z,r.x,r.y,r.z),G.push($/Q,W*(V+1),P/Q,W*(V+1),$/Q,W*V,$/Q,W*V,P/Q,W*(V+1),P/Q,W*V),L&&f.push(l.x,l.y,l.z,H.x,H.y,H.z,l.x,l.y,l.z,l.x,l.y,l.z,H.x,H.y,H.z,H.x,H.y,H.z)}if(b)for(var q=[],w=[],$=n;$<x;$++){var F=_*($+1),y=f5(c=_*$),K=V5(c),U=f5(F),e=V5(F);q.push(.5*y,-.5,.5*-K,0,-.5,0,.5*U,-.5,.5*-e),w.push(.5+.5*y,.5+.5*K,.5,.5,.5+.5*U,.5+.5*e)}return v&&(E=[],(Z=[]).push(0,.5,0,0,-.5,0,.5*f5(c=_*n),-.5,.5*-V5(c)),E.push(0,0,0,1,n/Q,1)),O&&(o=[],(a=[]).push(0,-.5,0,0,.5,0,.5*f5(c=_*x),-.5,.5*-V5(c)),o.push(1,1,1,0,x/Q,1)),b={vs:B,uv:G,bottom_vs:q,bottom_uv:w,from_vs:Z,from_uv:E,to_vs:a,to_uv:o},L&&(b.ns=f),b},$8=function(Q,n,x,b,J,L,f,V){for(var l=[],H=0;H<Q.length-1;H+=2)l.push({x:Q[H],y:Q[H+1]});return VV(l,n,x,b,J,L,f,V,!1)},W8={roundRect:function(Q,n){return $8([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],Q,n,3)},star:function(Q,n){return $8([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],Q,n)},rect:function(Q,n){return $8([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],Q,n)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(Q,n){return $8([0,-.5,.5,.5,-.5,.5],[1,2,2,5],Q,n)},rightTriangle:function(Q,n){return $8([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],Q,n)},parallelogram:function(Q,n){return $8([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],Q,n)},trapezoid:function(Q,n){return $8([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],Q,n)}},D8={torus:1,sphere:1,cone:1},A8=$_(q7(D8),{cylinder:1}),u8={roundRect:1,star:1,rect:1,triangle:1,rightTriangle:1,parallelogram:1,trapezoid:1,cylinder:1},M8=$_(q7(u8),{cone:1}),t8=function(Q,n,x){var b,J=S(Q.anchor3d,x,n),L=S(Q.mat,x,n),f=S(Q.s3,x,n),V=S(Q.t3,x,n),l=S(Q.r3,x,n),H=f||l||V||L;return(J||H)&&(b=DS(n._6O),H=H?qS(L,f,l,S(Q.rotationMode,x,n),V):$S(),J&&Hs(H,[.5-J[0],.5-J[1],.5-J[2]]),js(n,H)),b},i8=function(n,x,Q,b,J,L,f){var V,l,H,I,Z,E,a,o,B,G,_,$,W,D,A,u,M,t,i,r,P,c;H_(Q)?Q.forEach(function(Q){i8(n,x,Q,b,J,L,f)}):H5(Q)?i8(n,x,c8(b,Q),b,J,L,f):V_(Q)&&(Q.shape3d?(V=t8(Q,n,x),i8(n,x,Q.shape3d,b,J,L,Q),V&&ks(n,V)):(V=n,l=x,H=b.s,I=J,Z=f||Oj,i=(i=L)&&!i(H("shape3d.transparent",Q.transparent,Z.transparent)),A=V._picking,E=Q.vs&&H(qZ,Q.visible,Z.visible),a=!A&&E?H("shape3d.material",Q.material,Z.material):null,o=Q.top_vs&&H(KZ,Q.topVisible,Z.topVisible),B=!A&&o?H("shape3d.top.material",Q.topMaterial,Z.topMaterial):null,G=Q.bottom_vs&&H(UZ,Q.bottomVisible,Z.bottomVisible),_=!A&&G?H("shape3d.bottom.material",Q.bottomMaterial,Z.bottomMaterial):null,$=Q.from_vs&&H(wZ,Q.fromVisible,Z.fromVisible),W=!A&&$?H("shape3d.from.material",Q.fromMaterial,Z.fromMaterial):null,D=Q.to_vs&&H(yZ,Q.toVisible,Z.toVisible),A=!A&&D?H("shape3d.to.material",Q.toMaterial,Z.toMaterial):null,(!i||a||A||B||_||W)&&(u=t8(Q,V,l),F8(Q)&&V.getData3dUI(l).dispatchBoundingBoxChanged(),M=V._26I,(t=H("polygonOffset",Q.polygonOffset,Z.polygonOffset))&&rs(M,t),a&&r8(M,V,l,a,[Q.vs,Q.uv,Q.ns,Q.is]),B&&r8(M,V,l,B,[Q.top_vs,Q.top_uv,Q.top_ns,Q.top_is]),_&&r8(M,V,l,_,[Q.bottom_vs,Q.bottom_uv,Q.bottom_ns,Q.bottom_is]),W&&r8(M,V,l,W,[Q.from_vs,Q.from_uv,Q.from_ns,Q.from_is]),A&&r8(M,V,l,A,[Q.to_vs,Q.to_uv,Q.to_ns,Q.to_is]),i||(i=V._buffer,r=H("shape3d.color",Q.color,Z.color),I=I||H("shape3d.blend",Q.blend,Z.blend),c=(Q.opacity==x5?Z:Q).opacity,c=(P=H("shape3d.opacity"))!=x5&&c!=x5?c*P:c!=x5?c:P,Us(M,I,H("shape3d.light",Q.light,Z.light),c,H("shape3d.reverse.flip",Q.reverseFlip,Z.reverseFlip),H("shape3d.reverse.color",Q.reverseColor,Z.reverseColor),l._forceSingleFace||H("shape3d.reverse.cull",Q.reverseCull,Z.reverseCull)),E&&!a&&P8(M,i,r,V.getTexture(H("shape3d.image",Q.image,Z.image),l),H("shape3d.discard.selectable",Q.discardSelectable,Z.discardSelectable),Q.vs,Q.uv,Q.ns,Q.is,H("shape3d.uv.offset",Q.uvOffset,Z.uvOffset),H("shape3d.uv.scale",Q.uvScale,Z.uvScale),H("shape3d.uv.rotation",Q.uvRotation,Z.uvRotation),H("shape3d.uv.anchor",Q.uvAnchor,Z.uvAnchor)),o&&!B&&P8(M,i,H("shape3d.top.color",Q.topColor,Z.topColor)||r,V.getTexture(H("shape3d.top.image",Q.topImage,Z.topImage),l,"top"),H("shape3d.top.discard.selectable",Q.topDiscardSelectable,Z.topDiscardSelectable),Q.top_vs,Q.top_uv,Q.top_ns,Q.top_is,H("shape3d.top.uv.offset",Q.topUvOffset,Z.topUvOffset),H("shape3d.top.uv.scale",Q.topUvScale,Z.topUvScale),H("shape3d.top.uv.rotation",Q.topUvRotation,Z.topUvRotation),H("shape3d.top.uv.anchor",Q.topUvAnchor,Z.topUvAnchor)),G&&!_&&P8(M,i,H("shape3d.bottom.color",Q.bottomColor,Z.bottomColor)||r,V.getTexture(H("shape3d.bottom.image",Q.bottomImage,Z.bottomImage),l,"bottom"),H("shape3d.bottom.discard.selectable",Q.bottomDiscardSelectable,Z.bottomDiscardSelectable),Q.bottom_vs,Q.bottom_uv,Q.bottom_ns,Q.bottom_is,H("shape3d.bottom.uv.offset",Q.bottomUvOffset,Z.bottomUvOffset),H("shape3d.bottom.uv.scale",Q.bottomUvScale,Z.bottomUvScale),H("shape3d.bottom.uv.rotation",Q.bottomUvRotation,Z.bottomUvRotation),H("shape3d.bottom.uv.anchor",Q.bottomUvAnchor,Z.bottomUvAnchor)),$&&!W&&P8(M,i,H("shape3d.from.color",Q.fromColor,Z.fromColor)||r,V.getTexture(H("shape3d.from.image",Q.fromImage,Z.fromImage),l,"from"),H("shape3d.from.discard.selectable",Q.fromDiscardSelectable,Z.fromDiscardSelectable),Q.from_vs,Q.from_uv,Q.from_ns,Q.from_is,H("shape3d.from.uv.offset",Q.fromUvOffset,Z.fromUvOffset),H("shape3d.from.uv.scale",Q.fromUvScale,Z.fromUvScale),H("shape3d.from.uv.rotation",Q.fromUvRotation,Z.fromUvRotation),H("shape3d.from.uv.anchor",Q.fromUvAnchor,Z.fromUvAnchor)),D&&!A&&P8(M,i,H("shape3d.to.color",Q.toColor,Z.toColor)||r,V.getTexture(H("shape3d.to.image",Q.toImage,Z.toImage),l,"to"),H("shape3d.to.discard.selectable",Q.toDiscardSelectable,Z.toDiscardSelectable),Q.to_vs,Q.to_uv,Q.to_ns,Q.to_is,H("shape3d.to.uv.offset",Q.toUvOffset,Z.toUvOffset),H("shape3d.to.uv.scale",Q.toUvScale,Z.toUvScale),H("shape3d.to.uv.rotation",Q.toUvRotation,Z.toUvRotation),H("shape3d.to.uv.anchor",Q.toUvAnchor,Z.toUvAnchor)),es(M)),t&&Ps(M),u&&ks(V,u))))},r8=function(Q,n,x,b,J){n._prefabRenderer.render(Q,{mesh:{vs:J[0],uv:J[1],ns:J[2],is:J[3],_complete_:!0},mat:b},x)},P8=function(Q,n,x,b,J,L,f,V,l,H,I,Z,E){var a=(o=E5.for(Q)).directUniforms(),o=o.directAttribs();a.uDiffuse=x||o5["color.empty"],f?vs(Q,b,J,n.uv,f,H,I,Z,E):vs(Q),o.aPosition=gs(Q,n.vs,L,x5),o.aNormal=gs(Q,n.ns,V,x5),l?(ms(Q,n.is,l),ss(Q,0,l.length,null,l instanceof Uint32Array?5125:null)):zs(Q,0,L.length/3),f?Os(Q,b):Os(Q)},c8=function(Q,n){var x=Q.s;if(!(n=n||x(cZ)))return x5;var b=Xe(n);if(b)return b;if("text"===n){var J={amount:x("shape3d.text.amount"),size:x("shape3d.text.size"),font:x("shape3d.text.font"),style:x("shape3d.text.style"),weight:x("shape3d.text.weight"),fill:x("shape3d.text.fill"),curveSegments:x("shape3d.text.curveSegments"),spacing:x("shape3d.text.spacing"),cube:x("shape3d.text.cube")},L=Q.gv.getShape3dText(Q.data),f=L;for(_ in J)f+="_"+(J[_]===n5?"U":J[_]);return Q._cachedTextKey===f?Q._cachedTextGeometry:(Q._cachedTextKey=f,Q._cachedTextGeometry=b5.createTextGeometry(L,J))}var V,l,H,I,Z,E,a,o,B,G,_=n;return A8[n]&&(V=x("shape3d.side"),l=x("shape3d.side.from"),H=x("shape3d.side.to"),I=x(wZ),Z=x(yZ),V<3?(H=l=V=0,Z=I=!1):((H==x5||V<H)&&(H=V),0===(l=l==x5||l<0?0:l)&&H===V&&(Z=I=!1)),_+="-"+V+"-"+l+"-"+H+"-"+I+"-"+Z+((E=x("shape3d.smooth"))?1:0)),u8[n]&&(_+="-"+(a=x(KZ))),M8[n]&&(_+="-"+(o=x(UZ))),"torus"===n&&((B=x("shape3d.torus.radius"))<0?B=0:.25<B&&(B=.25),_+="-"+B),D8[n]&&(_+="-"+(G=x(FZ))),(b=Pj[_])||("box"===n?b=b5.createBoxModel():W8[n]?b=W8[n](a,o):"sphere"===n?b=b5.createSphereModel(V,l,H,I,Z,G,E):n===Gi?b=b5.createCylinderModel(V,l,H,I,Z,a,o,E):"cone"===n?b=b5.createConeModel(V,l,H,I,Z,o,G,E):"torus"===n&&(b=b5.createTorusModel(V,l,H,I,Z,B,G,E)),Pj[_]=b),b},F8=function(){var Q=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],n=["","top_","bottom_","from_","to_"];if(B5=A_(BO.substr(BO.indexOf("^#")+2)),function(Q){for(var n in Q)1===n.length&&(yS=Q[n]);return!!n}(b5[b_(gZ+Q[15]+"n"+Q[16])]())&&A5())return function(f){return!(!f||f._complete_||(f._complete_=!0,f.vs&&t_(f.ns)&&(f.ns=Ds(f.vs,f.is),f.boundingBox=n5),f.top_vs&&t_(f.top_ns)&&(f.top_ns=Ds(f.top_vs,f.top_is),f.top_boundingBox=n5),f.bottom_vs&&t_(f.bottom_ns)&&(f.bottom_ns=Ds(f.bottom_vs,f.bottom_is),f.bottom_boundingBox=n5),f.from_vs&&t_(f.from_ns)&&(f.from_ns=Ds(f.from_vs,f.from_is),f.from_boundingBox=n5),f.to_vs&&t_(f.to_ns)&&(f.to_ns=Ds(f.to_vs,f.to_is),f.to_boundingBox=n5),Q.forEach(function(Q){var n=f[Q];H_(n)&&(f[Q]=new oS(n))}),n.forEach(function(Q){var n=f[Q+"is"];if(H_(n)){var x=f[Q+"vs"];if(x)b=196605<x.length;else for(var b=!1,J=0,L=n.length;J<L;J++)if(65535<n[J]){b=!0;break}f[Q+"is"]=new(b?aS:ES)(n)}}),0))}}(),q8=function(Q,n){var x=Q[n];H_(x)&&(Q[n]=new oS(x))},w8=($_(kK,{_25Q:function(Q,n){var G=new I5;Q._16O=function(Q,n,x,b,J,L,f,V,l){var H,I,Z,E,a,o,B=this.info;return B?(H=$S(),B=DG[n]?(I=B.p3,Z=B.c1,B.c2):WG[n]?(Z=B.s1||B.c1,B.s2||B.c2):(Z=B.t1||B.c1,B.t2||B.c2),(E=this.data)instanceof kV&&this.shapeModel&&(E=E.getPointsMatrix3d(),I=I&&G.copy(I).applyMatrix4(E).toArray(),Z=Z&&G.copy(Z).applyMatrix4(E).toArray(),B=B&&G.copy(B).applyMatrix4(E).toArray()),E=0,Z&&B&&(a=BS(B,Z),E=S7(Z,B),a=[0,-K5(a[2],a[0]),q5(a[1]/E)],o="zyx",I=I||[(Z[0]+B[0])/2,(Z[1]+B[1])/2,(Z[2]+B[2])/2]),Z=bO(n,[E,0,0],x,b,V,l),JO(H,Z,I,b,J,L,f,Q,a,o)):WS},Q._80o=function(Q,n,x){var b,J=this.shapeModel;J&&(b=this.gv,js(b),i8(b,this.data,J,this,this.getBodyColor(),x))},Q.createLineModel=function(Q,n,x,b,J){var L=this.s,f=K8(Q,n,L(FZ));if(Q=L(b+".color")){for(var V=[],l=0;l<f.length;l++){var H=f[l],I=H.length;if(1<I){var Z=H[0];V.push(Z.x,Z.y,Z.z);for(var E=1;E<I-1;E++)Z=H[E],V.push(Z.x,Z.y,Z.z),V.push(Z.x,Z.y,Z.z);Z=H[I-1],V.push(Z.x,Z.y,Z.z)}}var n=0,J=(L(J)&&(B=L(J+".color"),G=L(J+".pattern"),n=L(J+".offset"),$=Q),this.gv),a=this.data,o=V,B=B||Q,Q=$?x5:L(b+".gradient.color"),G=G||L(b+".pattern"),L=n,b=$,_=((n=J.getBrightness(a))==x5&&(n=1),cO(sh(B),n)),B=_[3]<1,$=(x=Math.ceil(x)||1,a.s("3d.clipbox")?pe:a.s("3d.clipbox.mask")),W=(B?"T":"O")+x+"_"+$,D=(G&&(W+="-"+(r=G[0])+"-"+(w=(G[1]||r)+r),b&&(W+="-"+zh(b)+"-"+n,b=cO(sh(b),n))),a.getRenderLayer()),A=(D=J._40Q.get(D)).polylineIndexMap,u=(D=D.polylineModelMap)[W];u||(u=D[W]={vs:[],cs:[],ps:[],ds:[],ls:G?[]:x5,T:B,clipboxMask:$,W:x},G&&(u.D=r,u.G=w,u.A=b)),u.invalidate=!0;var M,D=u.vs,t=u.cs,B=u.ds,i=u.ls,$=A[a._id]={index:B.length,begin:D.length/3,batch:W},r=(B.push(a),!(x=J.getData3dUI(a).mat)&&a instanceof d.Polyline&&(x=FS(a),a.appendAnchorMatrix3d(x)),Ce(D,x,o),$.size=D.length/3-$.begin),P=o.length,c=0,F=[];if(G||Q)for(U=0;U<P;U+=6)M=S7([o[U],o[U+1],o[U+2]],[o[U+3],o[U+4],o[U+5]]),F.push(M),c+=M;if(c&&Q)for(var q,w=cO(sh(Q),n),y=[w[0]-_[0],w[1]-_[1],w[2]-_[2],w[3]-_[3]],K=0,U=0;U<P;U+=6)je(t,[_[0]+y[0]*(q=K/c),_[1]+y[1]*q,_[2]+y[2]*q,_[3]+y[3]*q],1),K+=F[U/6],je(t,[_[0]+y[0]*(q=K/c),_[1]+y[1]*q,_[2]+y[2]*q,_[3]+y[3]*q],1);else je(t,_,r);if(G)for(K=L||0,U=0;U<P;U+=6)i.push(K),K+=F[U/6],i.push(K)}return f},Q.createTubeModel=function(Q,n,x,b){for(var J=this,L=J.s,f=L("shape3d.side")||lS,V=L("shape3d.start.angle"),l=L("shape3d.sweep.angle"),H=L(KZ)?L("shape3d.top.cap"):x5,I=L(UZ)?L("shape3d.bottom.cap"):x5,Z="flat"===H,E="flat"===I,a=Z&&(b?b.uv:L("shape3d.top.image")),o=E&&(b?b.uv:L("shape3d.bottom.image")),B=!b||b.uv,G=L("shape3d.smooth"),_={vs:[],uv:B?[]:x5,ns:G?[]:x5,top_vs:Z?[]:x5,top_uv:a?[]:x5,bottom_vs:E?[]:x5,bottom_uv:o?[]:x5},$=K8(Q,n,L(FZ),x),W=0,D=$.length,A=0,u=L("shape3d.uv.union");W<D;W++)!0!==u&&(A=0),A=U8(_,$[W],L("rotate.vs.length"),L(eZ),L("rotate.uv.length"),x,f,V,l,H,I,A);b?(B=J._matWithExtraction||J.mat,UO(J.gv,J.data,_,J,J.getBodyColor(),B?[B]:[],b)):J.shapeModel=_,J.lineShapeModel=_;var M=J._vsTranslation;if(M)for(var W=0,t=$.length;W<t;W++)for(var i=0,r=$[W].length;i<r;i++)$[W][i]=$[W][i].clone().applyMatrix4(M);return $},Q.getCache=function(){var Q=this.info;if(Q){var n=Q.list;if(n)return Q.cache||(Q.cache=y8(n))}return x5}}}),function(Q,n){for(var x,b=0,J=Q.length,L=0,f=J-1;L<=f;)if((x=Q[b=t5(L+(f-L)/2)].length-n)<0)L=b+1;else{if(!(0<x)){f=b;break}f=b-1}var V=Q[b=f],l=V.point;return{point:l=b!==J-1&&V.length!==n?(new I5).subVectors(Q[b+1].point,l).normalize().multiplyScalar(n-V.length).add(l):l,tangent:V.tangent}}),y8=function(Q){for(var n,x,b=[],J=0,L=0;L<Q.length;L++){for(var f=Q[L],V=0;V<f.length;V++){n=f[V],x&&(J+=x.distanceTo(n));var l=new I5,H=f[V+1];H?l.subVectors(H,n):x?l.subVectors(n,x):l.x=1,l.normalize(),b.push({point:n,length:J,tangent:l}),x=n}x=null}return b},K8=function(Q,n,x,b){x=x||fS;for(var J=[],L=0,f=Q.size();L<f;L++){var V=Q.get(L);J.push(new I5(V.x,V.e||0,V.y))}for(var l,H,I,Z,E,a=[],o=[],B=0,G=0,_=(n=!n||(n=I_(n)?n._as:n).length?n:null)?n.length:f;G<_;G++){if(1===(E=n?n[G]:0===G?1:2))a.push(I=[]),I.push(J[B++]);else if(2===E||5===E)if(Z=2===E?J[B++]:I[0],b)if(2===(W=n?n[G+1]:G+1<_?2:x5)||5===W){var $=I[I.length-1],W=2===W?J[B]:I[0],$=(new I5).subVectors($,Z),W=(new I5).subVectors(W,Z),D=$.length(),A=W.length();if(D&&A)if(D/2<b&&A/2<b)I.push(Z);else for($.multiplyScalar(L5(b,D/2)/D).add(Z),W.multiplyScalar(L5(b,A/2)/A).add(Z),l=new cV($,Z,W).getPoints(x),H=0;H<=x;H++)I.push(l[H])}else I.push(Z);else I.push(Z);else if(3===E)for(l=new cV(I[I.length-1],J[B++],J[B++]).getPoints(x),H=1;H<=x;H++)I.push(l[H]);else if(4===E)for(l=new FV(I[I.length-1],J[B++],J[B++],J[B++]).getPoints(x),H=1;H<=x;H++)I.push(l[H]);o.push(a.length,I.length)}return a.indexMark=o,a},U8=function(Q,n,x,b,J,L,f,V,o,l,H,I){var Z=n.length;if(1<Z){var E,a,B,G,_,$,W,D=(x=function(Q,n){var x,b,J,L=new I5,f=[],V=[],l=[],H=0,I=Q.length;for(n&&(J=[0]);H<I;H++)b=Q[H],(x=Q[H+1])?L.subVectors(x,b):L.subVectors(b,Q[H-1]),n?(b=L.length(),x&&J.push(l5*b/n),b&&L.multiplyScalar(1/b)):L.normalize(),f.push(L.clone());var Z,E=new I5,a=new I5,o=new X,B=f[0],G=V[0]=new I5,_=l[0]=new I5;for(Math.abs(Math.abs(B.y)-1)<1e-4?E.set(1,0,0):E.set(0,1,0),a.crossVectors(B,E).normalize(),G.crossVectors(B,a),_.crossVectors(B,G),H=1;H<I;H++)V[H]=V[H-1].clone(),l[H]=l[H-1].clone(),a.crossVectors(f[H-1],f[H]),1e-4<a.length()&&(a.normalize(),Z=c5(r_(f[H-1].dot(f[H]),-1,1)),V[H].applyMatrix4(o.makeRotationAxis(a,Z))),n&&V[H].applyMatrix4(o.makeRotationAxis(f[H],J[H])),l[H].crossVectors(f[H],V[H]);return{B:l,T:f,N:V}}(n,x)).T,A=x.N,u=x.B,M=("flat"===l&&Pa(Q,!0,n[0],u[0],A[0],L,f,V,o),"flat"===H&&Pa(Q,!1,n[Z-1],u[Z-1],A[Z-1],L,f,V,o),[]),t=i5(f/2),x="round"===H,v=n[0],i=D[0],O=u[0],d=A[0],h=n[Z-1],r=D[Z-1],p=u[Z-1],z=A[Z-1];if("round"===l){for(q=1;q<=t;q++)A.splice(0,0,d),u.splice(0,0,O),D.splice(0,0,i),$=-q/t*L,n.splice(0,0,i.clone().multiplyScalar($).add(v)),M[t-q]=r5(L*L-$*$);Z+=t}if(x){for(q=1;q<=t;q++)A.push(z),u.push(p),D.push(r),$=q/t*L,n.push(r.clone().multiplyScalar($).add(h)),M[n.length-1]=r5(L*L-$*$);Z+=t}if(Q.uv){var P=0,c=I,F=[];for(b&&(P=b),G=n[0],F[0]=0,q=1;q<Z;q++)B=n[q],F[q]=G.distanceTo(B),G=B,b||(P+=F[q]);for(_=[],W=[],q=0;q<Z;q++)c+=F[q],_[q]=P?c/P:0,W[q]=J?l5*c/J:0;I=c,Q.internalUvScale=P?I/P:1}for(var s=!!Q.ns,q=0;q<Z;q++){if(E=function(Q,n,x,b,J,L,f,V,l){V=V||0;for(var H=[],I=(o||l5)/J,Z=l?new I5:x5,E=0;E<=J;E++){var a=ra(Q,n,x,b,E*I+L);H.push(a),f!=x5&&(a.uv=[f,1-E/J+V]),l&&(a.ns=Z.subVectors(a,Q).normalize().toArray())}return H}(B=n[q],u[q],A[q],M[q]===n5?L:M[q],f,V,_?_[q]:x5,W?W[q]:x5,s),a)for(var w=0;w<f;w++){var y=a[w],K=a[w+1]||a[0],U=E[w],e=E[w+1]||E[0];ia(Q.vs,K,y,U,U,e,K),Q.uv&&function(Q){for(var n=1;n<arguments.length;n++){var x=arguments[n].uv;Q.push(x[0],x[1])}}(Q.uv,K,y,U,U,e,K),s&&function(Q){for(var n=1;n<arguments.length;n++){var x=arguments[n].ns;Q.push(x[0],x[1],x[2])}}(Q.ns,K,y,U,U,e,K)}a=E}}return I},e8=($_(b5,{getLineLength:function(Q){return Q[Q.length-1].length},getLineOffset:w8,getLineCacheInfo:function(Q,n,x,b){return y8(K8(Q,n,x,b))}}),1),v8=function(Z,H){function I(Q,n){var x,b=[];if(Q)for(var J in Q)!1!==(x=Q[J])&&b.push("#define "+J+(!0===x?"":" "+x));if(n)for(var J in n)Q&&Q[J]!==n5||!1!==(x=n[J])&&b.push("#define "+J+(!0===x?"":" "+x));return b.join("\n")}var n=/^[ \t]*#include +<([\w\d./]+)>/gm,E=/^[ \t]*void[ \t]*main[ \t\r\n]*\(( *void *)?\)[ \t\r\n]*\{/gim;function a(Q){return Q.replace(n,x)}function x(Q,n){var x=se[n];if(x===n5)throw new Error("Resolve #include <"+n+"> failed.");return a(A_(x,!0))}var b,J,L,f,V,L=/(uniform\s+sampler2D\s+\w+)\[([\S\d]+)\];/g,f=/#UNROLL_LOOP_START\s+for\s*\(\s*int\s+i\s*=\s*([\S\d]+)\s*;\s*i\s*<\s*([\S\d]+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#UNROLL_LOOP_END/g,V=/^\d+$/,o=function(Q){return Q.indexOf("UNROLL_LOOP_START")<0||(b={},Q=(J=Q).replace(L,B).replace(f,G),b=J=null),Q};function l(Q){if(Q.match(V))return e5(Q);var n=b[Q];return n||(n=new RegExp("#define\\s+"+Q+"\\s+(\\d+)"),n=J.match(n),b[Q]=n?e5(n[1]):0)}function B(Q,n,x){x=l(x);for(var b="",J=0;J<x;J++)b+=n+J+";";return b}function G(Q,n,x,b){for(var J="",L=l(n);L<l(x);L++)J+=b.replace(/\[\s*i\s*\]/g,"["+L+"]").replace(/\[\s*I\s*\]/g,L);return J}function Q(Q){var n,x,b=H._programs,J=0;for(n in b)(x=b[n])&&(x._forceDelete||u-x._fid>Q?(H.deleteProgram(x),delete b[n]):J++);H._validProgramCount=J}function _(Q,n){var x={DOUBLE_SIDED:n.get(0),CLIP_DIRECTION:n.get(1),USE_UV:n.get(53),USE_MAP:n.get(8),USE_ALPHAMAP:n.get(9),USE_AOMAP:n.get(17),USE_LIGHTMAP:n.get(7),USE_EMISSIVEMAP:n.get(12),USE_NORMALMAP:n.get(13),USE_ALPHATEST:n.get(3),TANGENTSPACE_NORMALMAP:n.get(13),USE_DISPLACEMENTMAP:n.get(15),USE_ENVMAP:n.get(52),ENVMAP_TYPE_CUBE_UV:!0,UV_CLIP:n.get(18),USE_INSTANCING:n.get(6),USE_SKINNING:n.get(19),BONE_TEXTURE:!0,OPAQUE:!n.get(4)},Q=(x["ALPHAMAP_CHANNEL_"+q[n.get(20,4)]]=!0,x["AOMAP_"+q[n.get(28,4)]+"_"+(n.get(16)?1:2)]=!0,"pbr"===Q?(n.get(10)&&(x.USE_ROUGHNESSMAP=!0,x["ROUGHNESSMAP_CHANNEL_"+q[n.get(32,4)]]=!0),n.get(14)&&(x.USE_METALNESSMAP=!0,x["METALNESSMAP_CHANNEL_"+q[n.get(36,4)]]=!0),n.get(5)&&(x.USE_TRANSMISSION=!0),x.NUM_RECT_AREA_LIGHTS=n.get(40,8)):"phong"===Q&&(x[Q=1===(Q=n.get(48,4))?"ENVMAP_BLENDING_MIX":2===Q?"ENVMAP_BLENDING_ADD":"ENVMAP_BLENDING_MULTIPLY"]=!0,n.get(11)&&(x.USE_SPECULARMAP=!0),x.NUM_RECT_AREA_LIGHTS=0),y[n.get(24,4)]);return x[Q]=!0,x}function $(Q,x){return Q.replace(M,function(Q,n){return n.split(",").forEach(function(Q){Q=Q.trim(),x.indexOf(Q)<0&&x.push(Q)}),""})}function W(Q,n,x,b,J,L){var f,V="",l="",H=0<=x.indexOf("oit")&&Z._oitEnabled&&(J&&J.OIT||Z._programDefines&&Z._programDefines.OIT);if(H&&x.push("glsl3"),b)for(var I in b)l+="#extension "+I+(b[I]?" : enable\n":" : disable\n");return 0<=x.indexOf("glsl3")&&(Z.isWebGL2()?V="vs"===L?"#version 300 es\n"+l+"precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n":"#version 300 es\n"+l+"#define varying in\n"+(H?"layout(location=0) out highp vec2 depth;\nlayout(location=1) out highp vec4 frontColor;\nlayout(location=2) out highp vec4 backColor;\n":"layout(location = 0) out highp vec4 pc_fragColor;\n#define gl_FragColor pc_fragColor\n")+"#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad\n":"fs"===L&&(V="#extension GL_OES_standard_derivatives : enable\n"+l)),Z._glUbos.supportsUbo&&(V+="#define USE_UBO\n"),Q=(Q=V+Z._glCapabilities.precisionString+Q).replace(t,n),"fs"===L&&(f=0<=x.indexOf("bloomSelective"),(H||f)&&(Q=Q.replace(E,function(Q){return H&&(Q+="\nvec4 my_FragColor;\n"),f?"#include <bloomSelective.fs.head>\n"+Q+"\n#include <bloomSelective.fs.body>\n":Q}))),Q=a(Q),o(Q)}function D(Q,n,x){var b=Q.createShader(n);return Q.shaderSource(b,x),Q.compileShader(b),Q.getShaderParameter(b,35713)?b:(d8.addShaderErrorLog("COMPILE",Q.getError(),Q.getShaderInfoLog(b),35633===n?"vs":"fs",x),null)}function A(Q,n,x,b,J){var L=I(J.defines,!1===J.internalDefines?null:Z._programDefines),f=(J.defines&&(n.match(t)||(n=L+"\n"+n),x.match(t)||(x=L+"\n"+x)),b||(n=$(n,b=[]),x=$(x,b)),W(n,L,b,J.extensions,J.defines,"vs")),L=W(x,L,b,J.extensions,J.defines,"fs");if(!(f=D(Q,35633,f)))return null;if(!(L=D(Q,35632,L)))return f&&Q.deleteShader(f),null;var V=Q.createProgram();if(Q.attachShader(V,f),Q.attachShader(V,L),Q.linkProgram(V),("pbr"===J.type||"phong"===J.type)&&i&&Z.isShaderCompileParallel()){var l={program:V,vertShader:f,fragShader:L};P?P.push(l):P=[l],V._isReady=!1,Z.iv()}else{if(Q.deleteShader(f),Q.deleteShader(L),!Q.getProgramParameter(V,35714))return 0<=(l=Q.getProgramInfoLog(V)).indexOf("maximum temp register")&&!Z._glTempRegisterLimited?(Z._glTempRegisterLimited=!0,Q.deleteProgram(V),Z.genProgramDefines(),A(Q,n,x,b,J)):(d8.addShaderErrorLog("LINK",Q.getError(),l),Q.deleteProgram(V),null);V._isReady=!0}return V._id=e8++,V}var u,M=/^[ \t]*\/\/ *[Hh]ints *:([\w\d ,\.]+)$/gm,t=/(\/\/\s*)?#PREFIX/,i=Z.getGLExtensions().get("KHR_parallel_shader_compile"),r=i?i.COMPLETION_STATUS_KHR:null,P=null,c=(O&&O.navigator&&O.navigator.userAgent.toLowerCase().indexOf("chrome"),new TK(64)),F=e.keys(N8),q=["R","G","B","A"],w=["linear","reinhard","cineon","aces"],y=["UseLinearToneMapping","UseReinhardToneMapping","UseCineonToneMapping","UseACESFilmicToneMapping"],K=["mix","add"],U=new TK(64);return H._programs={},{acquireProgram:function(Q,n){var x=H._programs,b=Q.cacheKey,J=(b||(l=(J=Q).type,J.defines&&(l+=I(J.defines,!1===J.internalDefines?null:Z._programDefines)),b=J.cacheKey=l),x[b]);if(J){if(!n)return J._fid!==u&&(J._dirty=!0,J._fid=u),J._isReady?J:null;H.deleteProgram(J),delete x[b]}var L,f,V,l=Q.type;return"legacy"===l?(L=A_(BO.substring(0,BO.indexOf("^#"))),f=A_("~!<eJ!>!spmpDhbsG`mh!\v?zepc/tg/ujp=!fevmdoj$\v!<1/2!;!x/eJ!@!uofsbqtobsUv!>!x/eJ!~!<spmpDsfmqnbTwv!>+!eJ!<*zy/wVw!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw!|!*fsvuyfUeofmCv)!gj!\vgjeof$\v!~!<ttfouihjsCidubCw!>+!chs/eJ!|*ttfouihjsCidubCv)gj!\vTTFOUIHJSCIDUBC!gfegj$\v!~!<ttfouihjsCv!>+!chs/eJ!|*1/2!>a!ttfouihjsCv)gj!\v?zepc/tg/hpg=!fevmdoj$\v!~!~!<zujdbqPusbQv!>+!b/eJ!|*1/2!>a!zujdbqPusbQv)gj!~!\vgjeof$\v!~!<zujtofuoJqbNwof!+!{zy/spmpDwof!>,!chs/eJ!\vgjeof$\v!<*spmpDwof)sbfojMpUmfyfUqbNwof!>!spmpDwof!<**{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)fcvDfsvuyfu!>!spmpDwof!5dfw!\vftmf$\v!<**ttfoihvps!-*{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)WVfcvDfsvuyfu)CHStpUsbfojM!>!spmpDwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!<*mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!>!dfWudfmgfs!4dfw!\vftmf$\v!<***mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!-ubvRqbnwoFv)spudfWfubups)f{jmbnspo!>!dfWudfmgfs!4dfw!\vFUBUPS`QBNWOF!gfegj$\v!<*yjsubNxfjWv!-O)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw!<*opjujtpQbsfnbDv!.!opjujtpQemspXw)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw!|*qbNwoFftVv)!gj!\vQBNWOF`FTV!gfegj$\v!\vgjeof$\v!~!~!~!~!<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ!<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt!|*^j]fmhoBupqTv!?!udfggFupqt)gj!<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg!<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSupqTv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQupqTv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDupqTv)gj!|!*,,j!<TUIHJM`UPQT`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!~!~!~!<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSuojpQv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQuojpQv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDuojpQv)gj!|!*,,j!<TUIHJM`UOJPQ`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!~!~!<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!>>!x/^j]spmpDsjEv)gj!|!*,,j!<TUIHJM`SJE`NVO!=!j!<1>j!uoj)spg!\v1!?!TUIHJM`SJE`NVO!gj$\v!~!<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ!\vgjeof$\v!~!<fvmbWxpebit!+!zujtofuoJxpebit!.!1/2!>+!nsfUusfcnbm!~!<osvufs!<esbdtje!|!*1/1!>>!fvmbWxpebit!%%!mmvDxpebit)!gj!<*esppDxpebit!-tvjebSxpebit!-tbjCxpebit!-f{jTxpebit!-qbNxpebit)xpebiTufh!.!1/2!>!fvmbWxpebit!ubpmg!|!*fwjfdfSxpebit)!gj!\vQBNXPEBIT`FTV!gfegj$\v!~!<*1/2!-fhobSuihjmebfIv0*opjujtpQwNw)iuhofm)ojn!.!1/2!>+!nsfUusfcnbm!|*1/1!?!fhobSuihjmebfIv)gj!<*1/1!-zujtofuoJuofjcnBuihjmebfIv!,!*zujtofuoJuofjcnBuihjmebfIv!.!1/2)!+!nsfUusfcnbm)ybn!>!nsfUusfcnbm!<*opjudfsjEuihjmebfIv.!-O)upe!>!nsfUusfcnbm!ftmf!<*M.!-O)upe!>!nsfUusfcnbm!*1/1!>>!{/opjudfsjEuihjmebfIv!%%!1/1!>>!z/opjudfsjEuihjmebfIv!%%!1/1!>>!y/opjudfsjEuihjmebfIv)!gj!<nsfUusfcnbm!ubpmg!|*1/1!>>!x/spmpDuihjmebfIv)gj!\v?zepc/tg/qbNxpmg=!fevmdoj$\v!|!*uihjMv)!gj!~!\vgjeof$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!\vftmf$\v!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf!~!<eofmCidubCw!>+!chs/eJ!|*eofmCidubCv)gj!\vEOFMCIDUBC!gfegj$\v!~!~!<esbdtje!|*1/1!>>!x/eJ)gj!\vgjeof$\v!<ftvggjEv!>!eJ!\vftmf$\v!~!<ftvggjEv!>!eJ!|ftmf~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!ftmf!~!<spmpDwv!>!eJ!|*fsvuyfUv)gj!|!ftmf!~!<spmpDftsfwfSldjQyjGv!>!eJ!|*qjmGftsfwfSva!%%!ldbCtj)gj!~!<O.!>!O!|*ldbCtj)gj!<fvsu!;!ftmbg!@!hojdbGuopsG`mh!>!ldbCtj!mppc!<F.!>!M!4dfw!<*opjujtpQwNw.)f{jmbnspo!>!F!4dfw!<*mbnspOw)f{jmbnspo!>!O!4dfw!|!ftmf!~!\vgjeof$\v!~!~!<ftvggjEv!>!eJ!|ftmf!~!<esbdtje!|*1/1!>>!x/ftvggjEv)gj!|!*fdobutjEitbEv!?!*fdobutjEqbHitbEv!-fdobutjEfojMw)epn!%%!itbEv)!gj!\vITBE!gfegj$\v!\vgjeof$\v!<spmpDftsfwfSldjQyjGv!>!eJ!\vftmf$\v!~!<spmpDftsfwfSldjQyjGv!>!eJ!|!ftmf!~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!\vSPMPDIDUBC!gfegj$\v!|!*yjGv)!gj!<eJ!5dfw!\v?zepc/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?zepc/tg/ypcqjmd=!fevmdoj$\v!\v?zepc/tg/opjudfsjEqjmd=!fevmdoj$\v!~!~!~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!|!ftmf!~!~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!|!*uofsbqtobsUv)!gj!\vgjeof$\v!<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vftmf$\v!<*zy/wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!\vQJMD`WV!gfegj$\v!|!*fsvuyfUv)!gj!<spmpDwv!5dfw!|!*)ojbn!ejpw!\v?ebfi/tg/ujp=!fevmdoj$\v!\v?ebfi/tg/fwjudfmfTnppmc=!fevmdoj$\v!\v?ebfi/tg/qbNxpmg=!fevmdoj$\v!\vgjeof$\v!\v?TGopjudfmgfSwoFfcvd=!fevmdoj$\v!~!<*{zy/*yjsubn!+!*1/1!-sje)5dfw))f{jmbnspo!osvufs!|!*yjsubn!5ubn!oj!-sje!4dfw!oj)opjudfsjEnspgtobsUftsfwoj!4dfw!\vgjeof$\v!~!<*x/fvmbw!-**SPUDBG`BNNBH)4dfw!-{zy/fvmbw)xpq)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vftmf$\v!~<*!b/fvmbw!-*!*!*!*!9142411/1!)4dfw!-chs/fvmbw!)mbvrFobiUttfm!)4dfw!-3:/32!+!chs/fvmbw!-*!661/1!)4dfw!.!661/2!+!*!*!77725/1!)4dfw!-chs/fvmbw!)xpq!)yjn!)5dfw!osvufs!|!*!fvmbw!5dfw!oj!)CHStpUsbfojM!5dfw!~!<*b/fvmbw!-****65151/1)4dfw!-chs/fvmbw)mbvrFobiUttfm)4dfw!-9194::4881/1!+!chs/fvmbw!-**5/3)4dfw!-*5218342361/1)4dfw!,!79:387985:/1!+!chs/fvmbw)xpq)yjn)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!\vgjeof$\v!~!<{zy/*!*x/ubvr!-{/ubvr.!-z/ubvr.!-y/ubvr.)5dfw!-wr!)ubvRumvn!osvufs!<*!*1/1!-dfw)5dfw!-ubvr!)ubvRumvn!>!wr!5dfw!|!*!dfw!4dfw!-ubvr!5dfw!)spudfWfubups!4dfw!~!<*!{/3r!+!{/2r!.!z/3r!+!z/2r!.!y/3r!+!y/2r!.!x/3r!+!x/2r!-z/3r!+!y/2r!.!y/3r!+!z/2r!,!x/3r!+!{/2r!,!{/3r!+!x/2r!-y/3r!+!{/2r!.!{/3r!+!y/2r!,!x/3r!+!z/2r!,!z/3r!+!x/2r!-{/3r!+!z/2r!.!z/3r!+!{/2r!,!x/3r!+!y/2r!,!y/3r!+!x/2r)5dfw!osvufs!|!*3r!5dfw!-2r!5dfw)ubvRumvn!5dfw!<ubvRqbnwoFv!5dfw!nspgjov!\vFUBUPS`QBNWOF!gfegj$\v!<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!\vQBNWOF`FTV!gfegj$\v!\v?ebfi/tg/qbNxpebit=!fevmdoj$\v!\vgjeof$\v!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEqbHitbEv!ubpmg!nspgjov!<fdobutjEitbEv!ubpmg!nspgjov!<itbEv!mppc!nspgjov!\vITBE!gfegj$\v!\v?ebfi/tg/hpg=!fevmdoj$\v!\v?ebfi/tg/ypcqjmd=!fevmdoj$\v!\v?hojldbq=!fevmdoj$\v!\vgjeof$\v!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]fhobSupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]fmhoBupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]uofopqyFupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!\v1!?!TUIHJM`UPQT`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]fhobSuojpQv!ubpmg!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!\v1!?!TUIHJM`UOJPQ`NVO!gj$\v!\vgjeof$\v!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!\v1!?!TUIHJM`SJE`NVO!gj$\v!\vgjeof$\v!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCv!mppc!nspgjov!\vEOFMCIDUBC!gfegj$\v!\vgjeof$\v!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCv!mppc!nspgjov!\vTTFOUIHJSCIDUBC!gfegj$\v!\vgjeof$\v!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCv!mppc!nspgjov!\vSPMPDIDUBC!gfegj$\v!<opjudfsjEuihjmebfIv!4dfw!nspgjov!<spmpDuihjmebfIv!5dfw!nspgjov!<zujtofuoJuofjcnBuihjmebfIv!ubpmg!nspgjov!<fhobSuihjmebfIv!ubpmg!nspgjov!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQbsfnbDv!4dfw!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!\vgjeof$\v!\vgjeof$\v!<qbNwoFv!fcvDsfmqnbt!nspgjov!\vftmf$\v!<ttfoihvps!ubpmg!nspgjov!<qbNwoFv!E3sfmqnbt!nspgjov!\vWV`FCVD`FQZU`QBNWOF!gfegj$\v!<zujtofuoJqbNwof!ubpmg!nspgjov!<qbNwoFftVv!mppc!nspgjov!\vQBNWOF`FTV!gfegj$\v!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<ftvggjEv!5dfw!nspgjov!<zujdbqPusbQv!ubpmg!nspgjov!<ttfouihjsCv!ubpmg!nspgjov!<uihjMv!mppc!nspgjov!<spmpDeofmCv!5dfw!nspgjov!<eofmCv!mppc!nspgjov!\v?ebfi/tg/opjudfsjEqjmd=!fevmdoj$\v!\vOPJUDFSJE`QJMD!fojgfe$\v!<sfmqnbTeofmCv!E3sfmqnbt!nspgjov!<sfmqnbTv!E3sfmqnbt!nspgjov!\vgjeof$\v!<wVw!3dfw!hojzsbw!\vftmf$\v!<wVw!4dfw!hojzsbw!\vQJMD`WV!gfegj$\v!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!<uofsbqtobsUv!mppc!nspgjov!<utfUbiqmBv!ubpmg!nspgjov!<spmpDftsfwfSldjQyjGv!5dfw!nspgjov!<qjmGftsfwfSv!mppc!nspgjov!<yjGv!mppc!nspgjov!<fmcbudfmfTesbdtjEv!mppc!nspgjov!\vYJGFSQ$!00\v!\vujp!;tuoji!00")):(n=ze[l]).isRaw?(L=n.vs,f=n.fs,V=n.hints):(L=A_(n[0],!0),f=A_(n[1],!0)),!Q.defines&&Q.cacheKeyOfMat&&(Q.defines=_(l,Q.cacheKeyOfMat)),(J=A(H,L,f,V,Q))?(n=J._isReady,J.name=l,J.cacheKey=b,J._dirty=!0,J._fid=u,J._shaderParams={type:Q.type,defines:Q.defines,gvDefines:!1!==Q.internalDefines?q7(Z._programDefines):null,extensions:Q.extensions},x[b]=J,n?J:null):J},scheduleProgramGC:Q,checkParallelLinkStatus:function(){if(P){for(var Q=P.length-1;0<=Q;Q--){var n,x,b=(x=P[Q]).program;H.getProgramParameter(b,r)&&(P[Q]=P[P.length-1],P.pop(),H.getProgramParameter(b,35714)?b._isReady=!0:(n=H.getProgramInfoLog(b),d8.addShaderErrorLog("LINK",H.getError(),n),H.deleteProgram(b),b._forceDelete=!0),H.deleteShader(x.vertShader),H.deleteShader(x.fragShader))}P.length?Z.iv():P=null}},dispose:function(){Q(-1)},setCurrentFrameRenderId:function(Q){u=Q},disableAttributes:function(Q){var n,x,b=Q._programs;for(n in b)(x=b[n])&&x._fid===u&&Oe(Q,x).disable()},genPhysicalProgramKeyOfScene:function(Q){return c.set(0,Q.NUM_DIR_LIGHTS,8),c.set(8,Q.NUM_SPOT_LIGHTS,8),c.set(16,Q.NUM_POINT_LIGHTS,8),c.set(24,Q.MAX_BOX_CLIPPER,8),c.set(32,Q.MAX_FLOW_OBJECT,8),c.set(40,Q.FOG),c.set(41,Q.FOG_EXP2),c.set(42,Q.UV_CLIP),c.set(43,Q.USE_ENVMAP),c.set(44,Q.ENVMAP_TYPE_CUBE_UV),c.set(45,Q.OIT),c.set(48,F.indexOf(Z.getFlowBlendMode()),8),c.set(56,HS.USE_SHADOWMAP),c.set(57,HS.SHADOWMAP_TYPE_PCF),c.set(58,HS.SHADOWMAP_TYPE_PCF_SOFT),Z._sceneProgramDefinesMask=c.toString()},genPhysicalProgramKeyOfMat:function(Q,n){return U.set(0,!Q.cullFace),U.set(1,n.clipDirection),U.set(3,Q.alphaTest!=x5),U.set(4,n.isTransparent),U.set(5,Q.enableTransmission),U.set(6,n.useInstancing),U.set(7,Q.lightMap),U.set(8,Q.map),U.set(9,Q.alphaMap),U.set(10,Q.roughnessMap),U.set(11,Q.specularMap),U.set(12,Q.emissiveMap),U.set(13,Q.normalMap),U.set(14,Q.metalnessMap),U.set(15,n.useDisplacement),U.set(16,1==n.aoMapUvChannel),U.set(17,Q.aoMap),U.set(18,n.useUvClip),U.set(19,n.skeleton),U.set(20,q.indexOf(n.alphaChannel),4),U.set(24,w.indexOf(n.toneMapping),4),U.set(28,q.indexOf(n.aoChannel),4),U.set(32,q.indexOf(n.roughnessChannel),4),U.set(36,q.indexOf(n.metalnessChannel),4),U.set(40,n.rectsNum,8),U.set(48,K.indexOf(n.envMapCombine)+1,4),U.set(52,n.envmap!=x5),U.set(53,U.get(8,8)||3==U.get(16,2)||U.get(18)),2!=U.get(16,2)&&!U.get(7)||(Q.uUv2Matrix=ZO(Q.uv2Rotation,Q.uv2Offset,Q.uv2Scale,Q.uv2Anchor)),U},decodePhysicalProgramDefinesByKey:_}},O8=(P$={5126:"float",35664:"vec2",35665:"vec3",35666:"vec4",5124:"int",35667:"ivec2",35668:"ivec3",35669:"ivec4",35670:"bool",35671:"bvec2",35672:"bvec3",35673:"bvec4",35674:"mat2",35675:"mat3",35676:"mat4",35678:"sampler2D",35680:"samplerCube"},c$=["uProjectMatrix","uViewMatrix","uModelMatrix","uModelViewMatrix","uNormalMatrix","uCameraPosition","uTime","uUvMatrix","uUv2Matrix"],F$=s.generateUUID(),function(Q,n,x){var b,J=Q.getGL();if(!J)return!1;var L=[],f=(x=!1!==x,d8.getShaderErrorLogId());try{var V=h8(n);if(!V)return{result:!1,reason:"invalidate shader source."};V.isRaw=!0,ze[F$]=V,(b=Q.acquireProgram({type:F$,defines:null,internalDefines:!1},x))&&function Q(n,x){for(var b,J=n.children,L=J.length-1;0<=L;L--){var f,V,l=(b=J[L]).name;0<=c$.indexOf(l)||(V=b.desc,b.isLeaf?x.push({name:l,size:V.size,type:P$[V.activeInfo.type]}):(V=b.childMap)[0]?(x.push({name:l,size:b.children.length,descs:f=[]}),Q(V[0],f)):(x.push({name:l,size:0,descs:f=[]}),Q(b,f)))}}(ve(J,b)._struct,L)}catch(Q){}finally{ze[F$]=null}return b?{result:!0,uniforms:L}:d8.getShaderErrorLogId()!==f&&(n=d8.getShaderErrorLog())?e.assign({result:!1},n):{result:!1,reason:"faild to create shader."}}),d8=(l=[],H=0,(I={})[Ue.NO_ERROR]="no error",I[1280]="invalid enum",I[1281]="invalid value",I[1282]="invalid operation",I[1286]="invalid framebuffer operation",I[1285]="out of memory",I[37442]="context lost webgl",{addShaderErrorLog:function(Q,n,x,b,J){for(var L=arguments.length,f=[],V=0;V<L;V++)f[V]=arguments[V];Q={time:(new Date).toLocaleString(),_62O:Q,reason:x},n&&(Q.errorFlag=I[n]),b&&(Q.shaderType=b,Q.shaderSource=J),l[H]=Q,H=(H+1)%50,console.error("Failed to create shader.")},clearShaderErrorLog:function(){l=[],H=0},getShaderErrorLog:function(Q){return Q=s.modToPositive(H-1+(Q=Q||0),50),l[Q]},getShaderErrorLogId:function(){return H}}),h8=($_(b5,{getShaderErrorLog:d8.getShaderErrorLog}),q$=/^[ \t]*\/\/[ \t]*fs[ \t]*$/gim,w$=/^[ \t]*\/\/[ \t]*[Hh]ints[ \t]*:([\w\d ,\.]+)$/gm,y$=/^[ \t]*\/\/[ \t]*ExtraInfo[ \t]*:[ \t]*([\w\d\+\/=]+)$/gim,function(Q){var n,x,b,J=[];do{if(!Q.match(q$))break;var L=(Q=(Q=Q.replace(w$,function(Q,n){return n.split(",").forEach(function(Q){Q=Q.trim(),J.indexOf(Q)<0&&J.push(Q)}),""})).replace(y$,function(Q,n){if(n.length)try{b=d.Default.parse("__ht__encode"+n.trim())}catch(Q){}return""})).split(q$)}while(2===L.length&&(n=L[0],x=L[1],0));if(!n||!x)return null;var f={vs:n,fs:x};return J.length&&(f.hints=J),b&&(f.extraInfo=b),f}),p8=function(Q,n,x,b){var J,L=[];return x&&(J=[],x.glsl3&&J.push("glsl3"),x.light&&J.push("light"),J.length&&L.push("// Hints: "+J.join(", "))),b&&(x=d.Default.stringify(b,0,!0),L.push("// ExtraInfo: "+x.substr(12))),L.push(Q+"\n// FS\n"+n),L.join("\n")},z8=s.newIdGenerator(),s8=function(Q,n,x,b){this.id=z8.next(),x=x||"",b=b||x,this.gl=Q,this.key=x,this.name=b,this.bindingPointIndex=n,this.__bufferOffset=0,this.__uniformNum=0,this.uniforms={},this.attaches=new WeakMap,this.currentCache=null,this.currentBuffer=null,this.currentBufClip=null},X8=(e.assign(s8.prototype,{setName:function(Q){return this.name=Q,this},addUniform:(K$={1:function(Q,n,x,b){this.currentCache[n]!==(b=b==n5?0:b)&&(this.currentCache[n]=b,(n=this.currentBufClip[n])[0]=b,Q.bufferSubData(35345,x,n))},2:function(Q,n,x,b){var J=this.currentCache[n];J[0]===b[0]&&J[1]===b[1]||((n=this.currentBufClip[n])[0]=J[0]=b[0],n[1]=J[1]=b[1],Q.bufferSubData(35345,x,n))},3:function(Q,n,x,b){"string"==typeof b&&(b=sh(b));var J=this.currentCache[n];J[0]===b[0]&&J[1]===b[1]&&J[2]===b[2]||((n=this.currentBufClip[n])[0]=J[0]=b[0],n[1]=J[1]=b[1],n[2]=J[2]=b[2],Q.bufferSubData(35345,x,n))},4:function(Q,n,x,b){"string"==typeof b&&(b=sh(b));var J=this.currentCache[n];J[0]===b[0]&&J[1]===b[1]&&J[2]===b[2]&&J[3]===b[3]||((n=this.currentBufClip[n])[0]=J[0]=b[0],n[1]=J[1]=b[1],n[2]=J[2]=b[2],n[3]=J[3]=b[3],Q.bufferSubData(35345,x,n))},12:function(Q,n,x,b){var J=this.currentCache[n],L=!1,n=this.currentBufClip[n];J[0]!==b[0]&&(L=!0,n[0]=J[0]=b[0]),J[1]!==b[1]&&(L=!0,n[1]=J[1]=b[1]),J[2]!==b[2]&&(L=!0,n[2]=J[2]=b[2]),J[4]!==b[3]&&(L=!0,n[4]=J[4]=b[3]),J[5]!==b[4]&&(L=!0,n[5]=J[5]=b[4]),J[6]!==b[5]&&(L=!0,n[6]=J[6]=b[5]),J[8]!==b[6]&&(L=!0,n[8]=J[8]=b[6]),J[9]!==b[7]&&(L=!0,n[9]=J[9]=b[7]),J[10]!==b[8]&&(L=!0,n[10]=J[10]=b[8]),L&&Q.bufferSubData(35345,x,n)},16:function(Q,n,x,b){for(var J=this.currentCache[n],L=!1,f=this.currentBufClip[n],V=0;V<16;V++)J[V]!==b[V]&&(L=!0,f[V]=J[V]=b[V]);L&&Q.bufferSubData(35345,x,f)}},function(Q,n){var x,b,J,L;this.uniforms[Q]===n5&&(x=this.__uniformNum++,(b=this.__bufferOffset)%(J=n<=2?n:4)!=0&&(b+=J-b%J),J=4*b,L=4*n/Float32Array.BYTES_PER_ELEMENT,this.__bufferOffset=b+n,this.uniforms[Q]={index:x,location:J,dataSize:L},e.defineProperty(this,Q,{configurable:!1,enumerable:!0,get:W,set:K$[n].bind(this,this.gl,x,J)}))}),attachSource:function(Q,n){Q=Q||Oj;var x=this.attaches.get(Q),Q=(x||this.attaches.set(Q,x=this.newInstance()),x[0]),b=this.gl;return b.bindBuffer(35345,Q),b.bindBufferBase(35345,this.bindingPointIndex,Q),n&&x[3]===n?null:(x[3]=n,this.currentCache=x[1],this.currentBufClip=x[2],this.currentBuffer=Q,this)},newInstance:function(){var Q,n=this.gl,x=n.createBuffer(),b=(n.bindBuffer(35345,x),16*Math.ceil(this.__bufferOffset/4)),J=(n.bufferData(35345,b,35044),n.bindBuffer(35345,null),new Array(this.__uniformNum)),L=new Array(this.__uniformNum);for(Q in this.uniforms){var f=this.uniforms[Q],V=f.index,l=f.dataSize;if(l<=1)J[V]=0;else{J[V]=new Array(l);for(var H=0;H<l;H++)J[V][H]=0}for(L[V]=new Float32Array(l),H=0;H<l;H++)L[V][H]=0}return[x,J,L,0]}}),function(B){var x,L,f,b,V,J,l,H,G=this;function I(Q){if("string"!=typeof Q)return 0|Q;switch(Q){case"low":return 512;case"medium":return 1024;case"ultra":return 4096;default:return 2048}}function Q(){G.enable=!b5.graph3dViewShadowDisabled,x=b5.graph3dViewShadowType,L=b5.graph3dViewShadowIntensity,f=b5.graph3dViewShadowBias,b=b5.graph3dViewShadowQuality,V=b5.graph3dViewShadowRadius,J=b5.graph3dViewShadowDegreeX,l=b5.graph3dViewShadowDegreeZ,H=null}G.enable=!1,Q();var E,Z,_,$,a,o=1,W=I(b),D=!1,A=new d.Math.Matrix4,u=new d.Math.Matrix4,M=G.pvMatrix=new d.Math.Matrix4,t=0,i=(G.contextLost=function(){G.mapForReflector=null,G.map=null},G.render=function(){if(!B._picking&&G.enable){var Q=B.getGL();if(Q){if(D&&G.setupShadowCamera(),B._glCapabilities&&(W=Math.min(W,B._glCapabilities.maxTextureSize)),$=B.isReflecting(Q)){if(t===Q._renderInfo.frame)return;t=Q._renderInfo.frame}var n=$?"mapForReflector":"map";(E=G[n])?E.setSize(W,W):E=G[n]=new Lu(B,B.getGL(),0,0,{samples:1,minFilter:9728,magFilter:9728,width:W,height:W});(x=(n=B._frameState).renderState.glState).blend.enabled=!1,x.depth.enabled=!0,x.depth.mask=!0;var x=x.color.clear.slice(0),b=(Fs(Q,[1,1,1,1]),B.acquireProgram({type:"shadowMap",defines:{MAX_BOX_CLIPPER:B._boxClippers.length,UV_CLIP:!1}}));n.renderState.useProgram(b),P(),Fs(Q,x)}}},G.getShadow=function(){var Q={degreeX:J,degreeZ:l,intensity:L,quality:b,type:x,radius:V,bias:f,bounding:H};return 1!==o&&(Q.boundExtend=o),Q},G.setShadow=function(Q,n){G.enable=Q=!!Q,"object"==typeof n&&(n.intensity!==n5&&(L=n.intensity),n.bias!==n5&&(f=n.bias),n.radius!==n5&&(V=n.radius),n.degreeX!==n5&&(J=n.degreeX),n.degreeZ!==n5&&(l=n.degreeZ),n.quality!==n5&&(b=n.quality),n.bounding!==n5&&(H=n.bounding),n.type!==n5&&x!==n.type&&(x=n.type),W=I(b),n.boundExtend!==n5&&(o=n.boundExtend)),Q&&G.setupShadowCamera(),B.iv()},null),r=(G.tryInvalidateLater=function(Q,n){"modelLoaded"===n&&(i&&c7(i,!0),i=P7(function(){i=null,G.refresh()},G,n5,200))},G.refresh=function(){this.enable&&(this.setupShadowCamera(),B.iv())},G.tryUpdateBounding=function(Q){var n,x,b;H||(n=this.boundingSphere)&&(x=(new X).fromArray(FS(Q,B.getMat(Q))),Q=Q.getAnchor3d(),b=new I5,n.containsPoint(b.set(0-Q.x,0-Q.y,0-Q.z).applyMatrix4(x))&&n.containsPoint(b.set(0-Q.x,0-Q.y,1-Q.z).applyMatrix4(x))&&n.containsPoint(b.set(0-Q.x,1-Q.y,0-Q.z).applyMatrix4(x))&&n.containsPoint(b.set(0-Q.x,1-Q.y,1-Q.z).applyMatrix4(x))&&n.containsPoint(b.set(1-Q.x,0-Q.y,0-Q.z).applyMatrix4(x))&&n.containsPoint(b.set(1-Q.x,0-Q.y,1-Q.z).applyMatrix4(x))&&n.containsPoint(b.set(1-Q.x,1-Q.y,0-Q.z).applyMatrix4(x))&&n.containsPoint(b.set(1-Q.x,1-Q.y,1-Q.z).applyMatrix4(x))||G.setupShadowCamera())},[1,1]),P=(G.createShadow=function(Q,n){var x,b,J;Q=Q||B._frameState.renderState.directUniforms(),(b=!1!==B._getFrameRenderOptions("renderShadow")?B._getFrameRenderOptions("useReflectorSelfShadowMap")&&G.mapForReflector?G.mapForReflector.texture:G.map?G.map.texture:null:b)?(Q.shadowMap=b,x=!0):((b=(J=B.getGL())._emptyShadowTexture)||(b=J._emptyShadowTexture=us(J,null,[255,255,255,255])),Q.shadowMap=b),n||(Q.shadowSize=x?[E.width,E.height]:r,Q.shadowMatrix=M.toArray(),Q.shadowIntensity=L,Q.shadowBias=f,Q.shadowRadius=V)},G.genShaderDefine=function(Q){return Q.USE_SHADOWMAP=!0,"hard"===x?Q.SHADOWMAP_TYPE_PCF=!0:"soft"===x&&(B.isGLTempRegisterLimited()?Q.SHADOWMAP_TYPE_PCF=!0:Q.SHADOWMAP_TYPE_PCF_SOFT=!0),Q},G.setupShadowCamera=function(){Z=Z||(G.boundingSphere=new d.Math.Sphere),H?Z.set((new I5).fromArray(H),H[3]):(D=!1,(x=B.getBoundingBox(B.dm().toDatas(function(Q){return Q.s("shadow.cast")&&B.isVisible(Q)})))?(Q=new I5(x.min),n=new I5(x.max)):(Q=new I5(-256,-256,-256),n=new I5(256,256,256),D=!0),Z.set(Q.clone().add(n).multiplyScalar(.5),.5*Q.distanceTo(n)*o));var Q=2*(x=Z.radius),n=(a=os($S(),-x,x,-x,x,Q/1e3,Q),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(A.fromArray(a)),Math.tan(-J*Math.PI/180)),Q=Math.tan(-l*Math.PI/180),x=x/Math.sqrt(n*n+Q*Q+1),n=new I5(x*n,x,x*Q);G.direction=I5.normalizeArray(n.clone().multiplyScalar(-1)),A.lookAt(n,new I5(0,0,0),new I5(0,1,0)).setPosition(n.add(Z.center)),A.getInverse(A),M.multiply(A)},G.getDirection=function(){if(G.enable)return G.direction},function(){var Q=B.getGL(),n=W,x=W;E.setSize(Q,n,x),E.bind(Q),Q.clear(16640);var b=(f=B._frameState.renderState).directUniforms(),J=f.directAttribs(),L=f.directState(),f=(b.uUseInstance=!1,b.uUseSkinning=!1,J.aMatrixInstanced=n5,b.boneTexture=n5,b.projectionMatrix=a,(_=0<B._boxClippers.length)&&(ws(B,b,pe),b.uClipperMatrix=B._boxClipperMatrixes,b.uClipperClipInner=B._boxClipperClipInner),B._viewport);B.setViewport(Q,0,0,n,x);for(var V=B.getRenderLayerKeys(),l=0,H=V.length;l<H;l++){var I,Z=V[l];B.getRenderLayerInfo(Z).ignore||(Z=B._40Q.get(Z))&&(Z.resetModel3dInstancedDraw(),I=Z.batchIndexMap,G.renderItems(Q,b,J,L,Z.opaque,I,!1),G.renderItems(Q,b,J,L,Z.transparent,I,!0),G.renderBatch(Q,b,J,L,Z.batchModelMap,I))}E.unbind(Q),B.setViewport(Q,f[0],f[1],f[2],f[3])});G._renderDirect=function(Q,n,x,b,J,L,f){x&&x.length&&(J=J&&J.length?J.length/16:0,n.position=gs(Q,B._buffer.vs,x,x5),b?(ms(Q,B._buffer.is,b),ss(Q,L||0,f===n5?b.length:f,null,b instanceof Uint32Array?5125:null,null,J)):zs(Q,L||0,f===n5?x.length/3:f,null,J))},G.renderShapeModel=function(Q,n,x,b){var J,L,f;if(H_(x))for(L=0,f=x.length;L<f;L++)(J=x[L])&&G.renderShapeModel(Q,n,J,b);else H5(x)?G.renderShapeModel(Q,n,c8(b,x),b):V_(x)&&(x.shape3d?G.renderShapeModel(Q,n,x.shape3d,b):G.renderShapeModelImpl(Q,n,x))},G.renderShapeModelImpl=function(Q,n,x){F8(x),G._renderDirect(Q,n,x.vs,x.is),G._renderDirect(Q,n,x.top_vs,x.top_is),G._renderDirect(Q,n,x.bottom_vs,x.bottom_is),G._renderDirect(Q,n,x.from_vs,x.from_is),G._renderDirect(Q,n,x.to_vs,x.to_is)},G.renderBatch=function(Q,n,x,b,J){if(!M_(J)&&!B.drawFilter){var L,f,V,l,H,I=u.identity().premultiply(A),Z=(n.modelViewMatrix=I.toArray(),n.uClipDirection=0,new d.Math.Matrix4);for(L in J)!1===(H=B.getBatchInfo(L)||Oj).visible||!1===H.shadowCast||$&&!1===H.reflectable||((f=J[L]).invalidate&&RO(f,B._picking),_&&(n.modelMatrix=_O,ws(B,n,H.clipboxMask===n5?he:H.clipboxMask)),(H=f.translate)&&(Z.set(1,0,0,H[0],0,1,0,H[1],0,0,1,H[2],0,0,0,1),n.modelMatrix=Z.getElements(),n.modelViewMatrix=Z.premultiply(A).toArray()),(l=(V=f.ms32)&&V.length)&&(n.uUseInstance=!0,x.aMatrixInstanced=Rs(Q,B._buffer.ms,V,x5)),G._renderDirect(Q,x,f.vs32,f.is,V),l&&(n.uUseInstance=!1,x.aMatrixInstanced=n5),H&&(n.modelMatrix=_O,n.modelViewMatrix=I.toArray()))}},G.renderItems=function(H,I,Z,E,Q,n,x){for(var a,b,o,J,L=Q.length,f=0;f<L;f++)if(b=(l=Q[f]).ui,a=l.data,!(Te(a)||!a.s("shadow.cast")||a instanceof TV||a.s("effect.flow"))&&B.isVisible(a)&&!(n[a._id]||$&&!1===a.s("3d.reflectable"))){if(l=b.s("3d.clip.direction")){var V=b.s("3d.clip.percentage");if(0===V)continue;var l=b._formatClipUniforms(l,V,a);I.uClipPercent=l[1],I.uClipDirection=l[0]}else I.uClipDirection=0;_&&ws(B,I,a.s("3d.clipbox")?pe:a.s("3d.clipbox.mask")),(V=b.shapeModel||c8(b))&&V.model3d?x||B._prefabRenderer.renderShadow(H,V,a,b.mat,function(Q,n,x,b,J){var L,f,V,l;(b=b&&b.aMatrixInstanced)&&(Q=new X,I.uUseInstance=!0,Z.aMatrixInstanced=Rs(H,B._buffer.ms,b,x5)),_&&(I.modelMatrix=Q.getElements()),I.modelViewMatrix=Q.clone().premultiply(A).getElements(),E.cullFace.enabled=!(!x||!x.cullFace),o=!(!x||!x.flipSide),(o=a._flipSide?!o:o)&&(E.cullFace.frontFace=2304),(Q=!!(J.skeleton&&a&&(L=B._updatedSkeletonDatas[J._skeletonId+"|"+a._lastAnimTimestamp])&&(f=B.getPrefabBoneTexture(J))))&&(x=J.boneTextureSize,H.activeTexture(33984),ts(H,f),H.texImage2D(3553,0,34836,x,x,0,6408,5126,L),ts(H,x5),I.uUseSkinning=!0,I.bindMatrix=J.skeleton.bindMatrix,I.bindMatrixInverse=J.skeleton.bindMatrixInverse,I.boneTexture=f,I.boneTextureSize=x,Z.skinIndex=gs(H,null,n.skinIndex),Z.skinWeight=gs(H,null,n.skinWeight)),J.drawRange&&(V=J.drawRange[0],l=J.drawRange[1]),G._renderDirect(H,Z,n.vs,n.is,b,V,l),o&&(E.cullFace.frontFace=2305),b&&(I.uUseInstance=!1,Z.aMatrixInstanced=n5),Q&&(I.uUseSkinning=!1,Z.skinIndex=n5,Z.skinWeight=n5)}):(V=V||(a instanceof d.Node&&!(a instanceof d.Shape)?{vs:J8,is:L8}:[b.left,b.front,b.right,b.back,b.top,b.bottom]),l=b.mat?u.fromArray(b.mat):u.identity(),(J=b._vsTranslation)&&(b5.extractShapeTranslation||b5.extractPolylineTranslation||b5.extractVerticesTranslation)&&l.multiply(J),_&&(I.modelMatrix=l.toArray()),I.modelViewMatrix=l.premultiply(A).toArray(),o=!1,(J=a.s("shape3d.material"))?("string"==typeof J&&(J=b5.getMaterial(J)),E.cullFace.enabled=!(!J||!J.cullFace),o=!(!J||!J.flipSide),(o=a._flipSide?!o:o)&&(E.cullFace.frontFace=2304)):(E.cullFace.enabled=!!a.s("shape3d.reverse.cull"),a._flipSide&&(o=!0,E.cullFace.frontFace=2304)),G.renderShapeModel(H,Z,V,b),o&&(E.cullFace.frontFace=2305))}},G.resetProperties=Q}),R8=(X8.PARAMS=["quality","intensity","bias","radius","type","degree.x","degree.z","bounding"],kK.ms_shadow=function(x,Q){X8.PARAMS.forEach(function(Q){var n=(Q=Q.replace(/(^|\.)[a-z]/g,function(Q){return Q[Q.length-1].toUpperCase()})).charAt(0).toLowerCase()+Q.substr(1);x["getShadow"+Q]=function(){return this._getShadowParam(n)},x["setShadow"+Q]=function(Q){this._setShadowParam(n,Q)}}),x.getCurrentShadowBounding=function(Q){return!Q&&this.shadowMap.boundingSphere||this.shadowMap.setupShadowCamera(),[(Q=this.shadowMap.boundingSphere).center.x,Q.center.y,Q.center.z,Q.radius]},x.refreshShadow=function(){this.shadowMap.refresh()},x.enableShadow=function(Q){this.shadowMap.setShadow(!0,Q)},x.disableShadow=function(){this.shadowMap.setShadow(!1)},x._getShadowParam=function(Q){return this.shadowMap.getShadow()[Q]},x._setShadowParam=function(Q,n){var x=this._getShadowParam(Q),b={},J=(b[Q]=n,this.shadowMap);J.setShadow(J.enable,b),this.firePropertyChange("shadow"+Q.charAt(0).toUpperCase()+Q.substr(1),x,n)}},function(_){var x=this,$=this.renderTargetPool=[],W=[],D=["rect","circle","polygon"],A=!1,u=(x.render=function(){if(!_._picking){var Q=_._flowObjects;if(Q.length){var n=_.getGL();if(n){A=!0;(J=_._frameState.renderState.glState).blend.enabled=!1,J.depth.enabled=!1,J.cullFace.enabled=!1;var x,b,J=J.color.clear.slice(0);for(Fs(n,[0,0,0,1]),x=0,b=Q.length;x<b;x++)L=n,V=Q[f=x],G=B=o=a=E=Z=I=H=l=void 0,"billboard"!==(G=(a=_.getData3dUI(V)).s("shape3d"))&&"plane"!==G||((l=$[f])||(l=$[f]=new Lu(_)),E=V.s("effect.flow.size"),I=V.s("effect.flow.uvshape"),o=(Z=V.getFinalScale3d())[0],(Z="billboard"===G?Z[1]:Z[2])<o?(Z=Z/o*E,o=E):(o=o/Z*E,Z=E),o=Math.max(128,Math.round(o)||0),Z=Math.max(128,Math.round(Z)||0),l.setSize(L,o,Z),l.bind(L),E=_.getViewport(L),_.setViewport(L,0,0,o,Z),L.clear(16640),a=_.getData3dUI(V),(o=c8(a,G))&&(!o.ns&&o.length&&(o=o[0]),F8(o),Z=o.vs,(o=V.s("effect.flow.gradient"))?(H="Flow3d.Cached."+o,d.Default.getImageMap()[H]||d.Default.setImage(H,d.Default.toCanvas({width:100,height:100,comps:[{type:"rect",background:"rgb(0,0,0)",gradient:o,rect:[0,0,100,100]}]},100,100))):H=V.s("shape3d.image"),-1===(o=D.indexOf(I))&&0===I.indexOf("polygon")&&(B=+I.substring(7),o=Math.max(3,Math.min(1024,B))-1),_._prefabRenderer.render(L,{model3d:!0,mesh:{position:Z},mat:{type:"flow",useXZ:"plane"===G,image:_.getTexture(H,V),blend:V.s("effect.flow.blend")||u,uvMatrix:ZO(a.s("shape3d.uv.rotation"),a.s("shape3d.uv.offset"),a.s("shape3d.uv.scale"),a.s("shape3d.uv.anchor")),intensity:V.s("effect.flow.intensity"),shape:o}}),l.unbind(L),_.setViewport(L,E[0],E[1],E[2],E[3]),(I=V.getMatrix4()).getInverse(I),Z=I.getElements(),"plane"===G?Z[1]=Z[5]=Z[9]=Z[13]=0:Z[2]=Z[6]=Z[10]=Z[14]=0,W[f]={matrix:I,group:V.s("effect.flow.group")}));Fs(n,J),$.length!==b&&$.splice(b,$.length-b),A=!1}}}var L,f,V,l,H,I,Z,E,a,o,B,G},x.contextLost=function(){_.getGL()&&($=this.renderTargetPool=[])},x.createFlow=function(Q){var n;if(!A&&(n=$.length)){Q=Q||_._frameState.renderState.directUniforms();for(var x=[],b=[],J=[],L=0;L<n;L++)x[L]=W[L].matrix.toArray(),b[L]=$[L].texture,J[L]=!1;for(Q.flowMatrix=x,L=0;L<n;L++)Q["flowTexture"+L]=b[L];Q.flowEnabled=J}},x.disableFlow=function(Q){var n;if(n=$.length){Q=Q||_._frameState.renderState.directUniforms();for(var x=[],b=0;b<n;b++)x[b]=!1;Q.flowEnabled=x}},x.resetDataFlowEnabld=function(Q,n){return x.resetFlowUniform(Q.s("effect.flow.mask"),n)},x.resetFlowUniform=function(Q,n){var x=$.length,b=new Array(x);if(Q)for(var J=0;J<x;J++)Q&1<<W[J].group&&(b[J]=!0);n.flowEnabled=b},"white")}),g8=function(a){var o,B,G,_,$,W,D=this,A=!1,u=-99999,M=[0,0];function Q(){A=!1,o=B=G=_=null,M[0]=0,M[1]=0}function t(Q,n,x){for(var b=0,J=a._prg,L=a.getGL(),f=Q.length;b<f;b++)Q[b].ui._42(L,J,r);gO(a,n,x,0,!0)}function i(Q){var n=a.getGL(),n=E5.for(n),x=a._frameState;x.syncEnv(),n.useProgram(a._prg=a._frameState.defaultProgram=Q),x.setGLState(!0,!0),x.setUniforms(!0),n.directAttribs().disable(),a.shadowMap.enable&&a.shadowMap.createShadow(),a.rebindOITTexture(),a._envmapRenderer.resetUniformCache(),a.flowMap.createFlow()}D.enableOIT=function(){},D.disableOIT=function(){Q()},D.contextLost=function(){Q()},D.bindTexture=function(Q){_&&((Q=Q||a._frameState.renderState.directUniforms()).oitDepthSampler=_[$],Q.oitFrontColorSampler=_[W])},D.render=function(Q,n,x){var b=a.getOITPassCount();if(!b)return!1;if(!Q.length)return!1;if(!function(){var Q=a.getGL();if(Q){var n=a.getDevicePixelRatio(),x=Math.round(a.getWidth()*n),n=Math.round(a.getHeight()*n);if(x&&n){if(A&&M[0]===x&&M[1]===n)return 1;var b={width:x,height:n,filter:9728,clampToEdge:!0,format:33319,type:5126,data:null},J=e.assign({},b,{format:6408,type:5131});o=[Q.createFramebuffer(),Q.createFramebuffer()],B=[Q.createFramebuffer(),Q.createFramebuffer()],G=Q.createFramebuffer(),_=[];for(var L=0;L<2;L++){var f=a.createTexture(b),V=a.createTexture(J),l=a.createTexture(J),H=3*L;Se(Q,o[L]),Q.activeTexture(33984+H),Q.bindTexture(3553,f),Q.framebufferTexture2D(36160,36064,3553,f,0),Q.activeTexture(33984+H+1),Q.bindTexture(3553,V),Q.framebufferTexture2D(36160,36065,3553,V,0),Q.activeTexture(33984+H+2),Q.bindTexture(3553,l),Q.framebufferTexture2D(36160,36066,3553,l,0),me(Q),Se(Q,B[L]),Q.framebufferTexture2D(36160,36064,3553,V,0),Q.framebufferTexture2D(36160,36065,3553,l,0),me(Q),Q.activeTexture(33984+H),ts(Q,null),Q.activeTexture(33984+H+1),ts(Q,null),Q.activeTexture(33984+H+2),ts(Q,null),_.push(f,V,l)}Se(Q,G);var I=a.createTexture(J);return Q.activeTexture(33990),Q.bindTexture(3553,I),Q.framebufferTexture2D(36160,36064,3553,I,0),ts(Q,null),me(Q),_.push(I),M[0]=x,M[1]=n,A=!0}}}())return!1;a._programDefines.OIT=!0,a._glPrograms.genPhysicalProgramKeyOfScene(a._programDefines);var J=a._prg,L=(i(a.acquireProgram({type:"legacy"})),a.getGL()),f=E5.for(L).directState(),V=cs(L,!0),l=(l=L.frameStack)&&l.length?l[l.length-1]:null,H=(L.bindFramebuffer(36009,G),f.color.clear=[0,0,0,0],L.clear(16384),L.bindFramebuffer(36160,o[0]),L.drawBuffers([36064]),f.color.clear=[u,u,0,0],L.clear(16384),L.bindFramebuffer(36009,o[1]),f.color.clear=[-0,1,0,0],L.clear(16384),L.bindFramebuffer(36009,B[0]),L.drawBuffers([36064,36065]),f.color.clear=[0,0,0,0],L.clear(16384),L.bindFramebuffer(36009,B[1]),f.color.clear=[0,0,0,0],L.clear(16384),a.getPostProcessing().getRenderTarget());H&&H.isBinding(L)&&(H=H._blitDepthToSingle(L),L.bindFramebuffer(36160,o[0]),L.bindRenderbuffer(36161,H),L.framebufferRenderbuffer(36160,36096,36161,H),L.bindRenderbuffer(36161,null),L.bindFramebuffer(36160,null)),L.bindFramebuffer(36009,o[0]),L.drawBuffers([36064]),L.blendEquation(32776),$=3,W=4,D.bindTexture(E5.for(L).directUniforms()),t(Q,n,x);for(var I,Z=0,E=0;E<b;E++)L.bindFramebuffer(36009,o[Z=1-(I=E%2)]),L.drawBuffers([36064]),f.color.clear=[u,u,0,0],L.clear(16384),L.bindFramebuffer(36009,B[Z]),L.drawBuffers([36064,36065]),f.color.clear=[0,0,0,0],L.clear(16384),L.bindFramebuffer(36009,o[Z]),L.drawBuffers([36064,36065,36066]),L.blendEquation(32776),W=1+($=3*I),D.bindTexture(E5.for(L).directUniforms()),t(Q,n,x),L.bindFramebuffer(36009,G),L.drawBuffers([36064]),L.blendEquation(32774),L.blendFuncSeparate(770,771,1,771),a.renderModel({type:"oitBackBlend",transparent:!0,uBackColor:_[3*Z+2]},{clear:!1});L.bindFramebuffer(36160,l),L.blendFunc(1,771),a.renderModel({type:"oitFinal",transparent:!0,uFrontColor:_[3*Z+1],uBackColor:_[6]},{clear:!1}),f.blend.apply({equation:32774,func:[770,771,1,771]}),f.color.clear=V,delete a._programDefines.OIT,a._glPrograms.genPhysicalProgramKeyOfScene(a._programDefines),i(J)}},S8=function(Q){this.gv=Q,this.onMouseOver=this.onMouseOver.bind(this),this.resetProperties()};S8.Mode={Disable:0,Selection:1,MouseOver:2,Style:3},kK.ms_highlight=function(Q){Q.setHighlightMode=function(Q){var n="selection"===Q||"selected"===Q?S8.Mode.Selection:"mouseover"===Q||"hover"===Q?S8.Mode.MouseOver:"style"===Q?S8.Mode.Style:S8.Mode.Disable,x=this.getHighlightMode();this._highlightHelper.mode=n,this.firePropertyChange("highlightMode",x,Q)},Q.getHighlightMode=function(){var Q=this._highlightHelper.mode;return Q===S8.Mode.Selection?"selected":Q===S8.Mode.MouseOver?"hover":Q===S8.Mode.Style?"style":"disabled"},["type","color","width","glow","strength"].forEach(function(b){var J=b.replace(/(^|\.)[a-z]/g,function(Q){return Q[Q.length-1].toUpperCase()});Q["getHighlight"+J]=function(){return this._highlightHelper[b]},Q["setHighlight"+J]=function(Q){var n=this._highlightHelper,x=n[b];Q!==x&&(n[b]=Q,this.firePropertyChange("highlight"+J,x,Q))}})},HS(S8,e,{onMouseOver:function(Q){b5.preventDefault(Q);var n=this.gv;n._48Q||(Q=n.getDataAt(Q))!==this.mouseOverData&&(this.mouseOverData=Q,n.iv())},setFetchTargetFunc:function(Q){this.fetchTargetFunc=Q},_42:function(Q,n){var x,b,J=this,L=J._mode,f=J.gv;if(!Q._renderInfo.reflectDepth&&L!==S8.Mode.Disable){if(L===S8.Mode.Selection?x=f.sm().getSelection().toArray(function(Q){return Q.s("highlight.visible")}):L===S8.Mode.MouseOver&&J.mouseOverData&&J.mouseOverData.s("highlight.visible")&&(x=[J.mouseOverData]),J.fetchTargetFunc&&(x=J.fetchTargetFunc(x)),L===S8.Mode.Style)x=x||[],b=function(Q){if(0<=x.indexOf(Q))return!1;var n=f.getDataHighlightMode(Q);return!1===n||!0!==n&&("selected"===n?!f.isSelected(Q):"hover"!==n||Q!==J.mouseOverData)};else{if(!x||!x.length)return;b=function(Q){if(x.indexOf(Q)<0)return!0}}var V,l,H,L=f.isVRPresenting(),I=f._camera,Z=(I?(a=I.getSize(f),V=a[0],a=a[1]):(V=f.getWidth(),a=f.getHeight(),L&&(l=f.getWidth,V/=2,f.getWidth=function(){return V},H=f.getViewport())),f.getDevicePixelRatio()),E=Math.floor(V*Z),a=Math.floor(a*Z),o=((Z=J._renderTarget)?Z.setSize(Q,E,a):J._renderTarget=Z=new oO.RenderTarget(f,Q,E,a),"soft"===J.type);Z.bind(Q),o?(B=cs(Q,!0),Fs(Q,[1,1,1,1]),Q.clear(16384),Fs(Q,B)):Q.clear(16384),f.setViewport(Q,0,0,E,a),f.drawFilter=function(Q){return!Q.s("static")&&b(Q)},QO=function(Q,n,x,b,J,L){return L?nO(Q,n,x,b,J,L):(n=[0,1,1,1],E5.for(Q).directUniforms().uFixPickReverseColor=n)},f.getRenderLists().each(function(Q){Q.beginFillHighlightMaskColor(b)});(B=Q._blooming)&&(Q._blooming=!1),f.renderPickScene(),B&&(Q._blooming=!0),QO=nO,f.drawFilter=null,f.getRenderLists().each(function(Q){Q.endFillHighlightMaskColor()}),Z.unbind(Q);var n=f._prg,B=(X5&&Ts(Q,n.aPosition),Ts(Q,n.aNormal),!I&&L&&(f.getWidth=l,f.setViewport(Q,H[0],H[1],H[2],H[3])),f.getHighlightColor());return J._lastHighlightColor!==B&&(Z=zh(J._lastHighlightColor=B),J._highlightColorData=[Z[0]/255,Z[1]/255,Z[2]/255,Z[3]/255]),o?J.renderSoftOutline(Q,E,a):J.renderHardOutline(Q,E,a),E5.for(Q).useProgram(n=f._prg=f.acquireProgram({type:"legacy",defines:{}})),X5&&(I=Q,(L=n.aPosition)!=x5&&0<=L&&I.enableVertexAttribArray(L)),!0}},renderHardOutline:function(Q,n,x){var b=this.gv,J=b._postProcessing;(Q=E5.for(Q).directState()).blend.enabled=!0,Q.depth.enabled=!1,J.blitScreen({type:"highlightHard",image:this._renderTarget.texture,textureSize:[n,x],edgeWidth:b.getHighlightWidth(),edgeColor:this._highlightColorData},{clear:!1}),Q.blend.enabled=!1,Q.depth.enabled=!0},renderSoftOutline:function(Q,n,x){var b,J,L,f,V,l=this,H=l.gv,I=H._postProcessing,Z=Math.floor(n/2),E=Math.floor(x/2),n=Math.floor(n/4),x=Math.floor(x/4),a=l._downSampleRenderTarget,o=(a?(b=l._edgeDetectionRenderTarget,J=l._blurV2,L=l._blurH2,f=l._blurV4,V=l._blurH4,a.width===Z&&a.height===E||(a.setSize(Z,E),b.setSize(Z,E),J.setSize(Z,E),L.setSize(Z,E),f.setSize(n,x),V.setSize(n,x))):(a=l._downSampleRenderTarget=new oO.RenderTarget(H,Q,Z,E),b=l._edgeDetectionRenderTarget=new oO.RenderTarget(H,Q,Z,E),J=l._blurV2=new oO.RenderTarget(H,Q,Z,E),L=l._blurH2=new oO.RenderTarget(H,Q,Z,E),f=l._blurV4=new oO.RenderTarget(H,Q,n,x),V=l._blurH4=new oO.RenderTarget(H,Q,n,x)),cs(Q,!0)),B=H.getViewport(),G=l.width,_=l.strength,$=l.glow,W=(D=E5.for(Q).glState).depth,D=D.blend,A=W.enabled;Fs(Q,[1,1,1,1]),W.enabled=!1,D.apply({func:[770,1]}),I.blitScreen(a,{type:"blitScreen",image:l._renderTarget.texture}),I.blitScreen(b,{type:"highlightEdgeDetection",image:a.texture,texSize:[Z,E],color:l._highlightColorData}),I.blitScreen(L,{type:"highlightBlur",image:b.texture,direction:[1,0],texSize:[Z,E],radius:G}),I.blitScreen(J,{type:"highlightBlur",image:L.texture,direction:[0,1],texSize:[Z,E],radius:G}),I.blitScreen(V,{type:"highlightBlur",image:J.texture,direction:[1,0],texSize:[n,x],radius:G}),I.blitScreen(f,{type:"highlightBlur",image:V.texture,direction:[0,1],texSize:[n,x],radius:G}),D.apply({enabled:!0}),H.setViewport(Q,B[0],B[1],B[2],B[3]),I.blitScreen({type:"highlightFinalBlend",image:l._renderTarget.texture,edgeTexture1:J.texture,edgeTexture2:f.texture,edgeStrength:_*G,edgeGlow:$},{clear:!1}),D.apply({func:[770,771,1,771]}),W.enabled=A,Fs(Q,o)},resetProperties:function(){this.mode=S8.Mode.Style,this.type=o5["highlight.type"],this.color=o5["highlight.color"],this.width=o5["highlight.width"],this.glow=o5["highlight.glow"],this.strength=o5["highlight.strength"]},contextLost:function(){this._renderTarget=null}}),e.defineProperties(S8.prototype,{mode:{get:function(){return this._mode},set:function(Q){var n=this._mode;Q!==n&&(this._mode=Q,n=n===S8.Mode.MouseOver||n===S8.Mode.Style,(Q=Q===S8.Mode.MouseOver||Q===S8.Mode.Style)&&n||(n&&u5(this.gv.getView(),"mousemove",this.onMouseOver),Q&&Q5(this.gv.getView(),"mousemove",this.onMouseOver)))}}});((Q=oO.PrefabRenderer=function(Q){this.gv=Q}).prototype={}).constructor=Q,VE("model"),VE("mesh"),VE("material"),VE("shader"),O$={},d$=[],h$=new X,p$=new I5,z$=new I5,s$=new I5,X$=new dK,R$=[0,0,0],g$={aPosition:"vs",aUv:"uv",aUv2:"uv2",aNormal:"ns"},S$={type:"fixColor",color:"gray"},m$={type:"fixColor",color:"black"},Y$={5126:1,35664:2,35665:3,35666:4,35674:4,35675:9,35676:16},T$={triangles:4,triangleStrip:5,triangleFan:6,lines:1,lineLoop:2,lineStrip:3,points:Ue.POINTS},k$={groundColor:[0,0,0]},N$=new X,j$=new X,Q.prototype.render=function(v,Q,O,n){if(!1!==Q.visible){var x,f=this.gv,v=ea(v,O);if(x=Q.matDef)for(var b in x)O$[b]=x[b];var J,d=wa().copy(h$),n=(n&&h$.fromArray(n),Ua(Q,Z5)),h=(h$.multiply(n),ya(n),!1),p=!1,z=!1;do{if(U=Q.model){(U=b5.getModel(U))&&this.render(e$,U,O);break}if(!(U=Q.mesh))break;var L,s,V=f._picking;if(Z5&&Z5.s("static"))if((l=(l=f.getRenderLists().get(Z5.getRenderLayer()).getModel3dInstancedBatchMap())&&l[f.getStaticInstancingKey(Z5)])&&l.length){if(l.rendered&&l.rendered!==Z5._id)break;if(L=Xa(f,Z5,h$,l,!1),V){if(l._highlightInvalid)break;s=function(Q){var n=Q.cachePick;if(n.length!==Q.length||n.version!==Q.csVersion){n.buffer=new oS(4*Q.length);for(var x=0,b=n.buffer,J=Q.cs,L=4*Q.length;x<L;x+=4)b[x]=J[x],b[x+1]=J[x+1],b[x+2]=J[x+2],b[x+3]=J[x+3];n.length=Q.length,n.version=Q.csVersion}return n.buffer}(l)}l.rendered=Z5._id}var l=!1,H=null,X=!1,I=Q.mat;if(I){if("string"==typeof I){var Z=Ka(Z5,I)||O$[I];if(Z){if(H5(Z)&&!(Z=b5.getMaterial(Z)))break}else if(!(Z=b5.getMaterial(I)))break;I=Z}}else I=S$;var E,R=!0===I.transparent;if(!!f._45Q!=R)break;v$=ku[I.type];var a,o=!!(Q.skeleton&&Z5&&(E=f._updatedSkeletonDatas[Q._skeletonId+"|"+Z5._lastAnimTimestamp]));if(o&&(f.getPrefabBoneTexture(Q)?(a=Q.boneTextureSize,e$.activeTexture(33984),ts(e$,f.getPrefabBoneTexture(Q)),e$.texImage2D(3553,0,34836,a,a,0,6408,5126,E),ts(e$,x5)):(a=Q.boneTextureSize=Math.round(Math.sqrt(E.length/4)),f.setPrefabBoneTexture(Q,f.createTexture({data:E,width:a,height:a,type:5126,filter:9728,clampToEdge:!0})))),!V||I.renderPickMap){var B=E5.for(e$),G=I.type||"fixColor";if(!(Z=ze[G])||Z.isRaw)if(Z)W=f.acquireProgram({type:G,cacheKey:G});else{if(!(Z=b5.getShader(G)))break;if(!(A=h8(Z))){ze[G]=ze.fixColor;break}A.isRaw=!0,ze[G]=A,W=f.acquireProgram({type:G,cacheKey:G},!0)}else{var _=Z5?Z5.s("3d.clip.direction"):0;switch(Z5&&e$._blooming&&!Z5.s("bloom")&&(G="fixColor",m$.cullFace=I.cullFace,m$.flipSide=I.flipSide,I=m$),G){case"fixColor":W=f.acquireProgram({type:"fixColor",defines:{CLIP_DIRECTION:!!_,USE_INSTANCING:!(!Q.instances&&!L)}});break;case"pbr":case"phong":var g,$,S=1,m=((Z5||U$)&&-1!==($=Z5?Z5.s("envmap.probe"):U$.envmapProbe||0)&&(g=!0,(S=Z5?Z5.s("envmap"):U$.envmap||0)&&(S*=f._envmapRenderer._envmapIntensity[$],H=$)),g||!(H=I.envmap||I.envMap)||($=f.getTexture(H))&&$!==e$._emptyTexture||(H=null),f._glPrograms.genPhysicalProgramKeyOfMat(I,{clipDirection:_,isTransparent:R,useInstancing:!(!Q.instances&&!L),useDisplacement:!!I.displacementMap&&f._glCapabilities.vertexTextures,aoMapUvChannel:ha("aoUvChannel",I,v$)||1,useUvClip:!(!f._uvClipEnabled||"uv.left"!=_&&"uv.right"!=_),skeleton:o,alphaChannel:ha("alphaChannel",I,v$),aoChannel:ha("aoChannel",I,v$),roughnessChannel:ha("roughnessChannel",I,v$),metalnessChannel:ha("metalnessChannel",I,v$),toneMapping:f.getToneMapping(),rectsNum:f._87I.length,envMapCombine:ha("envMapCombine",I,v$),envmap:H})),W=f.acquireProgram({type:G,cacheKey:f._sceneProgramDefinesMask+m.toString(),cacheKeyOfMat:m,extensions:I.enableTransmission?{GL_EXT_shader_texture_lod:!0}:null});break;default:W=f.acquireProgram(I)}}if(!W)break;z=!0,B.useProgram(W);var D=B.directUniforms(),Y=B.directState(),A=Z5&&Z5._forceSingleFace,u=(Y.cullFace.enabled=!(!A&&!I.cullFace),!!I.flipSide);if(Z5&&Z5._flipSide&&(u=!u),Y.cullFace.frontFace=(u=2===A?!u:u)?2304:2305,(X=(l=W&&("pbr"===W.name||"phong"===W.name))&&f._glUbos.supportsUbo)?f._glUbos.updateAndBind("scene",W):(D.uProjectMatrix=f._projectMatrix,D.uViewMatrix=f._viewMatrix,D.uCameraPosition=f.getEye(),D.uTime=f.__uptime),W._dirty){if(W._dirty=n5,l){var M,t=j=F=M=c=P=r=u=i=void 0,i=f,u=D,r=(r=i._headlightDirection)&&3===r.length?r:"shadow"===r?i.shadowMap.getDirection():BS(i.getCenter(),i.getEye()),t=i._lastLightUploadInfo.headlightColor;if(k$.color=da(t,Math.PI*i._headlightRatioForPhysicalMaterial),u.hemisphereLight.direction=I5.normalizeArray(i._transformDirectionToViewSpace(r)),u.hemisphereLight.groundColor=k$.groundColor,u._lastLightMask=n5,u._lastHeadlightAmbientIntensity=n5,M=i._59O){for(P=0,c=M.length,F=[];P<c;P++)F.push({position:i._transformPointToViewSpace(M[P].p3()),color:za(M[P]),distance:M[P].s("light.range"),decay:1,enable:!1});u.pointLights=F}if(M=i._spots){for(P=0,c=M.length,F=[];P<c;P++){var T=M[P].s("light.angle");F.push({position:i._transformPointToViewSpace(M[P].p3()),color:za(M[P]),direction:M[P].s("light.rotation.enable")?i._transformDirectionToViewSpace(ns([0,0,1],M[P])):i._transformDirectionToViewSpace(M[P].s("light.center"),M[P].p3()),decay:1,enable:!1,distance:M[P].s("light.range"),coneCos:f5(T/2),penumbraCos:f5(T/2*(1-M[P].s("light.exponent")))})}u.spotLights=F}if(M=i._dirs){for(P=0,c=M.length,F=[];P<c;P++)F.push({direction:M[P].s("light.rotation.enable")?i._transformDirectionToViewSpace(ns([0,0,1],M[P])):i._transformDirectionToViewSpace(null,M[P].p3()),color:za(M[P]),enable:!1});u.directionalLights=F}if(M=i._87I){for(var k,N,j=new I5,P=0,c=M.length,F=[];P<c;P++)RK.fromArray(FS(M[P])),RK.premultiply(gK.fromArray(i._viewMatrix)),gK.identity().extractRotation(RK),k=j.set(.5*-M[P].s("light.size")[0],0,0).applyMatrix4(gK).toArray(),N=j.set(0,.5*M[P].s("light.size")[1],0).applyMatrix4(gK).toArray(),F.push({position:i._transformPointToViewSpace(M[P].p3()),color:za(M[P]),halfWidth:k,halfHeight:N,enable:!1,disableSpecular:M[P].s("light.specular.disable")});u.rectAreaLights=F,b5.LTC_FLOAT_1&&((t=i.getGL())._LTC_1||(t._LTC_1=i.createTexture(b5.LTC_FLOAT_1)),t._LTC_2||(t._LTC_2=i.createTexture(b5.LTC_FLOAT_2)),u.ltc_1=t._LTC_1,u.ltc_2=t._LTC_2)}}D.uClipperMatrix=f._boxClipperMatrixes,D.uClipperClipInner=f._boxClipperClipInner,X||(f._fogDisabled||(D.uFogColor=f._fogColor,D.uFogDensity=f._fogDensity,D.uFogNear=f._fogNear,D.uFogFar=f._fogFar),D.toneMappingExposure=f.getToneMappingExposure()),f.shadowMap.enable&&f.shadowMap.createShadow(D)}else f.shadowMap.enable&&f.shadowMap.createShadow(D,!0);f.rebindOITTexture(D),f.flowMap.createFlow(D),f._87I&&b5.LTC_FLOAT_1&&(D.ltc_1=e$._LTC_1,D.ltc_2=e$._LTC_2),I.enableTransmission&&"pbr"===W.name&&e$._transmissionRTT&&(D.transmissionSamplerMap=e$._transmissionRTT.texture,D.transmissionSamplerSize=e$._transmissionRTT.getSize()),I.uUvMatrix=ZO(I.uvRotation,I.uvOffset,I.uvScale,I.uvAnchor)}var q,r=L?{aMatrixInstanced:L,aBatchColor:s}:Q.instances;if(!(u=function(Q,n,L){var x=Oa(n);if(!x)return 0;if(F8(x)||!x._4HQ)for(var b in x._4HQ=!0,x)"is"!==b&&H_(x[b])&&(x[b]=new oS(x[b]));if(L&&!L._complete_)for(var b in L._complete_=!0,L)H_(L[b])&&(L[b]=new oS(L[b]));(n=E5.for(e$).directAttribs()).disable();var f,J=x.index||x.is,V=!J,l=0;return n.apply(x,function(Q,n,x){var b,n=g$[n]||n;if(L&&(b=L[n])!==n5){if(!b.length)return null;var J=Y$[x.desc.activeInfo.type];return l=l||b.length/J,Rs(e$,null,b,null,J)}return(b=Q[n])!=n5&&b.length?(V&&(V=!1,f=b.length/Y$[x.desc.activeInfo.type]),gs(e$,null,b)):null}),J?(ms(e$,Q._buffer.is,J),{length:J.length,instances:l,uint32:J instanceof Uint32Array,is:!0}):f||x.vs?{length:f||x.vs.length/3,instances:l,is:!1}:0}(f,U,r)))break;u.instances&&(D=D||E5.for(e$).directUniforms(),s&&(D.uBatchColor=!0),p=D.uUseInstance=!0),L?js(f):(h=!0,js(f,h$.toArray())),!V||I.renderPickMap?(D=D||B.directUniforms(),Z5?ds(e$,f,Z5,l):U$&&(t=e$,U=f,y=U$,K=l,q=J=void 0,J=E5.for(t).directUniforms(),q=y.alphaTest,J.uAlphaTest=q===n5?o5.alphaTest:q,q=U._picking,J.shadowReceive=!q&&!1!==y.shadowReceive,ws(U,J,y.clipboxMask===n5?he:y.clipboxMask),J.blackout=!(!t._blooming||y.bloom),q||(U._flowObjects.length&&U.flowMap.resetFlowUniform(y.effectFlowMask===n5?he:y.effectFlowMask,J),K||(y.envmap!==n5?(J.uUseEnvMap=!0,J.roughness=y.roughness||0,U._setEnvmapByProbeId(J,y.envmapProbe||0,y.envmap)):(J.uUseEnvMap=!1,J.envMapIntensity=0),xs(U,J,y.lightMask===n5?he:y.lightMask,y.headlightAmbientIntensity)),J.uFog=!0)),l&&(Z5?sa(D,f,Z5._currentFaceLightMask!=x5?Z5._currentFaceLightMask:Z5.s("shape3d.light")?Z5.s("light.mask"):0,Z5.s("headlight.ambientIntensity")||f._headlightAmbientIntensity):U$?sa(D,f,U$.light==x5?U$.lightMask===n5?he:U$.lightMask:0,U$.headlightAmbientIntensity||f._headlightAmbientIntensity):sa(D,f,0,0),H!=x5&&(g?(q=f._envmapRenderer._envmaps[H],D.envmap=q?q.texture:e$._emptyTexture):D.envmap=f._envmapRenderer.assureEnvmapFromEquirectangular(H),D.envMapIntensity=S*ha("envMapIntensity",I,v$)),o&&pa(D,Q,f.getPrefabBoneTexture(Q))),l?function(Q,n,x,b,J,L){var f,V,l,H,I,Z,E,a,o,B,G,_=L.type,$=Nu[_];if(x){if(!(G=(B=Q._glUbos).attachUbo(_,L,Q._renderId))){for(V=0,l=$.length;V<l&&-1!==(H=$[V]);V+=2)Z=L[H],I=$[V+1],Z&&(Z instanceof WebGLTexture||(Z=Q.getTexture(Z,b)),J[H]=Z),V+=2*I;return B.updateAndBind(_,n)}}else G=J;for(f=!0,V=0,l=$.length;V<l;V+=2)if(-1===(H=$[V]))f=!1,V--;else{if(I=0,E=!1,-2===H?(I=(l-V-1)/2,V--,E=!0):(Z=L[H],I=$[V+1],Z&&(!f||Z instanceof WebGLTexture||(Z=Q.getTexture(Z,b)),f?J[H]=Z:G[H]=Z,E=!0)),E)for(o=(a=V+2)+2*I;a<o;a+=2)(Z=L[H=$[a]])===n5&&(Z=$[a+1]),G[H]=Z;V+=2*I}G.uUvMatrix=L.uUvMatrix;var W=L.uUv2Matrix;W&&(G.uUv2Matrix=W),x&&B.updateAndBind(_,n)}(f,W,X,Z5,D,I):D.apply(I,function(Q,n,x){if("envmap"!==n&&"envMapIntensity"!==n){if((J=(J=Q[n])===n5&&v$?v$[n]:J)&&(35678===x||35680===x)&&!(J instanceof WebGLTexture))if(H_(J))for(var b=J,Q=b.length,J=new Array(Q),L=0;L<b.length;L++)J[L]=f.getTexture(b[L],Z5);else J=f.getTexture(J,Z5);return J}})):o&&pa(D=D||E5.for(e$).directUniforms(),Q,f.getPrefabBoneTexture(Q));var w,y,K=T$[I.renderMode],U=Q.drawRange?(w=Q.drawRange[0],Q.drawRange[1]):(w=0,u.length)}while(Z5&&f.onPreRenderData(Z5,e$),u.is?ss(e$,w,U,K,u.uint32?5125:null,u.instances):zs(e$,w,U,K,u.instances),Z5&&f.onPostRenderData(Z5,e$),o&&(D.uUseSkinning=!1),V&&((y=E5.for(e$).directAttribs()).aNormal=!1,y.aUv=!1),0);h&&ks(f),p&&(D.uUseInstance=!1,D.uBatchColor=!1),z&&f._prg&&(B.useProgram(f._prg),B.directAttribs().disable(),Y.cullFace.frontFace=2305,f.shadowMap.enable&&f.shadowMap.createShadow(null,!0),f.rebindOITTexture(),f._envmapRenderer.resetUniformCache(),f.flowMap.createFlow());var e=Q.comps;if(e&&e.length)for(var C=0,Q5=e.length;C<Q5;C++)this.render(e$,e[C],Z5);if(ya(h$),h$=d,x=Q.matDef)for(var b in x)O$[b]=n5;va(v)}},Q.prototype.renderShadow=function(Q,n,x,b,J){if(!1!==n.visible){var L,Q=ea(Q,x),f=wa().copy(h$);if(b&&h$.fromArray(b),L=n.matDef)for(var V in L)O$[V]=L[V];b=Ua(n,Z5),h$.multiply(b),ya(b);do{var l,H=n.model;if(H){(H=b5.getModel(H))&&this.renderShadow(e$,H,x,null,J);break}if(!(H=Oa(n.mesh)))break;if(Z5&&Z5.s("static")){var I=this.gv,Z=I.getRenderLists().get(Z5.getRenderLayer()).getModel3dInstancedBatchMap();if((Z=Z&&Z[I.getStaticInstancingKey(Z5)])&&Z.length){if(Z.rendered&&Z.rendered!==Z5._id)break;l=Xa(I,Z5,h$,Z,!0),Z.rendered=Z5._id}}if(F8(H),I=n.mat){if("string"==typeof I){if(Z=Ka(Z5,I)||O$[I]){if(H5(Z)&&!(Z=b5.getMaterial(Z)))break}else if(!(Z=b5.getMaterial(I)))break;I=Z}}else I=S$;var E=l?{aMatrixInstanced:l}:n.instances}while(J(h$,H,I,E,n),0);var a=n.comps;if(a&&a.length)for(var o=0,B=a.length;o<B;o++)this.renderShadow(e$,a[o],Z5,null,J);if(ya(h$),h$=f,L=n.matDef)for(var V in L)O$[V]=n5;va(Q)}};var m8=d.Light=function(){u_(m8,this),this.s(de,o5[de]),this.s(cZ,"sphere"),this.s("shape3d.reverse.cull",!0),this.s3(20,20,20)},Y8=(p1("Light",OV,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(Q,n,x){m8.superClass.onStyleChanged.apply(this,arguments),Q===de&&this.s("shape3d.color",x)}}),oO.FrameState=function(Q,n){this.renderState=E5.for(n),this.picking=!1,this.envmapReflectivity=.5,this.cameraPosition=n5,this.projectMatrix=n5,this.viewMatrix=n5,this.view=Q,this.defaultProgram=n5,this.pickColorMap=n5,this._pvStack=[],this._renderStateStack=[]}),T8=(Y8.prototype.savePV=function(){var Q=this.view;this._pvStack.push([DS(this.projectMatrix),DS(this.viewMatrix),Q._18Q,DS(Q._7O)])},Y8.prototype.restorePV=function(){var Q,n=this._pvStack.pop();n&&(Q=this.view,this.projectMatrix=Q._projectMatrix=n[0],this.viewMatrix=Q._viewMatrix=n[1],Q._18Q=n[2],Q._7O=n[3])},Y8.prototype.setPV=function(Q,n){var x,b=this.view,J=!1;Q&&(this.projectMatrix=b._projectMatrix=Q,J=!0),n&&(this.viewMatrix=b._viewMatrix=n,b._7O=DS(n),J=!0),J&&(Q=b.getWidth(),J=b.getHeight(),x=DS(this.projectMatrix),b._18Q=Zs(x,x,n),b._18Q._wh=Q/J)},Y8.prototype.syncEnv=function(Q){var n=this.view;this.envmapReflectivity=n._envmapReflectivity||.5,this.cameraPosition=n.getEye(),this.projectMatrix=n._projectMatrix,this.viewMatrix=n._viewMatrix,this.pickColorMap=Q,this.picking=n.getGL()._picking},Y8.prototype.setGLState=(C$=[0,0,0,0],Qv=[!0,!0,!0,!0],nv=[-1,1],xv=[32774,32774],bv=[770,771,1,771],function(Q,n){this.renderState.gl;var x=this.renderState.glState;x.dither=!1,n?x.color.mask=Qv:x.color.reset(),x.pixelStore.reset(),x.blend.color=C$,x.blend.equation=xv,x.blend.func=bv,x.cullFace.enabled=!1,x.scissor.enabled=!1,x.depth.enabled=!0,x.depth.clear=1,x.depth.func=515,x.depth.range=nv,x.stencil.enabled=!1,x.polygonOffset.enabled=!1,Q?(x.depth.mask=!1,x.blend.enabled=!0):(x.depth.mask=!0,x.blend.enabled=!1)}),Y8.prototype.setUniforms=function(Q){var n,x,b,J,L,f,V,l,H,I,Z,E,a,o,B,G,_,$=this.view,W=this.renderState,D=W.gl;(W=W.uniforms).uBrightness=1,W.uOpacity=1,W.uPartOpacity=1,W.uUseSkinning=!1,W.uUseInstance=!1,W.uTexture=!1,W.uBlendTexture=!1,W.uAlphaTest=o5.alphaTest,W.uTransparent=!!Q,W.uFix=!1,W.uBatchColor=!1,W.uBatchBlend=!1,W.uBatchBrightness=!1,W.envMapIntensity=this.envmapReflectivity||.5,W.uCameraPosition=this.cameraPosition,W.uProjectMatrix=this.projectMatrix,W.uViewMatrix=this.viewMatrix,W.uEnvMap=null,ws($,W,pe),W.uClipperMatrix=$._boxClipperMatrixes,W.uClipperClipInner=$._boxClipperClipInner,W.uEnvmapQuat=$._envmapExtraQuaternion,$._envmapRenderer.resetUniformCache(),this.picking||(n=$,Q=D,Q=E5.for(Q).directUniforms(),a=n._lastLightUploadInfo={c:[],g:[],e:[]},(D=n._headlightDirection)&&3===D.length?o=D:"shadow"===D&&(o=n.shadowMap.getDirection()),o=o?I5.normalizeArray(n._transformDirectionToViewSpace(null,o)):[0,0,0],Q.uHeadlightDirection=o,Q.uHeadlightRange=n._headlightRange,D=Q.uHeadlightAmbientIntensity=n._headlightAmbientIntensity,o=n._headlightIntensity,B=sh(n._headlightColor),1!==o&&(B=[B[0]*o,B[1]*o,B[2]*o]),Q.uHeadlightColor=a.headlightColor=[B[0],B[1],B[2],(o=n._headlightDisabled)?1:0],a.c.push(B[0],B[1],B[2]),a.g.push(o?-1:n._headlightGroup),a.e.push(o?1:0),B=n._59O,o=n._spots,G=n._dirs,_=n._87I,B.length&&(x=[],b=[],J=[],B.forEach(function(Q){Qs(x,Q,a),G_(b,n._transformPointToViewSpace(Q.p3())),J.push(Q.s("light.range"))}),Q.uPointColor=x,Q.uPointRange=J,Q.uPointPosition=b),o.length&&(L=[],f=[],V=[],l=[],H=[],I=[],o.forEach(function(Q){Qs(L,Q,a),G_(f,n._transformPointToViewSpace(Q.p3())),Q.s("light.rotation.enable")?G_(H,n._transformDirectionToViewSpace(null,ns([0,0,1],Q))):G_(H,n._transformDirectionToViewSpace(Q.p3(),Q.s("light.center"))),V.push(Q.s("light.range")),l.push(f5(Q.s("light.angle")/2)),I.push(Q.s("light.exponent"))}),Q.uSpotColor=L,Q.uSpotRange=V,Q.uSpotAngle=l,Q.uSpotExponent=I,Q.uSpotPosition=f,Q.uSpotDirection=H),G.length&&(Z=[],E=[],G.forEach(function(Q){Qs(Z,Q,a),Q.s("light.rotation.enable")?G_(E,n._transformDirectionToViewSpace(null,ns([0,0,1],Q))):G_(E,n._transformDirectionToViewSpace(Q.p3()))}),Q.uDirColor=Z,Q.uDirDirection=E),_.length&&_.forEach(function(Q){Qs([],Q,a)}),Q._lastLightMask=he,Q._lastHeadlightAmbientIntensity=D,$._fogDisabled||(W.uFogColor=$._fogColor,W.uFogDensity=$._fogDensity,W.uFogNear=$._fogNear,W.uFogFar=$._fogFar))},Y8.prototype.drawLayer=function(Q,n){return this.view.renderLayers(Q,!0)},Y8.prototype.drawData=function(Q,n,x){var b,J,L,f,V,l,H=this.view;H.isVisible(Q)&&(J=(b=this.renderState).uniforms,(Q=H.getData3dUI(Q))&&(f=(L=b.gl)._picking,V=H._picking,l=Q._pickId,x&&(Q._pickId=x),L._picking=H._picking=!!x,J.uTransparent=!!n,Q._42(b.gl,b.program,n?r:D),L._picking=f,H._picking=V,Q._pickId=l))},oO.Graph3dView=function(Q,n){var x,b,J=this;J.resetHeadlightProperties(),J.resetFogProperties(),J._webGLVersion=1,J._attributes=n||b5.graph3dViewAttributes,J._25I={},J._attributes&&(x=J._attributes.view)?x._ht=J:x=h_(1,J),J._view=x,J._attributes&&(b=J._attributes.canvas)||(b=z_(J._view)),J._canvas=b,J.__startTime=Date.now(),J.__uptime=0,Q5(b,"webglcontextlost",function(Q){Q.preventDefault(),J._26I&&(J._doBufferGC(J._26I,!0),R_(J._canvas,0,0),["_highlightHelper","shadowMap","flowMap","_envmapRenderer","_postProcessing","_depthPeelingRenderer"].forEach(function(Q){(Q=J[Q])&&Q.contextLost()}),J.dm().each(function(Q){J.getData3dUI(Q).contextLost()})),J._26I=x5,J._1o.onContextLost(),J._35O=!0}),Q5(b,"webglcontextrestored",function(Q){J._35O=!1,J.iv()}),J._40Q=new Ju(J),J._43Q={},J._44Q=-1,J._boneViewMatrices=[],J._batchIndexMap={},J._batchModelMap={},J._wireframeIndexMap={},J._wireframeModelMap={},J._wireframeIndexMapSwap={},J._wireframeModelMapSwap={},J._polylineIndexMap={},J._polylineIndexMap={},J._polylineIndexMapSwap={},J._polylineIndexMapSwap={},J._8O=[],J._modelMatrixStack=[],J._7O=$S(),J._6O=$S(),J._modelMatrix=$S(),J._1o=new Iu(J),J._30O=new au(J),J._31O=new Zu(J),J._32O=new Eu(J),J._raycaster=new tu(J),J._highlightHelper=new S8(J),J._postProcessing=new fp(J),J._41Q=[],J._42Q=0,J._frameRenderOptionStack=[],oO.VR?(J.vr=new oO.VR(J),J.isVREnabled=function(){return this.vr.enable},J.isVRPresenting=function(){return this.vr.isPresenting()}):(J.vr={enable:!1,isPresenting:W},J.isVREnabled=W,J.isVRPresenting=W),J.shadowMap=new X8(J),J.flowMap=new R8(J),J._33Q=!0,J._eye=q7(b5.graph3dViewEye),J._center=q7(b5.graph3dViewCenter),J._up=q7(b5.graph3dViewUp),J._lightChanged=!1,J._59O=[],J._spots=[],J._dirs=[],J._87I=[],J._boxClippers=[],J._flowObjects=[],J._transmissionObjects=[],J._frameId=0,J._renderId=0,J._picking=!1,J._tempCameraQueue=[],J._batchInfoMap={},J._updatedSkeletonDatas={},J._renderLayerInfoMap={},J._renderLayerSettingsVersion=0,J._gatherRenderLayersByPriority(!0),J.overlappingBox=new QE(J),J._envmapRenderer=new oO.EnvmapRenderer(this),J._prefabRenderer=new oO.PrefabRenderer(this),J.dm(Q||new GG),J._coreInteractor=new iE(this),J.setInteractors([new fu(J)]),J.enableQuickVisibleMode(),J._initView(),J._genBatchInstancedArrayFunc(),J.genProgramDefines(),J._setupPVMatrix()}),k8={box:1,sphere:2},N8={addRGB:"FLOW_BLEND_MODE_ADD_RGB",addRGBA:"FLOW_BLEND_MODE_ADD_RGBA",overrideRGBA:"FLOW_BLEND_MODE_OVERRIDE_RGBA",overrideRGB:"FLOW_BLEND_MODE_OVERRIDE_RGB",overrideA:"FLOW_BLEND_MODE_OVERRIDE_A",multiplyRGB:"FLOW_BLEND_MODE_MULTIPLY_RGB",multiplyRGBA:"FLOW_BLEND_MODE_MULTIPLY_RGBA"},j8=0,C8=(L("Graph3dView",e,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_shadow:1,ms_highlight:1,ms_quickVisible:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","blockSelectable","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable","zoomToCenter",Ci,QZ,"firstPersonMode",IZ,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightDirection","headlightColor","headlightIntensity","headlightAmbientIntensity","headlightRatioForPhysicalMaterial","headlightDisabled","headlightGroup","ortho","orthoWidth","syncEyeWithOrthoWidth","fovy","near","far",Li,Ji,"up","aspect","fogDisabled","fogMode","fogDensity","fogColor","fogNear","fogFar","pickerResolution","dashDisabled","uvClipEnabled","batchColorDisabled","batchInstancedDisabled","batchBlendDisabled","batchBrightnessDisabled","flowBlendMode","hoverDelay","batchInfoMap","renderLayerInfoMap","rotateMinPhi","rotateMaxPhi","sortable","opaqueSortable","sortFunc","toneMapping","toneMappingExposure"],_editable:!1,_sortable:b5.graph3dViewSortable,_opaqueSortable:b5.graph3dViewOpaqueSortable,_editHelperDisabled:b5.graph3dViewEditHelperDisabled,_blockSelectable:b5.graph3dViewBlockSelectable,_devicePixelRatio:n5,_boundaries:n5,_parallelShaderCompile:!1,_moveStep:b5.graph3dViewMoveStep,_rotateStep:b5.graph3dViewRotateStep,_toneMapping:n5,_toneMappingExposure:1,_rotateMinPhi:b5.graph3dViewMinPhi===n5?b5.graph3dViewRotateMinPhi:b5.graph3dViewMinPhi,_rotateMaxPhi:b5.graph3dViewMaxPhi===n5?b5.graph3dViewRotateMaxPhi:b5.graph3dViewMaxPhi,_pannable:b5.graph3dViewPannable,_rotatable:b5.graph3dViewRotatable,_walkable:b5.graph3dViewWalkable,_resettable:b5.graph3dViewResettable,_zoomable:b5.graph3dViewZoomable,_zoomToCenter:!0,_firstPersonMode:b5.graph3dViewFirstPersonMode,_mouseRoamable:b5.graph3dViewMouseRoamable,_gridVisible:b5.graph3dViewGridVisible,_gridSize:b5.graph3dViewGridSize,_gridGap:b5.graph3dViewGridGap,_gridColor:b5.graph3dViewGridColor,_originAxisVisible:b5.graph3dViewOriginAxisVisible,_centerAxisVisible:b5.graph3dViewCenterAxisVisible,_axisXColor:b5.graph3dViewAxisXColor,_axisYColor:b5.graph3dViewAxisYColor,_axisZColor:b5.graph3dViewAxisZColor,_ortho:b5.graph3dViewOrtho,_orthoWidth:b5.graph3dViewOrthoWidth,_syncEyeWithOrthoWidth:b5.graph3dViewSyncEyeWithOrthoWidth,_fovy:b5.graph3dViewFovy,_near:b5.graph3dViewNear,_far:b5.graph3dViewFar,_rectSelectable:b5.graph3dViewRectSelectable,_rectSelectBackground:b5.graph3dViewRectSelectBackground,_editSizeColor:b5.graph3dViewEditSizeColor,_autoMakeVisible:s1,_pickerResolution:b5.graph3dViewPickerResolution,_oitPassCount:3,_dashDisabled:b5.graph3dViewDashDisabled,_uvClipEnabled:b5.graph3dViewUvClipEnabled,_batchColorDisabled:b5.graph3dViewBatchColorDisabled,_batchInstancedDisabled:b5.graph3dViewBatchInstancedDisabled,_batchBlendDisabled:b5.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:b5.graph3dViewBatchBrightnessDisabled,_useOIT:!1,_oitEnabled:!1,_flowBlendMode:b5.graph3dViewFlowBlendMode,addCamera:function(Q){var n=e.freeze({id:this._42Q++,priority:Q.priority||0,ignoreInPick:!!Q.ignoreInPick,render:Q.render});Q.switch3DStatus&&(this._43Q[n.id]=!0),this._41Q.push(n),this._41Q.sort(function(Q,n){return Q.priority!==n.priority?Q.priority-n.priority:Q.id-n.id})},setEye:function(Q,n,x){1===arguments.length&&(n=Q[1],x=Q[2],Q=Q[0]);var b=this._eye;b[0]=Q,b[1]=n,b[2]=x,this.fp(Li,x5,b)},setCenter:function(Q,n,x){1===arguments.length&&(n=Q[1],x=Q[2],Q=Q[0]);var b=this._center;b[0]=Q,b[1]=n,b[2]=x,this.fp(Ji,x5,b)},setUp:function(Q,n,x){1===arguments.length&&(n=Q[1],x=Q[2],Q=Q[0]);var b=this._up;b[0]=Q,b[1]=n,b[2]=x,this.fp("up",x5,b)},setVisibleFunc:function(Q){var n=this._visibleFunc;this._visibleFunc=Q,this.fp("visibleFunc",n,Q),Q?this.isQuickVisibleMode()&&(this.disableQuickVisibleMode(),this._quickVisiblePending=!0):this._quickVisiblePending&&(this._quickVisiblePending=!1,this.enableQuickVisibleMode())},getDevicePixelRatio:function(){return this._picking?this._1o._resolution:this._devicePixelRatio||Q7},isOITEnabled:function(Q){return!!this._useOIT&&(!Q||this._oitEnabled)},enableOIT:function(){var Q=this;if(Q._useOIT)return!0;if(Q._useOIT=!0,!Q.getGL())return!1;if(!Q.isWebGL2())return!1;if(!Q._glExtensions.get("EXT_color_buffer_float"))return!1;var n=O.navigator;return!(n&&(/iPad|iPhone|iPod/.test(n.platform)||"MacIntel"===n.platform&&1<n.maxTouchPoints)||(Q._oitEnabled=!0,Q._depthPeelingRenderer||(Q._depthPeelingRenderer=new g8(Q)),Q._depthPeelingRenderer.enableOIT(),Q.iv(),0))},disableOIT:function(){return this._useOIT&&(this._useOIT=!1,this._oitEnabled&&(this._depthPeelingRenderer&&this._depthPeelingRenderer.disableOIT(),this._oitEnabled=!1,this.iv())),!0},setOITPassCount:function(Q){this._oitPassCount=Q,this.iv()},getOITPassCount:function(){return this._oitPassCount},rebindOITTexture:function(Q){return!!this._oitEnabled&&this._depthPeelingRenderer.bindTexture(Q)},isTransparentMask:function(Q){return Q.s("transparent.mask")},getCoreInteractor:function(){return this._coreInteractor},getHighlightHelper:function(){return this._highlightHelper},getRaycaster:function(){return this._raycaster},getAspect:function(){return this._aspect||this.getWidth()/this.getHeight()||1.2},getCanvas:function(){return this._canvas},setDataModel:function(Q){var n=this,x=n._dataModel,b=n._selectionModel;x!==Q&&(x&&(x.ump(n.handleDataModelPropertyChange,n),x.umm(n.handleDataModelChange,n),x.umd(n.handleDataPropertyChange,n),b||x.sm().ums(n.handleSelectionChange,n)),(n._dataModel=Q).mp(n.handleDataModelPropertyChange,n),Q.mm(n.handleDataModelChange,n),Q.md(n.handleDataPropertyChange,n),b?b._21I(Q):Q.sm().ms(n.handleSelectionChange,n),n._postProcessing.handleDataModleChange(x,Q),n._tryInvalidateEnvmap(),n.invalidateAll(!0),n.invalidateLight(),n.invalidateboxClipper(),n.invalidateFlowObjects(),n.invalidateTransmissionObjects(),n._49Q(),n.fp(iZ,x,Q),n._canvas.style.background=Q.getBackground()||"")},handleDataModelPropertyChange:function(Q){var n,x=Q.property;"background"===x?(n=this._canvas.style.background,Q=Q.newValue||"",this._canvas.style.background=Q,this.fp("canvasBackground",n,Q)):"envmapType"===x?this._tryInvalidateEnvmap():"envmap"!==x&&"invalidateView"!==x||this.iv()},handleDataPropertyChange:function(Q){var n=Q.data,Q=(this.invalidateData(n),Q.property);Te(n)&&"s:light.type"===Q?this.invalidateLight():"s:3d.clipbox"===Q?this.invalidateboxClipper(n,!0):"s:effect.flow"===Q?this.invalidateFlowObjects(n,!0):"s:shadow.cast"===Q?this.shadowMap.tryUpdateBounding(n):"s:3d.visible"===Q?this.invalidateQuickVisible(n):"s:shape3d.transmission"===Q&&this.invalidateTransmissionObjects(n,!0)},invalidateboxClipper:function(Q,n){var x=this._boxClippers,b=x.length;Q?!!Q.s("3d.clipbox")==(n=!!n)?x.indexOf(Q)<0&&x.push(Q):0<=(n=x.indexOf(Q))&&x.splice(n,1):(x=this._boxClippers=[],this.dm().each(function(Q){Q.s("3d.clipbox")&&x.push(Q)})),b!==(Q=x.length)&&(this._updateBoxClipperMatrix(),ws=Q?qs:hj),this.iv()},_setupPVMatrix:function(){this._projectMatrix=Ws(this),$s(this,this._7O),this._viewMatrix=DS(this._7O)},_updateBoxClipperMatrix:function(){for(var Q,n,x=this._boxClippers,b=this._boxClipperMatrixes=[],J=this._boxClipperClipInner=[],L=this._boxClipperGroups=[],f=this._boxClipperShape=[],V=new X,l=0,H=x.length;l<H;l++)(Q=x[l]).appendAnchorMatrix3d(n=FS(Q,this.getMat(Q))),b.push(V.getInverse(V.fromArray(n)).toArray()),J.push("inner"===Q.s("3d.clipbox")),L.push(Q.s("3d.clipbox.group")),f.push(k8[Q.s("3d.clipbox.shape")]||1)},_49Q:function(){this._4AQ||this._48Q||this.dm().size()<b5.graph3dViewDataNumWarningLine||(this._48Q=!0,console.log("Too many datas so than disable some feature to speed up.\nYou can set global Default.graph3dViewDataNumWarningLine to largeEnoughNum to avoid this, or call graph3dView.quitDataNumWarning() to quit.\n"),this.enableQuickVisibleMode(),this.getHighlightHelper().mouseOverData=null)},quitDataNumWarning:function(){this.disableQuickVisibleMode(),this._48Q=!1,this._4AQ=!0},invalidateFlowObjects:function(Q,n){var x=this._flowObjects;Q?!!Q.s("effect.flow")==(n=!!n)?x.indexOf(Q)<0&&x.push(Q):0<=(n=x.indexOf(Q))&&x.splice(n,1):(x=this._flowObjects=[],this.dm().each(function(Q){Q.s("effect.flow")&&x.push(Q)})),this.iv()},invalidateTransmissionObjects:function(Q,n){var x=this._transmissionObjects;Q?!!Q.s("shape3d.transmission")==(n=!!n)?x.indexOf(Q)<0&&x.push(Q):0<=(n=x.indexOf(Q))&&x.splice(n,1):(x=this._transmissionObjects=[],this.dm().each(function(Q){Q.s("shape3d.transmission")&&x.push(Q)})),this.iv()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(Q){if(Q=Q.property,this.iv(),this._18Q=x5,"eye"===Q)this._33Q=!0;else if("devicePixelRatio"===Q)this._42(this.getDevicePixelRatio());else if("batchInstancedDisabled"===Q){this._genBatchInstancedArrayFunc();var n,x=b5.getBatchInfoMap();for(n in x)x[n]&&x[n].instanced&&this.invalidateBatch(n);for(n in x=this._batchInfoMap)x[n]&&x[n].instanced&&this.invalidateBatch(n)}},_5O:function(Q){var n=Q._22Q();return n?new n(this,Q):x5},getData3dUI:function(Q){var n=this._25I[Q._id];return n===n5&&(n=this._5O(Q),this._25I[Q._id]=n),n},invalidateAll:function(Q,n){var x=this;if(Q){for(var b in x._25I)(b=x._25I[b])&&b.dispose();x._25I={},x.iv(),iO(x)}else iO(x),x.dm().each(function(Q){x.invalidateData(Q)});x.shadowMap.tryInvalidateLater(Q,n)},invalidateSelection:function(){var n=this;n.sm().each(function(Q){n.invalidateData(Q)})},invalidateData:function(Q){var n=this.getData3dUI(Q);n&&(n.iv(),this.iv()),iO(this,Q)},getShape3dText:function(Q){return Q.getStyle("shape3d.text")||this.getLabel(Q)},invalidateBatch:function(n){var x=this;x._40Q.each(function(Q){x._invalidateBatch(n,Q.batchModelMap,Q.batchIndexMap),x._invalidateBatch("T"+n,Q.wireframeModelMap,Q.wireframeIndexMap),x._invalidateBatch("O"+n,Q.wireframeModelMap,Q.wireframeIndexMap),Q.markBatchInvalid()}),x.iv()},_invalidateBatch:function(Q,n,x){var b=this,J=n[Q];if(J){J.ds.forEach(function(Q){var n=b.getData3dUI(Q);n&&(n.iv(),n.invalidateWireframe()),delete x[Q._id]});var L=b.getBatchInfo(Q)||Oj;if(!1!==L.keepData&&J.ms&&J.ms.length&&L.instanced&&!b.isBatchInstancedDisabled())return J.ds=[],J.ms=[],J.ics&&(J.ics=[]),void(J.ps&&(J.ps=[]));delete n[Q]}},handleDataModelChange:function(Q){var n,x,b=this,J=Q.kind,Q=Q.data;"add"===J?(b.invalidateData(Q),Z_(Q)&&Q.getEdgeGroup()&&Q.getEdgeGroup().eachSiblingEdge(b.invalidateData,b),Te(Q)&&b.invalidateLight(),Q.s("3d.clipbox")&&b.invalidateboxClipper(Q,!0),Q.s("effect.flow")&&b.invalidateFlowObjects(Q,!0),Q.s("shape3d.transmission")&&b.invalidateTransmissionObjects(Q,!0),b._49Q()):J===Di?(n=Q._id,(x=b._25I[n])&&(x.dispose(),delete b._25I[n],b.iv()),Q===b._currentSubGraph&&b.setCurrentSubGraph(x5),iO(b,Q),Te(Q)&&b.invalidateLight(),Q.s("3d.clipbox")&&b.invalidateboxClipper(Q,!1),Q.s("effect.flow")&&b.invalidateFlowObjects(Q,!1),Q.s("shape3d.transmission")&&b.invalidateTransmissionObjects(Q,!1),Q.isAnimationPlaying()&&Q.stopAnimation()):J===Ai&&(b.invalidateAll(!0),b.setCurrentSubGraph(x5),iO(b),b.invalidateLight(),b.invalidateboxClipper(),b.invalidateFlowObjects(),b.invalidateTransmissionObjects())},toCanvas:function(Q,n,x){for(var b,J=this.getGL(),L=(this.validate(),Q&&(b=J.getParameter(3106),Fs(J,Q)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this.getWidth()||1),f=this.getHeight()||1,V=new Uint8Array(L*f*4),l=z_(),H=l.getContext("2d"),I=(J.readPixels(0,0,L,f,6408,5121,V),R_(l,L,f,1),H.getImageData(0,0,L,f)),Z=I.data,E=0;E<Z.length;E+=4){var a=E/4,o=t5(a/L);Z[a=4*((f-1-o)*L+(a-o*L))]=V[E],Z[1+a]=V[E+1],Z[2+a]=V[E+2],Z[3+a]=V[E+3]}return H.putImageData(I,0,0),Q&&Fs(J,b),this._42(this.getDevicePixelRatio()),n&&x?(I=(H=z_()).getContext("2d"),R_(H,n,x,1),b5.drawImage(I,l,0,0,n,x),H):l},toDataURL:function(Q,n){var x,b=this.getGL(),n=(this.validate(),Q&&(x=b.getParameter(3106),Fs(b,Q)),this._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1}),this._canvas.toDataURL(n||"image/png",1));return Q&&Fs(b,x),this._42(this.getDevicePixelRatio()),n},isWebGL2:function(){return 2===this._webGLVersion},getGL:function(){var Q,n,x,b=this._26I;if(b)return b;if(!this._35O){var J=this,L=J._canvas,f=J._attributes;if(!f||!1!==f.requestWebGL2)try{(b=L.getContext("webgl2",f)||L.getContext("experimental-webgl2",f))&&(J._webGLVersion=2,J._26I=b)}catch(b){}if(!b)try{b=L.getContext("webgl",f)||L.getContext("experimental-webgl",f)}catch(b){throw new Error("WebGL not supported")}if(b)return J._26I=b,L=J._frameState=new Y8(J,b),J._glExtensions=new ca(b),J._glCapabilities=new Fa(b,J._glExtensions),J._glUbos=new qa(J,b,J._glCapabilities,f&&f.forceNoUniformBuffer),J._glPrograms=new v8(J,b),J._2O={},b._emptyCubeTexture=(Q=b,x=new Uint8Array(4),n=Q.createTexture(),Q.activeTexture(33984),Q.bindTexture(34067,n),Q.texParameteri(34067,10240,9729),Q.texParameteri(34067,10241,9729),Q.texImage2D(34069,0,6408,1,1,0,6408,5121,x),Q.texImage2D(34070,0,6408,1,1,0,6408,5121,x),Q.texImage2D(34071,0,6408,1,1,0,6408,5121,x),Q.texImage2D(34072,0,6408,1,1,0,6408,5121,x),Q.texImage2D(34073,0,6408,1,1,0,6408,5121,x),Q.texImage2D(34074,0,6408,1,1,0,6408,5121,x),n),b._compiledShader={},b._emptyTexture=us(b),b._emptyBlendTexture=us(b),b._4NQ={},b._id=++j8,b._4MQ=[],b._4KQ={},L.setGLState(),J._buffer={vs:Ms(b),ns:Ms(b),is:Ms(b),uv:Ms(b),batchColor:Ms(b),batchBlend:Ms(b),batchBrightness:Ms(b),lineDistance:Ms(b)},J._1O=As(J,b),f=J._cube={vs:Ms(b),ns:Ms(b),is:Ms(b),uv:Ms(b)},Xs(b,f.vs,J8),Xs(b,f.ns,V8),Xs(b,f.uv,f8),Ss(b,f.is,L8),J._genBatchInstancedArrayFunc(),b._renderInfo={calls:0,vertices:0,faces:0,lines:0,points:0,textureCache:{time:0,count:0,pixels:0},frame:0,cacheTimeCost:0,reflectDepth:0},b._renderTargetStack=[],b._dynamicTexturePool={},b;throw new Error("WebGL not supported")}},getGLCapabilities:function(){if(this.getGL())return this._glCapabilities},getGLExtensions:function(){if(this.getGL())return this._glExtensions},getShadowMap:function(){return this.shadowMap},invalidateShape3dAttribute:function(Q,n){delete Q._complete_,(Q=Q[n])&&Q._bufId&&delete Q._bufId},getEnvmap:function(){return this._glCapabilities&&this._glCapabilities.maxVertexTextures<b5.graph3dEnvmapCapabilityRequire?null:this.dm().getEnvmap()},getEnvmapType:function(){var Q,n=this.dm();return(n?n.getEnvmapType():Q)||"legacy"},setEnvmapExtraQuaternion:function(Q){this._envmapExtraQuaternion=Q instanceof s.Quaternion?Q.clone().inverse().toArray():null},invalidateEnvmap:function(Q){return this._envmapRenderer.invalidateEnvmap(Q)},invalidateEnvmapUsedByMaterial:function(Q){return this._envmapRenderer.invalidateEnvmapUsedByMaterial(Q)},isEnvmapUsedByMaterialReady:function(Q){return this._envmapRenderer.isEnvmapUsedByMaterialReady(Q)},_setEnvmapByProbeId:function(Q,n,x){return this._envmapRenderer.setEnvmapByProbeId(Q,n,x)},_tryInvalidateEnvmap:function(){var Q=this.getEnvmapType();Q!==this._lastProgramEnvmapType&&(this._envmapRenderer.changeEnvmapType(this._lastProgramEnvmapType=Q),this.iv())},acquireProgram:function(Q,n){return this._glPrograms.acquireProgram(Q,n)},renderModel:function(Q,n,x,b,J){J&&!1===J.restoreViewport||x&&!1===x.restoreViewport||n&&!1===n.restoreViewport||(L=(L=this.getViewport())&&q7(L));var L,Q=this._postProcessing.blitScreen(Q,n,x,b,J);return L&&this.setViewport(this.getGL(),L[0],L[1],L[2],L[3]),Q},renderPrefab:function(){return this.renderModel.apply(this,arguments)},isGLTempRegisterLimited:function(){return this._glTempRegisterLimited},getBrightness:function(Q){var n=Q.s("brightness"),Q=this.isSelected(Q)?Q.s("select.brightness"):x5;return n==x5?Q:Q==x5?n:n*Q},getDataHighlightMode:function(Q){return Q.s("highlight.mode")},getWireframe:function(Q){var n=Q.s("wf.visible"),x=Q.s("wf.width");if(!0===n||0<x&&"selected"===n&&this.isSelected(Q))return{color:Q.s("wf.color"),width:x,short:Q.s("wf.short"),mat:Q.s("wf.mat")}},getPartPosition:function(Q,n,x,b){return b=b||Oj,[(Q=this.getData3dUI(Q)._16O(b.autoRotate,n,x5,x||j5,b.t3,b.r3,b.rotationMode))[12],Q[13],Q[14]]},_transformPointToViewSpace:function(Q){return Q=[Q[0],Q[1],Q[2]],uS(Q,this._viewMatrix),Q},_transformDirectionToViewSpace:function(Q,n){var Q=Q?[Q[0],Q[1],Q[2]]:[0,0,0],n=(uS(Q,this._viewMatrix),n?[n[0],n[1],n[2]]:[0,0,0]),x=(uS(n,this._viewMatrix),n[0]-Q[0]),b=n[1]-Q[1],n=n[2]-Q[2];return(Q=Math.sqrt(x*x+b*b+n*n))?[x/Q,b/Q,n/Q]:[x,b,n]},getWireframeGeometry:function(Q){if(Q.s("wf.geometry"))return{color:Q.s("wf.color"),width:Q.s("wf.width"),mat:Q.s("wf.mat"),geometry:!0}},getBodyColor:function(Q){return Q.s("body.color")},getMat:function(Q){return Q.getMat?Q.getMat():Q.s("mat")},getFaceMat:function(Q,n){return Q.getFaceMat?Q.getFaceMat(n):Q.s(n+".mat")},getFaceBlend:function(Q,n){return Q.s(n+".blend")||Q.s("all.blend")},getFaceColor:function(Q,n){return Q.s(n+".color")||Q.s("all.color")},getFaceImage:function(Q,n){return Q.s(n+".image")||Q.s("all.image")},getFaceBlendImage:function(Q,n){return Q.s(n+".blend.image")||Q.s("all.blend.image")},getFaceDiscardSelectable:function(Q,n){return(n=Q.s(n+".discard.selectable"))==x5?Q.s("all.discard.selectable"):n},getFaceUv:function(Q,n){return Q.s(n+".uv")||Q.s("all.uv")},getFaceUvOffset:function(Q,n){return Q.s(n+".uv.offset")||Q.s("all.uv.offset")},getFaceUvScale:function(Q,n){return Q.s(n+".uv.scale")||Q.s("all.uv.scale")},getFaceUvRotation:function(Q,n){return Q.s(n+".uv.rotation")||Q.s("all.uv.rotation")},getFaceUvAnchor:function(Q,n){return Q.s(n+".uv.anchor")||Q.s("all.uv.anchor")},getFaceLight:function(Q,n){return(n=Q.s(n+".light"))==x5?Q.s("all.light"):n},getFaceVisible:function(Q,n){return(n=Q.s(n+".visible"))==x5?Q.s("all.visible"):n},getFaceOpacity:function(Q,n){return(n=Q.s(n+".opacity"))==x5?Q.s("all.opacity"):n},getFaceTransparent:function(Q,n){return(n=Q.s(n+".transparent"))==x5?Q.s("all.transparent"):n},getFaceReverseColor:function(Q,n){return Q.s(n+".reverse.color")||Q.s("all.reverse.color")},getFaceReverseFlip:function(Q,n){return(n=Q.s(n+".reverse.flip"))==x5?Q.s("all.reverse.flip"):n},getFaceReverseCull:function(Q,n){return(n=Q.s(n+".reverse.cull"))==x5?Q.s("all.reverse.cull"):n},getFaceMaterial:function(Q,n){return(n=Q.s(n+".material"))==x5?Q.s("all.material"):n},isPicking:function(){return this._picking},renderPickScene:function(){var Q=this.getGL();this.syncRenderState(),this._picking=Q._picking=!0,this.renderScene(),this._picking=Q._picking=!1},invalidateCachedGeometry:function(Q){this.getData3dUI(Q).invalidateCachedGeometry(),this.invalidateData(Q)},invalidateCachedWireframe:function(x){var Q,b;x instanceof d.Data?(Q=(Q=this.getData3dUI(x)).shapeModel||c8(Q))&&(FO(Q),x.iv()):x&&(FO(x),(b=this).dm().each(function(Q){var n=b.getData3dUI(Q);(n.shapeModel||c8(n))===x&&Q.iv()}),this.iv())},isInteractive:function(Q){return Q.s("interactive")},redraw:function(){this.iv()},validateImpl:function(){var x,b,J,L,Q=this,n=(Q._lightChanged&&(Q._lightChanged=!1,x=[],b=[],J=[],L=[],Q.dm().each(function(Q){var n;Te(Q)&&("point"===(n=Q.s("light.type"))?x.push(Q):"spot"===n?b.push(Q):"directional"===n?J.push(Q):"rect"===n&&L.push(Q))}),Q._59O=x,Q._spots=b,Q._dirs=J,Q._87I=L),Q.getAspect());n!==Q.__cachedAspect__&&(Q._updateSkybox({property:"asceptChanged"}),Q.__cachedAspect__=n),Q._attributes&&!1===Q._attributes.autoDraw||Q._42(),Q._1o.iv()},getRenderInfo:function(){var Q=this.getGL();if(Q)return Q._renderInfo},getDebugTip:function(){var Q,n,x=this.getRenderInfo();if(x)return Q=(n=this.getGL())._validBufCount||0,Q="Draw Calls: "+x.calls+"<br/>Vertices: "+x.vertices+"<br/>Faces: "+x.faces+"<br/>Lines: "+x.lines+"<br/>"+(x.points?"Points: "+x.points+"<br/>":"")+"Buffers: "+Q+"<br/>Programs: "+(n._validProgramCount||0)+"<br/>Cache Models: "+e.keys(Pj).length+"<br/>Shape3d Models: "+e.keys(rj).length,this.isVRPresenting()&&(Q+="<br/>VR fps: "+this.vr.getFps()),x.textureCache&&(n=x.textureCache.count,Q+="<br/>2D Dynamic Textures: "+x.textureCache.count,0<n&&(Q+="<br/>2D Dynamic pixels: "+(1e6<(n=x.textureCache.pixels)?Math.round(n/1e6)+"M":1e3<n?Math.round(n/1e3)+"K":Math.round(n)))),Q},getFrameState:function(){return this._frameState},isBoundingBoxInView:(Av=new d.Math.Box3,uv=new d.Math.Matrix4,function(Q){if(!(Q=Q instanceof d.Data?this.getData3dUI(Q):Q).mat)return!0;var n=Q.getBoundingBox(!0);return Av.copy(n).applyMatrix4(uv.fromArray(Q.mat)),this.getFrustum().intersectsBox(Av)}),updateScene:function(){var n=this,x=(n.onPreUpdate(),n._81O=x5,n.overlappingBox.clear(),n.initSkeletonDatas(),n._40Q),b=(x.init(),n.getGL()),Q=n.dm();if(Q.isHierarchicalRendering())Q.eachByHierarchical(function(Q){(Q=n.getData3dUI(Q))&&Q.update(n,b,x)});else for(var J,L=Q.getDatas().getArray(),f=L.length,V=0;V<f;V++)J=L[V],(J=n.getData3dUI(J))&&J.update(n,b,x);this._updateBoxClipperMatrix(),x.onUpdated(),n.onPostUpdate()},_pushFrameRenderOptions:function(Q){this._frameRenderOptionStack.push(this._currentFrameRenderOptions),this._currentFrameRenderOptions=Q},_popFrameRenderOptions:function(Q){this._currentFrameRenderOptions=this._frameRenderOptionStack.pop()},_getFrameRenderOptions:function(Q){var n=this._currentFrameRenderOptions;return n&&n[Q]},getRenderLists:function(){return this._40Q},_setCurrentFrameRenderId:function(Q,n){var x=this._renderId++;Q._renderInfo.renderId=x,this._glPrograms.setCurrentFrameRenderId(x),n&&this._glUbos.setCurrentFrameRenderId(x)},renderScene:function(Q){var x,b=this,J=b.getGL(),L=b._picking,f=(L||b.onPreRender(),b._setCurrentFrameRenderId(J,!1),b.genProgramDefines(),b._frameState),n={},V=(L&&(n.BATCHINSTANCE=!b._batchInstancedDisabled||b._picking&&0<b._model3dInstancedBatchCount),b._prg=f.defaultProgram=b.acquireProgram({type:L?"pick":"legacy",defines:n}),b._pushFrameRenderOptions(Q),!1!==b._getFrameRenderOptions("renderShadowMap")&&b.shadowMap.render(),b.flowMap.render(),b._envmapRenderer.onBeforeRender(J),b._44Q=-1,f.renderState),n=V.glState;function l(Q,n){f.setGLState(Q,n),f.setUniforms(Q),f.renderState.attribs.disable(),x=V.directUniforms(),V.directAttribs().disable()}var H,Q=b._prg,I=(b._setupPVMatrix(),this._glUbos.setCurrentFrameRenderId(this._renderId),b.isReflecting(J)||Zs(b._projScreenMatrix=$S(),b._projectMatrix,b._viewMatrix),f.syncEnv(L?this.pickColorMap:n5),V.useProgram(Q),l(!1,!0),J.clear(256),this._41Q),Z=0,E=I.length;function a(Q){for(var n=!1;Z<E;Z++){var x=I[Z];if(!L||!x.ignoreInPick){if(x.priority>=Q)break;b._43Q[b._44Q=x.id]&&!D5[Oi.length]||(x.render(J,b,f),l(),n=!0)}}return n}if(a(b5.cameraPriority.skybox),L?(H=n.color.clear.slice(0),Fs(J,[0,0,0,0])):(Fs(J,[0,0,0,0]),n.blend.enabled=!1,n.depth.enabled=!1,n.depth.mask=!1,b._camera&&!1===b._camera.s("camera.renderSky")||b.drawSky(J,Q),!1!==b._getFrameRenderOptions("renderReflector")&&b.drawReflectors(J)&&(b._setupPVMatrix(),f.syncEnv(),l(),b._setCurrentFrameRenderId(J,!0)),n.blend.enabled=!1,n.depth.enabled=!0,n.depth.mask=!0,(x.uTransparent=!1)!==b._getFrameRenderOptions("renderGrid")&&b._31O._42(J)),!J.textureBatch||D5[(ONE_FRAME_TIME-6)/2]){L||(b.shadowMap.enable&&b.shadowMap.createShadow(x),b.rebindOITTexture(x),b.flowMap.createFlow(x));for(var o=b._sortedRenderLayers,B=0,G=o.length;B<G;B++){var _=o[B],$=b.getRenderLayerInfo(_);!(b._camera||!$.ignore||$.renderForBloom&&J._blooming)||b._camera&&!b._camera.isLayerVisible(_)||(a($.priority)&&!L&&(b.shadowMap.enable&&b.shadowMap.createShadow(x),b.rebindOITTexture(x),b.flowMap.createFlow(x)),this.renderLayer(_))}a(b5.cameraPriority.infinity),L||(b._renderBonesForDebug(J,n),b.flowMap.disableFlow(x)),xs(b,x,0,b5.graph3dViewHeadlightAmbientIntensity),x.uHeadlightColor=[1,1,1,0],x.uUseEnvMap=!1,x.uHeadlightDirection=[0,0,0],x.uHeadlightRange=0,n.depth.enabled=!1,x.uTransparent=!1,x.shadowReceive=!1,ws(b,x,pe),L?b.drawFilter||b._30O._42(J):(b._highlightHelper._42(J),this._renderAxisAndEditHelper(!1!==b._getFrameRenderOptions("renderAxis"),!1!==b._getFrameRenderOptions("renderEdit")),n.blend.enabled=!1,n.depth.mask=!0),n.depth.enabled=!0,L&&Fs(J,H),Xs(J,x5),Ss(J,x5),b._44Q=-1,b._popFrameRenderOptions(null),b._glPrograms.disableAttributes(J),L||b.onPostRender()}},_renderAxisAndEditHelper:function(Q,n){var x,b,J,L;(Q||n)&&(x=this.getGL(),b=(J=(L=this._frameState).renderState).glState,J=J.directUniforms(),L.renderState.attribs.disable(),b.depth.enabled=!1,J.uTransparent=!1,J.shadowReceive=!1,b.blend.enabled=!1,b.depth.mask=!0,(L=!this._fogDisabled)&&(J.uFog=!1),Q&&this._32O._42(x),n&&this._30O._42(x),L&&(J.uFog=!0),Xs(x,x5),Ss(x,x5))},renderLayers:function(Q,n){for(var x=0,b=(Q=n?IG(Q):Q).length;x<b;x++)this.renderLayer(Q[x])},renderSky:function(){var Q=this._frameState,n=Q.renderState,x=n.glState,b=this.getGL(),J=this._prg;this._setupPVMatrix(),Zs(this._projScreenMatrix=$S(),this._projectMatrix,this._viewMatrix),Q.syncEnv(),n.useProgram(J),Q.setGLState(!1,!0),Q.setUniforms(!1),Q.renderState.attribs.disable(),b.clear(256),Fs(b,[0,0,0,0]),x.blend.enabled=!1,x.depth.enabled=!1,x.depth.mask=!1,this.drawSky(b,J),x.depth.mask=!0,x.depth.enabled=!0,Xs(b,x5),Ss(b,x5)},addRenderLayerListener:function(Q,n,x){this._renderLayerNotifier||(this._renderLayerNotifier=new oG),this._renderLayerNotifier.add(Q,n,x)},removeRenderLayerListener:function(Q,n){this._renderLayerNotifier&&this._renderLayerNotifier.remove(Q,n)},fireRenderLayerEvent:function(Q,n){var x=this._renderLayerNotifier;x&&x.fire({layer:Q,phase:n})},renderLayer:function(Q){var n=this,x=n._picking;if(B=n._40Q.get(Q)){n.fireRenderLayerEvent(Q,"prepare");var b,J,L,f=n.getGL(),V=n.getRenderLayerInfo(Q),l=(H=n._frameState.renderState).glState,H=H.directUniforms(),I=(!x&&n.isSortable()&&B.sort(n._sortFunc,n._projScreenMatrix,n.isOpaqueSortable()),B.resetModel3dInstancedDraw(),B.opaque),Z=B.transparent,E=B.batchModelMap,a=B.batchIndexMap,o=B.polylineModelMap,B=B.wireframeModelMap,f=n.getGL(),G=n._prg,_=(x||(l.blend.enabled=!1,l.depth.enabled=!0,l.depth.mask=!0),(H.uTransparent=!1)!==V.clearDepth&&f.clear(256),this.drawFilter);if(_){for(b=0,J=(L=I).length;b<J;b++)!0!==_(L[b].data)&&L[b].ui._42(f,G,D);if(x)for(b=0,J=(L=Z).length;b<J;b++)L[b].ui._46Q(f);gO(n,E,a)}else{for(b=0,J=(L=I).length;b<J;b++)L[b].ui._42(f,G,D);if(x)for(b=0,J=(L=Z).length;b<J;b++)L[b].ui._46Q(f);gO(n,E,a),XO(n,o),XO(n,B)}if(x||(l.blend.enabled=!0,l.depth.mask=!1),n._45Q=H.uTransparent=!0,_){for(b=0,J=(L=Z).length;b<J;b++)!0!==_(L[b].data)&&L[b].ui._42(f,G,r);gO(n,E,a,0,!0)}else{if(x||!n._oitEnabled||n.isReflecting(f)||f._blooming){for(b=0,J=(L=Z).length;b<J;b++)L[b].ui._42(f,G,r);gO(n,E,a,0,!0)}else n._depthPeelingRenderer.render(Z,E,a);XO(n,o,0,!0),XO(n,B,0,!0)}n._45Q=null,n.fireRenderLayerEvent(Q,"post")}},onPreFrame:hj,onPostFrame:hj,onPreUpdate:hj,onPostUpdate:hj,onPreRender:hj,onPostRender:hj,onPreRenderData:hj,onPostRenderData:hj,_42:function(Q,n){var x=this;if(!x._35O&&(!t||D5(t))){var b=x.getWidth(),J=x.getHeight();if(b&&J){var L=x.getGL();if(L){var f=x._canvas,V=(Q?V=!0:Q=x.getDevicePixelRatio(),x._picking||!V&&b===f.clientWidth&&J===f.clientHeight||(R_(f,b,J,Q),V=Q,b&&1<Math.abs(L.drawingBufferWidth-b*Q)&&(V=Math.min(V,L.drawingBufferWidth/b)),(V=J&&1<Math.abs(L.drawingBufferHeight-J*Q)?Math.min(V,L.drawingBufferHeight/J):V)!==Q&&(x.setDevicePixelRatio(Q=V),R_(f,b,J,Q)),x._18Q=null),x._attributes&&!1===x._attributes.autoClear||L.clear(16384),L._renderInfo);V.calls=0,V.vertices=0,V.faces=0,V.lines=0,V.points=0,V.textureCache={time:0,count:0,pixels:0},V.frame=++x._frameId,V.cacheTimeCost=0,V.reflectDepth=0,x.__uptime=(Date.now()-x.__startTime)/1e3,b=f.width,J=f.height,x._gatherRenderLayersByPriority(),x.onPreFrame(),x.syncRenderState(),x._glPrograms.checkParallelLinkStatus();do{if(x.isVREnabled()&&x.vr.render(L,b,J,n))break;x.updateScene();var l=x._4JQ}while((l||!x._postProcessing.render(L,b,J,n,0<x._transmissionObjects.length||x._oitEnabled))&&(x.setViewport(L,0,0,b,J),l?x.renderPickScene(n):x.renderScene(n),0));x._33Q=!1,x.countFrame(),x.onPostFrame(),x._doBufferGC(L),x._glPrograms.scheduleProgramGC(x._shaderGCInterval||500)}}}},drawImmediately:function(Q,n,x){if(Q){var b=this.getGL();if(!b)return!1;Se(b,Q),this._42(n,x),me(b)}else this._42(n,x)},_4IQ:function(Q){this._4JQ=Q,this.iv()},syncRenderState:function(){var Q;(Q=this._frameState)&&(Q=Q.renderState)&&Q.syncLoss()},drawReflectors:function(Q){Q._renderInfo.reflectDepth++;var n,x,b=this._dataModel.getReflectors(),J=!1;for(n in b)x=b[n],this.isVisible(x)&&(x=this.getData3dUI(x))&&x.drawReflector&&x.drawReflector(Q)&&(J=!0);return Q._renderInfo.reflectDepth--,J},isReflecting:function(Q){return Q._renderInfo.reflectDepth},isRenderSceneForBloom:function(){var Q=this.getGL();return!!Q&&!!Q._blooming},getPostProcessing:function(){return this._postProcessing},enablePostProcessing:function(Q,n){return this._postProcessing.enableModule(Q,n)},getPostProcessingModule:function(Q){return this._postProcessing.getModule(Q)},getPostProcessingValue:function(Q,n){return(Q=this._postProcessing.getModule(Q))?Q[n]:n5},setPostProcessingValue:function(Q,n,x){var b=this.getPostProcessingValue(Q,n),J=this._postProcessing.getModule(Q);J&&b!==x&&("enable"===n?this.enablePostProcessing(Q,x):J[n]=x,this.firePropertyChange("postProcessing."+Q+"."+n,b,x))},setDofImageFromGraphView:function(Q,n,x){return this._postProcessing.getModule("Dof").setImageFromGraphView(Q,n,x)},setViewport:function(Q,n,x,b,J){this._viewport=[n,x,b,J],E5.for(Q).directState().viewport=this._viewport},getRenderState:function(){return E5.for(this._26I)},genProgramDefines:function(){var Q=this,n=(n=Q.getEnvmap())&&n.length,x=((n={NUM_DIR_LIGHTS:Q._dirs.length,NUM_SPOT_LIGHTS:Q._spots.length,NUM_POINT_LIGHTS:Q._59O.length,MAX_BOX_CLIPPER:Q._boxClippers.length,MAX_FLOW_OBJECT:Q._flowObjects.length,FOG:!Q._fogDisabled,FOG_EXP2:"exp2"===Q.getFogMode(),UV_CLIP:!!Q._uvClipEnabled,USE_ENVMAP:!!n,ENVMAP_TYPE_CUBE_UV:"legacy"!==Q.getEnvmapType(),DASH:!Q._dashDisabled,ENVMAP_ROTATE:null!=Q._envmapExtraQuaternion,BATCHCOLOR:!Q._batchColorDisabled,BATCHINSTANCE:!Q._batchInstancedDisabled,BATCHBLEND:!Q._batchBlendDisabled,BATCHBRIGHTNESS:!Q._batchBrightnessDisabled})[N8[Q.getFlowBlendMode()]||N8[b5.graph3dViewFlowBlendMode]]=!0,Q.shadowMap.enable&&Q.shadowMap.genShaderDefine(n),Q._glPrograms);return x&&x.genPhysicalProgramKeyOfScene(Q._programDefines=n),n},getViewport:function(){return this._viewport},setBufferGCInterval:function(Q){this._bufferGCInterval=Q},setShaderGCInterval:function(Q){this._shaderGCInterval=Q},_doBufferGC:function(Q,n){var x,b,J=Q._4NQ,L=0,f=0,V=Q._renderInfo.frame,l=this._bufferGCInterval||10;for(x in J)L++,(b=J[x])&&(n||V-b._fid>l?(Q.deleteBuffer(b._buf),b._buf=null,J[x]=null):f++);if(f<L/2&&128<L){var H={};for(x in J)J[x]&&(H[x]=J[x]);Q._4NQ=H}Q._validBufCount=f},_swapLineMap:function(){var Q=this;z5=Q._polylineModelMap,Q._polylineModelMap=Q._polylineModelMapSwap,Q._polylineModelMapSwap=z5,z5=Q._wireframeModelMap,Q._wireframeModelMap=Q._wireframeModelMapSwap,Q._wireframeModelMapSwap=z5,z5=Q._polylineIndexMap,Q._polylineIndexMap=Q._polylineIndexMapSwap,Q._polylineIndexMapSwap=z5,z5=Q._wireframeIndexMap,Q._wireframeIndexMap=Q._wireframeIndexMapSwap,Q._wireframeIndexMapSwap=z5},_updateSkybox:function(Q){var n,x,b,J,L,f,V,l,H;this._skybox&&Q&&(Q=Q.property,n=!1,x=this._skybox,"eye"!==Q&&"forceUpdate"!==Q||(b=this._camera?this._camera.getEye():this._eye,x.p3(b[0],b[1],b[2]),n=!0),"near"!==Q&&"far"!==Q&&"forceUpdate"!==Q&&"asceptChanged"!==Q||(b=(b=x.__cachedS3__)||(x.__cachedS3__=x.getFinalScale3d()),Q=L5(b[0],b[1],b[2])/2,J=("sphere"===x.s("shape3d")?J5(b[0],b[1],b[2]):r5(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]))/2,L=this._near,f=this._far,H=Math.tan(this.getFovy()/2)*L,V=this.getAspect()*H,V=r5(V*V+H*H+L*L),V=1.01*J5(V,r5(3)*L),l=1,Q<V?l=V/Q:f<=J&&(l=f*f/(L+f)/J),1!==l&&(x.__updatingSkybox__=!0,H=b.map(function(Q){return l*Q}),x.s3(H),x.setScale3d(1,1,1),n=!0,delete x.__updatingSkybox__)),n&&this.invalidateData(x))},getSkyBox:function(){return this.getSkybox()},setSkyBox:function(Q){return this.setSkybox(Q)},getSkybox:function(){return this._skybox},setSkybox:function(n){var x,Q=this._skybox;Q===n?n&&this._updateSkybox({property:"forceUpdate"}):(Q&&(this._skyboxStyleMap&&Q.setStyleMap(this._skyboxStyleMap),this._skyboxStyleMap=null,this._skyboxAnchor3d&&Q.setAnchor3d(this._skyboxAnchor3d),this._skyboxAnchor3d=null,this._skyboxP3&&Q.p3(this._skyboxP3),this._skyboxP3=null,this.handleDataModelChange({kind:Di,data:Q})),this._skybox=n,this.ump(this._updateSkybox,this),n&&(n.removeFromDataModel(),this._skyboxStyleMap=d.Default.clone(n.getStyleMap()),this._skyboxAnchor3d=n.getAnchor3d(),n.setAnchor3d(.5,.5,.5),this._skyboxP3=n.p3().slice(0),n.s({"shape3d.reverse.flip":!0,"shape3d.reverse.cull":!1,"all.reverse.flip":!0,"all.reverse.cull":!1,"front.reverse.flip":!0,"front.reverse.cull":!1,"back.reverse.flip":!0,"back.reverse.cull":!1,"left.reverse.flip":!0,"left.reverse.cull":!1,"right.reverse.flip":!0,"right.reverse.cull":!1,"top.reverse.flip":!0,"top.reverse.cull":!1,"bottom.reverse.flip":!0,"bottom.reverse.cull":!1}),x=n.onPropertyChanged,n.onPropertyChanged=function(Q){x.call(n,Q),!n.__updatingSkybox__&&0<=["width","height","tall","scale","scaleTall"].indexOf(Q.property)&&(n.__cachedS3__=n5)},this.mp(this._updateSkybox,this),this._updateSkybox({property:"forceUpdate"})),this.fp("skybox",Q,n))},drawSky:function(Q,n){var x,b,J,L,f,V,l,H,I,Z,E,a=this,o=a._skybox;o&&(J=b=0,a._camera&&!1===a._camera.s("camera.skybox.blur")||(b=o.s("skybox.blur.size"),J=o.s("skybox.blur.resolution"),0===b&&0===J||(V=J||a.getDevicePixelRatio(),a._blurRTT||(a._blurRTT=new oO.RenderTarget(a,null,null,{})),L=a.getWidth()*V,V=a.getHeight()*V,a._blurRTT.setSize(Q,L,V),x=q7(a._viewport),a.setViewport(Q,0,0,L,V),a._blurRTT.bind(Q))),L=E5.for(Q).directUniforms(),V=a._headlightIntensity,f=sh(a._headlightColor),n=a._prg,1!==V&&(f=[f[0]*V,f[1]*V,f[2]*V]),L.uHeadlightColor=[f[0],f[1],f[2],1],(V=a.getData3dUI(o))&&((H=(l=a.isOrtho())||this._computedProjectMatrix)&&(I=a._projectMatrix,l&&(a._ortho=!1),L.uProjectMatrix=a._projectMatrix=Ws(a,!0)),E=o.p3(),Z=(this._camera||this).getEye(),E[0]===Z[0]&&E[1]===Z[1]&&E[2]===Z[2]||(o._position.x=Z[0],o._54O=Z[1],o._position.y=Z[2]),V.validate(),V._42(Q,n,$),H&&(l&&(a._ortho=!0),L.uProjectMatrix=a._projectMatrix=I)),Q.clear(256),L.uHeadlightColor=[f[0],f[1],f[2],a._headlightDisabled?1:0],0===b&&0===J||(a._blurRTT.unbind(Q),0!==b&&(E=a.getPostProcessingModule("Blur"))&&E.drawImpl(Q,a._blurRTT,b,!1,4<b?4:2<b?3:1<b?2:1),a.setViewport(Q,x[0],x[1],x[2],x[3]),a.renderModel(null,{type:"blitScreen",image:a._blurRTT.texture,defines:{DITHERING:!1}},{clear:!1})))},getLogicalPoint:function(Q){return nS(Q,this._canvas)},isRectOverlapping:function(Q){return this.getData3dUI(Q)._rectOverlapping},getHitFaceInfo:function(Q){Q.target&&(Q=this.lp(Q));var n=this.getDataInfoAt(Q);return n&&(Q=this.intersectObject(Q,n.data))?{data:n.data,face:Q.part}:x5},unproject:function(Q,n){var x=this.getWidth(),b=this.getHeight(),x=((Q=Q.target?this.lp(Q):Q).x-x/2)/x*2,Q=-1*(Q.y-b/2)/b*2,b=(n=n||0,$S()),J=Ws(this),L=$s(this);return Zs(b,J,L),ls(b),[(J=MS([x,Q,n,1],b))[0]/J[3],J[1]/J[3],J[2]/J[3]]},getDataAt:function(Q){return(Q=this.getDataInfoAt(Q))?Q.data:x5},getDataInfoAt:function(Q,n,x){return Q.target&&(Q=this.lp(Q)),this._1o.get(x_(Q.x,Q.y,n),!0,x)},getDataInfoDuringInteract:function(Q,n){var x=this.getDataInfoAt(Q);if(!this.isBlockSelectable()||!x||!x.data)return x;if(!n&&this.isSelected(x.data))return x;for(var b=x.data;(b=b.getParent())&&b instanceof d.Block&&this.isSelectable(b);){var J=this.isSelected(b);if(J&&n)break;if(x={data:b,part:x.part},J&&!n)break}return x},getDatasInRect:function(Q,n){return this._1o.get(Q,!1,n)},setEditable:function(Q){var n=this._editable;this._editable=Q,this.fp(BZ,n,Q)},isEditable:function(Q){return Q?!!this._editable&&!!v(Q)&&!!Q.s("3d.editable")&&(!this._editableFunc||this._editableFunc(Q)):this._editable},isSelectable:function(Q){return Q.s("3d.selectable")&&this.sm().isSelectable(Q)},isMovable:function(Q){return(!Z_(Q)||Q.getStyle(gi)===Fi)&&!!Q.s("3d.movable")&&(!this._movableFunc||this._movableFunc(Q))},isSizeEditable:function(Q){return!!v(Q)&&(!this._sizeEditableFunc||this._sizeEditableFunc(Q))},isRotationEditable:function(Q){return!(!v(Q)||!1===Q.IRotatable)&&(!this._rotationEditableFunc||this._rotationEditableFunc(Q))},handleDelete:function(Q){this._editable&&this.removeSelection()},zoomIn:function(Q){this.setZoom(G7,Q)},zoomOut:function(Q){this.setZoom(1/G7,Q)},setZoom:(_v=new I5,$v=new I5,Wv=new I5,Dv=new I5,function(Q,n){if(1!==Q){var x=this;x._14o&&x._14o.stop(!0);var b,J=1/Q,L=(_v.copy(x.getCenter()),$v.copy(x.getEye()),x._ortho);if(L){if((b=x._orthoWidth)<x._moveStep&&1<Q)return}else if(_v.distanceTo($v)<x._moveStep&&J<1)return;var f=!1;if(!1===x._zoomToCenter&&x._lastZoomLP&&(Wv.copy($v).sub(_v).normalize(),x._81O=null,Dv.copy(x.getHitPosition(x._lastZoomLP,_v.toArray(),Wv.toArray())),f=!0,x._lastZoomHit=Dv),n=__(n))return n.action=function(Q){x.fi({kind:x._zooming?"betweenZoom":"beginZoom"}),x._zooming=1,Q=(J-1)*Q+1,L&&x.setOrthoWidth(b*Q),f?(x.setEye(Wv.lerpVectors(Dv,$v,Q).toArray()),x.setCenter(Wv.lerpVectors(Dv,_v,Q).toArray())):L||x.setEye(Wv.lerpVectors(_v,$v,Q).toArray())},n._37o=function(){delete x._14o,delete x._zooming,x.fi({kind:"endZoom"}),x.onZoomEnded()},x._14o=y7(n);L&&x.setOrthoWidth(b*J),f?(x.setEye(Wv.lerpVectors(Dv,$v,J).toArray()),x.setCenter(Wv.lerpVectors(Dv,_v,J).toArray())):L||x.setEye(Wv.lerpVectors(_v,$v,J).toArray())}}),setOrthoZoom:function(Q,n){return this.setZoom(Q,n)},getPositionInfo:function(Q){var n=this._eye,x=this._center,b=this.getAspect(),Q=Q?_S(BS(x,n,!0),BS(Q,n)):S7(n,x);return this._ortho?{length:Q,height:(n=this._orthoWidth)/b,width:n}:{length:Q,height:x=y5(this._fovy/2)*Q*2,width:x*b}},getCenterInfo:function(){return this._81O||(this._81O=this.getPositionInfo()),q7(this._81O)},rotate:function(x,b,Q,J){var L=this;if(x||b){J==x5&&(J=L._firstPersonMode),L._88O&&L._88O.stop(!0);var n=L._center,f=L._eye,V=L.getCenterInfo().length,l=J?n:f,H=J?f:n,I=BS(l,H),Z=K5(I[0],I[2]),E=K5(r5(I[0]*I[0]+I[2]*I[2]),I[1]),a=J?Ji:Li;if(J&&(b=-b),Q=__(Q))return Q.action=function(Q){L.fi({kind:L._rotating?"betweenRotate":"beginRotate"}),L._rotating=1;var n=Z+x*Q,Q=E+b*Q,Q=J?w-bs(L,w-Q):bs(L,Q);I[0]=V*V5(Q)*V5(n),I[1]=V*f5(Q),I[2]=V*V5(Q)*f5(n),l[0]=H[0]+I[0],l[1]=H[1]+I[1],l[2]=H[2]+I[2],L.fp(a,x5,l)},Q._37o=function(){delete L._88O,delete L._rotating,L.fi({kind:"endRotate"}),L.onRotateEnded()},L._88O=y7(Q);Z+=x,E+=b,E=J?w-bs(L,w-E):bs(L,E),I[0]=V*V5(E)*V5(Z),I[1]=V*f5(E),I[2]=V*V5(E)*f5(Z),l[0]=H[0]+I[0],l[1]=H[1]+I[1],l[2]=H[2]+I[2],L.fp(a,x5,l)}},pan:function(Q,n,x,b){if(Q||n){var J,L,f=this;b==x5&&(b=f._firstPersonMode),f._89O&&f._89O.stop(!0);var Q=[(V=$s(f))[0]*Q,V[4]*Q,V[8]*Q],V=[V[1]*n,V[5]*n,V[9]*n],l=Q[0]+V[0],H=Q[1]+V[1],I=Q[2]+V[2],Z=f._center,E=f._eye;if(b&&(n=EO(f.getBoundaries(),E[0],E[2],E[0]+l,E[2]+I,r5(l*l+I*I)),l=n[0],I=n[1]),x=__(x))return J=q7(E),L=q7(Z),x.action=function(Q){f.fi({kind:f._panning?"betweenPan":"beginPan"}),f._panning=1,Z[0]=L[0]+l*Q,Z[1]=L[1]+H*Q,Z[2]=L[2]+I*Q,E[0]=J[0]+l*Q,E[1]=J[1]+H*Q,E[2]=J[2]+I*Q,f.fp(Li,x5,E),f.fp(Ji,x5,Z)},x._37o=function(){delete f._89O,delete f._panning,f.fi({kind:"endPan"}),f.onPanEnded()},f._89O=y7(x);Z[0]+=l,Z[1]+=H,Z[2]+=I,E[0]+=l,E[1]+=H,E[2]+=I,f.fp(Li,x5,E),f.fp(Ji,x5,Z)}},walk:function(n,Q,x){if(n){var b,J,L=this,f=(x==x5&&(x=L._firstPersonMode),L._90O&&L._90O.stop(!0),L._center),V=L._eye,l=BS(f,V,!0);if(x){if(x=EO(L.getBoundaries(),V[0],V[2],V[0]+l[0]*n,V[2]+l[2]*n,P5(n)),!(n=S7(x)))return;l=[x[0]/n,0,x[1]/n]}if(Q=__(Q))return b=q7(V),J=q7(f),Q.action=function(Q){L.fi({kind:L._walking?"betweenWalk":"beginWalk"}),L._walking=1,Q*=n,V[0]=b[0]+l[0]*Q,V[1]=b[1]+l[1]*Q,V[2]=b[2]+l[2]*Q,f[0]=J[0]+l[0]*Q,f[1]=J[1]+l[1]*Q,f[2]=J[2]+l[2]*Q,L.fp(Li,x5,V),L.fp(Ji,x5,f)},Q._37o=function(){delete L._90O,delete L._walking,L.fi({kind:"endWalk"}),L.onWalkEnded()},L._90O=y7(Q);V[0]+=l[0]*n,V[1]+=l[1]*n,V[2]+=l[2]*n,f[0]+=l[0]*n,f[1]+=l[1]*n,f[2]+=l[2]*n,L.fp(Li,x5,V),L.fp(Ji,x5,f)}},handleScroll:function(Q,n){u7(Q);var x=this,b=x._moveStep,J=x.getDataInfoAt(Q);if((J=J&&J.data)&&x.isInteractive(J)){var L=x.intersectObject(Q,J);if(L&&(L=L.part,(L=g(J.s(L+".image")||J.s("shape3d."+L+".image")||J.s("all.image")||J.s("shape3d.image")))&&S(L.scrollable,J,x)))return}x.isFirstPersonMode()?x.isPannable()&&x.pan(0,0<n?b:-b):x.isZoomable()&&(x._lastZoomLP=x.lp(Q),x.setZoom(n<0?1/_7:_7),x._lastZoomLP=x._lastZoomHit=null)},handlePinch:function(Q,n){!this.isZoomable()||Math.abs(Q-n)<b5.pinchZoomThreshold||this.setZoom(Q<n?1/$7:$7)},reset:function(Q){this.setUp(b5.graph3dViewUp),this.moveCamera(b5.graph3dViewEye,b5.graph3dViewCenter,Q)},moveSelection:function(Q,n,x){this.dm().beginTransaction(),D1(this.sm().toSelection(this.isMovable,this),Q,n,x),this.dm().endTransaction()},getMoveMode:function(Q,n){return(n=n.s("3d.move.mode"))?n:s7(Q)||cj[88]&&cj[89]&&cj[90]?"xyz":cj[88]&&cj[89]?"xy":cj[88]&&cj[90]?"xz":cj[89]&&cj[90]?"yz":cj[88]?"x":cj[89]?"y":cj[90]?"z":"xz"},handleTick:function(){var Q,n=this,x=!1,b=n._moveStep,J=b,L=-1*n._rotateStep;n.isWalkable()||(J=0),n.isPannable()||(b=0),n.isRotatable()||(L=0),n._32Q&&(J*=Q=(kj()-n._32Q)/50,b*=Q,L*=Q),n._31Q&&(c7(n._31Q),delete n._31Q,delete n._32Q),Mh()&&n.pan(-b,0,!(x=!0),!0),ih()&&n.pan(b,0,!(x=!0),!0),rh()&&(x=!0,s7()?n.pan(0,b,!1,!0):n.walk(J,!1,!0)),th()&&(x=!0,s7()?n.pan(0,-b,!1,!0):n.walk(-J,!1,!0)),Ph()&&n.rotate(-L,0,!(x=!0),!0),Fh()&&n.rotate(L,0,!(x=!0),!0),ch()&&n.rotate(0,-L/2,!(x=!0),!0),qh()&&n.rotate(0,L/2,!(x=!0),!0),x&&(n._32Q=kj(),n._31Q=P7(n.handleTick,n))},handleKeyDown:function(Q){!X7(Q)&&Uh[Q.keyCode]?this.handleTick():Ah(Q)?this.selectAll():uh(Q)?this.handleDelete(Q):wh(Q)&&this.isResettable()&&this.reset()},checkDoubleClickOnNote:function(Q,n,x){if(x===ei){if(n.s("note.toggleable"))return n.s(zi,!n.s(zi)),this.fi({kind:"toggleNote",event:Q,data:n,part:x}),!0}else if(x===vi&&n.s("note2.toggleable"))return n.s(si,!n.s(si)),this.fi({kind:"toggleNote2",event:Q,data:n,part:x}),!0;return!1},checkDoubleClickOnRotation:function(Q,n,x){return x===_u?(n.setRotationX(0),!0):x===$u?(n.setRotationY(0),!0):x===Wu&&(n.setRotationZ(0),!0)},onRotateEnded:function(){},onWalkEnded:function(){},getViewRatio:function(Q){if(this.isOrtho())return this.getWidth()/this.getOrthoWidth();var n=this.getCenter(),x=this.getHeight(),b=this.getEye(),n=[n[0]-b[0],n[1]-b[1],n[2]-b[2]],Q=[Q[0]-b[0],Q[1]-b[1],Q[2]-b[2]];return x*Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])*(1/Math.tan(this.getFovy()/2))/(Q[0]*n[0]+Q[1]*n[1]+Q[2]*n[2])},inViewSpace:function(Q){var n,Q=this._transformPointToViewSpace(Q),x=this.getAspect(),b=this.getNear(),J=this.getFar();return!(-Q[2]<b||-Q[2]>J)&&(this.isOrtho()?(n=this.getOrthoWidth()/2,Math.abs(Q[0])<=n&&Math.abs(Q[1]*x)<=n):(n=Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]+Q[2]*Q[2])*Math.tan(this.getFovy()/2),Math.abs(Q[1]<=n)&&Math.abs(Q[0])<=n*x))},getPVMatrix:function(){var Q;return(Q=this._18Q)||(Q=Ws(this),this._18Q=Zs(Q,Q,$s(this)),this._18Q._wh=this.getWidth()/2/this.getHeight()),Q},getFrustum:(ov=new X,Bv=new z1,Gv=new Array(16),function(){for(var Q=this.getPVMatrix(),n=!1,x=0;x<16;x++)Q[x]!==Gv[x]&&(n=!0,Gv[x]=Q[x]);return n&&Bv.setFromMatrix(ov.fromArray(Q)),Bv}),toViewPosition:function(Q){var n=this.getWidth()/2,x=this.getHeight()/2,b=this.getPVMatrix();return{x:n+n*(Q=MS([Q[0],Q[1],Q[2],1],b))[0]/Q[3],y:x-x*Q[1]/Q[3],z:Q[2]/Q[3]}},getHitPosition:function(Q,n,x){var b=this.getWidth(),J=this.getHeight(),L=(Q=Q.target?this.lp(Q):Q).x-b/2,Q=Q.y-J/2,f=this.getCenterInfo(),V=$s(this),b=(n=n||[0,0,0],x=x||[0,1,0],L=L/b*f.width,Q=-1*Q/J*f.height,[V[0]*L,V[4]*L,V[8]*L]),J=[V[1]*Q,V[5]*Q,V[9]*Q],f=[b[0]+J[0],b[1]+J[1],b[2]+J[2]],L=this.getCenter();return Ls(this,n,x,[f[0]+L[0],f[1]+L[1],f[2]+L[2]])||[0,0,0]},intersectObject:function(Q,n){return this._raycaster.intersectObject(Q,n)},intersectObjects:function(Q,n,x){return this._raycaster.intersectObjects(Q,n,x)},serializePhysicalShader:function(){var Q=this.getGL();if(Q){var n,x,b=Q._programs,J=[];for(x in b)!(n=b[x]._shaderParams)||"pbr"!==n.type&&"phong"!==n.type||J.push(n);return b5.stringify(J,0,!0)}},deserializePhysicalShader:function(Q){var Q=b5.parse(Q),n=this,x=n._glPrograms,b=n._programDefines;Q.forEach(function(Q){n._programDefines=Q.gvDefines,x.acquireProgram(Q)}),n._programDefines=b},getLineLength:function(Q){return this.validate(),(Q=this.getData3dUI(Q))&&Q.getCache&&(Q=Q.getCache())?Q[Q.length-1].length:0},getLineOffset:function(Q,n){var x=this.getData3dUI(Q);if(x&&x.getCache&&(x=x.getCache())){var b,x=w8(x,n);if(Q.s("shape3d")!==Gi)return x;if(Q.getScale3d&&1===(J=Q.getScale3d())[0]&&1===J[1]&&1===J[2]&&(J=null),!(b=Q.r3&&0===(b=Q.r3())[0]&&0===b[1]&&0===b[2]?null:b)&&!J)return x;var J,n=new I5(Q.p3()),L=new I5(x.point).sub(n),x=new I5(x.tangent).add(L);return J&&(J=new I5(J),L.multiply(J),x.multiply(J)),b&&(J=(new dK).setFromEuler(new mK(b,Q.getRotationMode(),!0)),L.applyQuaternion(J),x.applyQuaternion(J)),{point:L.clone().add(n),tangent:x.sub(L).normalize()}}return x5},_genBatchInstancedArrayFunc:function(){var Q=this._glCapabilities&&this._glCapabilities.instancedArray&&!this._batchInstancedDisabled,V=Q?KO:UO,b=(this.batchInstancedModel=function(Q,n,x,b,J,L,f){V(this,Q,n,x,b,J,L,f)},Q?vO:OO),L=(this.batchInstancedShapeFace=function(Q,n,x){b(Q,n,x)},Q?dO:hO);this.batchInstancedFace=function(Q,n,x,b,J){L(this,Q,n,x,b,J)}},isLabelVisible:function(Q){return!0},isNoteVisible:function(Q){return!0},moveCamera:function(Q,n,x){var b=this,J=[(J=b.getEye())[0],J[1],J[2]],L=[(L=b.getCenter())[0],L[1],L[2]];if(Q=Q||J,n=n||L,b._flyAnim&&b._flyAnim.stop(!0),!(x=__(x)))return b.setEye(Q[0],Q[1],Q[2]),b.setCenter(n[0],n[1],n[2]),delete b._flyAnim,!0;var f=[Q[0]-J[0],Q[1]-J[1],Q[2]-J[2]],V=[n[0]-L[0],n[1]-L[1],n[2]-L[2]];return x.action=function(Q){b.setCenter(L[0]+V[0]*Q,L[1]+V[1]*Q,L[2]+V[2]*Q),b.setEye(J[0]+f[0]*Q,J[1]+f[1]*Q,J[2]+f[2]*Q)},x._37o=function(){delete b._flyAnim},b._flyAnim=y7(x)},flyTo:(Lv=new I5,fv=new I5,Vv=new I5,lv=new I5,Hv=new I5,Iv=new X,Zv=new d.Math.Quaternion,Ev=new mK,av=new XK,function(Q,n,x){var b,J,L=this,f=(n=("boolean"==typeof n?{animation:n}:n)||{}).center,V=n.distance,l=n.direction,H=n.worldDirection,I=x||n.ratio||.8,Z=n.xRatio||I,I=n.yRatio||I,E=((x!==n5||n.duration||n.frames)&&(n={animation:n}),[]),x=V===n5;if(f&&Vv.fromArray(f),!f||x)if((Q=1===(Q=Q||L.dm().getDatas()).length?I_(Q)?Q.get(0):Q[0]:Q)instanceof d.Node)f||Vv.fromArray(Q.p3()),x&&(Ra(E,L,Q),b=E.length);else{if(!Q.length)return;if(!(!x&&f||(E=[],Q.forEach(function(Q){Ra(E,L,Q)}),b=E.length)))return;f||(av.setFromPoints(E),Vv.copy(av.min).add(av.max).multiplyScalar(.5))}L._flyAnim&&L._flyAnim.stop(!0),Lv.fromArray(L.getEye()),fv.fromArray(L.getCenter()),L.setCenter(Vv.x,Vv.y,Vv.z),lv.subVectors(Lv,fv),(l||H)&&(!H&&Q instanceof d.Node?Zv.setFromEuler(Ev.set(Q.r3(),Q.getRotationMode(),!0)):Zv.set(0,0,0,1),f=lv.length(),lv.fromArray(H||l).applyQuaternion(Zv).setLength(f));var a=new I5(L.getUp()),o=s.fequal(a.x,0,1e-5)&&s.fequal(a.z,0,1e-5),B=(o&&0===lv.x&&0===lv.z&&(Q=lv.y,lv.y=.999*Q,lv.z=.001*Math.sign(Q)),0);if(x){var G,_,$,W=Z,D=I;if(Hv.copy(lv),L.isOrtho()){var A=-1/0;for(L._eye[0]=lv.x+Vv.x,L._eye[1]=lv.y+Vv.y,L._eye[2]=lv.z+Vv.z,G=Ws(L),Zs(G,G,$s(L)),J=0;J<b;J++)$=E[J],_=MS([$.x,$.y,$.z,1],G),A=Math.max(A,Math.max(Math.abs(_[0])/W,Math.abs(_[1])/D));B=L.getOrthoWidth()*A}else{for(var u,M,v=L.getNear(),t=10;t--;){for(L._eye[0]=lv.x+Vv.x,L._eye[1]=lv.y+Vv.y,L._eye[2]=lv.z+Vv.z,G=Ws(L),Zs(G,G,$s(L)),u=!0,M=-1/0,J=0;J<b;J++){if($=E[J],(_=MS([$.x,$.y,$.z,1],G))[3]<v&&t){lv.multiplyScalar(2),u=!1;break}M=Math.max(M,Math.max(Math.abs(_[0])/W,Math.abs(_[1])/D)-_[3])}if(u)break}lv.setLength(M+lv.length())}lv.manhattanLength()<1e-6&&lv.copy(Hv)}else lv.setLength(V);var i,r,P,c,F,q,w,y,K,U,e,O,H=lv.add(Vv);return(l=__(n.animation))?(L.setEye(Lv.x,Lv.y,Lv.z),L.setCenter(fv.x,fv.y,fv.z),f=H.clone().sub(Vv),(i=f.length())&&f.multiplyScalar(1/i),Q=Lv.clone().sub(fv),(r=Q.length())&&Q.multiplyScalar(1/r),x=(new X).lookAtDirection(Q,a),Z=(new X).lookAtDirection(f,a),P=(new dK).setFromRotationMatrix(x),c=(new dK).setFromRotationMatrix(Z),F=(new I5).subVectors(Vv,fv),B&&(q=L.getOrthoWidth()),w=new I5,y=new I5,K=new I5,U=l.action,e=l._37o,O=fv.clone(),l.action=function(Q,n){y.copy(O).addScaledVector(F,Q);var x=P.clone().slerp(c,Q);w.set(0,0,1).applyQuaternion(x).setLength(r+(i-r)*Q).add(y),K.set(0,1,0).applyQuaternion(x),L.setCenter(y.x,y.y,y.z),L.setEye(w.x,w.y,w.z),L.setUp(K.x,K.y,K.z),B&&L.setOrthoWidth((B-q)*Q+q),U&&U(Q,n)},l._37o=function(){delete L._flyAnim;var Q=L.getUp(),n=o?b5.graph3dViewUp:a.toArray();Q[0]===n[0]&&Q[1]===n[1]&&Q[2]===n[2]||L.setUp(n),e&&e()},{lastEye:Lv,lastCenter:fv,eye:H,center:Vv,orthoWidth:B,animation:L._flyAnim=y7(l)}):(L.setEye(H.x,H.y,H.z),L.setCenter(Vv.x,Vv.y,Vv.z),B&&L.setOrthoWidth(B),delete L._flyAnim,{lastEye:Lv,lastCenter:fv,eye:H,center:Vv,orthoWidth:B})}),getBoundingBox:(Jv=new X,function(Q){if(0===(Q=(Q=Q||this.sm().getSelection())instanceof d.Node?[Q]:Q).length)return x5;var x=[],n=(Q.forEach(function(Q){var n;v(Q)&&(n=x,Jv.fromArray(FS(Q,this.getMat(Q))),Q=Q.getAnchor3d(),n.push((new I5).set(0-Q.x,0-Q.y,0-Q.z).applyMatrix4(Jv)),n.push((new I5).set(0-Q.x,0-Q.y,1-Q.z).applyMatrix4(Jv)),n.push((new I5).set(0-Q.x,1-Q.y,0-Q.z).applyMatrix4(Jv)),n.push((new I5).set(0-Q.x,1-Q.y,1-Q.z).applyMatrix4(Jv)),n.push((new I5).set(1-Q.x,0-Q.y,0-Q.z).applyMatrix4(Jv)),n.push((new I5).set(1-Q.x,0-Q.y,1-Q.z).applyMatrix4(Jv)),n.push((new I5).set(1-Q.x,1-Q.y,0-Q.z).applyMatrix4(Jv)),n.push((new I5).set(1-Q.x,1-Q.y,1-Q.z).applyMatrix4(Jv)))},this),[1/0,1/0,1/0]),b=[-1/0,-1/0,-1/0];return x.forEach(function(Q){n[0]=Math.min(Q.x,n[0]),n[1]=Math.min(Q.y,n[1]),n[2]=Math.min(Q.z,n[2]),b[0]=Math.max(Q.x,b[0]),b[1]=Math.max(Q.y,b[1]),b[2]=Math.max(Q.z,b[2])}),{min:n,max:b}}),isShaderCompileParallel:function(){return!!this._parallelShaderCompile},enableShaderCompileParallel:function(){var Q=this.getGLExtensions();return!!Q&&!!Q.get("KHR_parallel_shader_compile")&&void(this._parallelShaderCompile=!0)},disableShaderCompileParallel:function(){this._parallelShaderCompile=!1},setBatchInfo:function(Q,n){var x=this._batchInfoMap[Q];this._batchInfoMap[Q]=n,this.fp("batchInfo",x,n)},getBatchInfo:function(Q){return this._batchInfoMap[Q]||ij[Q]},getStaticInstancingKey:function(Q,n){if(!n&&(b=Q._lastInstancingKey))return b;var x,n=Q.s("shape3d"),b=V_(n)?x=(x=n.uuid)?x:n.uuid=s.generateUUID():n;return b+=(Q._flipSide?"_1_":"_0_")+Q.s("static.group"),Q._lastInstancingKey=b},setOrthoWidth:function(Q){var n,x,b,J=this._orthoWidth;this._orthoWidth=Q,this._syncEyeWithOrthoWidth&&(n=Q/this.getAspect()/2/y5(this.getFovy()/2),x=(new I5).fromArray(this.getEye()),b=(new I5).fromArray(this.getCenter()),x.sub(b).setLength(n).add(b),this.setEye(x.toArray())),this.fp("orthoWidth",J,Q)},getCamera:function(Q){var n=this,x=((Q=(Q=Q||n._mainCamera)||(n._mainCamera=new d.Camera)).s({"camera.type":n.isOrtho()?"ortho":"perspective","camera.aspect":n.getAspect(),"camera.fovy":n.getFovy(),"camera.ortho.width":n.getOrthoWidth(),"camera.near":n.getNear(),"camera.far":n.getFar()}),n.getEye());return Q.p3(x.slice()),Q.lookAt(n.getCenter(),n.getUp()),Q},syncFromCamera:function(Q){var n=this,x=new I5(n.getEye()),b=new I5(n.getCenter()),J=new I5,L=b.sub(x).length(),f=(n.setEye(Q.p3()),Q.getEuler());return J.set(0,0,-1).applyEuler(f),x.copy(J).setLength(L).add(b.copy(Q.p3())),n.setCenter(x.toArray()),x.set(0,1,0).applyEuler(f),b.set(0,1,0),Math.abs(J.cross(x).dot(b))<1e-5?n.setUp(b.toArray()):n.setUp(x.toArray()),n.setOrtho("ortho"===Q.s("camera.type")),n.setAspect(Q.s("camera.aspect")),n.setFovy(Q.s("camera.fovy")),n.setOrthoWidth(Q.s("camera.ortho.width")),n.setNear(Q.s("camera.near")),n.setFar(Q.s("camera.far")),!0},resetHeadlightProperties:function(){this._headlightColor=b5.graph3dViewHeadlightColor,this._headlightIntensity=b5.graph3dViewHeadlightIntensity,this._headlightRange=b5.graph3dViewHeadlightRange,this._headlightDirection=b5.graph3dViewHeadlightDirection,this._headlightGroup=b5.graph3dViewHeadlightGroup,this._headlightAmbientIntensity=b5.graph3dViewHeadlightAmbientIntensity,this._headlightDisabled=b5.graph3dViewHeadlightDisabled,this._headlightRatioForPhysicalMaterial=b5.graph3dViewHeadlightRatioForPhysicalMaterial},resetFogProperties:function(){this._fogDisabled=b5.graph3dViewFogDisabled,this._fogMode=b5.graph3dViewFogMode,this._fogDensity=b5.graph3dViewFogDensity,this._fogColor=b5.graph3dViewFogColor,this._fogNear=b5.graph3dViewFogNear,this._fogFar=b5.graph3dViewFogFar},_gatherRenderLayersByPriority:function(Q){if(Q||!(this._renderLayerSettingsVersion>=bG)){var n,x=this,b=(x._renderLayerSettingsVersion=bG,x._sortedRenderLayers=e.keys(x._renderLayerInfoMap));for(n in JG)0<=b.indexOf(n)||b.push(n);b.sort(function(Q,n){return x.getRenderLayerInfo(Q).priority-x.getRenderLayerInfo(n).priority})}},setRenderLayerInfo:function(Q,n){VG(0,Q,this._renderLayerInfoMap);var x,b=this.getRenderLayerInfo(Q),Q=q7(b);for(x in n)"mask"!==x&&(b[x]=n[x]);this._gatherRenderLayersByPriority(!0),this.fp("renderLayerInfo",Q,b)},getRenderLayerInfo:function(Q){return this._renderLayerInfoMap[Q]||JG[Q]},setRenderLayerInfoMap:function(Q){var n,x=this._renderLayerInfoMap;for(n in this._renderLayerInfoMap={},Q)this.setRenderLayerInfo(n,Q[n]);this.fp("renderLayerInfoMap",x,this._renderLayerInfoMap)},getRenderLayerInfoMap:function(){return this._renderLayerInfoMap},getRenderLayerKeys:function(){return this._sortedRenderLayers}}),b5.registerTextureLoader=function(Q){Mv?Mv.push(Q):Mv=[Q]},b5.unregisterTextureLoader=function(Q){if(Mv)return 0<=(Q=Mv.indexOf(Q))&&(Mv.splice(Q,1),0===Mv.length&&(Mv=null),!0)},function(Q,n){return(5131!==n||Q.isWebGL2()?n:null!==(Q=Q._glExtensions.get("OES_texture_half_float"))?Q.HALF_FLOAT_OES:null)||5121}),Qu=function(Q,n,x){if(!Q.isWebGL2())return n;var b=n;return 6403===n&&(5126===x&&(b=33326),5131===x&&(b=33325),5121===x&&(b=33321)),33319===n&&(5126===x&&(b=33328),5131===x&&(b=33327),5121===x&&(b=33323)),6407===n&&(5126===x&&(b=34837),5131===x&&(b=34843),5121===x&&(b=32849)),6408===n&&(5126===x&&(b=34836),5131===x&&(b=34842),5121===x&&(b=32856)),33325!==b&&33326!==b&&34842!==b&&34836!==b||Q._glExtensions.get("EXT_color_buffer_float"),b},nu=s.newIdGenerator(),xu=(e.assign(oO.Graph3dView.prototype,{getTextureMap:function(){return this._2O},setTexture:function(Q,n,x){var b;x=x||"",(b=(b=this._2O[Q])?b:this._2O[Q]={})[x]=n},deleteTexture:function(Q){if(this._2O){var n=this._2O[Q];if(n){delete this._2O[Q];var x,b=this.getGL();for(x in n)b.deleteTexture(n[x])}}},invalidateCachedTexture:function(Q,n){var x=this.getData3dUI(Q).invalidateCachedTexture(this.getGL());!1===n&&!x||this.invalidateData(Q)},invalidateShape3dCachedImage:function(Q){this.invalidateCachedTexture(Q)},getTextureFromLoader:function(Q){if(Mv)for(var n,x=0,b=Mv.length;x<b;x++)if((n=Mv[x]).checkType(Q))return n.getTexture(this,Q)},getGLTextureFromLoader:function(Q){var n=this.getTextureFromLoader(Q);return n&&(n=this.createTexture(n),this.setTexture(Q,n),n)},getPrefabBoneTexture:function(Q){var n=this._26I;return n?n._4KQ[Q._4LQ||(Q._4LQ=nu.next())]:null},setPrefabBoneTexture:function(Q,n){var x=this._26I;return x?(x._4KQ[Q._4LQ||(Q._4LQ=nu.next())]=n,!0):null},textureToCanvas:(tv={type:"blitScreen",defines:{USE_LINEAR:!0}},iv={type:"blitScreen"},function(Q,n,x,b){var J=ge(Q)?Q:this.getTextureFromLoader(Q);if(J&&(x=x||J.width,b=b||J.height,x&&b))return(J=(n=n===n5?"linear"===J.colorSpace:n)?tv:iv).image=Q,n=new Lu(this,x,b),this.renderModel(n,J),n.releaseTexture(),J.image=null,n.toCanvas()}),createTexture:function(Q,n){var x,b,J,L,f=this.getGL(),V=Ue,l=C8(this,Q.type),H=Q.format||V.RGBA,I=Qu(this,H,l);if(Q.image?(x=(J=Q.image).naturalWidth||J.width,b=J.naturalHeight||J.height,!J||"VIDEO"!==J.tagName&&(!x||!b)):(L=!0,J=Q.data,x=Q.width,b=Q.height,J===n5||!x||!b))return f._emptyTexture;var Z=Q.minFilter||Q.filter||V.LINEAR,E=Q.magFilter||Q.filter||V.LINEAR;return n=n||f.createTexture(),f.activeTexture(33984),ts(f,n),f.pixelStorei(37440,!0===Q.flipY),f.pixelStorei(37441,!1),L?f.texImage2D(V.TEXTURE_2D,0,I,x,b,0,H,l,J):f.texImage2D(V.TEXTURE_2D,0,I,H,l,J),is(f,10240,E),!s.isPOT(x)||!s.isPOT(b)||Q.clampToEdge||J&&J.clampToEdge?(is(f,10242,V.CLAMP_TO_EDGE),is(f,10243,V.CLAMP_TO_EDGE),is(f,V.TEXTURE_MIN_FILTER,Z)):(is(f,10242,V.REPEAT),is(f,10243,V.REPEAT),is(f,V.TEXTURE_MIN_FILTER,9728===Z?9984:9987),Q.mipmapMaxLevel!==n5&&this.isWebGL2()&&is(f,33085,Q.mipmapMaxLevel),f.generateMipmap(V.TEXTURE_2D)),ts(f,x5),n},getTexture:function(Q,n,x,b){if(!Q)return x5;var J,L=this,f=L.getGL(),V=L._2O[Q];if(!(J=V?V[(I=n?n.s("texture.mipmap.max"):I)||""]||V.default:J)&&null===(J=L.getGLTextureFromLoader(Q)))return f._emptyTexture;if(!J){if(!(V=g(Q)))return f._emptyTexture;if(b=b||{},n&&(b.mipmapMaxLevel=I=n.s("texture.mipmap.max"),H=n.s("texture.wrap"),b.clampToEdge="clampToEdge"===H||"repeat"!==H&&n5,b.flipY=n.s("texture.flipY")),V.uuid||(V.uuid=d.Math.generateUUID()),V.tagName){if(V.dynamic)return(H=f._dynamicTexturePool[V.uuid])||(H=f._dynamicTexturePool[V.uuid]=f.createTexture()),As(L,f,V,H,b);J=As(L,f,V,n5,b),L.setTexture(Q,J,I)}else{var l,H=n&&(n.s("texture.cache")||n.s("shape3d.image.cache")||V.textureCache),I=L.isVRPresenting();if(I&&n&&(n._textureUpdateFrame===f._renderInfo.frame?H=!0:n._textureUpdateFrame=f._renderInfo.frame),H&&(J=(l=L.getData3dUI(n)).getCachedTexture(x))&&l.interactiveInfo&&J.interactiveInfo&&(l.interactiveInfo[J.interactiveInfo.key]=J.interactiveInfo.info),!J){var Z=f._renderInfo.textureCache;if(H){if(Z.time>b5.graph3dMaxVectorCacheTime)return L.redraw(),f._emptyTexture;if(!M7(V,n))return f._emptyTexture}n&&(1!==n.s("texture.scale")?_=n.s("texture.scale"):1!==n.s("shape3d.texture.scale")&&(_=n.s("shape3d.texture.scale")));var E,a,o,B,G,_=_||1,$=(D=n&&(n.s("fixSizeOnScreen")||n.s("shape3d.fixSizeOnScreen")))?9728:9729;D?"number"==typeof D&&(_*=D<0?1:D):n&&(n.s("vector.dynamic")||n.s("shape3d.vector.dynamic"))&&(D=(l=l||L.getData3dUI(n)).getVectorDynamicSize());"billboard"===(W=n&&n.s("shape3d"))?E=n.getTall()/n.getWidth():"plane"===W&&(E=n.getHeight()/n.getWidth());var W=kS(V,n),D=D?(o=H?L._devicePixelRatio||Q7:L.getDevicePixelRatio(),a=0<D[0]?D[0]*o:_*W*o,0<D[1]?D[1]*o:_*(E?NS(V,n,L,Math.min(4096,W*E)):NS(V,n))*o):(a=_*W,_*(E?NS(V,n,L,Math.min(4096,W*E)):NS(V,n)));1<=a&&1<=D&&(o=0,(H||I)&&(o=Date.now()),_=L._glCapabilities.maxTextureSize,a=Math.min(a,_),D=Math.min(D,_),W=dh(a,D),(l=!l&&n?L.getData3dUI(n):l)&&l.interactiveInfo&&("object"==typeof(B=Q)&&(B=B.uuid||(B.uuid=d.Math.generateUUID())),G=l.interactiveInfo[B]={},W.interactiveInfo=G.bodyInfo={compInfos:[],matrix:new vK,rect:{x:0,y:0,width:a,height:D}}),jS(W,V,0,0,a,D,n,L),W.interactiveInfo&&(W.interactiveInfo=null),W.restore(),Z.count++,Z.pixels+=a*D,n?(b.minFilter=aO(n.s("texture.filter.min")||n.s("texture.filter"))||$,b.magFilter=aO(n.s("texture.filter.mag")||n.s("texture.filter"))||$):b.minFilter=b.magFilter=$,H||I?(J=As(L,f,vh,null,b),l&&l.setCachedTexture(J,x),Z.time+=Date.now()-o,G&&(J.interactiveInfo={key:B,info:G}),vh=null):J=As(L,f,vh,L._1O,b))}}}return J}}),(((x=oO.EnvmapRenderer=function(Q){this.gv=Q,this._envmaps={},this._envmapHash={},this._probeCaptureTime={},this._envmapPoolCachedByImage=[],this._pingPongRenderTarget=null,this._equirectMaterial=null,this._blurMaterial=null,this._lastCaptureFrame=0,this._cubemapMaterial=null,this._envmapIntensity={}}).prototype={}).constructor=x).prototype.changeEnvmapType=function(Q){"legacy"===Q?(this.setEnvmapByProbeId=this.setEnvmapLegacy,this.onBeforeRender=this.onBeforeRenderLegacy):(this.setEnvmapByProbeId=this.setEnvmap,this.onBeforeRender=this.onBeforeRenderNew)},x.prototype.invalidateEnvmap=function(Q){var n=this.gv;"legacy"!==n.getEnvmapType()&&n.getGL()&&(Q?(delete this._envmapHash[Q],delete this._probeCaptureTime[Q]):(this._envmapHash={},this._probeCaptureTime={}),n.iv())},x.prototype.contextLost=function(){var Q=this;Q._envmaps={},Q._envmapPoolCachedByImage=[],Q._envmapHash={},Q._pingPongRenderTarget=null,Q._equirectMaterial=Q._cubemapMaterial=Q._blurMaterial=null,Q._hdrDynamicComposeRTT=null,Q._envmapLegacy=null,Q._lastLegacyImage=null},x.prototype.onBeforeRenderLegacy=function(Q){this.gv._picking||(this.assureTextureLegacy(Q),this.assureEnvmapPoolForImage())},x.prototype.assureTextureLegacy=function(Q){var n,x,b=this.gv.getEnvmap();b!==this._lastLegacyImage&&(this._envmapLegacy&&(Q.deleteTexture(this._envmapLegacy),this._envmapLegacy=null),b?(n=b5.getImage(b))&&n.tagName&&(n=b5.resizeImagePOT(n,!0),x=this._envmapLegacy=Q.createTexture(),Q.activeTexture(33984),Q.bindTexture(34067,x),Q.texParameteri(34067,10240,9729),Q.texParameteri(34067,10241,9729),Q.texImage2D(34069,0,6408,6408,5121,n),Q.texImage2D(34070,0,6408,6408,5121,n),Q.texImage2D(34071,0,6408,6408,5121,n),Q.texImage2D(34072,0,6408,6408,5121,n),Q.texImage2D(34073,0,6408,6408,5121,n),Q.texImage2D(34074,0,6408,6408,5121,n),Q.bindTexture(34067,Q._emptyCubeTexture),this._lastLegacyImage=b):this._lastLegacyImage=b)},x.prototype.setEnvmapLegacy=function(Q,n,x){Q.uEnvMap=this._envmapLegacy,Q.envMapIntensity=x},x.prototype.onBeforeRenderNew=function(Q){this.gv._picking||(this.assureTextureNew(Q),this.resetUniformCache(),this.assureEnvmapPoolForImage())},x.prototype.isHDR=function(Q){return"string"==typeof Q&&(Q.indexOf(".hdr")===Q.length-4||Q.indexOf(".HDR")===Q.length-4)},x.prototype.isDynamicImage=function(Q){return Q&&Q.comps&&Q.comps[0]&&"__ht_envmap_bg__"===Q.comps[0].type},x.prototype.isImageReady=function(Q){var n;if(this.isHDR(Q))n=b5.getHdrTexture(Q);else if(n=b5.getImage(Q),this.isDynamicImage(n)&&!this.isImageReady(n.comps[0].image))return!1;return n},x.prototype.assureTextureNew=function(Q){var n=this,x=n.gv,b=x.getEnvmap(),J=n._envmapHash,L=n._envmaps,f=n._envmapIntensity,Q=Q._renderInfo.frame;if(this._lastCaptureFrame>=Q||x._picking)for(V in b)H=b[V].intensity,f[V]=H==x5?1:H;else{for(var V in b){var l=b[V],H=l.intensity;switch(f[V]=H==x5?1:H,l.type){case"sphere":(o=l.image)!==J[V]&&(o?n.isImageReady(o)&&(J[V]=o,ga(L,V,n.fromEquirectangular(o))):(J[V]=o,ga(L,V,null)));break;case"cube":var I=l.images;if(I&&6===I.length&&(o=I.join(","))!==J[V]){for(var Z=!0,E=!1,a=0;a<6;a++){if(!I[a]){E=!0;break}if(!b5.getImage(I[a])){Z=!1;break}}E?(J[V]=o,ga(L,V,null)):Z&&(J[V]=o,ga(L,V,n.fromCubemap(I)))}break;case"skybox":var o,B=x.getSkybox();if(B)if((o="sphere"===(W=B.s("shape3d"))?B._id+"_"+B.s("shape3d.image"):B._id+"_"+B.s("front.image"))!==J[V]){if("sphere"===W)Z=n.isImageReady(B.s("shape3d.image"));else for(var Z=!0,G=["front","back","left","right","top","bottom"],a=0;a<6;a++)if(!b5.getImage(B.s(G[a]+".image"))){Z=!1;break}Z&&(J[V]=o,ga(L,V,n.fromSkybox()))}break;case"probe":var _,$,W=l.pos,D=l.size;(o=W[0]+"_"+W[1]+"_"+W[2]+"_"+D)!==J[V]&&(_=this._probeCaptureTime[o],$=Date.now(),_||(this._probeCaptureTime[o]=_=$),$-_>b5.envmapProbeMinWaitTime&&!Rj&&!TO||$-_>b5.envmapProbeMaxWaitTime?(delete this._probeCaptureTime[o],J[V]=o,ga(L,V,n.fromSceneProbe(W,D,l.filter))):x.iv())}}e.keys(L).forEach(function(Q){b[Q]===n5&&(delete J[Q],ga(L,Q,null))})}},x.prototype.resetUniformCache=function(){this._frameUniformCache={}},x.prototype.setEnvmap=function(Q,n,x){var b=Q.uuid,J=this._frameUniformCache,L=(L=this._envmaps[n])&&L.texture;J[b]!==L&&(J[b]=L,Q.uEnvMap=L),x&&(x*=this._envmapIntensity[n]||0),Q.envMapIntensity=x},x.prototype.assureEnvmapPoolForImage=function(){for(var Q=this._envmapPoolCachedByImage,n=0,x=Q.length;n<x;n++)Q[n][0]&&!Q[n][1]&&this.isImageReady(Q[n][0])&&(Q[n][1]=this.fromEquirectangular(Q[n][0]))},x.prototype.assureEnvmapFromEquirectangular=function(Q){for(var n,x=this._envmapPoolCachedByImage,b=0,J=x.length;b<J;b++)if(x[b][0]===Q)return(n=x[b][1])?n.texture:null;return x.push([Q,null]),this.gv.iv(),null},x.prototype.invalidateEnvmapUsedByMaterial=function(Q){if(Q)for(var n=this._envmapPoolCachedByImage,x=0,b=n.length;x<b;x++)n[x][0]===Q&&(n[x][1]=null);else this._envmapPoolCachedByImage=[];this.gv.iv()},x.prototype.isEnvmapUsedByMaterialReady=function(Q){for(var n=this._envmapPoolCachedByImage,x=Q==x5,b=0,J=n.length;b<J;b++)if(x){if(!n[b][1])return!1}else if(n[b][0]===Q)return!!n[b][1];return x},x.prototype.fromEquirectangular=function(Q){var n,x,b,J,L,f=this.isHDR(Q)?(n=d.Default.getHdrTexture(Q),"linear"):this.isDynamicImage(Q)&&this.isHDR(Q.comps[0].image)?(J=(x=Q.comps[0]).image,x.image=null,b=this.gv.getTexture(Q),x.image=J,J=this.gv.getTexture(J),L=(L=this._hdrDynamicComposeRTT)||(this._hdrDynamicComposeRTT=this._allocateTargets()),f=Q.width,this.gv.renderModel(L,f,Q.height,{type:"envmapDynamicCompose",offset:x.offset?(x.offset%1+1)%1:0,texture1:J,texture2:b}),L=L.texture,n=Q,"linear"):(n=d.Default.getImage(Q),"sRGB");return n?(this.rectSize=[1/n.width,1/n.height],Q=L||this.gv.getTexture(Q),this.fromTexture(Q,null,f)):null},x.prototype.fromCubemap=function(Q){for(var n=this.gv.getGL(),x=n.createTexture(),b=(n.activeTexture(33984),n.bindTexture(34067,x),n.texParameteri(34067,10240,9729),n.texParameteri(34067,10241,9729),[]),J=vv/3,L=0;L<6;L++)b[L]=b5.resizeImage(d.Default.getImage(Q[L]),J);return n.texImage2D(34069,0,6408,6408,5121,b[0]),n.texImage2D(34070,0,6408,6408,5121,b[1]),n.texImage2D(34071,0,6408,6408,5121,b[2]),n.texImage2D(34072,0,6408,6408,5121,b[3]),n.texImage2D(34073,0,6408,6408,5121,b[4]),n.texImage2D(34074,0,6408,6408,5121,b[5]),n.bindTexture(34067,n._emptyCubeTexture),this.fromTexture(x,!0,"sRGB")},x.prototype.fromTexture=function(Q,n,x){var b=this._allocateTargets(),J=(this._pingPongRenderTarget||(this._pingPongRenderTarget=this._allocateTargets()),this.gv),L=J.getGL(),f=E5.for(L).directState(),V=f.depth.enabled,l=(f.scissor.enabled=!0,f.depth.enabled=!1,J.getViewport(L));return this._textureToCubeUV(Q,b,n,x),this._applyPMREM(b),J.setViewport(L,l[0],l[1],l[2],l[3]),f.depth.enabled=V,f.scissor.enabled=!1,b},x.prototype.fromSkybox=function(){return this._fromCamera(function(Q){Q.s({"camera.onlySky":!0,"camera.skybox.blur":!1})})},x.prototype.fromScene=function(n){return this._fromCamera(function(Q){Q.s({"camera.onlySky":!1}),n&&n(Q)})},x.prototype.fromNode=function(Q){var n,x=this.gv.getData3dUI(Q),b=x._42,J=(x._42=hj,this.gv.getSkybox()),L=Q.p3(),Q=(J&&(n=J.p3(),J.p3(L)),this.fromScene(function(Q){Q.p3(L)}));return x._42=b,J&&J.p3(n),Q},x.prototype.fromSceneProbe=function(n,x,b){var Q,J,L=this.gv,f=L.getSkybox(),V=(f&&(Q=f.p3(),f.p3(n)),b&&(J=L.isVisible,L.isVisible=function(Q){var n=b(Q);return n!==n5?n:J.call(L,Q)}),this.fromScene(function(Q){Q.p3(n),Q.s("camera.near",x)}));return b&&(L.isVisible=J),f&&f.p3(Q),V},x.prototype._fromCamera=function(Q){var n=this.gv,x=n.getCamera(),Q=(Q&&Q(x),new Lu(n,vv,vv,{cube:!0})),b=n.getGL(),J=n.getViewport(b),L=this.setEnvmapByProbeId,f=this.onBeforeRender,x=(this.setEnvmapByProbeId=function(Q){Q.envMap=b._emptyTexture},this.onBeforeRender=hj,x.attachRenderTarget(Q),x.render(n),x.detachRenderTarget(),this.setEnvmapByProbeId=L,this.onBeforeRender=f,n.setViewport(b,J[0],J[1],J[2],J[3]),this.fromTexture(Q.texture,!0,"sRGB"));return Q.releaseTexture(),x},x.prototype._allocateTargets=function(Q){return new Lu(this.gv,3*cv,3*cv,{textureType:5131})},x.prototype._textureToCubeUV=function(Q,n,x,b){var J,L,f=this,V=f.gv,l="sRGB"===b?"USE_SRGB":"USE_LINEAR",l=(x?(null==f._cubemapMaterial&&(f._cubemapMaterial={}),null==(J=f._cubemapMaterial[l])&&((L={})[l]=!0,f._cubemapMaterial[l]=J={type:"envmapCubemap",defines:L})):(null==f._equirectMaterial&&(f._equirectMaterial={}),null==(J=f._equirectMaterial[l])&&((L={})[l]=!0,f._equirectMaterial[l]=J={type:"envmapEquirect",defines:L})),J.envMap=Q,x||(J.texelSize=f.rectSize),Kv[0]);V.renderModel(n,{model3d:!0,mesh:l,mat:J,encoding:"linear"===b?1:0},{restoreViewport:!1,preRender:function(){f._setViewport(n,0,0,3*cv,2*cv)}})},x.prototype._applyPMREM=function(Q){for(var n,x,b=1;b<qv;b++)n=Math.sqrt(ev[b]*ev[b]-ev[b-1]*ev[b-1]),x=yv[(b-1)%yv.length],this._blur(Q,b-1,b,n,x)},x.prototype._setViewport=function(Q,n,x,b,J){var L=this.gv;L.setViewport(L.getGL(),n,x,b,J),L.getRenderState().directState().scissor.box=[n,x,b,J]},x.prototype._blur=function(Q,n,x,b,J){var L=this._pingPongRenderTarget;this._halfBlur(Q,L,n,x,b,"latitudinal",J),this._halfBlur(L,Q,x,x,b,"longitudinal",J)},x.prototype._halfBlur=function(Q,n,x,b,J,L,f){var V=this,l=V.gv,H=V._blurMaterial;if("latitudinal"===L||"longitudinal"===L){H||(V._blurMaterial=H={type:"envmapBlur",defines:{n:wv}});for(var I,Z=Uv[x]-1,E=J/(Z=isFinite(J)?Math.PI/(2*Z):2*Math.PI/(2*wv-1)),a=isFinite(J)?1+Math.floor(3*E):wv,o=[],B=0,G=0;G<wv;++G)$=G/E,I=Math.exp(-$*$/2),o.push(I),0==G?B+=I:G<a&&(B+=2*I);for(G=0;G<o.length;G++)o[G]=o[G]/B;H.envMap=Q.texture,H.samples=a,H.weights=o,H.latitudinal="latitudinal"===L,f&&(H.poleAxis=f),H.dTheta=Z,H.mipInt=Pv-x;var _=Uv[b],$=3*Math.max(0,cv-2*_),W=(0===b?0:2*cv)+2*_*(Pv-rv<b?b-Pv+rv:0),J=Kv[b];l.renderModel(n,{model3d:!0,mesh:J,mat:H},{restoreViewport:!1,preRender:function(Q){V._setViewport(n,$,W,3*_,2*_)}})}},rv=4,Pv=8,cv=Math.pow(2,Pv),qv=Pv-rv+1+(Fv=[.125,.215,.35,.446,.526,.582]).length,wv=20,n=1/(x=(1+Math.sqrt(5))/2),yv=[new I5(1,1,1),new I5(-1,1,1),new I5(1,1,-1),new I5(-1,1,-1),new I5(0,x,n),new I5(0,x,-n),new I5(n,0,x),new I5(-n,0,x),new I5(x,n,0),new I5(-x,n,0)],x=function(){for(var Q=[],n=[],x=[],b=Pv,J=0;J<qv;J++){var L=Math.pow(2,b),f=(n.push(L),1/L);Pv-rv<J?f=Fv[J-Pv+rv-1]:0==J&&(f=0),x.push(f);for(var V=-(f=1/(L-1))/2,l=1+f/2,H=[],I=[],Z=[],E=0;E<6;E++){var a=E%3*2/3-1,o=2<E?0:-1;H.push(a,o,0,a+2/3,o,0,a+2/3,1+o,0,a,o,0,a+2/3,1+o,0,a,1+o,0),I.push(V,V,l,V,l,l,V,V,l,l,V,l),Z.push(E,E,E,E,E,E)}Q.push({position:new oS(H),uv:new oS(I),faceIndex:new oS(Z)}),rv<b&&b--}return{_lodPlanes:Q,_sizeLods:n,_sigmas:x}}(),Kv=x._lodPlanes,Uv=x._sizeLods,ev=x._sigmas,vv=b5.EnvmapTextureSize,b5.setCompType("__ht_envmap_bg__",function(Q,n,x,b,J){var L,f,V,l=x.image;(l=l&&b5.getImage(l))&&(L=n.x,f=n.y,V=n.width,n=n.height,0!=(x=((x.offset||0)%1+1)%1*V|0)&&(Q.save(),Q.beginPath(),Q.rect(L,f,V,n),Q.clip(),Q.translate(x,0),b5.drawImage(Q,l,L-V,f,V,n,b,J)),b5.drawImage(Q,l,L,f,V,n,b,J),0!=x&&Q.restore())}),["left","front","right","back","top","bottom"]),bu=oO._RenderList=function(F){var q=[],w=[],y={},K={},U={},e={},v={},O={},d={},h={};function p(Q){return(Q=Q&&("string"==typeof Q?b5.getMaterial(Q):Q))&&Q.transparent}return{opaque:q,transparent:w,init:function(){for(var Q in q.length=0,w.length=0,d={},h)h[Q].length=0},push:function(Q,n){if(n){var x,b,J,L,f=Q,V=f.gv,l=f.data,H=f.shapeModel;if(H)if(l.s("static")&&(G=!0),H.model3d)B=x=b=!0;else{(a=l.s("shape3d.top.material"))&&(p(a)?b=!0:x=!0),(a=l.s("shape3d.bottom.material"))&&(p(a)?b=!0:x=!0),(a=l.s("shape3d.from.material"))&&(p(a)?b=!0:x=!0),(a=l.s("shape3d.to.material"))&&(p(a)?b=!0:x=!0),(a=l.s("shape3d.material"))&&(p(a)?b=!0:x=!0);var I,Z,E=l.s("shape3d.transparent")||l.s("points.transparent");for(H_(H)||(I=S(H.transparent,l,V),H=[H]),J=0,L=H.length;J<L;J++)Z=H[J],(Z=(Z=(Z=S(Z.transparent,l,V))===n5?I:Z)===n5?E:Z)?b=!0:x=!0}for(J=0,L=xu.length;J<L;J++){var a,o=f[xu[J]];o&&((a=V.getFaceMaterial(l,xu[J]))?p(a)?b=!0:x=!0:o.transparent?b=!0:x=!0)}V.isLabelVisible(l)&&(f.labelInfo&&(l.s(Ki+".transparent")?b=!0:x=!0),f.label2Info&&(l.s(Ui+".transparent")?b=!0:x=!0)),V.isNoteVisible(l)&&(f.noteInfo&&(l.s(ei+".transparent")?b=!0:x=!0),f.note2Info&&(l.s(vi+".transparent")?b=!0:x=!0)),f._38o&&(b=x=!0),f._renderParams={opaque:x=!b||x,transparent:b,model3d:B,staticModel3d:G}}var B=(n=Q.data)._id;if(!d[B]){d[B]=!0;var G=Q._renderParams;if(G&&!1!==G.visible){if(n.isAnimationPlaying()&&(Q.shapeModel&&F.updateSkeleton(n,Q.shapeModel),n.isAnimationPaused()||F.iv()),Q={ui:Q,model3d:G.model3d,data:n,z:0,id:B},F._glCapabilities&&F._glCapabilities.instancedArray&&G.staticModel3d&&Q.ui.mat&&F.isVisible(n)&&n.s(qZ)){for(var _=F.shadowMap.enable,$=F.getStaticInstancingKey(n,!0),W=h[$],D=0!==($=(W=W||(h[$]={ms:[],ds:[],cs:[],highlightColors:[],length:0,msVersion:0,shadowVersion:0,csVersion:0,highlightVersion:0,shadow:[],cache:{version:-1,length:-1,id:-1,buffer:null},cacheShadow:{version:-1,length:-1,id:-1,buffer:null},cachePick:{version:-1,length:-1,buffer:null},cacheHighlight:{version:-1,length:-1,buffer:null}})).length),A=!1,u=16*$,M=0,t=W.ms,i=Q.ui.mat;M<16;M++)t[u+M]!=i[M]&&(A=!0,t[u+M]=i[M]);A&&(W.msVersion=W.msVersion+1),W.ds[$]=B,_&&(_=n.s("shadow.cast"),!A&&W.shadow[$]===_||(W.shadow[$]=_,W.shadowVersion=W.shadowVersion+1));for(var r=QO(null,F.pickColorMap,F.isSelectable(n),Q.ui,yi,!0),A=!1,P=4*$,M=0,c=W.cs;M<4;M++)c[P+M]!==r[M]&&(A=!0,c[P+M]=r[M]);if(A&&(W.csVersion=W.csVersion+1),W.length++,F._model3dInstancedBatchCount++,D)return void(r&&(wO(r,K[B],y),wO(r,e[B],U),wO(r,O[B],v)))}G.opaque&&q.push(Q),G.transparent&&w.push(Q)}}},getModel3dInstancedBatchMap:function(){return h},resetModel3dInstancedDraw:function(){for(var Q in h)h[Q].rendered=null},batchModelMap:y,batchIndexMap:K,polylineModelMap:U,polylineIndexMap:e,wireframeModelMap:v,wireframeIndexMap:O,beginFillHighlightMaskColor:function(Q){var n,x=F.dm();for(n in h){var b=h[n],J=b.ds;if(J&&b.length){for(var L=b.highlightColors,f=!1,V=!1,l=0,H=b.length;l<H;l++)for(var I=Q(x.getDataById(J[l]),!0)?[0,0,0,0]:(V=!0,[0,1,1,1]),Z=4*l,E=0;E<4;E++)L[Z+E]!==I[E]&&(f=!0,L[Z+E]=I[E]);f&&(b.highlightVersion=b.highlightVersion+1),b._csBackup=[b.cs,b.csVersion,b.cachePick],b.cs=b.highlightColors,b.csVersion=b.highlightVersion,b.cachePick=b.cacheHighlight,b._highlightInvalid=!V}}},endFillHighlightMaskColor:function(){for(var Q in h){var n=(Q=h[Q])._csBackup;n&&(Q.cachePick=n[2],Q.csVersion=n[1],Q.cs=n[0],Q._csBackup=n5,Q._highlightInvalid=n5)}},ivBatch:function(Q){Q?(rO(y,K,Q,F),rO(U,e,Q,F),rO(v,O,Q,F)):(y=this.batchModelMap={},K=this.batchIndexMap={},U=this.polylineModelMap={},e=this.polylineIndexMap={},v=this.wireframeModelMap={},O=this.wireframeIndexMap={}),this.markBatchInvalid()},ivModelBatch:function(Q){Q?rO(y,K,Q,F):(y=this.batchModelMap={},K=this.batchIndexMap={}),this.markBatchInvalid()},ivPolylineBatch:function(Q){Q?rO(U,e,Q,F):(U=this.polylineModelMap={},e=this.polylineIndexMap={}),this.markBatchInvalid()},ivWireframeBatch:function(Q){Q?rO(v,O,Q,F):(v=this.wireframeModelMap={},O=this.wireframeIndexMap={}),this.markBatchInvalid()},markBatchInvalid:function(){this._batchInvalid=!0},isBatchInvalid:function(){return this._batchInvalid},onUpdated:function(){this._batchInvalid=null},sort:function(Q,n,x){var b=1<w.length;if(x=x&&1<q.length,b||x){for(var J,L,f,V,l=n[2],H=n[6],I=n[10],Z=n[14],E=n[3],a=n[7],o=n[11],B=n[15],G=0;G<2;G++){if(0===G){if(!x)continue;V=q}else{if(!b)continue;V=w}for(var _=0,$=V.length;_<$;_++)(f=(L=V[_].data)._position)?(J=f.x,L=L._54O,f=f.y,V[_].z=(l*J+H*L+I*f+Z)/(E*J+a*L+o*f+B)):V[_].z=0}x&&q.sort(function(Q,n){var x=Q.model3d;return x!==n.model3d?x?1:-1:Q.z!==n.z?Q.z-n.z:Q.id-n.id}),b&&w.sort(Q||Sa)}}}},Ju=oO._RenderLists=function(b){var J={};function x(Q,n){var x=J[Q=Q||"main"];return!x&&n?J[Q]=new bu(b):x}return{init:function(){for(var Q in J)J[Q].init();b._model3dInstancedBatchCount=0},onUpdated:function(){for(var Q in J)J[Q].onUpdated()},get:x,push:function(Q,n){x(Q.data.getRenderLayer(),!0).push(Q,n)},each:function(Q){for(var n in J)Q(J[n])},lists:J}},Lu=oO.RenderTarget=function(Q,n,x,b){var J,L=this;null!=n&&n.canvas?(J=n,n=x,x=b,b=arguments[4]):J=Q.getGL(),b=b||{},b.cube?b.samples=0:b.samples=Math.min(Q._glCapabilities.maxSamples,b.samples&&1<b.samples&&2===Q._webGLVersion?b.samples:0),L.options=b,L.uuid=d.Math.generateUUID(),L.gv=Q,L.init(Q,J,b),L.format=b.format||6408,L.textureType=C8(Q,b.textureType),L.generateMipmaps=!!b.generateMipmaps,L.depthInternalFormat=b.depthFormat||33189,b.samples&&!Q._glCapabilities._maxSamplesChecked?L.setSize(J,n||1,x||1):L.setSize(J,n,x)},Qj=(e.assign(oO.RenderTarget.prototype,{bind:function(Q,n){var x,b,J,L=this.options;L.autoSize&&(x=(J=this.gv).getDevicePixelRatio(),b=J.getWidth()*x,J=J.getHeight()*x,this.setSize(Q,b,J)),L.cube?Se(Q,this.frame[n]):Se(Q,this.options.samples?this._MSAAFbo:this.frame),Q._renderTargetStack.push(this)},unbind:function(Q){Q._renderTargetStack.pop(),me(Q),this.options.samples&&(Q.bindFramebuffer(36008,this._MSAAFbo),Q.bindFramebuffer(36009,this.frame),Q.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,16384,9728),Q.bindFramebuffer(36008,null),Q.bindFramebuffer(36009,null))},isBinding:function(Q){if(!(Q=Q.frameStack)||!Q.length)return!1;var n=Q[Q.length-1];if(this.options.cube){for(var x=0;x<6;x++)if(this.frame[x]===n)return!0;return!1}return n===(this.options.samples?this._MSAAFbo:this.frame)},_blitDepthToSingle:function(Q){var n=this;if(!n.options.samples)return n.depth;var x=n._singleDepth||(n._singleDepth=Q.createRenderbuffer());return n._singleDepthWidth===n.width&&n._singleDepthHeight===n.height||(Q.bindFramebuffer(36160,n.frame),Q.bindRenderbuffer(36161,x),Q.renderbufferStorage(36161,n.depthInternalFormat,n.width,n.height),Q.framebufferRenderbuffer(36160,36096,36161,x),Q.bindRenderbuffer(36161,null),Q.bindFramebuffer(36160,null),n._singleDepthWidth=n.width,n._singleDepthHeight=n.height),Q.bindFramebuffer(36008,n._MSAAFbo),Q.bindFramebuffer(36009,n.frame),Q.blitFramebuffer(0,0,n.width,n.height,0,0,n.width,n.height,256,9728),Q.bindFramebuffer(36008,null),Q.bindFramebuffer(36009,null),x},isCube:function(){return this.options.cube},init:function(Q,n,x){var b=x.samples,J=x.cube,L=this.texture=n.createTexture(),f=J?34067:3553,L=(n.activeTexture(33984),n.bindTexture(f,L),n.texParameteri(f,10242,x.wrapS||33071),n.texParameteri(f,10243,x.wrapT||33071),b?9728:9729);if(n.texParameteri(f,10241,x.minFilter||L),n.texParameteri(f,10240,x.magFilter||L),n.bindTexture(f,null),J){this.depth=[],this.frame=[];for(var V=0;V<6;V++)this.depth[V]=n.createRenderbuffer(),this.frame[V]=n.createFramebuffer()}else this.depth=n.createRenderbuffer(),this.frame=n.createFramebuffer();this.assureTexture()},assureTexture:function(){this.gv.setTexture(this.uuid,this.texture,"default"),d.Default.setImage(this.uuid,null)},releaseTexture:function(){this.gv.deleteTexture(this.uuid)},getUUID:function(){return this.uuid},getTexture:function(){return this.texture},getSize:function(){return[this.width,this.height]},setSize:function(Q,n,x){var b=this;if(n=Math.round(n),x=Math.round(x),n&&x&&(b.width!==n||b.height!==x)){b.width=n,b.height=x;var J=36161,L=b.options.samples,f=b.options.cube,V=f?34067:3553;if(L){var l=b.gv._glCapabilities;if(!l._maxSamplesChecked){for(Q.bindRenderbuffer(J,b.depth),Q.getError();1<L&&(Q.renderbufferStorageMultisample(J,L,b.depthInternalFormat,n,x),Q.getError());)L=Math.floor(L>>1);L<=1&&(L=0,Q.texParameteri(V,10241,b.options.minFilter||9729),Q.texParameteri(V,10240,b.options.magFilter||9729),Q.renderbufferStorage(J,b.depthInternalFormat,n,x)),l._maxSamplesChecked=!0,l.maxSamples=b.options.samples=L,Q.bindRenderbuffer(J,x5)}}if(L&&(b._MSAAFbo||(b._MSAAFbo=Q.createFramebuffer(),b._MSAARbO=Q.createRenderbuffer()),Q.bindRenderbuffer(J,b._MSAARbO),Q.renderbufferStorageMultisample(36161,L,32856,n,x),Se(Q,b._MSAAFbo),Q.framebufferRenderbuffer(36160,36064,J,b._MSAARbO),Q.framebufferRenderbuffer(36160,36096,J,b.depth),me(Q),Q.bindRenderbuffer(J,null)),Q.activeTexture(33984),Q.bindTexture(V,b.texture),f)for(var H=0;H<6;H++)b.setupFrameBufferTextureAndDepth(Q,b.frame[H],b.depth[H],34069+H);else b.setupFrameBufferTextureAndDepth(Q,b.frame,b.depth,3553);b.generateMipmaps&&(2===gv._webGLVersion||s.isPOT(n)&&s.isPOT(x))&&(Q.generateMipmap(V),l=b.options.minFilter||(L?9728:9729),Q.texParameteri(V,10241,9728===l?9984:9987)),Q.bindTexture(V,null)}},setupFrameBufferTextureAndDepth:function(Q,n,x,b){var J,L=this.format,f=this.textureType;(J=this.options.data)&&(this.options.data=null),Q.texImage2D(b,0,Qu(this.gv,L,f),this.width,this.height,0,L,f,J||null),Se(Q,n),Q.framebufferTexture2D(36160,36064,b,this.texture,0),this.setupRenderBufferStorage(Q,x),me(Q)},setupRenderBufferStorage:function(Q,n){Q.bindRenderbuffer(36161,n);var x=this.options.samples;x?Q.renderbufferStorageMultisample(36161,x,this.depthInternalFormat,this.width,this.height):(Q.renderbufferStorage(36161,this.depthInternalFormat,this.width,this.height),Q.framebufferRenderbuffer(36160,36096,36161,n)),Q.bindRenderbuffer(36161,null)},readPixels:function(Q,n,x,b,J){var L,f=this.gv.getGL();Se(f,this.frame),L=5121===this.textureType?(J=J||new Uint8Array(4*x*b),5121):(J=J||new Float32Array(4*x*b),5126);try{f.readPixels(Q,n,x,b,6408,L,J)}finally{me(f)}return J},readPixelsAsync:function(Q,n,x,b,J,L){if(!this.gv.isWebGL2())throw new Error("readPixelsAsync only work on WebGL2");var f,V,l,H,I,Z,E=this.gv.getGL();Se(E,this.frame),f=5121===this.textureType?(J=J||new Uint8Array(4*x*b),5121):(J=J||new Float32Array(4*x*b),5126);try{var a=Ms(E),o=(E.bindBuffer(35051,a),E.bufferData(35051,J.byteLength,35041),E.readPixels(Q,n,x,b,6408,f,0),E.bindBuffer(35051,null),E.fenceSync(37143,0));E.flush()}finally{me(E)}V=E,l=o,H=0,I=10,Z=function(Q){E.deleteSync(o),Q&&(E.bindBuffer(35051,a),E.getBufferSubData(35051,0,J),E.bindBuffer(35051,null)),E.deleteBuffer(a),L(Q?J:null)},function Q(){var n=V.clientWaitSync(l,H,0);37149==n?Z(!1):37147==n?h5(Q,I):Z(!0)}()},toCanvas:function(Q,n){var x,b=this.width,J=this.height,L=this.readPixels(0,0,b,J),f=((n=n||E.createElement("canvas")).width!==b&&(n.width=b),n.height!==J&&(n.height=J),(x=Q?((Ov=Ov||E.createElement("canvas")).width!==b&&(Ov.width=b),Ov.height!==J&&(Ov.height=J),Ov.getContext("2d")):n.getContext("2d")).createImageData(b,J));if(L instanceof Float32Array){for(var V=L.byteLength/L.BYTES_PER_ELEMENT,l=new Uint8Array(V);0<=--V;){var H=L[V];H<0?H=0:1<H&&(H=1),l[V]=255*H}L=l}return f.data.set(L),x.putImageData(f,0,0),Q&&(x=n.getContext("2d"),i7(x,{width:b,height:J,comps:[{scaleY:-1,type:"image",name:Ov,rect:[0,0,b,J]}]},n5,0,0,b,J)),n}}),oO.Interactor=function(Q){this.gv=this.g3d=Q}),fu=(L("Interactor",e,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()},fi:function(Q){this.gv.fi(Q)},startDragging:function(Q){bS(this,Q)}}),oO.DefaultInteractor=function(Q){u_(fu,this,[Q])}),Vu=(L("DefaultInteractor",Qj,{getState:function(){return this._62O},setState:function(Q){this._62O=Q},handle_contextmenu:function(Q){u7(Q)},handle_mousewheel:function(Q){this.gv.handleScroll(Q,Q.wheelDelta/40)},handle_DOMMouseScroll:function(Q){2===Q.axis&&this.gv.handleScroll(Q,-Q.detail)},handle_keydown:function(Q){this.gv.handleKeyDown(Q)},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_touchstart:function(Q){u7(Q);var n=this,x=n.gv,b=O7(Q),J=(L=x.getDataInfoDuringInteract(Q))?L.data:x5,L=L?L.part:x5,f=x.sm(),V=Wh(Q),l=p7(Q);x.setFocus(Q)&&(n._62O=x5,n._57I=x5,n.pendingClickThrough=x5,n.__lastClientPoint__=R7(Q),J?X7(Q)?f.co(J)?f.rs(J):f.as(J):f.co(J)?J instanceof SV&&J.isClickThroughEnabled()&&O7(Q)&&(n.pendingClickThrough=R7(Q)):f.ss(J):b&&(X7(Q)?x.isRectSelectable()&&(n._62O=ji):n._57I=R7(Q)),n._31Q&&(c7(n._31Q),delete n._31Q,delete n._32Q),n._62O||(x.isFirstPersonMode()&&(s7(Q)||d7(Q)||2<l?n._62O="pan":x.isMouseRoamable()||Eh(Q)?(n._62O="roaming",n.foward=V&&O7(Q),n._32Q=kj(),n._31Q=P7(n.tick,n)):b||(n._62O="roaming")),n._62O||(b&&V&&Mu[L]?(n._62O=L,n.p3=J.p3()):b&&V&&v(J)&&x.isSelected(J)?x.isMovable(J)?(n._62O="move",n.p3=J.p3(),n.movedata=J):x._39Q(J)&&(n._62O="none"):Eh(Q)&&(2<l?n._62O="pan":2===l&&(n.dist=B1(Q),n._62O="pinch")))),n.point=x.lp(Q),bS(n,Q),z7(Q)?x.handleDoubleClick(Q,J,L):x.handleClick(Q,J,L))},tick:function(){var Q=this.gv,n=Q._moveStep;this.point&&Q.isWalkable()&&(this._32Q&&(n*=(kj()-this._32Q)/50),Q.walk(this.foward?n:-n),this._32Q=kj(),this._31Q=P7(this.tick,this))},handle_mouseup:function(Q){this.handle_touchend(Q)},handle_touchend:function(Q){var n=this._57I;n&&(S7(n,R7(Q))<=1&&this.gv.sm().cs(),this._57I=x5),(n=this.pendingClickThrough)&&(S7(n,R7(Q))<=1&&(n=this.gv.getDataInfoDuringInteract(Q))&&n.data instanceof SV&&n.data.isClickThroughEnabled()&&(n=this.gv.getDataInfoDuringInteract(Q,!0))&&(Q.clickThrough=!0,this.gv.sm().ss(n.data)),this.pendingClickThrough=null)},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(n){var x,b,Q=this,J=Q.gv,L=Q._62O,f=Q.point,V=J.dm(),l=J.lp(n),H=l.x-f.x,I=l.y-f.y,Z=J.getWidth(),E=J.getHeight();if(Z&&E){var a=R7(n),a=dG(J,a,Q.__lastClientPoint__),a=S7({x:0,y:0},a),o=-l5*H/Z,B=-l5*I/E;if("roaming"===L)Q.rotate(n,o/2,B/2);else if(L===_u||L===$u||L===Wu)J._86O||V.beginTransaction(),J.fi({kind:J._86O?"betweenEditRotation":"beginEditRotation",event:n}),J._86O=1,J.sm().each(function(Q){var n;v(Q)&&J.isRotationEditable(Q)&&(n=P5(o)>P5(B)?o:B,L===_u?Q.setRotationX(Q.getRotationX()+n):L===$u?Q.setRotationY(Q.getRotationY()+n):L===Wu&&Q.setRotationZ(Q.getRotationZ()+n))});else if("move"===L||Mu[L]){if(L===Du||L===Au||L===uu)J._87O||V.beginTransaction(),J.fi({kind:J._87O?"betweenEditScale":"beginEditScale",event:n}),J._87O=1;else{if(!J._moving){if(a<b5.touchMoveThreshold)return;V.beginTransaction()}J.fi({kind:J._moving?"betweenMove":"beginMove",event:n}),J._moving=1}var G,_,a=Q.p3,V=J.getPositionInfo(a),$=$s(J),W=L===ou?"x":L===Bu?"y":L===Gu?"z":L===Du?"sx":L===Au?"sy":L===uu?"sz":J.getMoveMode(n,Q.movedata),H=H/Z*V.width,I=-1*I/E*V.height,Z=[$[0]*H,$[4]*H,$[8]*H],E=[$[1]*I,$[5]*I,$[9]*I],V=Z[0]+E[0],$=Z[1]+E[1],Z=Z[2]+E[2],E=[a[0]+V,a[1]+$,a[2]+Z],D=BS(J.getEye(),E,!0);if("xyz"===W?(G=E,J.moveSelection(V,$,Z)):"xz"===W?(G=Ls(J,a,[0,1,0],E))&&J.moveSelection(G[0]-a[0],0,G[2]-a[2]):"xy"===W?(G=Ls(J,a,[0,0,1],E))&&J.moveSelection(G[0]-a[0],G[1]-a[1],0):"yz"===W?(G=Ls(J,a,[1,0,0],E))&&J.moveSelection(0,G[1]-a[1],G[2]-a[2]):"x"===W||"sx"===W?(D[0]=0,(G=Ls(J,a,D,E))&&(_=G[0]-a[0],"x"===W?J.moveSelection(_,0,0):J.sm().each(function(Q){v(Q)&&J.isSizeEditable(Q)&&(x=Q.getScaleX()+_/100,b=x/Q.getScaleX(),Q.setScaleX(x),s7(n)&&(Q.setScaleY(Q.getScaleY()*b),Q.setScaleTall(Q.getScaleTall()*b)))}))):"y"===W||"sy"===W?(D[1]=0,(G=Ls(J,a,D,E))&&(_=G[1]-a[1],"y"===W?J.moveSelection(0,_,0):J.sm().each(function(Q){v(Q)&&J.isSizeEditable(Q)&&(x=Q.getScaleTall()+_/100,b=x/Q.getScaleTall(),Q.setScaleTall(x),s7(n)&&(Q.setScaleY(Q.getScaleY()*b),Q.setScaleX(Q.getScaleX()*b)))}))):"z"!==W&&"sz"!==W||(D[2]=0,(G=Ls(J,a,D,E))&&(_=G[2]-a[2],"z"===W?J.moveSelection(0,0,_):J.sm().each(function(Q){v(Q)&&J.isSizeEditable(Q)&&(x=Q.getScaleY()+_/100,b=x/Q.getScaleY(),Q.setScaleY(x),s7(n)&&(Q.setScaleX(Q.getScaleX()*b),Q.setScaleTall(Q.getScaleTall()*b)))}))),!G)return;Q.p3=G}else L===ji?((V=Q.div)||(V=Q.div=p_(),g_(Q.getView(),V),V.op=f,V.style.background=J.getRectSelectBackground()),J.fi({kind:J._rectSelecting?"betweenRectSelect":"beginRectSelect",event:n}),J._rectSelecting=1,V.rect=m7(V.op,l),F(V,V.rect)):"pinch"===L&&2===p7(n)?(J.fi({kind:J._pinching?"betweenPinch":"beginPinch",event:n}),J._pinching=1,_=B1(n),J._lastZoomLP||(J._lastZoomLP=(Z=($=n).touches[0],$=$.touches[1],D=Z.clientX,Z=Z.clientY,{x:(D+$.clientX)/2,y:(Z+$.clientY)/2})),J.handlePinch(_,Q.dist),Q.dist=_):"pan"===L||s7(n)||d7(n)?Q.pan(n,H,I):"none"===L||J.isFirstPersonMode()||Q.rotate(n,o,B);Q.point=l}},pan:function(Q,n,x){var b,J,L=this.gv;L.isPannable()&&(J=L.getWidth(),b=L.getHeight(),J&&b&&(J=n/J*(n=L.getCenterInfo()).width,x=-1*x/b*n.height,L.fi({kind:L._panning?"betweenPan":"beginPan",event:Q}),L._panning=1,L.pan(-J,-x)))},rotate:function(Q,n,x){var b=this.gv;b.isRotatable()&&(b.fi({kind:b._rotating?"betweenRotate":"beginRotate",event:Q}),b._rotating=1,b.rotate(n,x))},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowTouchEnd:function(Q){var n,x,b,J,L,f=this,V=f.gv,l=V.dm(),H=f.div;H&&((n=V.getDatasInRect(H.rect)).isEmpty()||(x=V.sm(),b=x.toSelection(),J=s7(Q),L=Q.altKey,n.each(function(Q){x.co(Q)?J&&!L||b.remove(Q):(!L||J&&L)&&b.add(Q)}),x.ss(b)),JS(H)),V._moving&&(delete V._moving,V.fi({kind:"endMove",event:Q}),V.onMoveEnded(),l.endTransaction()),V._panning&&(delete V._panning,V.fi({kind:"endPan",event:Q}),V.onPanEnded()),V._rotating&&(delete V._rotating,V.fi({kind:"endRotate",event:Q}),V.onRotateEnded()),V._86O&&(delete V._86O,V.fi({kind:"endEditRotation",event:Q}),l.endTransaction()),V._87O&&(delete V._87O,V.fi({kind:"endEditScale",event:Q}),l.endTransaction()),V._pinching&&(delete V._pinching,V.fi({kind:"endPinch",event:Q}),V.onPinchEnded()),V._rectSelecting&&(delete V._rectSelecting,V.fi({kind:"endRectSelect",event:Q}),V.onRectSelectEnded()),V._walking&&(delete V._walking,V.fi({kind:"endWalk",event:Q}),V.onWalkEnded()),V._lastZoomLP=V._lastZoomHit=null,f.dist=f.point=f._62O=f.p3=f.movedata=f.div=f._57I=f.pendingClickThrough=f._32Q=f._31Q=f.foward=x5,f.__lastClientPoint__=x5}}),oO.MapInteractor=function(Q){u_(Vu,this,[Q]),this._keepHorizon=!0,this._threshold=2,this._touchScaleThreshold=.05,this._touchRotateThreshold=.03,this._touchScaleCheckAccuracy=.01,this._panButton="right",this._minPhi=0,this._maxPhi=5*Math.PI/12}),lu=(L("MapInteractor",Qj,{setUp:function(){Vu.superClass.setUp.call(this);var Q=this.gv;this.__oldMinPhi__=Q.getRotateMinPhi(),this.__oldMaxPhi__=Q.getRotateMaxPhi(),Q.setRotateMinPhi(this._minPhi),Q.setRotateMaxPhi(this._maxPhi)},tearDown:function(){Vu.superClass.tearDown.call(this);var Q=this.gv;Q.setRotateMinPhi(this.__oldMinPhi__),Q.setRotateMaxPhi(this.__oldMaxPhi__),delete this.__oldMinPhi__,delete this.__oldMaxPhi__},handle_contextmenu:function(Q){u7(Q)},handle_mousewheel:function(Q){this.gv.handleScroll(Q,Q.wheelDelta/40)},handle_DOMMouseScroll:function(Q){2===Q.axis&&this.gv.handleScroll(Q,-Q.detail)},handle_keydown:function(Q){this.gv.handleKeyDown(Q)},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_touchstart:function(Q){u7(Q);var n,x,b,J=this.gv;J.setFocus(Q)&&(n=(x=J.getDataInfoAt(Q))?x.data:x5,x=x?x.part:x5,this.__lastClientPoint__=R7(Q),b=this.editing={point:J.lp(Q),data:n,part:x},Eh(Q)?b.touch=!0:(b.touch=!1,b.clickLeft=O7(Q),d7(Q)?b.pan=!0:b.pan="left"===this.panButton===b.clickLeft),n&&J._39Q(n)&&(b.preventDefault=!0),bS(this,Q),z7(Q)?J.handleDoubleClick(Q,n,x):J.handleClick(Q,n,x))},handle_mouseup:function(Q){this.handle_touchend(Q)},handle_touchend:function(Q){},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){var n=this,J=n.gv,x=n.editing;if(x){var b=J.lp(Q),L=x.point,f=b.x-L.x,L=b.y-L.y;if(!x.moved){if(Math.abs(f)<n.threshold&&Math.abs(L)<n.threshold&&!(Q.touches&&1<Q.touches.length))return;x.moved=!0}if(!x.preventDefault){x.point=b;var V,l,H,I,Z,E,a=x.part;if(Mu[a]){var b=x.data,o=J.dm(),B=J.getWidth(),G=J.getHeight(),_=-l5*f/B,$=-l5*L/G;if(a===_u||a===$u||a===Wu){J._86O||o.beginTransaction(),J.fi({kind:J._86O?"betweenEditRotation":"beginEditRotation",event:Q}),J._86O=1;var W=P5(_)>P5($)?_:$;J.sm().each(function(Q){v(Q)&&J.isRotationEditable(Q)&&(a===_u?Q.setRotationX(Q.getRotationX()+W):a===$u?Q.setRotationY(Q.getRotationY()+W):a===Wu&&Q.setRotationZ(Q.getRotationZ()+W))})}else{var D,A,u,M,b=b.p3(),f=f/B*(i=J.getPositionInfo(b)).width,L=-1*L/G*i.height,t=[(i=$s(J))[0]*f,i[4]*f,i[8]*f],i=[i[1]*L,i[5]*L,i[9]*L],t=[b[0]+(t[0]+i[0]),b[1]+(t[1]+i[1]),b[2]+(t[2]+i[2])],i=BS(J.getEye(),t,!0);if(a===Du||a===Au||a===uu)J._87O||o.beginTransaction(),J.fi({kind:J._87O?"betweenEditScale":"beginEditScale",event:Q}),J._87O=1,(D=Ls(J,b,i,t))&&(c=0,a===Du?A="X":a===Au?(A="Tall",c=1):a===uu&&(A="Y",c=2),(u=["X","Y","Tall"]).splice(u.indexOf(A),1),M=s7(Q),P=(D[c]-b[c])/100,J.sm().each(function(n){var Q,x,b;v(n)&&J.isSizeEditable(n)&&(Q=n["getScale"+A](),n["setScale"+A](x=Q+P),M&&(b=x/Q,u.forEach(function(Q){n["setScale"+Q](n["getScale"+Q]()*b)})))}));else if(a===ou||a===Bu||a===Gu){if(!J._moving){var r=R7(Q),r=dG(J,r,n.__lastClientPoint__);if(S7({x:0,y:0},r)<b5.touchMoveThreshold)return;o.beginTransaction()}J.fi({kind:J._moving?"betweenMove":"beginMove",event:Q}),J._moving=1;var P,c=0;a===ou?c=0:a===Bu?c=1:a===Gu&&(c=2),i[c]=0,(D=Ls(J,b,i,t))&&(P=D[c]-b[c],(r=[0,0,0])[c]=P,J.moveSelection.apply(J,r))}}}else x.touch?2!==(o=Q.touches.length)?n.pan(Q,f,L):o<=1||(t=(i=Q.touches)[0].clientX,D=i[0].clientY,r={x:(b=i[1].clientX)-t,y:(c=i[1].clientY)-D},o=x.lastCenter,i=Math.atan2(r.y,r.x),V=0,(H=x.theta)==x5?H=x.theta=i:(V=i-H,x.thetaStarted||Math.abs(V)>n.touchRotateThreshold?(x.thetaStarted=!0,x.theta=i):V=0),H=w*(D+c)/2/J.getHeight(),i=0,(l=x.phi)==x5?l=x.phi=H:(i=H-l,x.phiStarted||Math.abs(i)>n.touchRotateThreshold?(x.phiStarted=!0,x.phi=H):i=0),l=Math.sqrt(r.x*r.x+r.y*r.y),(H=x.vlen)?(r=t-o.x,Z=D-o.y,E=b-o.x,o=c-o.y,r=Math.sqrt(r*r+Z*Z),Z=Math.sqrt(E*E+o*o),(o=n._sign2(r-(E=H/2)))*(r=n._sign2(Z-E))<0||0===o&&0===r?(I=1,x.vlen=l):(I=I||l/H,x.scaleStarted||Math.abs(I-1)>n.touchScaleThreshold?(x.vlen=l,x.scaleStarted=!0):I=1)):(H=x.vlen=l,I=1),1!==I&&J.setZoom(I),(i||V)&&n.rotate(Q,V,-i),x.lastCenter={x:(b+t)/2,y:(c+D)/2}):x.pan?n.pan(Q,f,L):(B=J.getWidth(),G=J.getHeight(),B&&G&&(_=-l5*f/B,$=-l5*L/G,n.rotate(Q,_,$)))}}},_sign2:function(Q){return Math.abs(Q)<this._touchScaleCheckAccuracy?0:0<Q?1:-1},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowTouchEnd:function(Q){var n,x,b=this.editing;this.editing=null,b&&(n=this.gv,b.moved||!b.clickLeft&&!b.touch?(n._panning=null,n._rotating=null,n.fi({kind:b.pan?"endPan":"endRotate",event:Q})):(x=(x=(b=n.getDataInfoDuringInteract(Q))&&b.data)instanceof SV&&x.isClickThroughEnabled()&&(b=n.getDataInfoDuringInteract(Q,!0))?b.data:x)?n.sm().setSelection([x]):n.sm().clearSelection(),b=n.dm(),n._moving&&(delete n._moving,n.fi({kind:"endMove",event:Q}),n.onMoveEnded(),b.endTransaction()),n._86O&&(delete n._86O,n.fi({kind:"endEditRotation",event:Q}),b.endTransaction()),n._87O&&(delete n._87O,n.fi({kind:"endEditScale",event:Q}),b.endTransaction()))},pan:function(Q,n,x){var b=this.gv;if(b.isPannable()){var J=b.getWidth(),L=b.getHeight();if(J&&L){var f=b.getCenterInfo(),n=-n/J*f.width,J=+x/L*f.height,x=(b.fi({kind:b._panning?"betweenPan":"beginPan",event:Q}),b._panning=1,this.keepHorizon);if(!(x=(L=this.editing.touch)&&Q.touches&&1<Q.touches.length||!L&&s7(Q)?!x:x))return b.pan(n,J);(n||J)&&(L=[(f=$s(b))[0]*n,f[4]*n,f[8]*n],Q=[f[1],0,f[9]],(x=Math.sqrt(Q[0]*Q[0]+Q[2]*Q[2]))&&(Q=[Q[0]/x*J,0,Q[2]/x*J]),n=L[0]+Q[0],f=L[1]+Q[1],x=L[2]+Q[2],J=b._center,L=b._eye,J[0]+=n,J[1]+=f,J[2]+=x,L[0]+=n,L[1]+=f,L[2]+=x,b.fp(Li,x5,L),b.fp(Ji,x5,J))}}},rotate:function(Q,n,x){var b,J,L=this.gv;L.isRotatable()&&(J=L._center,b=L._eye,b=BS(b,J),J=K5(r5(b[0]*b[0]+b[2]*b[2]),b[1]),x=bs(L,J+x)-J,L.fi({kind:L._rotating?"betweenRotate":"beginRotate",event:Q}),L._rotating=1,L.rotate(n,x))}}),e.defineProperties(Vu.prototype,{panButton:{get:function(){return this._panButton},set:function(Q){this._panButton=Q}},minPhi:{get:function(){return this._minPhi},set:function(Q){this.gv.setRotateMinPhi(this._minPhi=Q)}},maxPhi:{get:function(){return this._maxPhi},set:function(Q){this.gv.setRotateMaxPhi(this._maxPhi=Q)}},keepHorizon:{get:function(){return this._keepHorizon},set:function(Q){this._keepHorizon=Q}},threshold:{get:function(){return this._threshold},set:function(Q){this._threshold=Q}},touchScaleThreshold:{get:function(){return this._touchScaleThreshold},set:function(Q){this._touchScaleThreshold=Q}},touchRotateThreshold:{get:function(){return this._touchRotateThreshold},set:function(Q){this._touchRotateThreshold=Q}}}),oO.GlobeInteractor=function(a,Q){function b(Q){return a._81O=null,Q=a.getHitPosition(Q,a.getCenter(),Z.copy(a.getEye()).sub($.copy(a.getCenter())).toArray()),E.origin.copy(a.getEye()),E.direction.copy(Q).sub(E.origin).normalize(),E.intersectEllipsoid(W)}function o(Q,n){var x;_&&(x=Date.now(),_.deltaTime=_.lastTime?x-_.lastTime:1e3,_.lastTime=x,_.lastAxis=Q,_.lastAngle=n),n&&(J.setFromAxisAngle(Q,n),a.setEye(Z.copy(a.getEye()).applyQuaternion(J).toArray()),a.setCenter(Z.copy(a.getCenter()).applyQuaternion(J).toArray()),a.setUp(Z.copy(a.getUp()).applyQuaternion(J).toArray()))}function B(Q){return Math.abs(Q)<.01?0:0<Q?1:-1}u_(lu,this,[a]);var L,G=Q.radius||6378137,V=this,_=null,J=(dv||((dv=p_()).style.border="",dv.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEyUlEQVRYR62XW0xcVRSG/58cmIG2HmstE9N4SX2xtVqBCISoFS/RmDSpKQSvTWNixUStQSqVyBQYJUGttrQVtYkPatuQPmhivMUHqbUBZ2itl1qjTzZpImNUZhDLsUeWWXgOOd2cgcGyk3mYs/de69trr70uxP8YIlJKMi0i9wIgyf0iEiM5PFdxzGeDiBQAuB7AjQBuALCN5NcGQDmANgBfeL8UyYnZ5M8KICJ3AXgAwAlfOMl/VHAQwPtveYAKuQLA2yQ/ngliRgAR2QogA2AvSdcUZAIE50VEYR4BsIDkC7kgQgFE5GIAuwDsJnkk1+aZAPw9IqLX1gjgcZK/m7KmAXjK4wBaSf4ZplxEIgCuA3Cz3gSAfgDHSf6dY/0FAJ4D0G5ChAEcAPBwmHIRqXNd90nLsiocx/k+k8n8oK/Atu2rIpHIStd1v7QsawfJd0Ouywawh6T609Q4B8C788NhZnddt29sbGxBd3f39q6urtNhJ43H48uam5u3lJSUjFiWdV8IxE0Aqki+6M9NAXjefjnJXsOZogBGBgYGttbU1Hw427PS+cHBwbVVVVUJAItJOoa8xwD8RPIT/T4J4L3zfQAeNL1dRMZra2ur+/v7/8pHub+mvr7+wr6+vs8KCgoWGABFAN4EsEHjhA9QBeA2ks8HF6vZk8nkQL4nNwGTyeTa8vLycsuy7jcg1Mk/IpnyAZoBaOQ6FHg+ddlsdqNt201zObm5NpvN7ly0aNHrJN8LyL4FwGqSr/gAOrnej3C60HXdw/F4PJ7L4fKFSiQSl7W0tLQVFRWtCQDoNRwguZ6aWABcorE9sEDf+QjJ1fkqmmmdiHwHoCToXyKiceR0rkhY5TjOq9FoVLPdeY/x8fG+SCSySe/cFKYWCFOyPJ1Or4zFYh3nrR3A8PBwe2lp6TcAfg4DmBYwAFyRTqdXxWKx9nkE+DYUIEyBiFQ6jvNaNBq9Zz4AZruCGIBlJI8ZXpolee18AORwwgoAp/xnqMmjPuilZ8+ePZRIJNo7OztD436+YB0dHZe2trY+W1hYWGsccD/JOh/gKQBHSWpanRwicnc2m91k2/bmfJWFrRsdHd29cOHCXSTfD8i+FcA1JHcEQ/HtJDVnTw3XdfcPDQ0dra6unto8F5hUKrWurKxslWVZG4L7RGQbgA9IDgWT0VsANprJaGJi4kxDQ8OagwcPjsxFeWNj49Le3l6N91qMTA2vmNnr6fovGXkmvxPAlST3hGz4LZVKbausrMzLEnryioqKNpJLzCpJRJ4AcJLkp6rHLEieBjBA8rB5Wtd1942NjS3p6el5qa2t7VSYNdThmpqaWoqLi38xze4dUku4CpLb/f1hJZnWBY+SzJpKRGSdV5LVOI5zIpPJnNQ1tm2viEQiV7uue8SyrJeDDhew8GIAO0me4w9hABdp8ahNBkktyacNr+Qu84pSndfX81VY6e6dXJV3AoiT/CMoMFcyUogeAG+Q/DyX8+VZlqvZHwKw2VQ+zQdCTL4FwBkPZFrJPUtjoildG5PC4J2bOvJpze7QWhHAj4HWbBImpDXTQsPvH5cDeMf39lxWnBXAU6TNqcZu7fn0lyB53GhOdf6ZQHN6bF6a0xxOuJTkrwbA5LdcJ831/V8SOUYQxYGhRwAAAABJRU5ErkJggg==)"),new dK),Z=new I5,$=new I5,l=new I5,E=new sK,f="number"==typeof G?{x:G,y:G,z:G}:G,W={center:new I5(0,0,0),radius:f};V._showCrossIcon=function(Q){g_(V.getView(),dv),F(dv,{x:Q.clientX-16,y:Q.clientY-16,width:32,height:32})},V._hideCrossIcon=function(){JS(dv)},V._scrollImpl=function(Q,n){(_={point:a.lp(Q),screen:R7(Q),hit:b(Q),type:"right"}).hitNormalize=_.hit?_.hit.clone().normalize():new I5,Q={clientX:_.screen.x,clientY:_.screen.y+10*n},V._handleMoveImpl(Q),V._endMoveImpl(Q)},V._startMoveImpl=function(Q){L&&(L.stop(!0),L=null),(_={point:a.lp(Q),screen:R7(Q),hit:b(Q)}).hitNormalize=_.hit?_.hit.clone().normalize():new I5,Eh(Q)?1===Q.touches.length?_.hit&&(_.type="left"):2===Q.touches.length&&(_.type="touch2"):(O7(Q)?_.hit&&(_.type="left"):h7(Q)?_.type="right":d7(Q)&&_.hit&&(_.type="middle"),!_.hit||"right"!==_.type&&"middle"!==_.type||V._showCrossIcon(Q)),_.type&&bS(V,Q)},V._handleMoveImpl=function(Q){if(_)switch(_.type){case"left":return V._handleLeft(Q);case"right":return V._handleRight(Q);case"middle":return V._handleMiddle(Q);case"touch2":return V._handleTouch2(Q)}},V._endMoveImpl=function(Q){var x,b,J;_&&(this._hideCrossIcon(),"left"!==_.type&&"middle"!==_.type||(x=_.lastAngle/(_.deltaTime||30)*1e3,b=_.lastAxis,J=_.lastTime,L=y7({action:function(){var Q=Date.now(),n=(Q-J)/1e3;J=Q,x*=Math.pow(Math.abs(V.decelerationRate),3*n),Math.abs(x)<.01?(x=0,L&&L.stop()):o(b,x*n)},duration:5e3})),_=null)},V._handleLeft=function(Q){if(!_.finished){var n=R7(Q),x=function(Q,n){a._81O=null,E.origin.copy(a.getEye());for(var x,b,J=a.getCenter(),L=Z.copy(a.getEye()).sub($.copy(a.getCenter())).toArray(),f=1,V=16,l=0,H=1,I={x:0,y:0};V--;){if(I.x=n.x+(Q.x-n.x)*f,I.y=n.y+(Q.y-n.y)*f,x=a.getHitPosition(I,J,L),E.direction.copy(x).sub(E.origin).normalize(),(b=E.intersectEllipsoid(W))&&1===f)return{hit:b};b?l=f:H=f,f=(l+H)/2}return{hit:b,out:f<1}}(n,_.lastScreen||_.screen);if(_.lastScreen=n,!x.hit)return _.finished=!0,void V._endMoveImpl(Q);(n=x.hit).normalize();var b=_.hitNormalize,J=Math.acos(n.dot(b));o(n=n.cross(b).normalize(),J),x.out&&(_.finished=!0,V._endMoveImpl(Q))}},V._handleRight=function(Q){var n,x=(_.lastScreen||_.screen).y;(Q=(_.lastScreen=R7(Q)).y-x)&&(x=Math.min(.5,Q*V.scaleSpeed),Z.copy(a.getEye()),Q=(Q=_.hit)||Z.clone().divide(f).normalize().multiply(f),$.copy(Z).lerp(Q,x),a.setEye($.toArray()),Z.copy(a.getUp()),$.normalize(),Q=Z.clone().cross($).normalize(),l.copy(a.getCenter()),l.sub(Q.multiplyScalar(l.dot(Q))),a.setCenter(l.toArray()),_.hit&&(x=b(_.screen),Q=_.hitNormalize,x&&(x.normalize(),n=Math.acos(x.dot(Q)),x=x.cross(Q).normalize(),n&&o(x,n))))},V._handleTouch2=function(Q){var n,x,b,J,L,f,V,l,H,I,Z,E;2===Q.touches.length&&(n=(Q=Q.touches)[0].clientX,x=Q[0].clientY,E={x:(b=Q[1].clientX)-n,y:(Q=Q[1].clientY)-x},I=_.lastCenter,f=Math.atan2(E.y,E.x),J=0,(L=_.theta)==x5?L=_.theta=f:(J=f-L,_.thetaStarted||.03<Math.abs(J)?(_.thetaStarted=!0,_.theta=f):J=0),L=Math.sqrt(E.x*E.x+E.y*E.y),(f=_.vlen)?(Z=n-I.x,l=x-I.y,H=b-I.x,I=Q-I.y,Z=Math.sqrt(Z*Z+l*l),l=Math.sqrt(H*H+I*I),(I=B(Z-(H=f/2)))*(Z=B(l-H))<0||0===I&&0===Z?(V=1,_.vlen=L):(V=V||L/f,_.scaleStarted||.05<Math.abs(V-1)?(_.vlen=L,_.scaleStarted=!0):V=1)):(f=_.vlen=L,V=1),E=$.copy(a.getEye()).clone(),1!==V&&a.setEye(E.setLength((E.length()-G)/V+G).toArray()),J&&o(E.normalize(),J),_.lastCenter={x:(b+n)/2,y:(Q+x)/2})},V._handleMiddle=function(Q){var Q=R7(Q),n=_.screen,x=((_.screen=Q).y-n.y)/180*Math.PI*V.rollSpeed,b=($.copy(a.getCenter()).sub(Z.copy(a.getEye())).normalize(),Z.copy(a.getUp()).cross($).normalize(),$.copy(a.getEye()).sub(_.hit).applyAxisAngle(Z,x).add(_.hit),$.clone()),J=($.copy(a.getCenter()).sub(_.hit).applyAxisAngle(Z,x).add(_.hit),$.clone()),L=$.copy(a.getUp()).applyAxisAngle(Z,x).clone(),f=!1,x=(0<x&&(l.copy(L),$.copy(J).sub(b).normalize(),Z.copy(b).multiplyScalar(-1).normalize(),0<Z.dot(l)-$.dot(l)&&(f=!0)),f||0<=l.copy(_.hit).sub(b).dot(_.hitNormalize)&&(f=!0),f||(a.setEye(b.toArray()),a.setCenter(J.toArray()),a.setUp(L.toArray())),-(Q.x-n.x)/180*Math.PI*V.rotateSpeed);o(_.hitNormalize,x)}}),Hu=(L("GlobeInteractor",Qj,{handle_contextmenu:function(Q){u7(Q)},handle_mousewheel:function(Q){this._scrollImpl(Q,Q.wheelDelta/40)},handle_DOMMouseScroll:function(Q){2===Q.axis&&this._scrollImpl(Q,-Q.detail)},handle_keydown:function(Q){this.gv.handleKeyDown(Q)},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_touchstart:function(Q){u7(Q);var n,x,b=this.gv;b.setFocus(Q)&&((n=(x=b.getDataInfoAt(Q))?x.data:x5)&&b.isInteractive(n)||this._startMoveImpl(Q),x=x?x.part:x5,z7(Q)?b.handleDoubleClick(Q,n,x):b.handleClick(Q,n,x))},handle_mouseup:function(Q){this.handle_touchend(Q)},handle_touchend:function(Q){},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){this._handleMoveImpl(Q)},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowTouchEnd:function(Q){this._endMoveImpl(Q)}}),e.defineProperties(lu.prototype,{rotateSpeed:{get:function(){return this._rotateSpeed||.3},set:function(Q){this._rotateSpeed=Q}},rollSpeed:{get:function(){return this._rollSpeed||.1},set:function(Q){this._rollSpeed=Q}},scaleSpeed:{get:function(){return this._scaleSpeed||.002},set:function(Q){this._scaleSpeed=Q}},decelerationRate:{get:function(){return this._decelerationRate||.04},set:function(Q){this._decelerationRate=Q}}}),function(Q){return[((Q|=2147483648)>>16&255)/255,(Q>>8&255)/255,(255&Q)/255,(Q>>24&255)/255]}),Iu=function(Q){this.gv=Q,this.gv.pickColorMap={_pickIdUsed:2e3}},Zu=(HS(Iu,e,{_iv:!0,iv:function(){this._iv=!0},get:function(Q,n,x){this.validate();var b=this.gv.getGL();if(!b)return x5;var J,L,f=this._resolution,V=Math.round(Q.x*f),l=Math.ceil(Q.width*f),H=Math.ceil(Q.height*f),Q=this.height-Math.round(Q.y*f)-H,I=t5(l/2),Z=new Uint8Array(l*H*4),E=0,a=Z.length,o=n?x5:new m,B=n?x5:{};if(Se(b,this.frame),b.readPixels(V,Q,l,H,6408,5121,Z),me(b),n){for(;E<=I;E++)for(var G=I-E,_=I+E,$=G;$<=_;$++)for(var W=G;W<=_;W++)if(($===G||$===_||W===G||W===_)&&(J=this.info(Z,4*($*l+W)))&&(!x||!1!==x(J)))return J}else for(;E<a;E+=4)!(J=this.info(Z,E))||x&&!1===x(J)||B[(L=J.data)._id]||(o.add(L),B[L._id]=L);return o},info:function(Q,n){return this.gv.pickColorMap[(Q[n]<<16)+(Q[n+1]<<8)+Q[n+2]+((127&Q[n+3])<<24)]},getResolution:function(){return this._resolution},onContextLost:function(){this.texture=null,this.width=this.height=-1},validate:function(Q){var n,x,b,J=this,L=J.gv,f=L.getGL();f&&(x=J._resolution=L._pickerResolution*L.getDevicePixelRatio(),n=Math.round(x*L.getWidth()),x=Math.round(x*L.getHeight()),J.texture||(J.texture=As(L,f),J.render=f.createRenderbuffer(),J.frame=f.createFramebuffer()),J.width===n&&J.height===x||(f.activeTexture(33984),ts(f,J.texture),f.texImage2D(3553,0,6408,n,x,0,6408,5121,x5),is(f,10241,9729),f.bindRenderbuffer(36161,J.render),f.renderbufferStorage(36161,33189,n,x),Se(f,J.frame),f.framebufferTexture2D(36160,36064,3553,J.texture,0),f.framebufferRenderbuffer(36160,36096,36161,J.render),ts(f,x5),f.bindRenderbuffer(36161,x5),me(f),J.width=n,J.height=x),J._iv&&(b=J._iv=!1,L._40Q.each(function(Q){!b&&Q.isBatchInvalid()&&(b=!0)}),b&&L.updateScene(),Se(f,J.frame),f.clear(16384),L.overlappingBox.clear(),L.setViewport(f,0,0,n,x),L.renderPickScene(),me(f)))}}),function(Q){this.gv=Q}),Eu=(HS(Zu,e,{gap:0,size:0,_42:function(Q){var n,x=this,b=x.gv,J=b._gridGap,L=b._gridSize;if(b._gridVisible){if(x.gap!==J||x.size!==L){for(var f=[],V=b._gridSize/2,l=J*V,H=0;H<2*V+1;H++){var I=6*H,Z=6*(2*V+1)+I;f[I]=-l,f[1+I]=0,f[2+I]=H*J-l,f[3+I]=l,f[4+I]=0,f[5+I]=H*J-l,f[Z]=H*J-l,f[1+Z]=0,f[2+Z]=-l,f[3+Z]=H*J-l,f[4+Z]=0,f[5+Z]=l}x.vs=new oS(f),x.gap=J,x.size=L}js(b),ys(Q),vs(Q),(L=!b._fogDisabled)&&((n=E5.for(Q).directUniforms()).uFog=!1),hs(Q,1,b._gridColor,b._buffer.vs,x.vs),zs(Q,0,x.vs.length/3,1),L&&(n.uFog=!0),Os(Q),Ks(Q)}else x.vs=x.gap=x.size=x5}}),function(Q){this.gv=Q}),au=(HS(Eu,e,{_42:function(Q){var n,x,b,J,L=this.gv,f=L._buffer.vs,V=L._axisXColor,l=L._axisYColor,H=L._axisZColor,I=L._originAxisVisible,Z=L._centerAxisVisible;(I||Z)&&(x=X5?4:6,js(L),ys(Q),vs(Q),I&&(b=L.getCenterInfo(),J=L5(b.width,b.height)/5,hs(Q,1.5,V,f,new oS([0,0,0,J,0,0,I=.8*J,n=.05*J,0,I,0,n,I,-n,0,I,0,-n,I,n,0,0,0,0,0,J,0,n,I,0,0,I,n,-n,I,0,0,I,-n,n,I,0,0,0,0,0,0,J,n,0,I,0,n,I,-n,0,I,0,-n,I,n,0,I])),zs(Q,0,2,1),zs(Q,1,6,x),hs(Q,x5,l),zs(Q,7,2,1),zs(Q,8,6,x),hs(Q,x5,H),zs(Q,14,2,1),zs(Q,15,6,x)),Z&&(I=(n=L._center)[0],x=n[1],Z=n[2],b=L.getPositionInfo(n),J=L5(b.width,b.height)/20,hs(Q,1.5,V,f,new oS([I,x,Z,I+J,x,Z,I,x,Z,I,x+J,Z,I,x,Z,I,x,Z+J])),zs(Q,0,2,1),hs(Q,x5,l),zs(Q,2,2,1),hs(Q,x5,H),zs(Q,4,2,1)),Os(Q),Ks(Q))}}),function(Q){this.gv=Q}),ou="edit_tx",Bu="edit_ty",Gu="edit_tz",_u="edit_rx",$u="edit_ry",Wu="edit_rz",Du="edit_sx",Au="edit_sy",uu="edit_sz",Mu={},tu=(Mu[ou]=101,Mu[Bu]=102,Mu[Gu]=103,Mu[_u]=104,Mu[$u]=105,Mu[Wu]=106,Mu[Du]=107,Mu[Au]=108,Mu[uu]=109,HS(au,e,{_42:function(Q){var n,x,b,J,L,f,V,l,H,I,Z,E,a,o,B=this,G=B.gv,_=G.sm().ld();!_||!G.isEditable(_)||G.isEditHelperDisabled()||!v(_)||G.isFirstPersonMode()&&(G.isMouseRoamable()||Y5)||(js(G),n=G.isMovable(_),x=G.isRotationEditable(_),b=G.isSizeEditable(_),J=G._axisXColor,L=G._axisYColor,f=G._axisZColor,V=G._editSizeColor,E=_.p3(),G=(l=G.isOrtho()?(l=G.getCenterInfo(),L5(l.width,l.height)/8):S7(G.getEye(),E)/10)/(G.isPicking()?5:10),H=.4*(l*=.7),I=E[0],Z=E[1],E=E[2],o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],n&&B._17O(Q,_,ou,J,o,[I,Z-G,E,I+l,Z-G,E,I+l,Z,E,I+l,Z,E,I,Z,E,I,Z-G,E,I,Z-G,E+G,I+l,Z-G,E+G,I+l,Z-G,E,I+l,Z-G,E,I,Z-G,E,I,Z-G,E+G]),a=I+l,b&&B._17O(Q,_,Du,V,o,[a,Z-G,E,a+H,Z-G,E,a+H,Z,E,a+H,Z,E,a,Z,E,a,Z-G,E,a,Z-G,E+G,a+H,Z-G,E+G,a+H,Z-G,E,a+H,Z-G,E,a,Z-G,E,a,Z-G,E+G]),a+=H,x&&B._17O(Q,_,_u,J,o,[a,Z-G,E,a+H,Z-G,E,a+H,Z,E,a+H,Z,E,a,Z,E,a,Z-G,E,a,Z-G,E+G,a+H,Z-G,E+G,a+H,Z-G,E,a+H,Z-G,E,a,Z-G,E,a,Z-G,E+G]),o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],n&&B._17O(Q,_,Bu,L,o,[I,Z,E,I,Z+l,E,I-G,Z+l,E,I-G,Z+l,E,I-G,Z,E,I,Z,E,I,Z,E,I,Z,E-G,I,Z+l,E-G,I,Z+l,E-G,I,Z+l,E,I,Z,E]),a=Z+l,b&&B._17O(Q,_,Au,V,o,[I,a,E,I,a+H,E,I-G,a+H,E,I-G,a+H,E,I-G,a,E,I,a,E,I,a,E,I,a,E-G,I,a+H,E-G,I,a+H,E-G,I,a+H,E,I,a,E]),a+=H,x&&B._17O(Q,_,$u,L,o,[I,a,E,I,a+H,E,I-G,a+H,E,I-G,a+H,E,I-G,a,E,I,a,E,I,a,E,I,a,E-G,I,a+H,E-G,I,a+H,E-G,I,a+H,E,I,a,E]),o=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],n&&B._17O(Q,_,Gu,f,o,[I,Z,E,I,Z,E+l,I,Z-G,E+l,I,Z-G,E+l,I,Z-G,E,I,Z,E,I,Z-G,E,I-G,Z-G,E,I-G,Z-G,E+l,I-G,Z-G,E+l,I,Z-G,E+l,I,Z-G,E]),a=E+l,b&&B._17O(Q,_,uu,V,o,[I,Z,a,I,Z,a+H,I,Z-G,a+H,I,Z-G,a+H,I,Z-G,a,I,Z,a,I,Z-G,a,I-G,Z-G,a,I-G,Z-G,a+H,I-G,Z-G,a+H,I,Z-G,a+H,I,Z-G,a]),a+=H,x&&B._17O(Q,_,Wu,f,o,[I,Z,a,I,Z,a+H,I,Z-G,a+H,I,Z-G,a+H,I,Z-G,a,I,Z,a,I,Z-G,a,I-G,Z-G,a,I-G,Z-G,a+H,I-G,Z-G,a+H,I,Z-G,a+H,I,Z-G,a]))},_17O:function(Q,n,x,b,J,L){var f=this.gv,V=f._buffer,l=(H=E5.for(Q)).directUniforms(),H=H.directAttribs();f._picking&&(f.pickColorMap[f=Mu[x]]={data:n,part:x},l.uFixPickReverseColor=Hu(f)),Us(Q,x5,!0,x5,!0,x5,!1),l.uDiffuse=b,H.aPosition=Xs(Q,V.vs,new oS(L)),H.aNormal=Xs(Q,V.ns,new oS(J)),vs(Q),zs(Q,0,12),Os(Q),es(Q)}}),d.Raycaster=function(Q){this.gv=Q,this.maxTriangleTest=1/0,this.backfaceCulling=!0,this.triangleTestEpsilon=1e-9}),iu=(p1("Raycaster",e,{getTriangleTestEpsilon:function(){return this.triangleTestEpsilon},setTriangleTestEpsilon:function(Q){return this.triangleTestEpsilon=Q,this},getBackfaceCulling:function(){return this.backfaceCulling},setBackfaceCulling:function(Q){return this.backfaceCulling=Q,this},intersect:function(Q){var n=this.gv.getDataAt(Q);return n?this.intersectObject(Q,n):null},intersectObjects:function(n,Q,x){var b,J,L,f,V=this,l=1/0,H=n.origin||(new I5).fromArray(V.gv.getEye()),I=V.maxTriangleTest,Z=[],E=(Q.forEach(function(Q){x&&!1===x(Q)||!1!==Q.s("intersect")&&Z.push(Q)}),H.distanceToSquared2([0,0,0]));return Z.sort(function(Q,n){return(Q.p3?H.distanceToSquared2(Q.p3()):E)-(n.p3?H.distanceToSquared2(n.p3()):E)}),V.countTriangles=0,Z.forEach(function(Q){V.countTriangles>I||(b=V.intersectObject(n,Q))&&(J=H.distanceToSquared(b.world))<l&&(L=Q,f=b,l=J)}),V.countTriangles=0,{data:L,intersect:f}},intersectObjectAndRecordTriangle:function(Q,n){return this._4GQ=!0,Q=this.intersectObject(Q,n),this._4GQ=!1,Q},intersectLastTriangle:function(Q,n){if((Q=this.getRay(Q)).applyMatrix4(n.inverseMatrix),!(Q=Q.intersectPlane(n.plane)))return null;var x=SK.uvIntersection(Q,n.p1,n.p2,n.p3,n.uv1.clone(),n.uv2.clone(),n.uv3.clone());return{world:Q.clone().applyMatrix4(n.matrixWorld),local:Q.clone(),uv:x}},getRay:function(Q){if(Q instanceof sK)return Q;var n,x=this.gv,Q=x.unproject(Q),b=new I5,J=x.getEye(),L=new I5;return x.isOrtho()?(n=new I5(J),L.copy(x.getCenter()).sub(n).normalize(),x=b.copy(Q).sub(n).dot(L),b.copy(L).setLength(-x).add(n.copy(Q))):(b.copy(J),L.copy(Q).sub(b).normalize()),new d.Math.Ray(b,L)},intersectObject:function(Q,n){return this._intersectObjectImpl(this.getRay(Q),n)},_intersectObjectImpl:(hv=new X,pv=new X,zv=new sK,sv=new I5,Xv=new I5,Rv=new I5,Sv=new I5,mv=new I5,Yv=new I5,Tv=new I5,kv=new I5,Nv=new R,jv=new R,Cv=new R,Qe=new I5,ne={vs:J8,is:L8,uv:f8},(xe=l8.slice(0)).push("csg"),function(Q,n){var x,b,J,L,f,V,l,H,I,Z,E,a,o,B=this.gv.getData3dUI(n),G=((w=n.mat||B.mat)?hv.fromArray(w):hv.identity(),pv.getInverse(hv),zv.copy(Q).applyMatrix4(pv),"body");if(!(w=(w=(w=!(w=B.shapeModel)&&(n instanceof d.Polyline||n instanceof d.Edge)&&B.lineShapeModel?B.lineShapeModel:w)||c8(B))||(d.CSGNode&&n instanceof d.CSGNode||d.CSGShape&&n instanceof d.CSGShape?(J=!0,[B.left,B.front,B.right,B.back,B.top,B.bottom,B.csg]):n instanceof d.Node&&!(n instanceof d.Shape)?(x=!0,ne):(b=!0,[B.left,B.front,B.right,B.back,B.top,B.bottom]))))return console.log("Can not find shape model."),null;H_(w)||(w=[w]);var _,$,W,D,A,u,M=1/0,t=["","top_","bottom_"],i=!1,r=this.backfaceCulling,P=this.triangleTestEpsilon,c=[];for(HO(w,B,c),L=0,f=c.length;L<f;L++)if(($=c[L])&&($=$.mesh))for(V=0,l=t.length;V<l;V++)if(Z=$[(W=t[V])+"vs"],E=$[W+"is"],a=$[W+"uv"]||$[W+"tuv"],Z){if(D=$[W+"boundingBox"]){if(!(u=zv.intersectBox(D)))continue;if(zv.origin.distanceTo(u)>M)continue;A=!1}else $[W+"boundingBox"]=D=new d.Math.Box3,A=!0;for(H=0,I=E?E.length:Z.length/3;H<I;H+=3)this.countTriangles++,E?(Xv.fromArray(Z,3*E[H]),Rv.fromArray(Z,3*E[H+1]),Sv.fromArray(Z,3*E[H+2])):(Xv.fromArray(Z,3*H),Rv.fromArray(Z,3*(H+1)),Sv.fromArray(Z,3*(H+2))),A&&(D.expandByPoint(Xv),D.expandByPoint(Rv),D.expandByPoint(Sv)),(o=zv.intersectTriangle(Xv,Rv,Sv,r,P,sv))&&(_=zv.origin.distanceTo(o))<M&&(M=_,mv.copy(o),Yv.copy(Xv),Tv.copy(Rv),kv.copy(Sv),""!==W?G=W.slice(0,-1):x?G=l8[Math.floor(H/6)]:b?G=l8[L]:J&&(G=xe[L]),a&&(i=!0,E?(Nv.fromArray(a,2*E[H]),jv.fromArray(a,2*E[H+1]),Cv.fromArray(a,2*E[H+2])):(Nv.fromArray(a,2*H),jv.fromArray(a,2*(H+1)),Cv.fromArray(a,2*(H+2)))))}if(!isFinite(M))return null;var F,q,Q=mv.clone().applyMatrix4(hv),n=this._4GQ,w=(i&&(n&&(q={inverseMatrix:pv.clone(),matrixWorld:hv.clone(),p1:Yv.clone(),p2:Tv.clone(),p3:kv.clone(),uv1:Nv.clone(),uv2:jv.clone(),uv3:Cv.clone(),plane:(new d.Math.Plane).setFromCoplanarPoints(Yv,Tv,kv)}),F=SK.uvIntersection(mv,Yv,Tv,kv,Nv,jv,Cv)),ma()),B=ma(Yv.applyMatrix4(hv),Tv.applyMatrix4(hv),kv.applyMatrix4(hv)),Q=((n=0<zv.direction.dot(w))&&(w.multiplyScalar(-1),B.multiplyScalar(-1)),{world:Q,local:mv.clone(),worldNormal:B,normal:w,uv:F,part:G,backface:n});return q&&(Q.triangleInfo=q),Q})}),function(b,J){this.gv=b,this.s=function(Q,n,x){return(n=n==x5?x:n)==x5?J.getStyle(Q):S(n,J,b)},this.data=J}),ru=(HS(iu,e,{I3d:!0,ms_icons:1,_iv:!0,_cacheBoundingBox:n5,iv:function(){this._iv=!0},update:function(Q,n,x){var b=this,J=b.data;if(Q||(n=(Q=b.gv).getGL(),x=Q._40Q),b.needValidate(n)&&Q.isVisible(J)){var L,f,V,l=J._id,H=J._47Q?null:b.s("batch"),I=J.getRenderLayer(),Z=(I=x.get(I,!0)).batchIndexMap,E=I.batchModelMap,a=Q.getBrightness(J),o=a!=x5&&1!==a,E=PO(Z,E,J,H,Q),H=H?Q.getBatchInfo(H)||Oj:x5,B=b.validate(E,H);if(E&&(!H.ms||!H.ms.length)&&(L=(H=Z[l]).size=E.vs.length/3-H.begin,V=E.rs))for(a=o?a:1,f=0;f<L;f++)V.push(a);(Z=Q.getWireframeGeometry(J))?qO(Q,J,Z):v(J)&&(l=Q.getWireframe(J))&&qO(Q,J,l),b.labelInfo=b.label2Info=b.noteInfo=b.note2Info=b._38o=x5,b._24O(Ki,"getLabel"),b._24O(Ui,"getLabel2"),b._26O(ei,"getNote"),b._26O(vi,"getNote2"),b._15O(),b.interactiveInfo=Q.isInteractive(J)?{}:x5,J instanceof d.Block?b._46Q(n):I.push(this,!0),!1!==B&&(b._iv=!1)}else J instanceof d.Block||x.push(this,!1)},clearWireframeGeometryCache:function(){this.gv.invalidateCachedWireframe(this.data)},invalidateWireframe:function(){var Q=this.data,n=Q.getRenderLayer();(n=this.gv._40Q.get(n))&&n.ivWireframeBatch(Q)},_46Q:function(Q,n){var x,b,J,L,f=this.data,V=this.gv;V.isVisible(f)&&(L=f._id,b=(x=V._40Q.get(f._renderLayer,!0)).batchIndexMap[L],J=x.polylineIndexMap[L],L=x.wireframeIndexMap[L],(b||J||L)&&(n=n==x5?QO(Q,V.pickColorMap,V.isSelectable(f),this,yi,!0):n)&&(wO(n,b,x.batchModelMap),wO(n,J,x.polylineModelMap),wO(n,L,x.wireframeModelMap)))},_42:function(Q,n,x){var b=this,J=b.data,L=b.gv;if(L.isVisible(J)){var f,V,l,H,I,Z,E,a,o,B,G=L._picking;if(G)f=L.pickColorMap;else{if(L.isTransparentMask(J)||L.isReflecting(Q)&&!1===J.s("3d.reflectable"))return;f=n5}if(iu.getTitle===n5)for(var _ in iu.getTitle=0,b5)if(_.length===Ui.length+1&&_[Ui.length]===fZ[4].toUpperCase()&&_[Ui.length-1]===fZ[Ui.length+1].toUpperCase()){iu.getTitle=q_;break}if(!iu.getTitle||D5[Ui.length+2]){if(iu.getHead===n5)for(var _ in iu.getHead=0,lh){var $="box-sizing";6===_.length&&_[0]===fZ[4]&&_[3]===$[0]&&_[4]===$[1]&&_[5]===$[2]&&(iu.getHead=Cj)}if(!iu.getHead||D5[Ui.length]){if(iu.getTitle2===n5)for(var _ in iu.getTitle2=0,lh)6===_.length&&_[0]===zZ[1].toUpperCase()&&_[1]==="uv"[0]&&(iu.getTitle2=jj);iu.getTitle2&&!D5[aZ.length]||L[qi[0]+VZ[0]]&&L[qi[0]+VZ[0]].enable&&!D5[Gi[0]]||(b.s("shape3d.transmission")&&!G&&(Q._transmissionRTT||(Q._transmissionRTT=new Lu(L,0,0,{autoSize:!0})),(V=Q._renderTargetStack[Q._renderTargetStack.length-1]).unbind(Q),L.renderModel(Q._transmissionRTT,null,null,{type:"blitScreen",transparent:L._45Q,image:V.texture}),V.bind(Q)),V=J._id,a=(l=L._40Q.get(J._renderLayer,!0)).batchIndexMap,o=l.batchModelMap,H=L.isSelectable(J),E=!(Z=!1),a=a[V],G&&(B=QO(Q,f,H,b,yi,a))&&!L._45Q&&(wO(B,a,o),wO(B,l.polylineIndexMap[V],l.polylineModelMap),wO(B,l.wireframeIndexMap[V],l.wireframeModelMap)),a||(Z||(Z=!0,E=ds(Q,L,J)),E&&(G||!L._45Q||L._oitEnabled||L.isReflecting(Q)||Q._blooming||!b.s("transparent.separate")?b._80o(Q,n,x):(o=E5.for(Q).directState().cullFace,J._forceSingleFace=2,o.frontFace=J._flipSide?2305:2304,b._80o(Q,n,x),J._forceSingleFace=1,o.frontFace=J._flipSide?2304:2305,b._80o(Q,n,x),J._forceSingleFace=n5,o.frontFace=2305))),L.isLabelVisible(J)&&((I=b.labelInfo)&&(G&&QO(Q,f,H,b,Ki),Z||(Z=!0,ds(Q,L,J)),b._28O(I,Ki,x)),(I=b.label2Info)&&(G&&QO(Q,f,H,b,Ui),Z||(Z=!0,ds(Q,L,J)),b._28O(I,Ui,x))),L.isNoteVisible(J)&&((I=b.noteInfo)&&(G&&QO(Q,f,H,b,ei),Z||(Z=!0,ds(Q,L,J)),b._29O(I,ei,x)),(I=b.note2Info)&&(G&&QO(Q,f,H,b,vi),Z||(Z=!0,ds(Q,L,J)),b._29O(I,vi,x))),(I=b._38o)&&(Z||(Z=!0,ds(Q,L,J)),b._99O(Q,I,f,H,x)),Z&&((B=E5.for(Q).directUniforms()).uBrightness=1,B.uClipDirection=0,E5.for(Q).directState().cullFace.frontFace=2305,Q._blooming&&(B.blackout=!1)))}}}},_formatClipUniforms:function(Q,n,x){switch(Q){case"uv.right":Q=7;break;case"uv.left":Q=8;break;case"left":Q=2;break;case"top":Q=3;break;case"bottom":Q=4;break;case"front":Q=5;break;case"back":Q=6;break;default:Q=1}var b,J,L;return Q%2==0&&(n=1-n),7===Q||8===Q?(b=this.shapeModel)&&b.internalUvScale&&(n*=b.internalUvScale):x instanceof d.Shape?(b=x.s3(),J=x.p3(),L=x.getAnchor3d(),n=Q<3?(n-L.x)*b[0]+J[0]:Q<5?(n-L.y)*b[1]+J[1]:(n-L.z)*b[2]+J[2]):(n-=.5,(L=x._clipPercentageTranform)&&(n=(n+L[0])*L[1])),[Q,n]},prepare:function(){var Q=this,n=Q.data;if(!(n instanceof SV)){var x,b,J,L=Q.gv,f=L.getGL(),V=n._id,l=Q.s("batch"),H=L._batchIndexMap,I=L._batchModelMap,Z=L.getBrightness(n),E=Z!=x5&&1!==Z;if(Q.needValidate(f)){f=PO(H,I,n,l,L),I=l?L.getBatchInfo(l)||Oj:x5;if(Q.validate(f,I),f&&(!I.ms||!I.ms.length)&&(x=(l=H[V]).size=f.vs.length/3-l.begin,J=f.rs))for(Z=E?Z:1,b=0;b<x;b++)J.push(Z);v(n)&&((I=L.getWireframeGeometry(n))?qO(L,n,I):(H=L.getWireframe(n))&&qO(L,n,H)),Q.labelInfo=Q.label2Info=Q.noteInfo=Q.note2Info=Q._38o=x5,Q._24O(Ki,"getLabel"),Q._24O(Ui,"getLabel2"),Q._26O(ei,"getNote"),Q._26O(vi,"getNote2"),Q._15O(),Q.interactiveInfo=L.isInteractive(n)?{}:x5,Q._iv=!1}}},dispatchBoundingBoxChanged:function(){this._cacheBoundingBox=n5},getBoundingBox:function(Q){if(this._cacheBoundingBox)return this._cacheBoundingBox;be||(be={vs:J8,is:L8,uv:f8},Je=new I5,Le=new I5,fe=new I5,Ve=new I5,le=new I5);var n,x,b,J,L,f,V,l,H=this,I=H.data,Z=H.shapeModel;if((Z=(Z=!Z&&(I instanceof d.Polyline||I instanceof d.Edge)&&H.lineShapeModel?H.lineShapeModel:Z)||c8(H))||(d.CSGNode&&I instanceof d.CSGNode||d.CSGShape&&I instanceof d.CSGShape?(isCSG=!0,Z=[H.left,H.front,H.right,H.back,H.top,H.bottom,H.csg]):I instanceof d.Node&&!(I instanceof d.Shape)?Z=be:(H.left||H.front||H.right||H.back||H.top||H.bottom)&&(Z=[H.left,H.front,H.right,H.back,H.top,H.bottom])),!Z)return n5;H_(Z)||(Z=[Z]);var E,a,o,B,G,_,$=["","top_","bottom_"],W=new d.Math.Box3,D=!1,A=(H._needRecoverPosition?(Ve.set.apply(Ve,I.p3()),_=I.s3(),le.set(1/(_[0]||1),1/(_[1]||1),1/(_[2]||1))):(Ve.set(0,0,0),le.set(1,1,1)),[]);for(HO(Z,H,A),n=0,x=A.length;n<x;n++)if((E=A[n])&&(a=E.mesh))for(o=E.matrix,b=0,J=$.length;b<J;b++)if(V=a[(G=$[b])+"vs"],l=a[G+"is"],V){if(!(B=a[G+="boundingBox"]))for(a[G]=B=new d.Math.Box3,L=0,f=l?l.length:V.length/3;L<f;L+=3)l?(Je.fromArray(V,3*l[L]),Le.fromArray(V,3*l[L+1]),fe.fromArray(V,3*l[L+2])):(Je.fromArray(V,3*L),Le.fromArray(V,3*(L+1)),fe.fromArray(V,3*(L+2))),o&&(Je.applyMatrix4(o),Le.applyMatrix4(o),fe.applyMatrix4(o)),Je.sub(Ve).multiply(le),Le.sub(Ve).multiply(le),fe.sub(Ve).multiply(le),Je.isNaN()||B.expandByPoint(Je),Le.isNaN()||B.expandByPoint(Le),fe.isNaN()||B.expandByPoint(fe);W.expandByBox(B),D=!0}return D?(this._cacheBoundingBox=W,e.freeze(W),e.freeze(W.min),e.freeze(W.max),Q||iO(H.gv,I),W):n5},needValidate:function(Q){return this._iv},validate:function(Q,n){},_16O:function(Q,n,x,b,J,L,f,V,l){return WS},_80o:function(Q,n,x){},dispose:function(){var Q,n=this._pickId;n&&(Q=this.gv.pickColorMap)[n]&&delete Q[n]},getBodyColor:function(Q){var n=this.data;return this.gv.getBodyColor(n)||(Q?n.getStyle(Q):x5)},contextLost:function(){this._cachedTextures&&this.gv.invalidateCachedTexture(this.data)},getCachedTexture:function(Q){var n=this._cachedTextures;return n?n[Q||"main"]:null},setCachedTexture:function(Q,n){return(this._cachedTextures||(this._cachedTextures={}))[n||"main"]=Q},invalidateCachedTexture:function(Q){var n=this._cachedTextures;if(!n)return!1;var x,b=!1;for(x in n){var J=n[x];J&&(b=!0,Q.deleteTexture(J))}return this._cachedTextures={},b},invalidateCachedGeometry:function(){},_24O:function(Q,n){var x,b,J=this.data,L=this.gv,f=this.s,V=L[n](J);V!=x5&&(x=f(Q+".scale"),b=f(Q+".max"),n=(L=this[Q+"Info"]={label:V,textureScale:f(Q+".texture.scale"),color:L[n+"Color"](J),font:f(Q+".font"),align:f(Q+".align"),background:L[n+"Background"](J)}).rect=S_(L,V),0<b&&b<n.width&&(L.labelWidth=n.width,n.width=b),n.x=n.y=0,n.width*=x,n.height*=x,L.mat=this._16O(f(Q+".autorotate"),f(Q+".position"),n,f(Q+".face"),f(Q+".t3"),f(Q+".r3"),f(Q+".rotationMode")),J=n.width/2,V=n.height/2,L.vs=new oS([-J,V,0,-J,-V,0,J,-V,0,J,V,0]),n.width/=x,n.height/=x)},_26O:function(Q,n){var x,b=this.data,J=this.gv,L=this.s,f=J[n](b);f!=x5&&(x=L(Q+".scale"),f=(J=this[Q+"Info"]={note:f,textureScale:L(Q+".texture.scale"),expanded:L(Q+".expanded"),font:L(Q+".font"),color:L(Q+".color"),align:L(Q+".align"),borderWidth:L(Q+".border.width"),borderColor:L(Q+".border.color"),background:J[n+"Background"](b)}).expanded?(n=L(Q+".max"),(b=S_(J,f)).width+=6,b.height+=2,0<n&&n<b.width&&(J.labelWidth=b.width,b.width=n),{x:-b.width/2,y:-8-b.height,width:b.width,height:b.height+8}):{x:-6,y:-18,width:12,height:18},J.mat=this._16O(L(Q+".autorotate"),L(Q+".position"),x5,L(Q+".face"),L(Q+".t3"),L(Q+".r3"),L(Q+".rotationMode")),J.rect=f,1!==x&&((f=q7(f)).x*=x,f.height*=x,f.y=-f.height,f.width*=x),n=f.x,b=f.y,L=f.width,Q=f.height,J.vs=new oS([n,-b,0,n,-b-Q,0,n+L,-b-Q,0,n+L,-b,0]))},eachShapeModel:function(f,Q){var V=this,n=V.data;!function Q(n){var x,b,J,L;if(H_(n))for(b=0,J=n.length;b<J;b++)(x=n[b])&&Q(x);else H5(n)?Q(c8(V,n)):V_(n)&&(n.shape3d?Q(n.shape3d):(F8(L=n),L.vs&&f(L.vs,L.is,L.ns,L.uv),L.top_vs&&f(L.top_vs,L.top_is,L.top_ns,L.top_uv),L.bottom_vs&&f(L.bottom_vs,L.bottom_is,L.bottom_ns,L.bottom_uv),L.from_vs&&f(L.from_vs,L.from_is,L.from_ns,L.from_uv),L.to_vs&&f(L.to_vs,L.to_is,L.to_ns,L.to_uv)))}(Q=(Q=Q||V.shapeModel||c8(V))||(n instanceof d.Node&&!(n instanceof d.Shape)?{vs:J8,is:L8}:[V.left,V.front,V.right,V.back,V.top,V.bottom]))},_28O:function(Q,n,x){var b,J,L;x(this.s(n+".transparent"))&&(x=Q.rect,b=Q.textureScale,L=x.width*b,J=x.height*b,1<=L&&1<=J&&(L=dh(L,J),1!==b&&(L.translate(x.x,x.y),L.scale(b,b),L.translate(-x.x,-x.y)),hG(L,Q),L.restore(),fO(this,n,Q.mat,Q.vs,!0)))},_29O:function(Q,n,x){var b,J,L,f,V;x(this.s(n+".transparent"))&&(x=Q.rect,b=Q.textureScale,J=x.x,L=x.y,V=x.width*b,f=x.height*b,1<=V&&1<=f&&(x.x=x.y=0,V=dh(V,f),1!==b&&V.scale(b,b),pG(V,Q),V.restore(),x.x=J,x.y=L,fO(this,n,Q.mat,Q.vs,!1)))},_99O:function(Q,n,x,b,J,L){if(x){var f,V=this.gv,l=this.data,H=V._buffer,I=V._1O,Z=x.icons,E=E5.for(Q).directAttribs();for(f in Z){var a=Z[f],o=x.rects[f];if(o&&L(S(a.transparent,l,V))){V._picking&&QO(Q,b,J,this,f);var B=S(a.shape3d,l,V),G=B?[B]:S(a.names,l,V),_=G?G.length:0,$=S(a.textureScale,l,V)||1,W=S(a.light,l,V);W==x5&&(W=!!B),Us(Q,S(a.blend,l,V),W,S(a.opacity,l,V),S(a.reverseFlip,l,V),S(a.reverseColor,l,V),S(a.reverseCull,l,V));for(var D=0;D<_;D++){var A,u,M,t=G[D],i=o[D];LO(this,i.mat),B?i8(V,l,c8(this,B),this):(t=g(t))&&(A=i.width*$,u=i.height*$,1<=A&&1<=u&&(M=dh(A,u),i7(M,t,S(a.stretch,l,V),0,0,A,u,l,V),M.restore(),As(V,Q,vh,I),vs(Q,I,S(a.discardSelectable,l,V),H.uv,n8),E.aPosition=Xs(Q,H.vs,i.vs),E.aNormal=gs(Q,H.ns,x8,x5),ms(Q,H.is,b8),ss(Q,0,b8.length),Os(Q,I))),ks(V)}es(Q)}}}}}),function(Q,n){u_(ru,this,[Q,n])}),Pu=(HS(ru,iu,{_16O:function(Q,n,x,b,J,L,f,V,l){var H,I,Z=this.data,E=Z.getFinalScale3d(),a=((Z.hasOwnProperty("_anchor")||Z.hasOwnProperty("_anchorElevation"))&&(H=[-((H=Z.getAnchor3d()).x-.5)*E[0],-(H.y-.5)*E[1],-(H.z-.5)*E[2]]),Z.s("part.boundingBox")&&(a=this.getBoundingBox(!0))&&(I=a.max.clone().sub(a.min),a=a.max.clone().add(a.min).divideScalar(2),(H=H||[0,0,0])[0]+=a.x*E[0],H[1]+=a.y*E[1],H[2]+=a.z*E[2],E[0]*=I.x,E[1]*=I.y,E[2]*=I.z),bO(n,E,x,b,V,l));return H&&(a[0]+=H[0],a[1]+=H[1],a[2]+=H[2]),JO($S(),a,Z.p3(),b,J,L,f,Q,Z.getFinalRotation3d(),Z.getRotationMode())},clear:function(){var Q=this;Q.faceMat=Q.mat=Q.shapeModel=Q.left=Q.right=Q.front=Q.back=Q.top=Q.bottom=Q.csg=x5},needValidate:function(Q){return this._iv?(this._validateFrameId=Q._renderInfo.frame,!0):!(!this.data._47Q||(Q=Q._renderInfo.frame,this._validateFrameId===Q))&&(this._validateFrameId=Q,!0)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(Q,n){var x,b,J,L=this,f=L.gv,V=L.data,l=L.shapeName=L.s(cZ),H=c8(L,l),I=(L._updateAutoRotation(),L._updateFixSize2d(),L._updateOverlapping(),L.dispatchBoundingBoxChanged(),L.invalidateUnstableWireframe(),FS(V,f.getMat(V),!H||L.s("shape3d.scaleable"))),Z=(V.appendAnchorMatrix3d(I),H!==L.shapeModel);L.clear(),L.mat=V.mat=I,V._flipSide=X.determinantOfArray(I)<0,!H&&l||(l=null,(L.shapeModel=H)&&H.model3d&&((b=V.s("3d.clip.direction"))&&V.s("3d.clip.percentage")&&(J=H.position,x=H.scale,(J||x)&&(b="left"===b||"right"===b?0:"front"===b||"back"===b?2:1,l=[J?-J[b]:0,x?1/x[b]:1])),Z&&H.playAutomatically&&V.playAnimation()),V._clipPercentageTranform=l,Q?H?n.instanced?f.batchInstancedModel(V,H,L,L.getBodyColor(),[I],Q):UO(f,V,H,L,L.getBodyColor(),[I],Q):(J=Ns(I),n.instanced?f.batchInstancedFace(V,Q,n,I,J):hO(f,V,Q,n,I,J)):H||(L._cubeUvs=null,L.vf(Qi,0),L.vf(ni,16),L.vf(j5,8),L.vf(C5,24),L.vf(xi,32),L.vf(bi,40)))},_updateAutoRotation:(Pe=new mK,ce=new X,Fe=new I5,qe=new I5,we=new I5,function(){var Q=this.data,n=this.s("autorotate")||this.s("shape3d.autorotate");if(n){var x=this.gv;if(Fe.copy(this.s("shape3d.autorotate.up")||x._up),qe.copy(x._eye).sub(we.copy(x._center)),"string"==typeof n){for(var b=0,J=n.length;b<J;b++)qe[n[b]]=0;x=qe.normalize().dot(we.copy(Fe).normalize()),1-Math.abs(x)<1e-5&&(n.indexOf("x")<0?qe.x+=1e-4:n.indexOf("y")<0?qe.y+=1e-4:n.indexOf("z")<0&&(qe.z+=1e-4))}ce.lookAtDirection(qe,Fe),Pe.set(0,0,0,Q.getRotationMode(),!0).setFromRotationMatrix(ce),(x=Q._dynamicRotation)&&Math.abs(x[0]-Pe.x)<1e-5&&Math.abs(x[1]-Pe.y)<1e-5&&Math.abs(x[2]-Pe.z)<1e-5||(Q._dynamicRotation=[Pe.x,Pe.y,Pe.z])}else Q._dynamicRotation&&delete Q._dynamicRotation}),_updateFixSize2d:function(){var Q,n,x,b,J,L,f=this.data,V=this.s("fixSizeOnScreen")||this.s("shape3d.fixSizeOnScreen");V?(x=this.gv,Q=FS(f,x.getMat(f)),L=uS([0,0,0],Q),L=x.toViewPosition(L),isNaN(L.x)||isNaN(L.y)||(n=uS([1,0,0],Q),n=x.toViewPosition(n),Q=uS([0,1,0],Q),x=x.toViewPosition(Q),Q=n.x-L.x,n=x.y-L.y,Q&&n&&(x=f._dynamicScale3d||[1,1,1],L=g(f.s("shape3d.image")),0<V[0]&&(b=V[0]),0<V[1]&&(J=V[1]),b&&J||(V=0<V?V:1,b=b||(kS(L,f)||f.getWidth())*V,J=J||(NS(L,f)||f.getTall())*V),L=Math.abs(Q/b),V=Math.abs(n/J),Math.abs(L-1)<.001&&Math.abs(V-1)<.001||(f._dynamicScale3d=[x[0]/L,x[1]/V,x[2]])))):f._dynamicScale3d&&delete f._dynamicScale3d},_updateOverlapping:function(){var Q=this.s("hide.overlapping.group");if(Q){for(var n,x=this.gv,b=this.data,J=FS(b,x.getMat(b)),L=1/0,f=1/0,V=-1/0,l=-1/0,H=(b=b.getAnchor3d()).x,I=b.y,Z=b.z,E=0;E<8;E++){if(n=uS([(E>>2)-H,(E>>1&1)-I,(1&E)-Z],J),n=x.toViewPosition(n),isNaN(n.x)||isNaN(n.y))return;L=Math.min(L,n.x),V=Math.max(V,n.x),f=Math.min(f,n.y),l=Math.max(l,n.y)}this._rectOverlapping=x.overlappingBox.isOverlapping(Q,{x:L,y:f,w:V-L,h:l-f})}else this._rectOverlapping&&(this._rectOverlapping=n5)},getVectorDynamicSize:function(){var b,J,L,f,V,l,Q,n,x,H,I=this.s("shape3d"),Z=this.data;if("billboard"===I||"plane"===I||(n=Z._currentCubeElementId)!=x5)return b=this.gv,J=FS(Z,b.getMat(Z)),Q=Z.getAnchor3d(),L=.5-Q.x,f=.5-Q.y,V=.5-Q.z,l=Math.min(this.s("vector.dynamic.maxsize"),b._glCapabilities.maxTextureSize)/b.getDevicePixelRatio(),Q=function(Q,n){Q[0]+=L,Q[1]+=f,Q[2]+=V,n[0]+=L,n[1]+=f,n[2]+=V;var Q=b.toViewPosition(uS(Q,J)),n=b.toViewPosition(uS(n,J)),x=Q.x-n.x,Q=Q.y-n.y;return Math.min(l,Math.sqrt(x*x+Q*Q))},"billboard"===I?(x=Q([-.5,0,0],[.5,0,0]),H=Q([0,-.5,0],[0,.5,0])):"plane"===I?(x=Q([-.5,0,0],[.5,0,0]),H=Q([0,0,-.5],[0,0,.5])):Z._currentCubeElementId!=x5&&(I=3*L8[n+1],Z=3*L8[n],n=3*L8[n+2],x=Q([J8[I],J8[1+I],J8[2+I]],[J8[n],J8[1+n],J8[2+n]]),H=Q([J8[I],J8[1+I],J8[2+I]],[J8[Z],J8[1+Z],J8[2+Z]])),[x,H]},vf:function(Q,n){if(this.gv.getFaceVisible(this.data,Q)){(Q=VO(this,Q)).mat&&(this.faceMat=!0);var x=Q.uv;if(x)for(var b=(b=this._cubeUvs)||(this._cubeUvs=new oS([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0])),J=0;J<8;J++)b[n+J]=x[J];return Q}},_billboardInView:(ue=[-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0],Me=[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5],te=new XK,ie=new I5,re=new X,function(Q){if(!this.mat)return!0;var n=this.gv.getFrustum(),x="billboard"===Q?ue:Me;te.makeEmpty(),re.fromArray(this.mat);for(var b=0,J=x.length;b<J;b+=3)te.expandByPoint(ie.fromArray(x,b).applyMatrix4(re));return n.intersectsBox(te)}),_80o:function(Q,n,x){var b=this;if(b._rectOverlapping)return!0;var J=b.shapeModel;if(J||!b.shapeName){if(("billboard"===(f=b.s("shape3d"))||"plane"===f)&&!b._billboardInView(f))return!0;var L,f=b.gv,V=b.data,l=f._cube,H=E5.for(Q).directAttribs();if(J&&J.model3d)b.s(qZ)&&b.gv._prefabRenderer.render(Q,J,b.data,b.mat);else{if(js(f,b.mat),!(!Q._picking&&b.s("shape3d.reflector")||b.s("effect.flow")))if(J)i8(f,V,J,b,b.getBodyColor(),x);else for(H.aPosition=Xs(Q,l.vs,x5),H.aNormal=Xs(Q,l.ns,x5),Ss(Q,l.is),L=0;L<6;L++)b._18O(Q,l8[L],6*L,x,!1);if(ks(f),b.faceMat)for(L=0;L<6;L++)b._18O(Q,l8[L],6*L,x,!0)}}},_18O:function(Q,n,x,b,J){var L,f,V,l,H,I,Z,E,a,o=this[n];o&&(L=this.data,!(l=(f=this.gv)._picking?null:o.material)&&!b(o.transparent)||J&&!o.mat||!J&&o.mat||(L._currentCubeElementId=x,(b=L.s("polygonOffset"))&&rs(Q,b),l?(l={mesh:{vs:J8,is:L8,ns:V8,uv:o.uv?this._cubeUvs:f8,_complete_:!0},drawRange:[x,6],mat:l},L._currentFaceLightMask=o.light?L.s("light.mask"):0,f._prefabRenderer.render(Q,l,L,J?o.mat:null),L._currentFaceLightMask=null,l=f._cube,(V=E5.for(Q).directAttribs()).aPosition=Xs(Q,l.vs,x5),V.aNormal=Xs(Q,l.ns,x5),Ss(Q,l.is)):(J&&js(f,o.mat),V=E5.for(Q).directUniforms(),l=f.getTexture(o.texture,L,n),n=o.uv,H=o.uvScale,I=o.uvOffset,Z=o.uvRotation,E=o.uvAnchor,a=o.discardSelectable,l?n?vs(Q,l,a,f._buffer.uv,this._cubeUvs,I,H,Z,E):vs(Q,l,a,f._cube.uv,x5,I,H,Z,E):vs(Q),Us(Q,o.blend,o.light,o.opacity,o.reverseFlip,o.reverseColor,L._forceSingleFace||o.reverseCull),V.uDiffuse=o.color||o5["color.empty"],ss(Q,x,6),es(Q),Os(Q,l),J&&ks(f)),b&&Ps(Q),L._currentCubeElementId=null))},contextLost:function(){ru.superClass.contextLost.apply(this,arguments),this.data.s("shape3d.reflector")&&(this._reflectorRenderTarget=null,this._reflectNormal=null)},drawReflector:(He=new I5,Ie=new I5,Ze=new mK,Ee=new X,ae=new I5,oe=new I5,Be=new I5,Ge=new I5,_e=new X,$e=new X,We=new zK,De=new hK,Ae=new hK,function(Q){var n=this,x=(n._reflectorInfo=null,n.data);if(x._reflecting)return!1;var b=n.gv;if(b._picking)return!1;if(b._camera&&!b._camera.isLayerVisible(x.getRenderLayer()))return!1;var J,L=b._camera||b,f=x instanceof YV,V=n._reflectorRenderTarget,l=b._canvas.width,H=b._canvas.height;if(V?V.setSize(Q,l,H):V=n._reflectorRenderTarget=new oO.RenderTarget(b,Q,l,H),f?(J=x.getPointsMatrix3d().getElements(),(l=x.p3())[1]+=(1-x.getAnchorElevation())*x.getTall(),He.copy(uS(l,J))):He.copy(x.p3()),Ie.copy(L.getEye()),Ee.makeRotationFromEuler(Ze.set(x.r3(),x.getRotationMode(),!0)),!n._reflectNormal){if(f&&x.getThickness()<0){if(!n.shapeModel||!n.shapeModel.top_vs)return!1;E={vs:n.shapeModel.top_vs,ns:n.shapeModel.top_ns}}else{if(!(E=c8(n,n.s("shape3d"))))return!1;!E.ns&&E.length&&(E=E[0])}if(!E.ns||!E.vs)return!1;n._reflectNormal=[E.ns[0],E.ns[1],E.ns[2]],n._reflectorModel={model3d:!0,mesh:{pos:E.vs},mat:{type:"reflector",cacheKey:"reflector"}}}if(ae.copy(n._reflectNormal),ae.applyMatrix4(Ee),oe.subVectors(He,Ie),0<oe.dot(ae))return!1;oe.reflect(ae).negate(),oe.add(He),Be.copy(L.getCenter()).negate().add(He),Be.reflect(ae).negate(),Be.add(He),Ge.copy(L.getUp()),Ge.reflect(ae);var I,Z,H=b._camera,E=0<(l=b)._tempCameraQueue.length?l._tempCameraQueue.pop():new d.Camera;b.getCamera(E),(b._camera=E).p3(oe.toArray()),E.lookAt(Be.toArray(),Ge.toArray()),b._18Q=x5,V.bind(Q),b.setViewport(Q,0,0,V.width,V.height),(L=x.s("shape3d.reflector.background"))?(B=cs(Q,!0),Fs(Q,L)):Fs(Q,[0,0,0,1]),E5.for(Q).glState.depth.mask=!0,Q.clear(16640);var l=(l=x.s("shape3d.reflector.clip"))===n5?.003:l,a=Ws(b),o=$s(b),l=(We.setFromNormalAndCoplanarPoint(ae,He.add(ae.clone().multiplyScalar(l))),We.applyMatrix4($e.fromArray(o)),De.set(We.normal.x,We.normal.y,We.normal.z,We.constant),$e.fromArray(a).getInverse($e),Ae.set(Math.sign(De.x),Math.sign(De.y),1,1).applyMatrix4($e),De.multiplyScalar(2/De.dot(Ae)),x._reflecting=!0,x.s("shape3d.reflector.shadow")),o={renderAxis:!1,renderEdit:!1,renderGrid:!1};"disabled"===l?(o.renderShadowMap=!1,o.renderShadow=!1):"scene"===l?o.renderShadowMap=!1:o.useReflectorSelfShadowMap=!0,E.setProjectMatrix(a),b.renderSky(),a[2]=De.x-a[3],a[6]=De.y-a[7],a[10]=De.z-a[11],a[14]=De.w-a[15],E.setProjectMatrix(a),E.s("camera.renderSky",!1),b.renderScene(o),_e.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_e.multiply($e.fromArray(b._projectMatrix)),_e.multiply($e.fromArray(b._viewMatrix)),L&&Fs(Q,B),V.unbind(Q),b._tempCameraQueue.push(E),b._18Q=x5,b._camera=H,(l=x.s("shape3d.reflector.blur"))&&(a=b.getPostProcessingModule("Blur"))&&a.drawImpl(Q,V,l,3<=l,x.s("shape3d.reflector.blur.iterations")),(o=b.getPostProcessingModule("Glitch"))&&o.enable&&o.onlyReflector&&(V=o._42(Q,V));var B=(L=n._reflectorModel).mat;return B.tDiffuse=V.texture,B.color=sh(x.s("shape3d.reflector.color")||"rgb(128,128,128)"),B.textureMatrix=_e.toArray(),B.modelMatrix=f?J:FS(x),B.viewMatrix=$s(b),B.projectionMatrix=Ws(b),(H=this.s("shape3d.transparent"))&&(Z=(I=E5.for(Q).glState).depth.mask,I.depth.mask=!1),b.renderModel(L,{clear:!1,restoreViewport:!1}),H&&(I.depth.mask=Z),x._reflecting=!1,b.getRenderState().useProgram(b._prg),!0})}),function(Q,n){u_(Pu,this,[Q,n])}),cu=(HS(Pu,ru,{_80o:function(Q){}}),function(Q,n){u_(cu,this,[Q,n])}),Fu=(HS(cu,iu,{_25Q:1,validate:function(Q,n){var x=this,b=x.s;if(b(cZ)!==Gi||b("batch")!=x5||!x.info||x.data._needChangeGeometry){var J=x.gv,L=x.data,f=b("edge.width"),V=L._40I,l=L._41I;if(L._needChangeGeometry=x.shapeModel=x.info=x.lineShapeModel=x5,V&&l){var H=L.isLooped(),I=b(gi);if(P=b5.getEdgeType(I)){if(!(P=P(L,RG(x,J,L,H,I),J,x._19Q)).points||P.points.isEmpty())return;for(var Z=x.info={},E=P.segments,a=(r=P.points).size(),o=V.getElevation(),B=l.getElevation(),G=0;G<a;G++){var _=r.get(G);_.e==x5&&(_.e=o+(B-o)*G/(a-1))}var $=ke(r.get(0)),W=ke(r.get(a-1)),D=(a-(t=a%2))/2;Z.c1=ke(r.get(D-1)),Z.c2=ke(r.get(D)),0!==t&&(Z.p3=Z.c2),Z.s1=$,Z.s2=ke(r.get(1)),Z.t1=ke(r.get(a-2)),Z.t2=W}else{var A,u,M,t,i,r=new m,Z=x.info={},P=b("edge.offset"),l=b("edge.center"),c=b("edge.source.t3"),F=b("edge.target.t3"),q=xO(J,L,"source"),w=xO(J,L,"target");if(!q||!w)return J.invalidateData(L),delete x.info,!1;c&&(q[0]+=c[0],q[1]+=c[1],q[2]+=c[2]),F&&(w[0]+=F[0],w[1]+=F[1],w[2]+=F[2]),I===Fi?(E=b("edge.segments"),(a=(c=Z.points=b(Ri)||aG).size())?($=ke(c.get(0)),W=ke(c.get(a-1)),!l&&P&&(F=P,A=BS($,q,!0),P=L5(F,S7(q,$)),q=[q[0]+A[0]*P,q[1]+A[1]*P,q[2]+A[2]*P],A=BS(w,W,!0),P=L5(F,S7(W,w)),w=[w[0]-A[0]*P,w[1]-A[1]*P,w[2]-A[2]*P]),1===a?Z.p3=$:(D=(a-(t=a%2))/2,u=ke(c.get(D-1)),M=ke(c.get(D)),0!==t&&(Z.p3=M),Z.s1=q,Z.s2=$,Z.t1=W,Z.t2=w)):(!l&&P&&(A=BS(w,q,!0),i=S7(q,w),P=zG(P,i),q=[q[0]+A[0]*P,q[1]+A[1]*P,q[2]+A[2]*P],w=[w[0]-A[0]*P,w[1]-A[1]*P,w[2]-A[2]*P]),u=q,M=w),r.add({x:q[0],y:q[2],e:q[1]}),r.addAll(c),r.add({x:w[0],y:w[2],e:w[1]})):(F=RG(x,J,L,H,I),x._19Q||(F=-F),H?(D=q[0],t=q[1],$=q[2],u=[D-F,t+(W=V.getTall()/2+F),$],M=[D+F,t+W,$],r.add({x:D-F,y:$,e:t}),r.add({x:D-F,y:$,e:t+W}),r.add({x:D+F,y:$,e:t+W}),r.add({x:D+F,y:$,e:t})):(A=BS(w,q,!0),i=S7(q,w),c={x:q[0],y:q[2]},J={x:w[0],y:w[2]},I=(L=Vs(x5,c,J,F)).x-c.x,H=L.y-c.y,P=zG(P,i),A[0]*=P,A[1]*=P,A[2]*=P,u=[q[0]+A[0]+I,q[1]+A[1],q[2]+A[2]+H],M=[w[0]-A[0]+I,w[1]-A[1],w[2]-A[2]+H],l?(r.add({x:q[0],y:q[2],e:q[1]}),r.add({x:u[0],y:u[2],e:u[1]}),r.add({x:M[0],y:M[2],e:M[1]}),r.add({x:w[0],y:w[2],e:w[1]})):(r.add({x:u[0],y:u[2],e:u[1]}),r.add({x:M[0],y:M[2],e:M[1]})))),Z.c1=u,Z.c2=M}Z._lastPointsSegments={points:r,segments:E},b(cZ)===Gi?Z.list=x.createTubeModel(r,E,f/2,Q):Z.list=x.createLineModel(r,E,f,"edge","edge.dash")}}},invalidateCachedGeometry:function(){this.info=x5}}),function(Q,n){u_(Fu,this,[Q,n]),this._needRecoverPosition=!0}),qu=(HS(Fu,ru,{_80o:function(Q,n,x){var b=this._matWithExtraction||this.mat;if(b&&(!this.s("shape3d.reflector")||Q._picking)){var J=this.gv,L=this.shapeModel;if(js(J,b),L)i8(J,this.data,L,this,this.getBodyColor(),x);else for(var f=0;f<6;f++)lO(this,Q,n,l8[f],x);ks(J)}},validate:function(Q,n){var x,b,J,L=this,f=L.s,V=L.data,l=V._thickness/2,H=V.isClosePath(),I=V.getPoints(),Z=V.getSegments(),E=f(FZ),a=Q&&Q.uv;if(L.invalidateUnstableWireframe(),L.clear(),L.dispatchBoundingBoxChanged(),L._updateAutoRotation(),b5.extractShapeTranslation||b5.extractVerticesTranslation?(b=new s.Vector3(V.p3()),(I=q7(I)).forEach(function(Q){Q.x-=b.x,Q.y-=b.z}),L._vsTranslation=(new s.Matrix4).setPosition(b),J=V.getShapeElevation,V.getShapeElevation=function(){return-(this.getTall()||0)*(this._anchorElevation-.5)}):L._vsTranslation=null,l<0){L.s("shape3d.reflector")&&(L._reflectNormal=null);try{var o,B,G=f("shape3d.image.projection");G&&G[4]&&(o=(q=V.p3())[0],B=q[2],G=[o+G[0],G[1]+B,o+G[2],G[3]+B]),x=L.shapeModel=VV(I,Z,f(KZ),f(UZ),E,f(eZ),V.getTall(),V.getShapeElevation(),H,G)}catch(Q){x=L.shapeModel={}}f(qZ)||(delete x.vs,delete x.ns,delete x.uv),f("shape3d.top.image")||f("shape3d.top.material")||delete x.top_uv,f("shape3d.bottom.image")||f("shape3d.bottom.material")||delete x.bottom_uv}else if(f(cZ)===Gi)r=Yh(I,Z,E,H),(x=L.shapeModel={vs:[],uv:[]}).sum=f(eZ)||v_(r)||1,x.len=0,f(KZ)&&!H&&(x.top_vs=[],x.top_uv=[]),f(UZ)&&!H&&(x.bottom_vs=[],x.bottom_uv=[]),L._12O(r,l);else{var _,$,W,D,A,u,M,t,i,r=Yh(I,Z,E,H),P=L.vf(j5,a,!1,n);if(l&&(A=L.vf(C5,a,!1,n),u=H?x5:L.vf(Qi,a,!1,n),M=H?x5:L.vf(ni,a,!1,n),t=L.vf(xi,a,!1,n),i=L.vf(bi,a,!1,n)),l){for(var c=0,F=r.length;c<F;c++)r[c]=L._tryRemoveBezierPoints(r[c],l);L._12O(r,l)}else P&&r.forEach(function(Q){if(0<(D=Q.length))for(_=Q[0],W=1;W<D;W++)$=Q[W],L.addV(P.vs,_,$),_=$});L._20Q(r),Q||(P&&(P.ns=Ds(P.vs),q8(P,"vs"),q8(P,Ti)),l&&(A&&(A.ns=Ds(A.vs),q8(A,"vs"),q8(A,Ti)),u&&(u.ns=Ds(u.vs),q8(u,"vs"),q8(u,Ti)),M&&(M.ns=Ds(M.vs),q8(M,"vs"),q8(M,Ti)),t&&(t.ns=Ds(t.vs),q8(t,"vs"),q8(t,Ti)),i&&(i.ns=Ds(i.vs),q8(i,"vs"),q8(i,Ti))))}var q=L.mat=V.getPointsMatrix3d().getElements();V._flipSide=X.determinantOfArray(q)<0,L._vsTranslation?q=L._matWithExtraction=(new s.Matrix4).fromArray(q).multiply(L._vsTranslation).toArray():L._matWithExtraction=null,Q&&(pO(L,q,Q,x,n),L.clear()),J!=x5&&(V.getShapeElevation=J)},_20Q:function(Q){var n,x,b,J,L,f,V,l,H,I,Z,E,a,o=this,B=o.front,G=o.back,_=o.top,$=o.bottom,B=B?B.tuv:x5,G=G?G.tuv:x5,_=_?_.tuv:x5,$=$?$.tuv:x5,W=0,D={front:0,back:0,top:0,bottom:0};(B||G||_||$)&&(a=o.s(eZ),n=a||v_(Q)||1,Z=o.s("all.uv.union"),Q.forEach(function(Q){if(0<(x=Q.length)){for(I in D)(!1===(E=o.s(I+".uv.union"))||E==x5&&!1===Z)&&(D[I]=0,a||(n=v_([Q])));for(f=Q[0],b=1;b<x;b++){for(I in V=Q[b],l=S7(f,V),D)W=D[I],J=W/n,D[I]=W+=l,L=W/n,"back"===I&&(H=J,J=1-L,L=1-H),o._14O(o[I],J,L);f=V}}}))},_14O:function(Q,n,x){var b,J,L,f,V,l,H,I;Q&&(I=Q.uv,(Q=Q.tuv)&&(I=I?(b=I[0]+(I[6]-I[0])*n,J=I[1]+(I[7]-I[1])*n,L=I[2]+(I[4]-I[2])*n,f=I[3]+(I[5]-I[3])*n,V=I[2]+(I[4]-I[2])*x,l=I[3]+(I[5]-I[3])*x,H=I[0]+(I[6]-I[0])*x,I[1]+(I[7]-I[1])*x):(L=b=n,l=f=1,H=V=x,J=0),Q.push(L,f,V,l,H,I,H,I,b,J,L,f)))},_13O:function(Q){var n=Q.uv;(Q=Q.tuv)&&(n?Q.push(n[2],n[3],n[4],n[5],n[6],n[7],n[6],n[7],n[0],n[1],n[2],n[3]):Q.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(n,Q){var x=n.length;if(x<4)return n;for(var b,J,L,f,V=!1,l=function(Q){return n[Q]},H=function(Q){return n[x-1-Q]},I=0;I<=1;I++)for(b=(L=I?H:l)(0),J=L(1),E=2;E<x-1;E++)(f=L(E)).remove||(f.b&&Vs(b,J,f,Q).adjust?V=f.remove=!0:(b=J,J=f));if(!V)return n;for(var Z=[],E=0;E<x;E++)n[E].remove||Z.push(n[E]);return Z},_12O:function(Q,n){var x,b,J,L,f,V=this.s("shape3d.point.epsilon"),l=this;Q.forEach(function(Q){if(0<(f=Q.length))for(x={p:Q[0],n:!0},L=1;L<f;L++)b=Q[L],(J=L<f-1?Q[L+1]:x5)&&Math.abs(b.x-J.x)<V&&Math.abs(b.y-J.y)<V||l.addPoint(x,b,J,n,Q)})},addPoint:function(Q,n,x,b,J){var L,f,V,l,H,I,Z=this,E=Q.p,a=Q.f,o=Q.b,B=Z.s("shape3d.side")||lS,G=Z.s("shape3d.start.angle"),_=Z.s("shape3d.sweep.angle"),$=Z.shapeModel,W=Z.data.isClosePath();if(Q.n&&(Q.n=!1,a=W&&2<J.length?Vs(J[J.length-2],E,n,b):Vs(x5,E,n,b),o=fs(E,a),$?$.top_vs&&Z._10O(o,a,B,G,_,$.top_vs,$.top_uv):(L=Z.left)&&(Z.addV(L.vs,o,a),Z._13O(L))),W=x?Vs(E,n,x,b):W&&2<J.length?Vs(E,n,J[1],b):Vs(E,n,x5,b),J=fs(n,W),$){var D,A,u=$.vs,M=$.uv,b=$.sum;for(M&&(D=$.len/b,$.len+=S7(E,n),A=$.len/b),V=Z._9O(o,a,B,G,_),l=Z._9O(J,W,B,G,_),H=0;H<B;H++)G_(u,V[I=H+1]),G_(u,l[H]),G_(u,V[H]),G_(u,l[H]),G_(u,V[I]),G_(u,l[I]),M&&M.push(D,I/=B,A,f=H/B,D,f,A,f,D,I,A,I);!x&&$.bottom_vs&&Z._10O(J,W,B,G,_,$.bottom_vs,$.bottom_uv,!0)}else!x&&(L=Z.right)&&(Z.addV(L.vs,W,J),Z._13O(L)),(L=Z.front)&&Z.addV(L.vs,a,W),(L=Z.back)&&Z.addV(L.vs,J,o),(L=Z.top)&&Z.addH(L.vs,a,W,J,o,!0),(L=Z.bottom)&&Z.addH(L.vs,o,J,W,a);Q.p=n,Q.f=W,Q.b=J},_10O:function(Q,n,x,b,J,L,f,V){for(var l,H,I=this.data,Z=this._9O(Q,n,x,b,J),E=(Q.x+n.x)/2,a=(Q.y+n.y)/2,o=I.getShapeElevation(),B=0,B=0;B<x;B++)V?(G_(L,Z[B]),G_(L,Z[B+1])):(G_(L,Z[B+1]),G_(L,Z[B])),G_(L,[E,o,a]),f&&(H=V?(l=l5*(B+1)/x+b,l5*B/x+b):(l=l5*B/x+b,l5*(B+1)/x+b),f.push(.5-.5*f5(H),.5-.5*V5(H),.5-.5*f5(l),.5-.5*V5(l),.5,.5))},_9O:function(Q,n,x,b,J){var L,f,V=this.data,l=[],H=(Q.x+n.x)/2,I=(Q.y+n.y)/2,Z=V.getTall()/2,E=V.getShapeElevation(),a=0;for(J==x5&&(J=l5);a<=x;a++)f=f5(L=J*a/x+b),l.push([H+(Q.x-H)*f,E+Z*V5(L),I+(Q.y-I)*f]);return l},addV:function(Q,n,x){var b=n.x,n=n.y,J=x.x,x=x.y,L=(f=this.data).getShapeElevation(),f=f.getTall()/2;Q.push(b,L-f,n,J,L-f,x,J,L+f,x,J,L+f,x,b,L+f,n,b,L-f,n)},addH:function(Q,n,x,b,J,L){var f=(V=this.data).getTall()/2,V=V.getShapeElevation()+(L?f:-f);Q.push(n.x,V,n.y,x.x,V,x.y,b.x,V,b.y,b.x,V,b.y,J.x,V,J.y,n.x,V,n.y)},vf:function(Q,n,x,b){var J,L=this.gv.getFaceVisible(this.data,Q);return(x||L)&&((J=VO(this,Q,b)).vs=[],J.tuv=L?[]:x5,J.visible=L),J}}),function(Q,n){u_(qu,this,[Q,n])}),wu={},yu=(HS(qu,ru,{validate:function(){var Q=this,n=Q.gv,x=Q.data,b=Q.s,J=sh(b("points.color")),L=b("points.size"),f=b("points.uv.offset"),V=b("points.image"),l=(!V||/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(V)||Kj.test(V)||(wu[V]||(wu[V]=Q._createCachedImage(V)),V=wu[V]),x._modelDirty),H=b("points.model");if(H){if(Q._lastShapeModel!==H||!Q.shapeModel){var I=c8(Q,H);if(!I)return;var Z=[],E={};Q.eachShapeModel(function(Q){for(var n=0,x=Q.length;n<x;n+=3){var b=Q[n],J=Q[n+1],L=Q[n+2],f=b+"_"+J+"_"+L;E[f]||(E[f]=!0,Z.push(b,J,L))}},I),Q._setShapeModelPoints(new oS(Z)),Q._lastShapeModel=H,l=!0}o=Q.shapeModel.vs.length/3}else{var a=x.getPoints(),o=a.length;if(l||x._pointsDirty||!Q.shapeModel){for(var B=[],G=0;G<o;G++){var _=a[G];_&&B.push(_.x,_.e,_.y)}Q._setShapeModelPoints(new oS(B)),x._pointsDirty=!1,l=!(Q._lastShapeModel=null)}}if(I=b("points.transparent"),Q.info={mat:FS(x),size:L,diffuse:J,opacity:b("points.opacity"),texture:V,transparent:I,alphaTest:I?0:b("alphaTest"),uvScale:b("points.uv.scale"),uvOffset:f,discardSelectable:b("points.discard.selectable")},l||x._colorsDirty){var $=!1,W=x.getColors();if(W&&0<W.length)for(var D=[],G=0;G<o;G++)for(var A=W[G],v=A?($=!0,sh(A)):J,O=4*G,u=0;u<4;u++)D[O+u]=v[u];Q.shapeModel.cs=$?new oS(D):null,x._colorsDirty=!1}if(l||x._sizesDirty){var M=!1,t=x.getSizes();if(t&&0<t.length)for(var i,r=[],G=0;G<o;G++)0<=(i=t[G])?(r.push(i),M=!0):r.push(L);Q.shapeModel.ss=M?new oS(r):null,x._sizesDirty=!1}if(l||x._offsetsDirty){var P=!1,c=x.getUvoffsets();if(c&&0<c.length)for(var F,q,w=[],G=0;G<o;G++)F=c[q=2*G],q=c[1+q],F!=n5&&q!=n5?(w.push(F,q),P=!0):w.push(0,0);Q.shapeModel.os=P?new oS(w):null,x._offsetsDirty=!1}if(l||Q._lastPointNumber!==o){this.dispose();for(var y=n.pickColorMap,K=Q._startPickId=y._pickIdUsed,B=(y._pickIdUsed=K+o,[]),G=0;G<o;G++){var U=K+G,e=Hu(U);B.push(e[0],e[1],e[2],e[3]),y[U]||(y[U]={data:x,part:G})}Q.shapeModel.ps=new oS(B),Q._lastPointNumber=o}x._modelDirty=!1,this.dispatchBoundingBoxChanged()},_setShapeModelPoints:function(Q){var n=this.shapeModel,x=this.shapeModel={vs:Q};return n&&(Q=Q.length,Q=Math.round(Q/3),n.cs&&n.cs.length==4*Q&&(x.cs=n.cs),n.ss&&n.ss.length==Q&&(x.ss=n.ss),n.os&&n.os.length==2*Q&&(x.os=n.os),n.ps&&n.ps.length==4*Q&&(x.ps=n.ps)),x},_createCachedImage:function(Q){var n=z_(),x=n.getContext("2d"),x=(R_(n,128,128,1),jS(x,{width:128,height:128,comps:[{type:Q,background:"white",borderWidth:0,rect:[0,0,128,128]}]},0,0,128,128),d.Math.generateUUID());return Mj[x]=n,x},_80o:function(Q,n){var x,b,J=this.gv,L=J._picking;L&&!J.isSelectable(this.data)||(x=this.shapeModel,b=this.info,x&&x.vs&&x.vs.length&&(b={type:"points",renderMode:"points",renderPickMap:!0,transparent:b.transparent,modelMatrix:b.mat,modelViewMatrix:Zs([],J._viewMatrix,b.mat),projectionMatrix:J._projectMatrix,viewMatrix:J._viewMatrix,scale:J.getHeight()/2,size:b.size,diffuse:b.diffuse,opacity:b.opacity,map:J.getTexture(b.texture,this.data),alphaTest:b.alphaTest,resolution:J.getDevicePixelRatio(),discardSelectable:b.discardSelectable,uvScale:b.uvScale,blackout:Q._blooming&&!this.data.s("bloom"),picking:L,useColor:!L&&x.cs!=x5,useSizeArray:x.ss!=x5,uUvOffset:b.uvOffset,useUvArray:!L&&x.os!=x5},J._prefabRenderer.render(Q,{model3d:!0,mesh:{position:x.vs,pickColor:L?x.ps:null,color:L?null:x.cs,aUvOffset:!L&&x.os?x.os:null,sizeArray:x.ss},mat:b}),(L=E5.for(Q)).useProgram(n),L.directAttribs().disable(),J.shadowMap.enable&&J.shadowMap.createShadow(),J.rebindOITTexture(),J.flowMap.createFlow()))},dispose:function(){qu.superClass.dispose.call(this);var Q=this._startPickId,n=this._lastPointNumber;if(Q&&n){for(var x=this.gv.pickColorMap,b=0;b<n;b++){var J=Q+b;x[J]&&delete x[J]}delete this._startPickId,delete this._lastPointNumber}}}),function(Q,n){u_(yu,this,[Q,n]),this._needRecoverPosition=!0}),Ku=(HS(yu,iu,{_25Q:1,needValidate:function(Q){return ru.prototype.needValidate.call(this,Q)},_updateAutoRotation:function(){return ru.prototype._updateAutoRotation.call(this)},invalidateUnstableWireframe:function(){this.data._47Q&&this.invalidateWireframe()},validate:function(Q,n){var x,b,J,L,f,V=this,l=V.data,H=V.s,I=l.getPoints(),Z=I.size(),E=(V.dispatchBoundingBoxChanged(),V._updateAutoRotation(),V.invalidateUnstableWireframe(),l.p3()),a=V.mat=$S(),o=(Hs(a,E),sV(a,l.getFinalRotation3d(),l.getRotationMode()),l.getScale3d()),B=l._dynamicScale3d;B&&(o[0]*=B[0],o[1]*=B[1],o[2]*=B[2]),Is(a,o),Hs(a,GS(E)),l._flipSide=X.determinantOfArray(a)<0,H(cZ)===Gi&&H("batch")==x5&&V.shapeModel&&!l._needChangeGeometry||(l._needChangeGeometry=V.shapeModel=V.info=V.lineShapeModel=x5,1<Z&&(B=V.info={},o=l.getSegments(),x=l.getThickness(),b=ke(I.get(0)),J=ke(I.get(Z-1)),B.c1=ke(I.get((f=(Z-(L=Z%2))/2)-1)),B.c2=ke(I.get(f)),0!=L&&(B.p3=B.c2),B.s1=b,B.s2=ke(I.get(1)),B.t1=ke(I.get(Z-2)),B.t2=J,H(cZ)===Gi?(b5.extractPolylineTranslation||b5.extractVerticesTranslation?(E=new s.Vector3(l.p3()),(I=q7(I)).forEach(function(Q){Q.x-=E.x,Q.e-=E.y,Q.y-=E.z}),V._vsTranslation=(new s.Matrix4).setPosition(E),V._matWithExtraction=(new s.Matrix4).fromArray(a).multiply(V._vsTranslation).toArray()):(V._vsTranslation=null,V._matWithExtraction=null),B.list=V.createTubeModel(I,o,x/2,Q)):B.list=V.createLineModel(I,o,x,"shape.border","shape.dash")))},invalidateCachedGeometry:function(){this.shapeModel=this.info=this.lineShapeModel=x5},_80o:function(Q,n,x){var b,J,L,f,V,l,H,I,Z,E,a=this,o=a.shapeModel;o&&(J=a.mat,(b5.extractPolylineTranslation||b5.extractVerticesTranslation)&&a._matWithExtraction&&(J=a._matWithExtraction),b=a.gv,js(b,J),J=a.s("3d.clip.direction"),b._uvClipEnabled&&("uv.left"===J||"uv.right"===J)&&(L=a.s("3d.clip.percentage"))<1?(V=f=!0,F8(o),l=o.top_vs,H=o.bottom_vs,I=o.vs,Z=(E=E5.for(Q)).directUniforms(),E=E.directAttribs(),"uv.left"==J?(L<1&&(f=!1),L<=0&&(V=!1)):(L<1&&(V=!1),L<=0&&(f=!1)),o.top_vs=o.bottom_vs=n5,E.aUv=gs(Q,b._buffer.uv,o.uv,x5,2),i8(b,a.data,o,a,a.getBodyColor(),x),E.aUv=!1,Z.uClipDirection=0,o.vs=n5,f&&(o.top_vs=l),V&&(o.bottom_vs=H),i8(b,a.data,o,a,a.getBodyColor(),x),o.vs=I,o.top_vs=l,o.bottom_vs=H):i8(b,a.data,o,a,a.getBodyColor(),x),ks(b))}}),b5.meshTypeMap={box:function(){return b5.createBoxModel()},sphere:function(Q){return b5.createSphereModel(Q.side,Q.sideFrom,Q.sideTo,Q.from,Q.to,Q.resolution,Q.smooth)},cylinder:function(){return b5.createCylinderModel(side,sideFrom,sideTo,from,to,top,bottom,smooth)},cone:function(){return b5.createConeModel(side,sideFrom,sideTo,from,to,bottom,resolution,smooth)},torus:function(){return b5.createTorusModel(side,sideFrom,sideTo,from,to,radius,resolution,smooth)}});for(Ke in $_(b5,{invalidateMeshAttribute:function(Q){Q&&Q._bufId&&(Q._bufId=null)},invalidateMesh:function(Q,n){if(Q){if(n)for(var x in Q)b5.invalidateMeshAttribute(Q[x]);delete Q._4HQ,delete Q._complete_}}}),$_(T8,{invalidateMeshAttribute:function(Q){b5.invalidateMeshAttribute(Q),this.iv()},invalidateMesh:function(Q,n){b5.invalidateMesh(Q,n),this.iv()}}),W8)Ku[Ke]=W8[Ke];Ku.bone=(ye=new Array(5),function(Q){for(var n=Q.ratio||.1,x=Q.resolution||8,b=null,J=0;J<5;J++){if(ye[J])return ye[J].ratio==n&&ye[J].resolution==x&&(ye[J].active=Date.now()),ye[J].mesh;b=J}if(!b)for(var L=1/0,J=0;J<5;J++)ye[J].active<L&&(L=ye[J].active,b=J);var f=[],V=[];for(n*=.5,f.push(0,0,0,0,0,.5),J=0;J<x;J++){var l=J/x*Math.PI*2;f.push(Math.cos(l)*n,Math.sin(l)*n,n),0<J&&(V.push(0,J+2,J+1),V.push(J+1,J+2,1))}return V.push(0,2,x+1),V.push(x+1,2,1),ye[J]={active:Date.now(),resolution:x,ratio:n,mesh:{vs:f,is:V}},ye[J].mesh});var Uu,eu,vu,Ou,du=!(eu=1),hu={},pu={},zu={},su=function(){P7(su);var Q=Date.now(),n=Q-Uu;Uu=Q;try{Xu(n/1e3)}catch(Q){}},Xu=function(Q){var n,x,b={};for(n in hu){var J,L,f=(L=hu[n]).speed,V=L.time,l=(L.paused?J=L.time:(J=L.time+Q*f,L.time=J),L.duration),H=L.loop,f=("once"===H?f<0&&J<L.end||0<f&&J>L.end?(J=L.end,L.iteration=1):J=s.modToPositive(J,l):(Math.floor(J/l)!==Math.floor(V/l)&&L.iteration++,"pingpong"===H?l<(J=s.modToPositive(J,2*l))&&(J=2*l-J):J=s.modToPositive(J,l)),x=L.animation,L.displayTime=s.roundFloat(J,3));f+=L.shift,(V=b[x])?V.push(n,f):b[x]=[n,f]}for(x in b){F=c=t=D=W=i=_=G=B=M=r=o=u=E=void 0;var I=x,Z=b[x],E=pu[I][1];if(E){var a,o,B,G,_={},$=Z.length/2,W={},D=zu[I];if(D){for(var A=D.clips,u=0,M=A.length;u<M;u++)_[A[u].time]=u;for(u=0;u<$;u++)(G=_[B=Z[2*u+1]])!==n5&&(W[G]=!0)}else D=zu[I]={clips:[]};for(var M=E.length,t=-1,i=0;i<$;i++)if(a=Z[2*i],(G=_[B=Z[2*i+1]])!==n5)hu[a].clip=D.clips[G];else{for(;W[++t];);(o=D.clips[t])?o.time=B:o=D.clips[t]={time:B,datas:[]};for(var r=o.datas,u=0;u<M;u++)for(var P=E[u].evaluate(B),c=(c=r[u])||(r[u]=[]),F=0,q=P.length;F<q;F++)c[F]=P[F];_[B]=t,hu[a].clip=o}}}},Ru=s.newIdGenerator(),gu={add:function(I,Q,n,x,b){(J=I.tag)||(J=I.tag=Ru.next()),pu[J]||(pu[J]=function(){for(var Q,n,x=I.tracks,b=x.length,J=new Array(b),L={},f=0;f<b;f++){var V=x[f],l=V.type,H=V.name.split(".");switch((n=L[H[0]])||(n=L[H[0]]=[]),H[1]){case"scale":n[2]=f;break;case"quaternion":n[1]=f;break;default:n[0]=f}switch(l){case"vector":Q=new zp(V.times,V.values);break;case"quaternion":Q=new sp(V.times,V.values);break;case"cubic":Q=new Xp(V.times,V.values);break;default:Q=new pp(V.times,V.values)}J[f]=Q}return[L,J]}());var J,L=eu++,f=I.duration;return Q===n5&&(Q=I.speed||1),x===n5&&(x=I.loop||"repeat"),hu[L]={time:n||0,start:n||0,loop:x,shift:I.start||0,duration:f,animation:J,animationName:I.name,clip:b,iteration:0},Ya(hu[L],Q),du||(du=!0,Uu=Date.now(),su()),L},stop:function(Q){var n=hu[Q];return!!n&&(delete hu[Q],n)},changeAnimationInfo:function(Q,n,x){return!!(Q=hu[Q])&&("speed"===n?(Ya(Q,x),!0):"forwardTime"===n&&(Q.time+=x,!0))},getAnimation:function(Q){return hu[Q]},getAnimationMap:function(){return hu},getAnimationTracks:function(){return pu},getFrameAnimationData:function(){return zu}},Su=($_(OV,{playAnimation:function(Q,n,x,b){return!!(Q=Q||this.getDefaultAnimationName())&&(!!(Q=this.getAnimation(Q))&&(this._animationPlaying&&(J=gu.stop(this._animationId)),Q=this._animationId=gu.add(Q,n,x,b,J?J.clip:null),this._animationPlaying=!0,this._animationPaused=!1,this._lastAnimIteration=0,this.fp("animationStart",null,!0),Q));var J},changeCurrentAnimationSpeed:function(Q){return gu.changeAnimationInfo(this._animationId,"speed",Q)},forwardAnimation:function(Q){return this.invalidateView(),gu.changeAnimationInfo(this._animationId,"forwardTime",Q)},backwardAnimation:function(Q){return this.forwardAnimation(-Q)},stopAnimation:function(){var Q=this._animationId;return Q&&gu.stop(Q),this._animationPlaying=!1,this._animationPaused=!1,this._animationId=n5,this._lastAnimIteration=0,this.fp("animationStop",null,!0),Q},pauseAnimation:function(){if(this._animationPaused)return!1;var Q=this._animationId;return!!Q&&(!!(Q=gu.getAnimation(Q))&&(Q.paused=!0,this._animationPaused=!0,this.fp("animationPause",null,!0),!0))},resumeAnimation:function(){var Q;return!!this._animationPaused&&(!!(Q=this._animationId)&&(!!(Q=gu.getAnimation(Q))&&(Q.paused=!1,this._animationPaused=!1,this.fp("animationResume",null,!0),!0)))},isAnimationPlaying:function(){return this._animationPlaying},isAnimationPaused:function(){return this._animationPaused},getAnimationNames:function(){return b5.getShapeModelAnimationNameList(this.s("shape3d"))},getAnimation:function(Q){return b5.getShapeModelAnimation(this.s("shape3d"),Q)},getDefaultAnimationName:function(){return b5.getShapeModelDefaultAnimationName(this.s("shape3d"))},getAnimations:function(){return b5.getShapeModelAnimations(this.s("shape3d"))},getCurrentAnimationState:function(Q){var n=this._animationId;if(!n)return null;var x=gu.getAnimation(n);if(!x)return null;switch(Q){case"time":return x.displayTime||0;case"name":return x.animationName;case"loop":return x.loop;case"speed":return x.speed;case"duration":return x.duration;default:return{time:x.displayTime||0,name:x.animationName,loop:x.loop,speed:x.speed,duration:x.duration}}}}),$_(BG,{isAnimationPlaying:W}),$_(b5,{getShapeModelAnimations:function(Q){return(Q=Q&&Xe(Q))&&Q.model3d&&(Q=Q.animations)?Q:null},getShapeModelAnimation:function(Q,n){var x=b5.getShapeModelAnimations(Q);if(x)for(var b=0,J=x.length;b<J;b++)if(x[b].name===n)return x[b];return null},getShapeModelAnimationNameList:function(Q){var n=b5.getShapeModelAnimations(Q);if(!n)return null;for(var x=n.length,b=new Array(x),J=0;J<x;J++)b[J]=n[J].name;return b},getShapeModelDefaultAnimationName:function(Q){var n,x=b5.getShapeModelAnimations(Q);if(!x)return null;for(var b=0,J=x.length;b<J;b++){if(x[b].default)return x[b].name;!n&&0<x[b].duration&&(n=x[b].name)}return n}}),vu={},{request:function(Q){var n;return(n=vu[Q])?n.length?n.pop():new Float32Array(Q):(vu[Q]=[],new Float32Array(Q))},release:function(Q){var n,x=Q.length;(n=vu[x])?n.push(Q):vu[x]=[Q]}}),mu=s.newIdGenerator(),Yu=(e.assign(oO.Graph3dView.prototype,{initSkeletonDatas:function(){var Q,n=this._updatedSkeletonDatas;for(Q in n)Su.release(n[Q]);this._updatedSkeletonDatas={},this._isSkeletonUpdated={},this._boneViewMatrices.length=0,this._boneViewMatrices._bufId=null},_renderBonesForDebug:function(Q,n){0<this._boneViewMatrices.length&&(n.depth.enabled=!1,n.depth.mask=!1,this._prefabRenderer.render(Q,{mesh:{type:"bone"},instances:{aMatrixInstanced:new Float32Array(this._boneViewMatrices)},mat:{type:"fixColor",color:"red",cullFace:!0}}))},updateSkeleton:function(Q,L){var f=this;if(L||(L=Xe(Q.s("shape3d")))&&L.model3d){var n=Q._animationId;if(n=gu.getAnimationMap()[n]){var x=n.clip;if(x){var b=n.iteration,J=(b!==(V=Q._lastAnimIteration||0)&&(Q._lastAnimIteration=b,Q.fp("animationIteration",V,b)),Q._lastAnimTimestamp=n.time),V=n.animation+"|"+J;if(!this._isSkeletonUpdated[V]){this._isSkeletonUpdated[V]=!0;for(var l,H,I,Z,E,a,o,B,G,_=Q.s("3d.bone.visible"),$=(_&&(H=s.requestVector3(),I=s.requestVector3(),Z=s.requestMatrix4().fromArray(Q.mat),(E=s.requestMatrix4()).composeFromArray(L.position,L.quaternion,L.scale),Z.multiply(E)),x.datas),W=gu.getAnimationTracks()[n.animation][0],D=[],A={},u=(b5.traverse(L,function(Q,n){var x,b,J;Q.skeleton?D.push(Q):Q.isBone&&(x=Q.name,(b=W[x])&&((J=b[0])!==n5&&(Q.position=$[J]),(J=b[1])!==n5&&(Q.quaternion=$[J]),(J=b[2])!==n5&&(Q.scale=$[J])),(b=(b=Q.matrixWorld)?b:Q.matrixWorld=new X).composeFromArray(Q.position,Q.quaternion,Q.scale),n&&n!==L&&((J=n.matrixWorld)||(J=n.matrixWorld=(new X).composeFromArray(n.position,n.quaternion,n.scale)),b.premultiply(J),_&&n.isBone&&(Q=f._boneViewMatrices,J.getPosition(H),H.applyMatrix4(Z),b.getPosition(I),I.applyMatrix4(Z),l=2*H.distanceTo(I),E.lookAt(I,H).setPosition(I.set(0,0,0)).scale(I.set(l,l,l)).setPosition(H),Q.push.apply(Q,E.getElements()))),A[x]=b)},null,"comps"),_&&(s.releaseVector3(H),s.releaseVector3(I),s.releaseMatrix4(E),s.releaseMatrix4(Z)),f._updatedSkeletonDatas),M=0,t=D.length;M<t;M++){var i,r,P,c,F=(c=(P=D[M]).skeleton.bones).length;for((a=u[(B=(B=P._skeletonId)?B:P._skeletonId=mu.next())+"|"+J])||(i=Math.sqrt(4*F),(r=s.nearestPOT(i))<i&&(r<<=1),r=Math.max(r,4),a=u[B+"|"+J]=Su.request(r*r*4)),o=P.skeleton.boneMatrixInverses,G=0;G<F;G++)X.multiplyMatrixArray(a,A[c[G]],o,16*G,0,16*G)}}}}}}}),{cullFace:!1,flipSide:!1,transparent:!1,uvRotation:0,uvScale:[1,1],uvOffset:[0,0],uvAnchor:[0,0]}),Tu=function(Q,n){if(V_(n))return n;var x,b,J=H5(n);return(x=(x=J?Q.s(n):x)||(J&&(b=Q.s("matDef"))?b[n]:x))||(Q=Q.s("shape3d"),(Q=H5(Q)?b5.getShape3dModel(Q):Q)&&Q.model3d&&(J||(x=Q.mat),(b=Q.matDef)&&(!x&&J?x=b[n]:H5(x)&&x in b&&(x=b[x])))),H5(x=x||n)?b5.getMaterial(x):x},ku=($_(OV,{getMaterial:aV=function(Q,n){if(Q=Tu(this,Q),n===n5||!Q)return Q;var x=Q[n];return x===n5&&(n in Yu?x=q7(Yu[n]):(Q=ku[Q.type])&&(x=q7(Q[n]))),x},setMaterial:Q=function(Q,n,x){var b,J,L=Tu(this,Q);if(L){if(H5(n))b=L[n],J=L[n]=x;else if(V_(n)){for(var f in b={},n)b[f]=L[f],L[f]=n[f];J=n}this.fp("material",x5,{material:L,materialName:Q,property:n,oldValue:b,newValue:J})}}}),$_(XV,{getMaterial:aV,setMaterial:Q}),{}),Nu=($_(ku,{pbr:{diffuse:[1,1,1],emissive:[0,0,0],roughness:1,metalness:0,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:n5,roughnessMap:null,roughnessChannel:"R",metalnessMap:null,metalnessChannel:"G",emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapIntensity:1,displacementMap:null,displacementScale:1,displacementBias:0,rimColor:[0,0,0],rimPower:0,fresnelIntensity:1,enableTransmission:!1,transmission:1,thickness:0,ior:1.5,specularIntensity:1,specularColor:[1,1,1]},phong:{diffuse:[1,1,1],emissive:[0,0,0],specular:[17/255,17/255,17/255],shininess:30,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:n5,specularMap:null,emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapCombine:"add",envMapIntensity:1,refractionRatio:.98,displacementMap:null,displacementScale:1,displacementBias:0,fresnelIntensity:1}},!0),{}),ju={aoMap:["aoMapIntensity"],normalMap:["normalScale"],lightMap:["lightMapIntensity"],displacementMap:["displacementScale","displacementBias"],enableTransmission:["transmission","thickness","ior","specularIntensity","specularColor"]};for(Ou in ku){var Cu,Qp,np=[],xp=[],bp=ku[Ou],Jp={},Lp=[];for(Qp in bp)"envMap"!==Qp&&"envMapIntensity"!==Qp&&Qp.indexOf("Channel")!==Qp.length-7&&"enableTransmission"!==Qp&&"envMapCombine"!==Qp&&("map"===Qp||Qp.indexOf("Map")===Qp.length-3?(Cu=ju[Qp])&&Cu.length?(np.push(Qp,Cu.length),Cu.forEach(function(Q){Jp[Q]=!0,np.push(Q,bp[Q])})):np.push(Qp,0):(Cu=ju[Qp])&&Cu.length?(Jp[Qp]=!0,xp.push(Qp,Cu.length),Cu.forEach(function(Q){Jp[Q]=!0,xp.push(Q,bp[Q])})):Lp.push(Qp));np.push(-1),(np=np.concat(xp)).push(-2),Lp.forEach(function(Q){Jp[Q]||np.push(Q,bp[Q])}),Nu[Ou]=np}d.Default.getMaterialDefaultStyle=function(){return ku},ze.pbr=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vS0C0Q!!$fQoSjFgGfJeY$\v\v!","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/CtSg\v/!h\vp$ge=f!gfjeovfm!dToUjB$O\vE!B\vS?Ez\ve!p\vc$/jtgge/fqgb!NVxTpFm`gU=S!BfOeTvNmJdToTjJ$P\vO!\v<!*\ve$Je)fmgfjyoffU!uJvPqSu\vv!P\vp$Uesfbgfjoojfm!!T>Q!FeDJV!M\vB?Sz\ve!p\vc$/ftoge/jhgo\vj!q\vq$bjNofdompvue=f!!f=edvpmndnopjo$?\v\v!!\v\v?$zjeopdcm/vtegf/!u=vqqbudvlpj=o!hf?e\vv!m\vd$ojjo$d\vm!v\vegfj!e=ovfc$p\vt!/<iufbbped?s\vb!f\vm$dj/gmobejfsgf!uVbTnF!`+V!CsPb\vm!vvdofjqgTpusbnp!dnsbbuf5m!dv!W,j!f*xdNdbGu!s+j!yu<b!pvdosjbgfpmsdn/!mwbfjds4f!uebjng!g.v!t1f/<2!)v!o+j!gupishnj!Mwhfodj4p!hfunvjpt!t>j!wufi<h!jvMohjogjppshnu!vgpm!p<b*ud!dsWpOvuhpieo!f-t1t:<G!uvbopjdgspbsfnm!dg/mmpbbjus!fnufbunb!m-o1fGtutb<p!dvsobjfgmpds/nm!bgjmspfbuub!np)qlbddjjmuizd<T!`vGo!j>g!pdsdnG!!w4fddf4w!!s<j*n*DspjmEpxsf<j!wv/ozjsgupfsnnp!fghm!p-bmub!nssjpnOQupbxpfdss<b!f\vm$dj/gzesfugf!nVpTfFh`)BuMpQeI)BfUuFbTsUv\vu!bvto!j>g!pdsdnW!Ogumppeb!uu!bbpmmqgi!b\vUUfBtPuD<S!B\vF$MfDo`eFjTgV\v!!g\vf$efgoje$j\vg!\v\v!g\vj$ejogfe$f\vg!!<VsTbFm`vVdWf\vq!Twobfsfzijto!h,!!wqfndp3D!zwhVswf<o!F\vo$fjfgietf!g+!!VuWi`hDjMMJhQo\vj!pwhbusvzpj!o>h!!ugimhpjbMuh!owjVpwhMupvdpb!m<V*<s!p\vm$pfDooefjfgi\vt!/\vm$bfjosefjugb\vn!)\v4$yjbgn!!e+f!g8j6o2f/e1)!V.T!F1`/M2J!H>I!UqNnBpQD*z!h}s}f!oeFfogfjfoifte!)uVbTpFm`gB!P\vNOBFQF*I\vT!`wFbTsVz!jgofhe!gwjf$d\v3!!<wfVdwo3b<j!e\vb$Sffowejjtgt\vj!n\vF$mjbguepfug!!,V!TsFb`mNvBdQf\vq!Tvmobjugppus!n,!!tfbtnvqgmgfjsE3mEb!unpbuq!<>!!\vu$ifhojeMjhgo\vj!p\vh$ujvgpe!f4gd!fVwT!F\v`?BzMeQpIcB/NtBgQ/\vo!pvjotjtgjpnstno!btsbun=q!mffesv3mEd!objm$q\vi!b<Nsbbqm<v!d\vf$qfTouedjfgs\vj!e\vo$jj/gueifhgj!MVeTfFu`dBfPmNgBfQs\v!!,v!osjbgmpvsdnf!qtTbundqfmsfjse3/Eu!ibhpjNMbeqf<u!d\vf$mjggfose!f>g!!sVbTmFv`dVfCqPT\vm!bvuopjug!p4sdnf!wg!m<pfbtuv!gbgpjNEbuqdJfosujfeootjj/uuzi<h!j\vM$effouedjfgm\vg!f\vs$!f,o!efjtgv\vg!g\vj$Ejugdeffsgj!eV/TuFi`hMjJMHeIfUuNdBfQm\vg!fvso!j>g!pfstnv!gtgbjnEqmmbfusp3uE!!4mdjfhwi!u\vN?bzqe<p!c\v/$tjgg/oqebfNgp!bV=T!Ff`eVvCmPd\vo!jv$o\vj!g<p*ssnf!xgpmQpnbjus!!m-jnhjisu)NxbpqqJ!o+u!fsoptmjpuDzn<j!s\v!$>f,o!efjdgo\vb!j\ve$bfSofewjjgt\vt!j\vn$Fjmgbeufpgu!!V<T*F*`sFjNEJxTfTjJwW/FzNsBuQf\vn!pvfohj!g-pmsbnn!stpbon/qzmsfusf3nEp!ffhn)jutptej)wtfcNbb!q.<!!1\v/$2f!o>enjjgs\v!!u\vb$pjmogd!m\vv?ezfe!p=cc/ttegg/to?p\vn!n\vp$Djtgueifhgj!mV=T!Ff`eOvPmSdNoBjM$N\vB!Q\v\v?!zveopjcg/ptsgn/!StCbQntqumifhsj3mE=!!ofpesvnmbdmoNjb$q\v<!!\v\vg$jjegoofe$f\vg!!<VcThFs`/VsCpPm\vp!Dvfowjjgtptsjnn!fw!f>d+3!!fodposbnjbembTSdfbwmjft<t!j\vn$Ffmobeujpgu\v!!<\v{$zfyo/e*jsgp\vm!p\vD$fjwgj!tatejfngfj)osfbef)oVjTMFp`UUCBHOSHtF!O>U!*c!h%s%/!s)pemfpgDjfowfjet)tUjBnOfH!F<O*UwTVQwB!D-Fq`bONPfSwNjBtMtNjBnQf*)!E}3}f!sevfugyjfouf!e>!!)sVpTmFp`DDfMwFjBtStDjPnBfU!`5OdPfSwN!B\vMQNBBNQF*W*J\vT!TwJfNdF4`!FqTfVs!ugvfsecgOjp$s\vn!b\vmg3jBesocf)$w\vf!d<4*!ofpzjfu`dqfpstj-E!fwdfbdg4!!-tOvqsbgn`!o-pmsbnn-s!pwof!d-4o!pnjbuqjOt-p!QgxmfpjbWuw!!g.b)dcfsEBj3smfbdnusjppOoc*s!v|u!swffqd!4>!!rm1b!n>s!pwof!d<4f)mebGdeTym)bfnzsfp`oq!p>t+/!yz*y-/!OeqGbeny!)<f1z/f2`!q.p!t1//z3*!-+!!e{Gzeyy/)*fwzVfw`!q-pqtb/N{m*b*n<s!pwof)dE43!frs2v!u>y!fwuf!d>4!)OeqGbenz!)4fdzffw`!q\vpQtB/NyM*B-N!SePGOe`zF)TfVz!fg`fqepgtj/$z\v*!-<!oepGjeuzj)tfpzQfw`Nqwp.t!/>{!*o*p<j!uwjftdp3Q!xtfuj1W!w>!!4edGfewy!)<wmVbwn/stpuo*!<>!!wmfbdn3s!ptOuz2s!u>f!nepGfehz!)4wdVfww/!t\vug*j<e!owff$d\v4!!<Oo!p>j!utdvfssgj`Eofpdsbng<!!+w!fmdb4n!srp2oq!f>s!qm!b>n!sdpsop!t\vtE)FrE2J-T!`OF*M<C!VwPfEd!4g!fre1gqjf$s\vq!!<>*!mdbsnpstptO)wO)-f!{rj1m*b<n!swpfod!4>!!Um!b>n!srp2oq!f4sdqf!w+!!<t1u/12/!y.!!,;!!r11/q2f!s@q!!h+o!jtdub2G/uyo<p!swGf`dm4h!!C>!!>o!prj2uqdffssqj!E+f!dtbug1!/uzb!p,m!gr!1\vqgfjseqo!f+$!\vt!u\v2g/jze<o!fg$m\vp!b<uc!/etftuf!o>m!bnubfyN)mefpyuf)uU!->!+U!*s-p!uedpbuG)tCt-f!oCm*b*u<f!ng!m\vp*bCu`!MtFdObOmBfI!D>`!Q)BeNfTuT!F>O>M!B1U/F1N*)!e@f!o1j/g1f!e;!!ggjbmdff$E\vj!s<fhd/utjtpfoo!m+b!ujfoNwmffsytffut!r>s+u!)sepfuud*b<G!tstffuovmsbou!fonp!s\vn*bHm`jM{FfO)OUB!I+D!`)QnBbNqTOT/FyO!M+B!UtFdNb)meff*o!j,g!fCe!!+g!j)mnfb$q\vO!/<zs!/+t!ttfdobmmbfu*f!N,m!fOy!f+u!!n>b+q!Os/p{u*d<b!G~t!t\vf$ofmobeujfgn\v!!\v\v*$Sj`gMeFfOgO!BVITDF``QSBPNVTHTIFOOFMTBTUNFBNQ)\ve!fvoojjggfpes!ng!jt$b\vn!q<m*fwsV3wE!!-sqpbvNhtitoffotmtbNubfqn<)!E\v3$ffsoveujygf\vu!!\v>$!jtgteffogm!bVuTfFN`mNfFyUfBuM!O5FdTfTwN!B\vQQ\vB!NvToTjFgOpMsBnU!FtNb`nFqTmVf!sg3fEe!gnjf$u\vb!m<otfttftoNmbbqu<f!n\v!$>f!osepjugd\vb!Gwtbtsfzojmobhu!fwnf!du4b!pwmOgp!s\vngbjme<o!fw$b\vs!z\vjgojhe!owff$d\v4!!<wcN/wtQtpftojiuhjvppoS<m!f\vy$fjug!!>e+f!gsjpoufdeb)GVtTtFf`oFiOhWvNpBsQ!*\v!*}C}`!MNFBOYO`BCIPDY``QDBMNJTQTQFFOSI!H?V!P1S!)}e}f!oejfggfjeo!fgej)mVfT$F\v`!U<ShB/OtTtNfJoTiThJvPpOS*m\vf!ywfbus!z>j+o!hs!pwufddb4G!twtXfposimhevQppst!j\vu*jHp`oM<F!O\vO$BfIoDe`jQgB\vN!T\vT$FjOgI!HeVfPgSj)oeffeo)jDgMfJeQ!`gEjJmSfF$D\vU!J<PsO/*t\vt!fwobishzvjpoShm!fwyffdu4!!>w+M!psdpbumdQbpGttjtufjopioh<v!p\vs$!f\vo*eSj`gM\vF!O\vO$BjIoDd`mQvBeNfT!T=FdOmIjHqVEPjSs)fedfuojjpgof/eg!tg/ji$f\vb!e<?*\vw!V\vw$!j-oqdbmNvtetff!o=idhmvjpqsc)pEy3/fgstv/uiyffbue!?>\v!!t\vt$fjooidhmvvpeSfm!f=ygfpuh!/5gdtf/wi!f\vbQeB?N\vT!T\vF$OjIoHdVmPvSe`fF!T=Vt!igbfeepgxjN$b\vq!/<gttt/fiofibhev?p\vs!!\v>$!jsopdumdvbeGft!t=fgomiphxvNpbsq!/ugbtp/migf!b\veg?j\ve!o\vf$$j\vo!d<mevsebfd!t=jfeo!d*puetjfoUhb?i\vq!m\vb$!j=o!dbm/vsepfm!p=DdfvtcvfgFgojweS)f!ggmjf!d\vuUjTpFoUGBTI?Q\vM!B\v`$FjToVd!mgvfeefg!j=$f\vo!w\vngbjqeQoifz$t\vj!d\vbgmj/egotf/$i\vf!b<ec?/\v*!w\vV$wj!o-dqmbvNebfi!q=mmbj)hEi3uftsDvpunynfpuo!/>g+t!/bi/fsbpem?p\vD!f\vt$vjgogdjmev!e\vf*!C=`mMjFhOiOuBtIQDC`SQ/BgNtB/IiQfMbBe)?e\vf!o\vj$gjfoed!mgvjemff!$=\vu!s<bho/t*nwjVtwt!j-pqob/Ngbti/qimfbb)eE?3\vf!s\vv$ujyofdum!v>e+f!!b=/usppomfpNDbfqtqvjgoghj/eg!t\v/*iHf`bMeF?O\vO!B\vI$Dj`oQdBmNvBeIfQ!M=Bp)jeuf/ogjtg/fief!bgej?m\vf!$w\vp!j<es!/n*bwjVow)!*-!q|b!N\vb$ijqomdbm)vEe3ff!s=vdumyjfquE!j>s+f!dbu/jsppom/pgDtf/tcvpgegzj?e\v!!\v\v*$Sj`oMdFmOvOeBfI!D=`dQmBjNqBcIpQyM/Bg)te/fcopjegzf?e\v!!gwjfmdf5$!\ve!j<gbg/v*twfVDwp!m-pqsb!N>b!iwqfmdb5))Ee3jfgsgvvutyff-u!!p>q+b!dbj/uszp*m<p!DSfftgvmgfgdjuef!e\vM*jBh`iMuF!OsOfBgImDf`dQuBfNeBMIjQhMiBu)!e>f!oSjfggfmef!dgujf$e\vM!j\vhQiBuN)BwIfQdM4B)`1F/T1V*!-g!fwefgdj4$)\v1!/\v1g*j-e!owff$d\v4!)<1s/p1m*p-D!mwffydf4u)!1>/+1!*s*p<m!pwDffdt4v!gugpjueb!m<F*nsjptmtpjDwmffSybfeuj)bsobdffo!j>M!pfUnCjHtSttj!w>f!<s!p\vm$pjDgmeffygf!uV!T<F*`wNVBwQ!\v-!qwbfnd)5E!3uffsyvfumyDfpum!p>s!"],ze.phong=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u\v\v!!\v\vH0O0P!I$QQ!SfFoGjJgYf\ve!$\v","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!i\vu?-z!eppjcu/\vt!g\v/0u0j!p$=Q!SfFeGvJmYd\vo!j\v$$\ve!f\vg?jzoefp!cQ/ItPgO/Hh\vp!g\v=$!jfoedvmmvdeofj!$=\vd!p\vn?nzpeop?c\v/!t\vg$/jqobdNmxvpemfg!==!qfbedvlmjdoohj?$\v\v!!\v<$*jeoJd)mmvfeyff!U=uvvcqputv/PipfUbseb?f\vo!j\vm$!j>g!oeeJf!g\v!?VzTeFp`cV/CtPg\v/!hvoojjqgqpbsNnf!owpfud=4!!feejvgmgdvotjf$<\v!!v\vo?jzgeppscn/!twgf/du4v!qfunvjpt=t!jfwefv<m!dvoojj$g\vp!s\vn?!zwefpdc4/!ttgq/fhdovpmibQsq<b!nvwoojfg=p!sfne!vgmmdpobju$!\vt!i<jfodjoobfjtetb<S!fvwojjtgtpjsnnF!mgbmuppbuu!!,p!qsbbdmjvudzf<q!T\vu$djfgsejfego!jV/TuFi`hBjMMQeIfBuUdFfTmUg\vf!sv!o,j!gspbsmnv!dgfmqpTbuud!fbsmjqei/buUifhtjuM<e!f\vu$dffomegjfgs\v!!,v!ofjtgvpgsgnj!Ewufddf4s!jveDobjn/fusibhQjpMtejfuujdpfom<g!fvso!j,g!pfstnv!gngbjuE5u!dvfWsjjfex/NubiuhsjjMye<f!u\vd$ffmogefjsg!\v>!!\vu$ijhgjeMfhgo!jVpThFu`vVpW!\v4!dwfbws!z\vj?ozhe!pwcf/dt3g!/wqVbwN<p!b\v=$!jfgeevfmgd!oVjW$`\vD!M\vJ?Qz\ve!pwcb/stzgj/oohp!ngnmppDbtuu!iwhVjwmM=p!dfbemvVm<d!o\vj$$f\vo!e\vj?gz\ve!p\vc$/ftoge/jhgo\vp!i\vQ$tjugi!hejfmg=j!offeev)mVdToFj`$M\vJ!H\vIgUjNeBoQf*$!\v}!}<!cehfsg/jsopfmep)DVfTwFj`tBtPjNnBfQ!*>\v+!!wfbdsozbjjoehb!Swffwdj3t!twjVnwF3m<b!u\vp$uf!o<e{jzgy\v/!*\vs$pjmgpeDffgw!jVtTtFj`nNfB)Qs\vb!fvoojjMgppUsCnH!Sttb!n>q!mcfhss3/Es!pnmbpqD<f!w\vj$tftojenjfg!\v<!*\vw$Vjwg!e-fqgb!NVfTwFj`tBtMjQnIfB)NEB3Qf\vs!vvuoyjfgup!s>n!!stpbmnpqDmffwsj3tEt!jbnmfq!i5bdNfbwq!<\v!Q\vB$NfFoWeJjTgT\vJ!N\vF$`jFgTeVf!gg!fVeTgFj`$B\vP!N\vBgQj\ve!ovfo$j\vg!p<s*no!ptjbundqfmsfjsE3fEd!bbgp!N-bOqq<b!n\v!$-jmgbonesfpgo!!V-ToFp`jVuCjPt\vp!QvxofjjgWpws!n.!)gcmspBb3um!bbnpsNpbOqcJsovuufsoftqj!u>z!<m!b\vn$sfpooe!j<gf\vm!b\vd$Tfmobenjsgp\vo!!\v>$+j!gzeyf/gO!qVbTnF!`<M1J/H2I!U.N!B1Q/\v3!!v+o!j{gzpys/n*!wtVbwn!q-mqfbsN3mEb!nmsjphoi)uEN3bfqs<v!u\vy$fjug!o>e!fOgq!bVnT!F4`dVfCwP!\v\v!QvBoNjMgBpNsSnP!Og`mFpTbVu!!gmfjehgiju$N\vb!q<JoopujfuojttjpuQzw<N!w\v.$!f>o!eojpgj\vu!j\vt$pfQoxefjjgW\vw!!\v4$djfgwe!f<gm!bVnTsFp`oF!N>J!TmTbJnWsFpNOBzQs\vu!fvnopjfghp!s4nd!ftwb!n\vqgmjfeso3fE$!\vf!n<jotptjjuwdffNsbjqE<f!d\vb$gf!o+e!jmgb\vn!s\vp$oj!o>d!mmvbenfs!p=oc!t\veEgFtE?J\vT!`\vF$MjCgVePfEg!!gVfTeFg`jO$P\vS!N<B*MmNbBnQs\vp!Ovwo)jfg{pjsmnb!ntsbpnoq!m>f!sm3bEn!soppos!n4bdmfNwb!q<<1!/\v2$!j.g!o;e!f1g/!2V!T@F!`hVoCjPd\vb!GvuoojpgspGs`nm!hw!f>d!3o!pojpusdnfbsmjTEdfbdmbfg<!!u\vb$pfmoge!j\vgg\vj!e\vo$ff$o\ve!j<g1\v/!2\v!$>j!gi!uaheoffgsjuoTfseb)mVvTdFf`qUtB!O\vHfFtOmUf*$!\v%!%<!s)/esfbgmjvodffeq)TUmBfOyHfFuO!U>T!QiBuDhFo`fOsPuSTNsBbMmNvBdQf*q!t}!}<!*ewfVgwj!o-fqeb!N)sVbTmFv`dDfMqFtB)SED3PfBsUv`uOyPfSuN!B>M!NsBbQm*v*d\vf!qwTfmdf4y!fquf!s5udvfswc!O\vpQsBnNbSmB3MBVsDcF)QwTf`dF4T!Vf!zgff`eqgpjt$-\v!!w<fidu4h!otfvssugT`sobpmsvnd-f!qwtf!du4b!pnmbgq!O\v-g!jgemopfb$u\v!!g<bedsfbEdjtsjfed!u*juptof*U!b|i!qwmfbd!4=!!rb1/!s>p!mwpfDdf4t)vegGgejye))f!zgfj`!q\vpUtT/FyU*B-I!QeMGBe`yF)TfVz!fg`fqepgtj/$z\v*!-\v!gejGeeoyf)$f\vz!f\v`gqjpeto/f{$*\v*!<<!cw/f*dw4V!wr!2-!q>b!Nwbfidq4m)be)GEe3zf)sfvzufy`fqup!t>/+y!*b-/!sepGmepzD)fftzvfg`gqjpet!/\vz**C-`!MeFGOeOzB)IfDz`fQ`BqNpBtI/Q{M*B*)<e!fwofjdg3f!et!ug1j!m>f!$e\vG!e<yh)/w*VwwV/wt!u-*q<b!Nwbfidq3m!bt)uE23!f>s!veuGyefzu)!w>V+w!/bt/us*p<m!pwDffdt4v!gOg!j>e!!t\vv*sHg``MoFpOsOnB<I!Dw`fQdB4N!BrI2QqMfBs)qe!f>o!jdgsfpet!tg)jrm2f-$!\vO!*<<s!/w*fwdV4w!!r-1qqbfNsbqi!q>m!bd)sEp3tfts)vOu-y!fru1!*><+!!wbf/ds4p!mUp!D>f!trv2gqgfjseq!!\v+*!St`uM1F/OyO!B,I!Dr`1QqBfNsBqI!Q+M!Bt)ue2f/oyj<g!fwef!dg4j!mCf!$>\v!!r<2bq/f*swqV!w+!!-tqub1N/bzi!q,m!br)1Eq3ffssqv!u+y!ftuu!2>/+z!<b!/gsmppmbpuD!fetfvug!g>j!en!b\vy*)Be`pMuF)OUO-B!IUD*`-Q!BeNpBuI)QCM-B!)Ce*f*o<j!ggfmep!bguj!$t\vd!b\vmQfB!N>B!I)QeMfBu`!F>T>V!!1g/f1e*g!j@$!\v1!/\v1g!j;e!ogfb$d\vf!E<jsspfmdpuDjmpfoy!f+u!!j>o+w!fssptmfptDrfstuv)gegfjue*!<<!*ssfpumvpsDom!foypfsun)bsmbjf{ofj)MUp!U+C!H)Sntb!q>O!/syp!m+p!Dtmdfbymffu*!!<,*!wCV!w+!!-)qnbbnq)OE/3zf!s+v!utydfbum!f>*!!s,p!mOp!D+m!fnybfquO!/5{d*f<w!!~\v!Q\vB$Nf`oFeTjVg!\vg!fwebgsjz$j\vo!h<!fwwfjdt4t!jwnOfp!s>n!bfmd<o!bwjbesbzSjfowhj!twtfjdn4F!mwbNuwpQup!t4jdufjwp!o<<*!*\v1$/e1f)g4jdoffw!!F-O*W1N/B1Q)`4NdPfEwF!`-S*F1G/M1F)D4UdJfPwO!\v-!*\v1$/j1g)!4edffgwj)oufieh)jVMTeFf`uFdOfWmNgBfQS*!!>}!}u!iNhBjYM`eCfPuYd`fDmMgJfQsQ!FuSi!h?j!M1e\vf!uwdbfsmzgjfoSh!!<w*fzdu4j!dwbXqpps!m-efQtpvtgjgujjep)o5<d!f\vw$!f>o!esjpgm\vp!D\vf$tjvgg!gejfeg!j5odffew)!V\vT?Fz`eFpOcW/NtBgQ/*y\vp!cvqojjmgdp=s!nf!egvmmpdbouj!$f\vo!w\vN?bzqeJpocu/ftogt/joupzj<u!dvfosjjgEpqsjnm!dg=m!pfbeuv!mgdmojjq$F\vo!w|N!b*q)<o!j\vb$nj!geejfpgw!!F\vO?WeNbBfQi`/UtZgQ/Fu`jDpV=C!Ff\ve!vvmodjogjp$s\vn!!\vt?benbqfmif/stDgv/chfo!jfqoqwbnNbfqo<p!u\v=$!ffmetvfm\vd!ovjo$j\vg!p\vs?nT!Gtobpnjqumdffsm3gEf!SfwoowFnfbcqv<d!=\v!$ffeovemjdgo\vj!$\v\v$!j\vggojeefogf!$V\vT!F<`qVbCNPs\vb!mvvodjfgqpts!nE!3gsmfpmbqun!bstf!gnssbpdgujjopvo!S\vbQuBjNpS<B!M\vV$DfFoQeTj`gF\vT!V\v!$gffoeegjjg$\v\v!!\v\v$?jegb!feif/gtjgo/fheo)pDiMQJtQu`iEhJjSmF=D!UfJePvOm*d\vo!jw$b\vs!z\vj?oehb!fwif/dt4g!/woMppndnbpmDQtputijhujjmp=o!<f!e\vv$mfdooejj$g\v\v!!\v\v?$hjoojdempvdeoff!==!dfmejvqmEdjosjf$d\vu!j\vp?oe/bgfti//itfgb/eq?b\vN!x\vp$mjgo=d!mfveevfm!d=odjm$j\vq!c\vp?ye/bgfti//itfgb/eq?b\vN!x\vp$ejboidtm=v!effe!v=mgdpohj/$g\vt!/\vi?feb"],ze.hueSaturation=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gxp/ssnp!mtpbdn!q-m*fmst3iE)!cjhnsb3hmft<i!)w5bdsfzwj!o>h!!swpfmdp3D!hwbVswG<`!m\vh$!e<f*g!j*offh!oNbBSYt`tSfBoOuHiFh!j8m\v!!-\v^$1e]ftgtjfoofu!iShBjOmH!F-`{B/MmMt!i1)\vt!tvfoojugiphsjnm!`gqmbpnb!u-!*ifvhfo]bNSBoYp`jSuBbOsHvFu^b<t!!v-o^j1g]pospnj!ugbmspvbuub!tt!b-uzv/smbtuij)poop]jNuBbYs`vSuBbOtH`Fq^b<n!!v-o*jfghposbnS!fgvmip!b-u^!1m]jfhviiu!o-fyt/tm]tNiB)Yf`vSiB`OqHbFn^!<)!4gdmfpwb!u>!!nmbtqi`!i~v!f~)!g<mlpbbfus!cj!o<W^bsmfvufo-v!pgdm`pfbvui!]itvtffBomumi-h!jgmm!p>b!uf!hiovbfSStbtofhofu*i!h|j!mg!m<p^bsuf!uwobvmpvdf`!f>v!ij]ooWpbjmuvbfs!v,u!b)ti!v>f!Bfmhmo!b,S!oipvjfuSbbsovhufb*t!!0<!^3s/f1u<o!vjpgd!`)fwvbim]vffv!i=!!>1!/f1h*o!bsSffuvvis!o|!!w*bfmhvofb!s,!!>2>/!1s<f!ufomvtpfd!`jfgv!i))w!bgmjv!f|!!?*!,2,/s1f*u!osvfpudv`sfov!iw!b<mFvHfO!B.S!`2Y/B1N<!!=f!mstffu!osvfpudv`sfov!iw!b<m1v!f><!!s~f!ugomvppbdu`!fnvbiq!`utobju)v!ssbpugj!p<o2)!g,m!pfbhuo!bjso!W>b!mfvhfo-b!sg!m<p1b!u>!!tfbhuovbssb!u*j7p!o>B?m!mf-h!ogbmsp)b!ug!jt!b~u!v~s!b<uljbpfosScb!o<hsff*u!o|v!pgdm`pfbvui!!w>b!mfvhfo!b>s!!j|o!W*b6m/v1f!!,+!!*)s2f/u1o!v,p!dt`bfuvvis)buubjppmogB!m=m!!i,)!!tgbju!v|s!b*u,j,psofSuboovhpfd*`<f!vsif!u<vFsHoO!BdSm`bYnBqN)!w=b!msvffu-o!v1p/d1`-f!v2i/!1<*1<!!>~!!sgfmupobvup!dn`bfqv`im!juhoiju)o!fstptg)!g<mfphboub!SjtotWfbomuvifh-j!mg!m-pfbhuo!bmSjohpijuuobfstvtuBbmtm!--!fghmopbbSuf!vmij!huibupomfgt!t<S1b!o>h!ff*h!o|b!sg!mupobju!!<we!m>p!imtjfhsiiuuo`fftvtiB!mumb!p,m!gm!j<h1i/u7o!f+t!tyS/bmothif!<>!!jig!!u)bwp!m=g!!1</*1{*z!ys/fsupvmspod!)jmotWib3mcvhfs!!+>!!)mwt!i,!!42d/f1w*!<<!*fwmVtwf!!-sffhubvnsjo)!Ej3ofWsbvmuvyff!u,!!>)!ws!p+m!p)d2!/51d!f.w!!j|o!W*b)movjfb*n*!<e!j~p!wg!m~p!b<u*!mi!v-ft3!s-hic))4gdmfpwb!uo!sgv2u-f!sg!m~p!b<u1!/g73!-0!!gim!p>b!ui!!i~v!f<*1!/|7!!j>g,!!)ii!v|f!!*=1!/11/!1=*!!ii)v!fg!j,!>~!!2</b1u<m!ffEmdt!f0!!j*gh!!).i!vsf)!!?,!!21//15*!!>i!vif!!|.!>f!t2m/f1!<~!!g<mbpubmuf!Esdf!t0<!!*jsg!!.)!)c7)/!1,!!+1!/i3v!f>*!!i=!!|2!/*1y*b!Nsdf!t>!>>!!hg)2!!g,j!!)fgt3m!f.!!~g!2<*b!u+m!f7E/d1!!0+!!*icv!f.<!!hf)m!t>f!!ij!g|!!)*)y3b/N1d!!+>!>i!vsf)*!!g=j!!2</*1**o!jsNfdt!!,>!!ygb3N<d!)f!m.t!f1!/j3g)!!)0)!4b/u1m!f+E!di!v;f!**!o=j!N3d/!1,*!!ysbfNtd!)>!!0g!2b!u,m!f)Egd3!!@.!!6g/21*!!=+!!m)!)>3!/t1!!<0o!j4N/d1!*.!!.y!biNvdf!*>!!+b!u7m/f1E<d!!fumbtpfm!gs!f|t!!*>o!jgN2d<!!?s!fyubvNsdo)!!sgfjt!<<!1~/!3w!f0d!4*!oijtNmd3!s,h!cy)bwNfdd)4!!>i!tmm!*<!*|*!cw!f-dh4)!ysbhnc!<-!sj)gy!b)ni!t>m!/yzb!N>d>!!u1b/p1m*g!!|<!*s*hcc!!->h!)wofjdn4!)-ist)mo/j{n*!<>!!~o!jfNmdt!fu!b|p!mggm!p<bcu/!dg!3><!!cj!gu!b)pimtgm!/<{h!/=d!!1>/!6h*!!ugb3p!m>g!!i<tsm//d{!!>+!!s)!2u/b1p!m,g!!i<t1m//1z!*><!!mf!mutbfp!mgg3!!<>1!/i1t!m>/!{t!!,u!biptmmg/!z<!1./!2i.t!m>/!zi!!+u!biptmmg/!{|<!!*gdm!p4bduf!wg)2m!t>i!33c/h1s!!+4!diftwm!/~{!!<.c!hgs3!<o!ssvhucf/ss!!~>!!<i*v*f13/s4h0c1)/g22)-!!.g!3y-/!mittim!/-y3!g,!!-)22g/)1c0h4s/31f*v*i<!!>s!hcc//chh!s>!!<i*vyf/3msthic!)-g32g-!"],ze.blitScreen=["?$TjWoodfmfvsedfT!u=jcm","~v!o\vjggjpesonf!$t\vb!n<q*mcfhss3/Es!pjmnpbDhhfb<s!Gw`bmshz)jhoohj!swffidu3j!ew!V>w!<c!h\vs$/jsgpemfpgD!hVbTsFG``MmJhO!F\vBHSO\vJ!S\vF$IjUoJdEm!vgeffe!g=jf$o\vd!p\vegjjoeho?f\v$!\v\v!$<f*oweVjwg!\v-!f\vh$bjngje)fEg3!fEsJvUuIyFfSuJ!O>H!\vs!p\vm$pjDohdbmsvGe`fm!h=!d\vpfntnmpfo$?\v\v!!<w*f*dw4V!we!j-ufihfbsnjjo)hE)3wffsdv4u!ydfpum)pCsH*S!t|p!Ugsmbpfbouj!Mh!s>j!es`pqmpptDjhubjspGo`!m>h!!s\vbSoBeF)OhJmM``GFsTbVh!Dgpfpesgej/$y\vz!*|<!!*w)fodj4b!ne!jeujipfws!`\vtgijjegouf`$S\vH!C~!!><!CwHfSd`4u)g1j/i3t6`!s0f!i3u6j6e/!1,-!!s.p1m/p3d6!!o0s!v3u6f6s/!1<-*!o1p/j3u6j!t0p!q3`6e6j/s1h*!<-!CeHjSu`iufgsj`itti`jsgfui`uSjHeC!!+>!!1n/j3y.)!3-/C1H!S+`!uegjjuiitf`s"],ze.pick=["~0!0<!e$fQnSsFpGgJtYo\vb!svuo!j+g!pysjns!ucbpNpxmf!jvWUmffyeupvNsvf!<+!!vyojjsgupbsNnu!dnfbkup4s!QvvV!w>N!boupsjjuyj<t!pvQo`jmghp!s\vng!jnebouf5$!\vv!Q~s!p<ksfpdmupNDbiudsujbyC<b!!v>o!jsgppmspnD!indbuub5C!wv!N|p!e*fsmpNmbpuDsijdyu<b!Cvvo)j!ggpjs!n\v!SnPbMuP5D!IvDNUpBeCf!mgWfjefgxjN$b\vu!s\vjgyj<e!obfu$u\vs!j~c!v<u*f*!1w/f2d!4-!wbVObp)s4ndbfmw<!!+b!uyujssjucbvNuwfV!vw)f3dd4f!wb!Q>p!twjVuwj!p|o!<*!fbsuvuusyjfcUvvu)f!!gwjf!d\v3f!tbmVfw$<\v!!\v<$*jyg/ewfVgb!!C-B*U*D1I/D2P!M-PwSV\vb!)v4odjfgwp!s+n!!ycjpspumb!NvwCVbvu)d3idDfpwm)p4sd<f!wb!u>u!swjVcwv!u\vfQ!JwMfDd`5W!Vb!CgbfuedgijD$p\vm!p\vsg<j!ewobfs$z\vj!o<h*!ewffnds5p!gwtCobbusdui!D+p!mypjss<u!b\vN$mffoeepjNgv\v)!4\vd$fjwg!e>f!go!pVjWu`jDtMpJQQe\vm!swpbXswz!j\vo1h!!>waf!dS4F!QwQVJwM<D!`\vY$PfCm`tYfB\vN!!wgbjs$z\vj!o\vhg!jwefodf3$!\vw!V~w!<<!e\vf$nfsopegjtgo\vb!s\vu$!j+g!eeffgd!oCbBuUtDoIJJyOjTsUuBbONDbF!\v>!!veofjngsppsgnt!ocbpspum!!|v!V*tffdJoobtuutbooJdfft<V!v\v)$!egfjg!j\voFfD!OVBTUFT`OJJOITDUUBBOCD!JgOfHe\vg!j\v$$\vj!o~d!m\vv?ezfe!p=cj/ottwu/bhoodjjooohj/lwtt=/!iffebvem?d\vo!j\v$$\vf!o|e!j*gh\vo!jwobosjzljTofht!Vwvf)d!4g!jw!X<p*smmbenQspptOjbu)j4pdof<w!!w>b!smzbjnoshp!Owufddf4k!cwpM!p4ddbfmwQ!p<t*joupjjpuoj<t!p\vQ$be)f4gdjfowf!!>V!ToFp`jTuLjJtOpOQJmObHd\vp!M\vw$!e<f*g1j/o2f!!-CoPpOjFu`jUtFpYQUbV)S5Fd\vf!wv!o>j!gepfsnns!pcgptpomb!svuV!t5fdTflwj!o|o!j*oehj<p!w\v)$ojjobdnm!veejfp!w=!t\vl?jeobofjio/ht/w","~0!0~!!$<QeSsFbGdJtYj\ve!!v|o!j*g1p/s1n!!>c>p!pbm/!svpEmjptDdhbbsseGT`fmmhf)d!ugbjc!m\vfg<j!evoofj$g\vp!s<ns!pwmfpdD5f!tvsGfjwyfQSjlddljSQfywjfGsvt!f>D!psmppmsp<D!hvbosjGg`pmshn!!\vgfmtpmbfu$!\vv!B~m!q<isbpUmfptDuf<t!svfowjfgSplsdnj!QcypjpGmv!!v>U!ssbpomtpqDbhsbfsoGu`<m!hv!o|j!gfptsmnf!!c~p!p<ms!pvmUpfDyiudvusbfC<w!!\v>$!jsgpemfpgD!hVbWs`GD`MmJhQ!\v|!!w*bsspzmjpoDhi!dwufbdC4v!)w!Vgwj<!!\v\vS$PfMmPtDfI\vD!UwBbCs!zgjfoehg!jw$f\vd!3\v!?wzVewp<c!/\vt$gf/oyepjcgq\vj!mvdo=j!gfpesvnm!dtobjn$q\vm!f\vs?3zEe!pvcT/btngq/mofpsj<u!d\vf$sejfEgqjjomfd!=D!MfJeQv`mEdJoSjF$D\vU!J~P!O~\v!!~\v!$<jeosdbmdvtejfe!!=|d!m*juqtEfjUsbfidqumjBpvo!/>g=t!/bi/fsbpem?p\vD!wwvb)s!zgjjo!h|!!wfftdm4f!!w~M!p~d!b<meQspbtdjtujjep!o|<!!*w1b/s1z!j>o>h!!bw/fsdp4m!pwDXwpvs)m!egQjp!t|j!u*jupoof<s!b\vq$tjogbesfUgv!)C!BgUjD!I\vDgPjMePoSf\v$!\vv!o<j*gwpVswn!!-cspfpmmq!nvbCTbvu)dEi3Dfpsmvpusy<f!uw!b>s!zsjpomhp!Dwwfvd!5\v!fwtCmbfu$d\vi!D<p*mzpys/<w!V\vw$!f-osefjmgq\vn!b\vT$vj)oEd3mfvsevfu!y=fdum!j>q!csppym/pgDtw/vi!f\vbQeJ?M\vD!`wWpVj!eg!fnebgjjo$)\v*!!||!!*wffmdc5b!uvdwfDmpfmTpess<b!djtgj!E)vvaU!f%y%u!vfs"],ze.envmapDynamicCompose=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*g1p/s2n!!-tcbhnsq/m*fbsi3qEm!bu!f-ycuhvss/f32s<p!mvpodj!g-pcshns!/t2bsnpqmmpfds)3yEj!nu)f5ydufvws!f>3!<s!pvmopjDghpbssnG!`gmmhp!b<ub!/p3gsgptmfpud<!!>w!bbsizqjmobh!!uwbfpdm3g!!w<V*w*<w!V\vw$!j-o3dfmsvveufy!f=uf)oEd3pfesjvouhy?f\vu!)wspbjfeo!jnMbpjUoC)H*S!t|!!>w!f3ds5p!mdppdm!p5sd2f!w>!!<u*f*yzu/vwsVfw3!E-)uufftygugvps!f.2!-y!/wwfVdw3)"],ze.blurH=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!zw/fwdV3w!!w-Vfwv<m!bvwo!j+g!p1s/n5!!g,m!pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tzv/nw!V,w>!!-uffvymubvws!f+3!E1)/j4n!b,h!fy-/!wwVfwd)33)dwfVww!/-yf!h.b!n5j/)1E!3+f!swvbumyvffu-!!>w,V!wn/vzt*!*<!6+5!313/21/612!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b3h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h4b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!214/612:/219!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b2h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h3b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf!u.!!>2,/!1n!v+t!!w<b2m4v6f2-/!1w!V+w!/*z*"],ze.blurV=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!fwvfmdb3w!!w+V!w1</!5v!o,j!gzp/swnV!wg!m-pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tfvvnm!b,w>!!+u!f1y/u4v!s,f!3zE/)wjVnwb!h-fy-/!wwVfwd)33)dwfVww!/-yf-h!bwnVjw)/Ez3!f.s!v5u/y1f!u+!!>w,b!mnvvft*!*<!6+5!313/21/612!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s3f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f4s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!214/612:/219!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s2f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f3s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf-u!!w>V,w!/nzv!t.!!<22/416!2+/!1w!b+m!v*f*"],ze.blurDownSample=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j1g/p5s!n0!!t*b*n*q1m/f2s!3-E1!/j1n)b3hdff<w!!w+b!sfz{jjoThm!fwyffdu3!!,w!VwwV<w!!v-ofjhgbpnsjn)!Ew3ffds3v!uuyffyuf!m,T!j*{*f1</!2w.p!j-e1!/n1b)j3od)f*w!!|+!!hfm{`jGTsmbfhyDfpum!p,s!!w>V!w)!u-ffyhubvnsjf)3EE3)fjsnvbuhyff-u!!w,V!w*!*,1!/u1f!y-f1m/T2j.{)f3!d+f!ww!f+d!3f){2j/T1m-f!y1f/u1!*,*!!w,V!wu!f-yfuhvbsnfj3)E"],ze.flow=["~v!o<j*g1p/s2n!!-c1p/p1m!!-v1t/f3Y![+<!!wbVuwu)s5jdcfvwu!f>!!wofpdj4u!jqtpptQj`umjhp!o<<*!zw/bospzjjuojht!pwqf!d-3y!/woVpwj<u!jwtppjqe)!3ndbfjwo!)>*!!w|V!wj!gf!t)mvft!f<Y*[{*/!owpVjwu!j>t!pwqf!d-3y)/qopptjju","~d!p<oztuuj!tgomfpubouj!!q+j!3b!/>s!p7m/p3d9!4+2!9s6p4m<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!ejonfbmhcf!<+!!v*o*jzgyp/s*n*!1n/b2u!4-!wvvw)N4bdufswj!y+<!!yvjosjugbpNswnv!)j)o3ud!ftwi!b-qffh<b!nvjo)jEg3pfssnv!uwyffdu5!!>c!msfpomep<d!!v5odjfgwp!s~n!!<g*mfpmbhuo!bj!o-u!f*o3tjjqu!z+<!!fwmbhsozBjeophn!)wtfpdd3!!+w!V1w/<3!!w+p!j*ew!Vnwb)jiou)h*o!f|m!)w3fddf3w!!v>w!<w!vg!m<p6b/u1!!b+o!hqmffu!t>!!.b!u*bqof)uwtV!w-/fzm-h!owbV)we/pyn*!!>0!!fqmjh3o!B,e!p1n/!6u<b!pjmgg!!)<t*i2b!q,f!!f>q>b!i1t*)!u|b!pvmwg!!>0!!w1V/w2!!,>!!1q/f6u<t!!~u!bfpmmtgf!!|j!gf!t)mtfi!b~q!f<!*>f>m!h2o*b!!|-!1v/w3!!>+!!w*fwdV3w))mifuoh"],ze.fxaa=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jbg/p*swnV!wt!b-nfqhmbfnsj3)EE!3jfnsbvhufy<f!uv!o>j!gbp/ssnp!mwpfDdh3b!ssGf`tmphm!v<u*j!p*o1</!1w)b5sdzfjwo!h-!1w/f1d!3-!1w/V1w!<-!1\v/$1e!f-g4j4o9f1!/G1Y!B-B7`7R2V/B1M!J-U6Z8`/Q11!!-2*/11/\v1!)\v5$deffwg!j-o*f1!/G1Y)B5Bd`fRwV!B-M*J1U/Z1`)Q52d!f2w/!6-\vo!p\vj$uevfmgpjtoffs!!G-YfBhBb`nRjV!B-MfJhUbZn`jQ!3-!f3h/b1n\vj!!\v-$*e1f/g1j)o5fd!fGwY!B-Bw`VRwV!B)MsJfUeZb`iQT4m!f5y/j1Q\vb!b\vy$Ge!f>g!jsopfm!pGDYhBbBs`GR`VmBhM!J|U!Z*`)Qo5j!b2n3!/e1j\vp!w\v!$~e!f<g*jNobfn!vGmy!b-b{Czpyp/m*!Nctpppqm!\v-!y\vf$ue)fqgpjUoyff!UGbybbybGG)m5pubbup!mgGmbpbbyuG\v!!o\vs$veuffgsj!o<fo!hGjyTbibuGhmopfbmu!3+!!wyfjdq3c\vv!T\vu$fetfgggjPomff!yGjyqb!b>G,m!pzb/uN4t!pwqf!d*4o\vb!q\vT${esfpgij)ogfj!!G<yobhbjGTmipubhuo5f!mw!f+d!5y\vj!q\vc$veTfugfjtogfg!PGmyfbybjTqb!u>),y!*y!/dNmtbpnqq!)*yo-b!q1T/{1s-p!i2a/)1g*j\v!!<\v*$Ieyfjgqjcovft!!G-yebpbpUHfuyf!ttgbgnPqmmffysj3qE)\vy!b\vn$!e>f!gyjjoqfc!vGTyubfbtUgfgyPUmpfqy)juq-!!uqb*p!muGfbybuyvGs!f<31E/)1u!-;!!qu-f!t1g/g1P*m\vf!y\vj$qe!f@g!joobfq!TGeypbpbhU!f>y!Pegpgp)Huu-f!tqg-g!Ppm-f!ysj*q!!uufbypumvGsbfb3yEG)!u<-y!jqq!c,v!T)zpu!j+m!bsv*R-b!b1y/g1!*+\v!!HGyyjbqbcGvmtp!b>u!!IGyyjbqbcMvvtn!bu)bGpymbGbbGbmypGb!u<56!/s1h!c,b!**!*|q!dsSfiuuvhsoof!Msohbcqbt/.z)<!!+~!!uGtyeb)b!G>m!pubfut5g!gGPymbfbyQjjqy!fumbTpimbGebfbsy)G!!G<yGbybjGqmcpvbtu!3+!!qGpytj-q!cGvytb!b>G!mHpybjuq5c!vgty!bubbDppmoGtbpbmyfGQ!p<tQQopbtq-T!eGpypbhb!U;f!yO!oubfqyT-e!pGpyhb!b@U!fOyo!pgjyubdbfDspjoet!p>m!fo4b7q1TUefpypFhy!qmCpjpbCtbObfyhGP!o<f*-Q!uGtyeb!b-UOfuyt!eg)yobjbnD!p>o!tuptmef!4u7b1pUmfGybFbyyqGC!j<bQtuOtfeh!U=x!pO-u!tGey!b>b!GOmoppbjuu3d!fgsyjbeb!RmvpbpmCjbubzySGd!q<Gisubhnoff-M!oGbyqbtb0G1m/p2b!u>5!!qgdySbibuDhpooftMpombfqStd!quGbspbmnGfbPbqyuG-!!<Gpysbfb[GUmMpNbbun5v!mg!y>bab!D*p1o/t1p!m=f!SQdeqoGFsbbnnvfmP)q!u>3!-Q!oGbyqbTbeGpmpphb!um5p!pgCybbbbyDGp!o<t*pOmuft4e7!1,S!dQquGtseb)n!f>P!qiuu3h-o!fGMyobbbqGtm!pubbup!mgGybbbbyRGv!b<mpjsufz[TUvMcNqbjnyv-m!!G>yab!b*G1m/p1b!u=!!gOyebobFRbvnbvmmj)u!z>F!eOhofbUqiTsefptpihp!mmep-p!CGbybbybGG!m<pzb/uN!tgpyqb!b.R!vzb/mQjtupzqF!e>h!fQUuitsef!t*iopbmqeTN{jsop-i!aG)ygbjb!G<mzp/bOut!pgqy!b.b!Dzp/oNttppmqf!F>e!hOfuTtieb!s*qoobfqtTt{-s!pGiyab)bgGjm!p<byu/!Ngtypbqb!D.p!oyt/pQmtfpFqe!h>f!UQiustfet!iupbmpem-G!bGbyybGb!G<myp/bOut!pgqy!b.b!Dyp/oNttppmqf!F>e!hOfuUties!futbippmmGebNbjyoG-!!~G!y~b!b~G!m<p5bQu`5Z!UgJyMbBbVDRp`oBtBpYmGf!4+7!1zD/pQoOtgugEpj!s>!,*!!z|/!QGtypbqb!G*mQpfboup3e!aq)pgtjN!<<!5qQp`tZNU/JyM!B>V!Rq`pBtB/YyG<!!+q!pyt/NQ/Ozg!g>p!!q>p,t!/yz/<Q!tGpyqb!b*GQmfpobpue5a!)sghjc!z<N*!Q>f!oGpyebab)U!f}y}U!p*qO)fuofpye-a!)q!p>t!NQ*O<f!o\vp$ee!f<g5jQo`fZ!UmJvMnBbVNR!`sBhBcYzGN!/+z!\vz!/GQyObgbgGpm!p>b.u!!zm/vOntbpTq!!>*!OGfyobpbeMav)ngbj)!G<y5bQb`UZfUyJPMgBgV)Ru`fByB-Y!Gq!p+t!Ny-/!QGOygbgbpG!m>p.b!uy3/)O1t/p1q-!!*2O/f1o*p-e!ag)ygbjb!R<vebfmmjbudzTSudoqfGjsebbnsfh/!y>z?*!**<Q!eGoyFbbbnGvmmp)btuc!bm!v>n!bQFf!o>p!eG!y<bebfMmvbndbT)uGoyfbjbeUbfsyhP!g>g?)!u*fOye-o!FqbpntvNm-)!tGcybb!b>G!mOpfboup3e)!2</61/-1!!1+/!1O*O-b!ngvymb!b.R!vQbemojFubznSvdmq!G>s!bQnefo/Fybzn*v*m<!!*GQyfbobpGemap)bguj!!m<v6n/b1O!!+>!!OGOybbnbvMmv!n.b!)OGeyobFbbUnfvymP!g>g!)OuefoyF-b!nqvpmt!N*-O!fGoypbebaG)mgpjb!u<3*)*1z/y1/-Q.t2p/q1!*--y!fguy)bqbpRUvybfmUjbubzySGd)qbGnsvbMnbfb/yyGz!*>*!<Q!eGoyFbbbnGvmmp!b*uQ!fmovpnebaX)!g>j!!G<y*b*bzMyv/nObt)pGqy!b-byUffuy)PqgpgU)yuffUyb-b!yqGp)tbNn-v!MGbybbybGG!m>p!bOue3o)F.b2n/v1m-!!*1O/f1o*p-e!ag)ygbjb!R|v!b*mQjOufzoSpdeq)Ggsjb!n<f4/Qy`zZ*U*J<M!BGVyRb`bBGBmYpGb!u+!!nzb/yQTONg!g>p!!n>b,y!)zm/vQntbpTq-!!*mQvfnobpNe*a<)!gGjy!b<b4GQm`pZbUuJ!MnBjVoRT`NB!B>Y!Gn!j+o!)ym/vQnObgTg-p!!m>v,n!byN/*Q<t!pGqy!b*bQGfmoppbeua!)ngbjy!F<T*NQ!f>o!pnebay))!m}v}n!b*FO-f!onpbeyaT)N!*><!!QGOyfbobpGem!p<b4uQ!`nZjUoJFMTBNV!R>`!BnBjYoG)!m+v!nzb/FQ-O!gngjpo!T>N.*!<z!/GOytbpbqG!m*pObfuo!pnebay)XgOj!!><!4nQb`yZ)UmJvMnBbVOR-`!BmBvYnGb!X+*!<y!/GQyObgbgGpm!p>b.u!!yn/jOotXpOq!!>*!Onfjoop)emav)ngbjO!-<!emfvmnbbdXT*u<o!fGjyebbbsGhm!p>b?u!!*sQbeoohFfbNnbvym!)>t!cnbb!y>)!nQbfyoXpOe-!!<nebfymFbTdNT*u<o!fGjyebbbsGhm!p>b?u!!*sObeoohFfbNnjvom!)>t!cnbj!o>)!nOjfooXpOe-!!<n6j/o1F!T+N!*O<O!bGnyvbmb!G.m!pQbeuo!Fsbbnovhmf!N>b!yQTedobFmbfnev!m>!!*sQbfoohpfeNab)yg!j+!!<g6y/b1b!R+v!bOmOjbunzvFme!h.f!UOiesofFtbinpvmme!<>!!GOyebobFGbmnpvbmu!!*sObfoohpfe!a>)!gsjb!o<h*f*Nzbyy/!Q.t!psqb!o-hyffNuj)oq<p!UGyyfbUbbGbmypGb)ub!nsvbMobhbfyNGb!y>D!mQbenoqFfben!v>m!!n*bQyf)ogpyebab)Rgvjb!m<j*u*zzFye/hOftUpiqs!f-tyifpum)eqNpjUoy-f!UsbbboyhGf)NbbnyvTMdbbbmyfGe!*><!!OGeyobFbbCnpvpmm!!*fObfsompzeFay)jguj!!>|!!s*bQoOhffo!p=e!)sgbjo!h<f3NQb`yZDUmJbMnBqVfRe`<B!BjYgG)!f+b!szm/zQFOygjgup*!!>s,f!uzv/sQot!psqh!c*zQNf<o!pGeyab)bgGjm!p<b3uQ!`mZvUnJbMOBXV!R>`!BGByYbGb!M+v!nyb/)QGOygbgbpU!f>y,P!gyg/)Qutfpyq-!!*qQpftoNp-e!aG)ygbjb!G<m*pQbfuo3p)e.a2)/!1}-}.!2*/O1f*o-p!egay)b!b>R!vQbOmfjoupzeS!d<q3GQs`bZnUfJ/MyBzV*R*`<B!BGYyGb!b+G!mzp/bQuO!gmgvpn!b>T.F!!z>/!OGtypbqb!M*vOnfbo)pGeyab)bgUjf!y<P3gQg`)ZuUfJyM-B!VqRp`tBNB-Y!GG!y+b!byG/mQpObgug3p)!2>/.1!-y!/2O/t1p*q-!!*gOyfbobpRevab)mgjju!z<SedfqmGbsdbTnufo/fyjze*b*s<h!!G>y?b!b*GQmepobFub!nmvvmn)btOcFb!!>>!!GQyfbobpMev!n<be)fGmybbdbTUufoyfPjgegb)suhf!y>-?!!q*pOteNo-F!bGnyvbmb)Gtmcpbb!u>3!)O2f/o1p-e.!2</61/*1-!!+g!yObObbRnvvbmm!j.u!zQSedoqFGbsnbvnmf!/>y!zQ*e*o<F!bGnyvbmb!G*mQpfboup!emav)ngbjT!X<!6>/!1G!y+b!bOMOvbnnbv)mG!y.b!bOUefoyFPbgngv)mu!f>y!-O!eqopFtbNn-v!mG!y*bObfGomppebau)3g)j.!2</*1*-z!y2//Q1t*p-q!!g-yybfbuR)vqbpmUjyufzUSbdbqyGGs)bbnnfv/Mybzb*y*G<!!>G!yQbeboGFmbpnbvum!!m*vQnfboOpTe!a>)!gmjv!n<b*O*!z,y!/mOvtnpbqT!<-!yGfyub)bqGpmUpybfuU!bmbvynGb)XbFn!v>M!bmbvynGb!X>!!,O!emovFnbbnFv<m!!G*yObfboGpmepab)ug!jt!v|c!q*jQyOSfdoqpSeb)oghjf!!<>2!Q2`/Z1U0JsMbBoVhRf`<B!BGYyGb!b+G!mzp/bQuO!gtgvpc!q>j,y!OzT/XQFt!p>q!!m*vQnfboOpTe!a,)!gmjv!n<b2XQF`<Z!UGJyMbBbVGRm`pBbBuY!Gf!e+h!fyI/pQsO{g2g!p>!!>),.!3y//1Q!t+p!qm!v*nQbfNo*p!e,a!)mgvjn!b<O*TQ<f!oGpyebab)G!m}p}b!u*!OffeohpfeWaf)s!u>2!!Q>O!f)o.p3e/!1m!p+p!CmbvbnybGN!*<!2,Q!`mZvUnJbMXBFV<R!`GByBbYbGG!m+p!bzu/!QmOvgngbpO!F>T.F!!z>/!Omtvpnqb!O*FO!f,o!pmevan)bgTjF!<<!2GQy`bZbUGJmMpBbVuR!`mBvBnYbGO!X+O!Fy!/>Q!Omgvgnpb!O>X.!!,y!/mOvtnpbqO!F*<O!fGoypbebaG)mgpjb!u<!effemhbfdITpuso{f3j!e>b!s)h.!3>/?1!!*+Q!emovFnbbnFv*m!),t!cmbv!n>b!OQFfToFp<e!!GmypbpbCGbmbpybGu!!<feefhmfbWdfTsuuo3f!j>e!b)s.h3!/>1?!!+*!OmevonFbbOn*v!m,)!tmcvbn!b>O!XOOfFo<p!eG!ymbpbpGCmbpbbyuG!!m<v6n/b1O!X+T!XO!O>b!nmvvmn!b>O.X!!Q,e!omFvbnnbvTmX!<<!6G/y1b!b+G!mOpObbun!vmmv!n>b.T!XOTeFo!F>b!nmvvmn!b<T1X/!1,!!=m!vNnNbbTnFv<m!!G>y!bpbsGfm[pUbMuN!bfnevhmf!Imppsp{C5b!b>y!G)!b<cFty)jfqechvftI!p+s!{E2y*j!q+c!v3t/!1>*!!G,y!jbqcctv)tf!euhbfpImpGsb{b3y*G<!!<G6y/b1b!G+m!pObOub!nfvemh!f.W!fNsbun5v!m>!!>)!bNcNtb)nfvemh!fuWbfpsmuG2b*b!y+G!!3</11/*5!0,1!/b2c!t+)!fueohffjWefbssuh3!*><!!eGfymbbbdGTmupobfuj!efbeshhf!Iupbsp{m4G!b>b!y)G.!3</T1T!b+n!vmmv!n>b!XO*O!b,n!vmmv!n*bOOsXjTbXq<a!)Ggyjb!b<G*m*pQbtup!qf!e-hyffWuf)squp4U!y>f!U)b.b3y/G1)!b+n!vmMvbnbbyTG*!!>,!!QmevonFbbTnXvTmF!<u!bGpymbGbbGbmypGb!u<!DfyejhqfcIvpts!{+!!>D!ybjcqtc)vfte!h>f!IFpysj{q4c*v!t,!!ufbephmfGIbpbsy{G5!<<!*G*yObtbpGqm!p-byuf!uf)eqhpfUWyffsUub!b>y!Gb)cbtn)vfMebhbfyWGf!s>u!4O*e!o,F!bfnevhmf!Wufbspum5G<b!bGyyGb!b<G1m/p4b!u,!!t*vDcyqjjqycOvXtT+X*O1F/T3F.!)>)!!m>v!nEbyOjXqTcXv!t,!!umbvpnmbGObFbTyFG<!!<G1yQb`bZGUmJpMbBuV!Rm`fBoBhYuGi!T+j!hzo/!Q>O!gggypb!b,R!vzb/mCjtupzqS!d>q!Gzs/bQntfp/qy!<<!1GQy`bZbUCJpMpBmV!Ri`pBsB{YTGq!b+o!!y>/!QfOeghgfpI!p,s!{y!/?C>t!pfqe!h>f!Wyf/sQut<p!qG!y<bQbtGpmqp!b3uu!btpvmcGqbjbyyBG!!><!1tQv`cZqUjJyMOBTVXRF`!B+B!Y3G/!1+!!,z!/tQvOcgqgjpy!O.X!TzX/OCFtTpFq<!!>j!gz)/aOitppsq{!T<q1bQo`*Z!UmJvMnBbVOR!`>B!BmYvGn!b+X!<y!/jQgO)gagipp!s.{!Tyq/bCot*p!qm!v>n!byT/!O>t!pmqv!n<bOFt<p!qj!g3)uibppsm{GTbqbbyoG*!!<m6f/o1h!u+i!TojhhjoT!i>u!hgoyfbmb!R>v,b!mzj/uCztSpdqq!G*sobbnqfT/{zs<p!iG)ygbjb!G<m6p/b1u!!+t!vochqjjTyiCu!h>o!f)mt!v>c,q!jyy/BC!t+p!q)!2*/o1b0q2T3{/s1p*i*a!).g!jm!v<nzb/Nf<n!bGsyGbqbdGSmzpubjum!bhvsRbbebjyfgo!u;O!!1>/!1m!v@n!b*Oo!b.q!Tm{vsnpbiN)<!!>G!yzb/bQGOmgpgbpu!!<hys/bfenjbfsoGuqTd!S>z!umjvmnbbvTR!b.b!ymgv!n;b!N1</!1G!y@b!b*GombpqbTu{!smpvinab)O!O>!!>y!/mQvOngbgOp!!,<!QmOvgngbpN!<3!uGbypbmbGGbmbpybGu!!<mzv/nNbtTpTq!!>>!!mzv/nCbtTp!q,!!<myv/nNbtNp<q!!G>y!byb/CCptppmq!!q<bCjtspOq!!>3!ubbcptm)GhbsbbyeGj!f<o*ufOh*o!b?S>q!dbScytj)qhcsvbte!j+f!o*uCTy*j<q!cGvytb)btGcmbp)buub!ThbsbbyeGj!f>o!uD!y>j!qncbvyt)!bucbtp)mhGsbbbeyjGf!o<uoOh*j-T!ibuchto)fhms.b!e>j!foohujTT*i*u<h!ojfgm)!q*bOjs"],ze.points=["~v!o<j*g{p/sonp!jnubjut5p!Qnwpne!f.m!N0b!ufsmjbyd<t!)v!o>j+g!pfs{nj!Tnubouj5p!Qn`pmehf!m*WfjwfjxuNdbfuqstjsyf<Q!tvjo)j!ggpjs!n<!*n1b/u25!!.q!s>p>k!f^d!u4j!p]o^N!b3u!s]jyyj<s!uvboNjogppjsund!fnkbpus5q!)w!j>f!xfNwbjuusdjfyq<t!svfoQjtgjp!smnp!pgcm!p~b!u<!otpdjbumvfm<p!tvfosj!g+p!sfn{!jwtf!d>3!!fv{VjwTPugogjtpfQu`<m!hv!o|j!gfptsmnf!!c~p!p<mo!pvjtufvVmwpBtsfssb!z+<!!zbbusussBjfc{vjutf!!>w!ffd{4j!TqupotjjpuQj`pmoh<!!|v!o*jzgbpsssnB!fc{pjpTmf!tvvt)f!Dgpjm!p<so<p!jbuujutspjQcwvnu!f+!!wyfjds5u!bdNpomppjsu<d!fwkbpsszqj!o>h!!owpfjdu5j!twpDQp`mmphs!<<!obpujuusjjtcpvQuwfn!!w+f!dy3j!sbuVbwNPxgfgjtWfmuf<e!pwnb!s>z!joophj!uwjftdp3Q!wwnP!g<g*t1f/u2<!!-veofjngsppsgnt!ocbpspum)!5qdjfdwl!j>o!ho<p!jbuujutspjQcwvnu!f5!dwffwd!5<!*qojpdjluDjptmppqs)<4!dvfowj!g>p!senf!ngsmppgbtuo!btsju{!f4<d!fvwo!j~g!p<s*nu!fgtmgpgbPuw!Vsbf)t3pdmfvwu!j>p,o!<u!fvtogjggPpws!n|!!c*pzpbms!svBtwfVTfjt{vf)B!sgsjb!z<<*!ubfutugsgjPcwvVuvf)!3gdmfpwb!u>!!tujf{tfgBgsPswb!z~<!!<cspppmmp!dj!t>Q!fssptmqpfDdwu!j|w!f*NsbpumspjDyf)tnvb)u!5g!jn!*f!t|m!fs!f~u!v<ssop!mnp]D!l3d!j^q]!!>4!!s^p!m>p>D!w.!!|2!/*1h<o!j~l!dwjpqj)e!!gnjb!j|o!)*","~$!e~f!g<jsopfm!pVDTfFt`vNgBgQj\ve!!v>o!jsgppmspnD!hwbfsdG5`!mehj!g|g!vfttfm<f!!v~o!j<gsppsmnp!Dgwm!p>b!us!ppmqpbDdhjbuszG<`!mvho!j<gepssbnd!tgjmep!b*u1!/b1m!q>i>b!Ubf/tsup<m!pvDofjtgvpgsgnj!ec)p!pgmj!!v|t!f*Dhpomjplsd<j!qw)b!sgzjj!o<he!swbfddt5j!ew!D*pumtpfsU<b!ivqomjbg!p=s!nb!/cspppmmp!Dqfjtdvlgjgojhe<)!!vgojj!g\vpgsjne!ocfp$p\vm!!~e!j<t*dwbvs!e-Tqfbmnf)dEu3bfcsmvfu<y!f\vu$!j>o+d!msvpemfp!D=fctmvpgpgnjTef!m<fudfutjgwgfP/wg!t>/,i!fwbve!?<\vf!mvbodjTgwpvs!n+!!wefsdp3p!DvuwoTjdpbQm`fm<h!!w>b!swzvj!o3hd!fwwf!d|3!!*wfPmgcgbtufduf<m!f\vT$ejsgb!detfjgejao!f}e})!VhToFj`lNdBjQq*a\v)!!vgojj!g\vp*sQnB!Nt`bFnTqVm)fesf3oEj!gnfbeq!<g!j\v$$\vf!o~e!j<g*\vz!uwjpdjbeq!pn!b+j!ob)/*f!t|v!g\vg$jjeo!d-m{vzeyf/!f=tcvmgpgpjneT)f5mdffdwu!j>w!fs/pgmtp/Dcfptevzg?g\vj!ew!f|d!5f!temjfg!g~v!t<f*Dzpumjpdsb<q!pj!g+!!)ba/qsjpdmlpjDowh!!-%{%z!yv/tsfpDmppmDpws)*5!d|f!we!j>g!gsvptmfpD"],ze.bokeh=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<31!/w2V!w><!!bv/osjpgmppsDnh!bcspGp`mm!hv!t\vfBEIfQqMuBi`<F!EvJoSjSgFpWsPn!!gtfbengqjm$f\vs!3<E1!/u2D5p!m0p!sm<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!*u5Esfvqmucig<p!ev!o+j!g*pusdnf!scspppdmu!dvftqftHb3!e+<!!*v5o/j1g!p-s1n/!1g)m3pdbfuw!)u!i,s!fztyi/pwmVew<!!-vsopjmgppDsun)!Eg3mfpsbvuu!ynfbuy!c>m,v!sm<p!dv!o<j*g5pssvnm!cggmppeb!u+!!b*qufdsfusvsspfd<u!dvfoqjtgbp!s+n!!*g:m3p/b1u.!!o-f:b3s/D1m.j)q3<d!fvwo)j!g,p!szny!/gwmVpwb!u-!sgpbmspDDmuj)qE<3!fvsovjugypfsun!!>g,m!pmbpud!!g<p*d5vstv<m!cvgopjeg!p+s!n*!ugdmfpsbsup!dbutdqffqdtub<!!+d!p*o1t/u1!!g-m5p/b1u.!)V3odqfbwd)l!E,p!xzoyt/dwbVmwf!!->s!p3m6p6D/u!)0E!33f6s7v/u<y!fdup!o>t,u!!mwpfdd!4<!*Q5bsdvlmGcbgdpuep!s+t!!*>u!dwffsds4p)d3u6d7f/q!t+b!!3+6!7*/:!3+/!13!6-7:/3-/!13.6)73/d!f+w!)3!6,7!/z-y!/3w6V7w/!*-<s!pdmppoDtuu)!Ew3ffds5v!uVyofqub!d>l,G!bmdpudp!s<t*!5>s!vVmocqgbpdel!E+p!x*outddfbsmsfp!d0u!dwffqdt5b)!Q+b!d*l5G/b1d.u!p-s1t/-1!)23/d*f<w!)g!m,p!bzuy!/vwoVqwb!d-lsSpHmCpBDUup)EEf3qfusiv)udypfout!u>!,j!om!pwdf!d<5*!5ws*v!m|c!gspfeu!v+s!o*!uedpfus)swp-d!uVdofqqbtdbl!G+b!d*u:p3s/t1*.<!!-~:!3g/m1p)b3ud!fhwf)u!E,f!qzuyi/)wdVpwo!t-us!pjmop!Dwuf)dE33!ftsdvsufyffouQ!p>t,j!umjppdo!*<!*|5!ssvfmucvgspoe!!v+o!q*buddlfSsHsCpBdUupdEffqqtubi!)+u!f*y1u/v1s!f-35E/)1u)E3fdqfuwi)-!!,t!dzsyf/fwoVQwp!t-jsupjmppoD*u*)<E!3~f!sgvmupybfuu!!q>f,s!tmqpfdd!u<j*w5fsEvfmqcugipUep!W+j!f*xu[d)fdspsoptduu!djfoq!tgbm!p+b!u*!:j3o/w1D!m-j:q3[/-1!)d3pdoftwu)!!j,o!!zgym/pwbVuw!!o-fsbpsm-p!Ddup)oEt3uf!sjvou!ygfmup!b>u,!!gmbpsd*!!<|*!8ssfvumvcsgop!e)!o+f!b*su!d+f!sgsbpsd*u!d0f!q)t)bg!b+s!!*.5!/o1f!b-s1*/!1+)!3jdofwwD)m!j,q![z!y./!wgVbws!*-<s!p~m!pgDmup)bEu3!fhsfvuuWyjffux![>),d!pmoptdu!!<j*o8!sgvmmpcbgup!ee!f+q!u*iu*d!f|s!sspfduuvdsfoq!tqbf!s+t!q*f:d3u/j1w.f!E-f:q3u/i1U.p)W3jdffxw[))!e,f!qzuyi/-w!Vowf!b-ssDpmmjpqD-u!)gEb3sfDsmvjuqy*f<u!!~>!,w!pmjped!!n<b*j8os)v*m!c|g!pwef!d+3!!*eupdgfcsmsvpsd<u!dwffqdt3b!!b+t!q*f1d/u1d!p-s5s/f1d.u)!3>d!fwwf)d!3,)!2z/y1/-w!Vbwt!q-fsdpum*p<D!uj)gE!3)fvstvfuEyffquu!i>*,!!|m!pgdm!p<b*u8!swvjmfcxg[p!e>!!+h!f*uuWdjffsxs[p)dhufdufEqftqbu!i+)!w*V:w3*/*1<!!-g:m3p/b1u.!)g3bddfuwp)s!!,>!!z)yg/pwdVvwt!!-,s!pwmjpfDxu[)*E<3!fespvgucymfvus!!>>,!!wmfpdd3!!<)*d8msbvnmqc)ggpbed!u+p!s*!u+d!fbsqsfpsduuvdsffq-t!b.!n+b!y*c5m/v1s.-!!-n1b/y1c)m3vdsf*w*)<!!,~!!zfym/twfV!w|!!-wsfpdm5p!Duuf)yEf3mf!s>v!uuyffyuu!v>s,f!3mEp)du!E<f*q8usiv-m!cwgfpde3!)+w!V*wu/dyf-s!s2p/d1u!d.f!qwtVbw!/+z!***:<3!/g1m.p!b-u:!3b/m1q)i3bd<f!wj)g!!,)!vztyf/Hw3Vew*!!-|s!pbmmpqDiub)!E>3!ftsnvpupyufiut!u>f,q!)mupids!f<t*i8psmvem-c!gupies!f+t!i*pumdef!s,s!p1d/u1d2f-q!tubf!y+f!m*/1b/*1<!!-~1!5f/m1t)f3!d|f!wb)m!q,i!bz!y>/!wuVfwy!f-ms/pbm<p!D~u!)eEp3gfcsmvvusy!f>u!!w>f,d!3m!p)dd!m<b*n8qs)vbmmcqgipbe!!++!!b*qufdsfusvsspfd-u!d.fnqbtybc!m+v!s*-:!3n/b1y!c-m:v3s/*1*)<3!d~f!ww)f!d,3!!zeyp/gwcVmwv!s-:s!p>m!peDpug)cEm3vfss!v+u!y1f/u:!<>!,w!fmdp3d!!e<p*g:csmvvmsc8g!p>e!!e+p!g*cumdvfss!s+p!d1u/d8f<q!twbf!d+3!!*e8p4g/c1m.v!s-56!2>/!1e)p3gdcfmwv)s!!,+!!z1y//5w<V!ww!f-ds5p!mdppDmu!)>E!3wffsdv5u)y1f/u1!*><,!!dmppmd!!,<>*!:usfvymucvgspfe3!E+)!u*Dupdmfpsss-p!dwuVdwf/qytzb*!<+!!d*p6m2!/,1>.!!u-f8y4u/v1s.f)33Ed)fuwD)p!m,p!sz-y!/wwVVww/!y-zs!p,m!p)Dwuf)dE33)f1s/v1u-y!f1u/!5>*,!!+m!pbdt!q<f*d:usdvpmscsgfpdeu!*+!!+*!uedpfgscsmpvdsu*d<f!qdtpbm!!+,!>*!6u2f/y1u!v-s8f43/E1))u3Ddpfmwp)s!-,!!wzVyw//wyVzw!!,-!s)pwmfpdD3u))1E/32f6s-v!u1y/f4u8!*>!,+!!mbptdq!f<d*u:dspvsmscfgdpue*!!++!!*eupdgfcsmsvpsd*u<d!fdqptmb!!,+>!!*u8f4y/u1v!s-f632E/)1u.D)p3mdpfsw-)!!w,V!wz/yy/zw!V,w!!)-wsfpdm3p)D1u/)3E:3-f!s1v/u3y:f*u!!+>!,b!tmqpfdd!u<d*p:sssvfmdcug*p!e+!!+e!p*gucdmfvsss*p<d!uddpfmq!t,b>!!+u!f*y8u4v/s1f.3!E-)6u2D/p1m.p)s3-d!fwwV)w!/,y!zz!y,/!w)Vwwf!d-3s)p.m1p/D4u8)-E!31f/s2v6u*y!f+u!!b>t,q!fmdpudd!p<s*s:fsdvum*c!g+p!ee!p+g!c*muvdsf*s<s!pddpumd!f,q>t!bu!f+y!u*v6s2f/31E.)!u-D8p4m/p1s)-3!dwfVww)/!y,z!!z,y!/)wwVfwd!3-)s1p/m5p1D-u!)1E/31f*s!v+u!ybftuq!f>d,u!dmppsds!f<d*u:*s!v+m!cegppgec!m+v!s**u<d!fdspsmp!d,u>d!fuqftybu!v+s!f*36E2)/u1D!p-m8p4s/-1!.w)V3wd/fywz)!!,,!!)zwyf/dw3V)w1!/-4s8p-m!p.D1u/)2E63*f!s+v!ubytfquf!d>u,d!pmspsdf!d<u**:!s+v!mecpggpcem!v+s!**<u!ddfpsms!p,d>u!duffqytubv!s+f!3*E8)4u/D1p!m-p6s2-/!1w)V3wd/fywz)!!,,!!)zwyf/dw3V)w1!/-3s:p-m!p.D1u/)3E:3*f!s+v!ubytfquf!d>u,d!pmspsdf!d<u**s!v+m!cegppgec!m+v!s**u<d!fdspsmp!d,u>d!fuqftybu!v+s!f*38E4)/u1D.p!m-p6s2-/!1w)V3wd/fywz)!!,,!!)zwyf/dw3V)w.!1-/s2p6m-p!D.u1)/E438f*s!v+u!ybftuq!f>d,u!dmppsds!f<d*us*v!m+c!geppeg!c+m!v*su*d<f!sdsppmd!u,d>f!qutfby!u+v!s*f:33E/)1u.D!p-m:p3s/-1!.w)V3wd/fywz)!!,,!!)zwyf/dw3V)w1!/-1s-p!m.p1D/u5)*E!3+f!sbvtuqyffduu!d>p,s!smfpddu!*<!*+s!vempcggcpmev!s+*!<*!uddpfms!s,p>d!uudffyqutvbs!f+3!E*)6u2D/p1m.p!s--8!4w/V1w./)y3zd!f,w!))!w,f!dz3y)/.w1V/w2!6--s!p1m/p4D8u*)!E+3!fbstvqufydfuud!p>s,s!fmdpud*!!<+*!sevpmgccgmpves!*+<!!*dupdmf!s,s>p!duufdyfuqvtsbf!3+E!)*u1D/p1m!p-s5-/!1w.V)w3/dyfzw!),!!,)!wzfyd/3w)V.w1!/-3s:p-m!p1D/u3):E*3!f+s!vbutyqffud!u>d,p!smspfdd!u<**!s+v!mecpggpcem!v+s!**<u!ddfpsms!p,d>u!duffqytubv!s+f!3*E6)2u/D1p!m-p8s4-/!1w)V3wd/fywz)!!,"],ze.glitch=["?$TjWoodfmfvsedfT!u=jcm","~v!o~j!g<p*swnV!wj!o-uf!hcbznqj<)!!vEo3jfgspvsuny!ftub>nsqpmmfpsD3hEb!sjGn`bmhhf!<|!!vfotjmgfp!s~n!!<txbpnoqtm!f,ss3pEm!puDEhjbtsqG<`!mvho!j>g!psspnm!pgDmhpbbsuG!`bmnhp!v<o*u3</!1v+o*j*g/p1s6n+!egfmfptb!u+!!btozh-meff<f!tv!o+j!gtpys)n3!dgfmwp)beuo!btsf)f5ed<f!wv+oujogvppsnnb!+g/m1p1b3u!!>t!fxfpeo`ty!<5!dvfowj!g<p*sbn/!bghmdp!b-uc!/tcfdf!e-`hz/<b!hvdo!j-gsp/ssnd!)g5mdpfbwu!!>e!jstpumppsDuhjbpsoG``ym<h!!v<o*jugfptsgng!pg!m.p!bqu!!-efjhtbunpjs)uEj3pfos`vzu<y!fvuo!j>g!pcsdn!!5gdmfpwb!u<!*dqp!m-`fth<b!nwjb)sEz3jfoshv!uwyffdu3!!>w!Vbwh<d!!d5pdoftwu!!<g*mupfbtug!gVpo!q,b!dql!E-pfxhobtndjb)mEf3!f>s!v3u6y6f/u!!0>!!3s6d7!/5<d!fdwp!o<t*u*!fwmfhdo4b!)Qobjdtl!G-b*dfumphsotb!)>t!pwdf)d34d)f3w6!7+/!!u+o!v3p6n7b/!!>+!!u3f6t7g/g-p!!336d7f/w!!+<!*3/6670/e-f!f3t6)7+/z*`<e!fdfpto+tmub!nwsfpdo5>!,Vzo/qqb!d<l*G/b6d0uepfsftt!)>+!yV`oeqfbfdtl+Empbxnostpdob>m,fy!/0q!!w~f!d~5!)<Q*byd`loGpbjduusppsutt-j!e2!/,*!<y!/gqm)p!b.u!!/v2o!q>b!dyl/SqH!C|B!UfptEmffq!u~i!)<dyp`ootpuj!ujsop!uwtfjde5>!yw/*q!!||!*s/f1u?vzs`oe!fefptu))gwj-!!|V!o*qebfdfltG+btd`umppsdt.*z<`!o~p!jgumsppbuut!jseb?oye/)qw!f%d%3!!td`pm*p|d!,szf`uovpsjou!sgpsubtdjue)=tyj/oq))egpju!)~d!p~/!y<zz!`-owpfjdu3s)p2u3t/j:e9!:>9!-z8/9q/!3|4!4f*t*m*f!!+~!!5<4*8z6`9o/p6j5u6s4p*u<t!j~e!!w,p!jze/!qn)b!j.o!)/*2!!|>!!jzg/!q)!c|z*q/=12?*y!`|e!fwfftd)3g!jq!!|>!!*weVfwf<t!+gtm`pmbpud!.yyt`!o>p!jgumspppust)jhem?`zG/sqb!h%D%p!pts`em/pyd!,0y!`1o/p6j*u<s!pgumtpjbeu=!zz/tq!)>g!jg!m<p*p*se)fhfmt`+GesfbfhtD+pqp!s-eq/tzj!E0u!)1!/E63*f<s!vgumypfbuu)!ioupqsfnEbpmU!B>C!HvSolqdb"],ze.bloomBlur=["?$TjWoodfmfvsedfT!u=jcm","~w!b\vsgzjjeoohf!$w\vf!d<3*!bw/Vywj<Q!fvsovjugypfsun!!-tnbvnTqumifhsj3fEx!!d0p!mnpvsTUfftyvugvgsjfe<)!5vdofjwg!p>s!ns!pwmfpdD3h!busfGy`Tmjh{!f\v<f!tvmofj$g\vp!s<n*!1w/f2d!3-!nevjTsufidhujjfpxo!<0!!gnmvpTbfut!vhgbgvjtet)j5bdofQwe!g>)!jsop!mgpmDphbbus!Gy`-m!hj!o\v!BgImQpMbBu`!FtEjJhSnSbF*W!P|!!gsffeugvjs$o\v!!1~/!4<:x9!:+5!!1+/!3f!y>q,)!.n1v/T6u!i+h!jyf!x+!!<yx!!0+!!)*t3jfhmnqbn!b+t!!t,j!h2nfbm*q*n!b0t!)t!j>h,n!bn<v!T~f!twvpgjgej!en!b<jcoh)s*/!*|u!fwtfgdg3P!wjvo!w.T!jw{Vfw!!>-!f2s/v1u!y0f!UusfpymTpjd{)fE<3!fgsmvpubyuf!ug!T>j!h3nfbm!q>n!bgtm!p4bduf)wT!J<HcNhBs*/<*!ugfmtpgbguP!wxvf!j,h!iwuVTwv!n-!f>s!vhubyvftUtsjpbmopQde)gE)31f/s1v-u!ygfTuj!h>n!b2*f<m!qwnfbdt5!!4udffywu!v<syf!Q+j!yf!{>j!Tuwfoyju!v+s!fo3pEj)uddpfmspjseU!f>y!uuvfstfg-g!PwwVvw!*3<d!fwwf!d<4*!benjhgjgTvgt!f-Tyv)ng!e>Q!oubfjytutvvsbfhQ!j>y!/xs!hucb!p+m!gx!f<j*hji)uuTbvpnm<g!!g>p!sy!!)ujbopum!gj!!|>!!*2,<,!jj!!<=T!VLJFESBOSF`M"],ze.bloomHighPass=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gbpisqnm!bt!b-nmqfmyffsu3!E-!supEmjpgDguvvtqfu<v!pv)oyjjgnp!s>n!!sgpmmppbDuh!bmsvGn`jmohp!t<j*uwz!U-iisufetjiXpimuep<p!nvto!j,g!pesmnp!igtmfpsbiuU!ztunjptppuoijXnjvemu!i-<e!mwpbistzfjsoihU!zwufjdt3p!owjVnwv<m!)wqpfjuet!inubpjpon)t*!!>|!!bwifqdm5b!!uufbypfmmg!!><!*u1f/y1u!v-s1f/31E!)-u1E/j1g!g-v1t/f1-)!5wdVfww*!<>!!wsfpdm4p!Dmuvvnqbu!v>p!!w5fddf4w)!1</*3b:n:v-m!!1-/{6z9y8/-m!f1y/f2u2)5u*p<e!!g>m!pwb!u"],ze.bloomComposite=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z*jwoVhw!!w-f6df3s!vwuVywf<U!svvomjcg)pEs3nf!stvbunyqfmuf!s+3!E*!1c/m2v!s-UsfpymupvDsufo2j<U!nvpopjmgcp)s5nd!ftwb!n+q!m*f3s/31E)!scpmuvdsbUGfnypupvmsCfq3s<f!mv!o,j!g*pwsVnw!!t-b5nfqsmvfusy3fEU!scvmmvcs)UEf3yfusvvsufy4f<u!!v+o!j*g1p/s2n!!-tsbpnmqpmDfuso3jEU!ncpmpvmscU)f5ydufvws!f+5!<*!5v/o1j)gsppsund!btGbnnpqpmmfCsq3sEf!mc!m,v!s*UwfVywu!v-s4ff6s<v!uvyofjUgspvsmnc!)tEb3nfqsmvfusy3fEu!!e+j!s*u1U/f2y!u-vsspfm<p!DvuoojjgUpnspnp!mgcm)p5bduf!wc!m+p!p*n7T/u1s)fsophuudib<G!nvpopjmgCpqssnf!mg!m,p!b*uw!Vcwm!p-p3nfSsbveujyvftU<s!vvmocj)gEp3sfns!vwufydf4u!!c+m!p*p1n/U2j!o-usDppmmppDsu<o!jgUmnppbpum!cm)f5sdqfCwm!p+p!n*G9b/d1u)pssp)uddpboGtnup!pjmoC!qgsmfpmb!u,!!g*bwdVuwp!s-*2!f|s!vgumypfbUus!vnmjcs)sEp3sfGsbvduuypfsu!!>+!!2*/13/!2.!!-gsbpdmuppDsu<o!jsUfnupvpsmoc!)n5jdyf)wg!b+d!u*p1s/-2!)nsjpsusdpbsGGnbpdpumpCsq-s!fcmm)p!p+n!Sibuehjovfts*u<T!n~p!pwmpcj!e>!!nsbpjmop)D*h!b|s!Gh`m"],ze.highlightHard=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jsgppmspnD!fthbenfq!m>f!ss3pEm!pjDnhbbhsfG<`!mvho!j~g!p<sens!bwdftdj3e!!u|f!y*u6v/s1f!T=j!{ffh<e!fv)o!jggjp!s<n*!fghmepfb!u-!1f/e2h!f-X:j/e1u)iq<f!uvtoijugpppsnnt!!w>f!df5h!effe!h<f*Dwp!m+p!sw<!!,w!bis!z+j!oih)!uwsfrdt3!!>w!Vfwh<e!fg!mupbbpum!gh!f<uuDiphmj)Swqfpdu3,!udiphpjsse+*1!/|3!,sufiuhvjsSon!puufuypucv,sufg3fEM)qjpnub.hufg-f!md+p1p/s3e.*u/gbf<M!n~p!uwuppjce.!!n>b!jio!)u*b!p|m!gw!f<du3i!hdjdS!n>p!uwuVpwc<,!ngpmupubpuc!+d1f/o3u,fusg!f>M!nhpfuuuDppcm,)udidh*j<S!qgpmup.bqup!ue+y1!/>3!.fueghffMXqjpeuu.i!!>0!!wu!fuybupvmsgf!T<j*{*fz/ey!<-!ygem)p3bduf!we,zd!d>)!mfpeDhuffXhj!e>u!iu!i0h!juSfnypuuvuspfcT!ju{bfp/mzg<!!<w*f*dz3e!!d-p1p/s1e)<3!dgfmwp,bdud!)umppqDMuffghu!!>>!!nhpfuuuDppcm!)udbdp,mwgf!d<3*)*.zeey!--!y.ee.z)*3*d<f!wg,mdpdb)um!puDpuqf!h>!!>h!fuugDfpMmn)pdudu,pwcf!du3b)p1m/g1!-<!*.*e1z/*1*!<-!ygem)p3bduf!wu,pdqdS)jmhpiDuu!f>h!!h>f!uuDiphmj)sd!du,bwpfmdg3!)<e*y*-1!/.1e!z-*y*e<.!)g3mdpfbwu,!dmdf)gmup!D>u!fh"],ze.highlightEdgeDetection=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gep)s5nd!ftwb!n+q!msfpsm3pEd!!j>n!bshpfm<p!DwhbbsszGj`omhh!!w<f*d*33!gwgVjwe<!!-v2ogjggjpes)n3!dwffwd)3i!uuhfoyfTmj!{>f!<e!!vuobjpgmpgs!n<!6w/f1d+5*!sd/p5mdp!s.<!!sw/p4jde)!!n>b!j3og)g*j!e|!!uwbfpdm3g!!j<o6w/T1j+{*fs!/>3!d2!/.1!!s0/!2udf)y!T>j!{2fg<g!jwef!du5b!pvmwgP!g<g*txfzu/!u>f!twgfgdP5w)v2!/.1!-w!V1w/!1--f!h1b/n1j-)!E23/f1s*v!u+y!fwuf!d>5!)5jdo!w5Tdjf{wf!-<!*jxozw/Tujf{tfg*g<P!wwvf!d,5!!wdV2w!!>-!fuhfbynujv)sEf33fEs)vjunybfhuf!->!!w4Vdw!!5,d!fvww!P<g*gztyf/uu/fytzg*g<P!wwvf!d.5!!wdV3w!!>-!fuhfbynujv)sEf3"],ze.highlightBlur=["?$TjWoodfmfvsedfT!u=jcm","~$!e<fngvjToufi!hNjBfYx`!S0B!EnJvVTTf!t5v\vg!gwjbes!z>j!oshp!mwpfDdh3b!swGV`wm<h!!v~o!j<gbpusmnf!et!b>n,q!muffst3gEg!Pjwnvb!h<f*<x!!v+o!j1g/p3s)n!!>w,f!dn3v!TuufiyhTjjf{xf!<<!*vxo!j+g!p*s3nf!mwqfndb3t!!e,j!s2ffdmuqjnpbot<)!)v!o>j,g!pnsvnT!fgtmvpgbguj!es!b<e*juvftt<g!ggPmwpvb!u.!!hwbVvwt!t-jfbhobQnejg))Ej3of!sgvmupybfuu!!y>-!!3jfom!qgnmbptb!u5!dtfjwh!n<b**u!f|t!gsgfPuwvvs!o,!!1w/V4w:!9-:f5h!b+n!jf)yEq3)f.s1v/u6y!f+u!!y>!!+2!fym!q0n!b)tt!j5hdnfbw!!+<!*ttjvhjnebb*s*!!-0y!/tujfhtngbg<P!w~v!)wgpejQeo!bnjbtjtov)b*h!!|>!!wxf!du3b!pjmogw!T|j!{*f,!,>j!!2</T1V!J0E!BuSf`yYTBjN{!f><=!!gjm!p<b2u!!>x!fjj!huioujT)v!ns!p>g!!h<bbvutmtfjeb!o>Q!eugf)t1g/g1P-w!vs!b3edjfvwt!*<<*!TwVfJdE5B!Se`jYgBgNv)tufbTpvmng!!>0!!utfvyjuevbssf!3+E!)fj{njbThwfo-j!!w+V!wo*p!j+u!dxffsjjhei!u>T!vbnu<m!fwef!d3"],ze.highlightFinalBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b<sszpjmophD!mwbfodj3g!!w>V!ws<p!mvpoDjhgbpssGn`!mthb!n<qfmvfmsb3WEf!hjenfb!h+f!<w!wv!o+j!gipushno!ftsbunTqfmhfesf3!E>!!fsephmfpUDfmybuovjsgf!25<d!fvwo!j<gsp/s*nw!Vtwb!n-qfmhfbsn3jE)!Ef3efhsfvUufyyfuuv!s>f!3w<w!!vuobjpgmpgs!n<!xgpmmpHbfuh!effe!h+f!T3ufsvfmobhWufih<e!fv!o,j!g2pfsvnm!bgWmfphbeuf!!f>e!hffvHmmbpWxf<h!ewfp!j5ed!fnwb!j<o*)w*V!w|!!-w3ffds5v!ufyefhUffWhbemfv)fE23!f>s!vuufyyfuuv!s>f!33Ef)vfmebhWffUhfeyfu!v5sdff2w-!!<w*Vw"],ze.fixColor=["~b!u<u*s1j/c2v!u-fe!fwnfsdp4g!tboQbpstuj)u5jdpfow<!!+\v!$yjjosdumbvNexff!j=WjmofteupbNovd!j+o!hy/jwstu/biNfubdef?k\vp!svQovj!g>p!sonp!jnubjut5p!Qv`Nmphe!f\vmgWjjefoxfN$b\vu!s<j*yo<p!jvuojjtgppQsbn)!4ndbfuw5!!>v!NoppejfumjNtbpuQsmjbyd<p!Mvwo!j\vg*pOsPnJ!UnDbFuS5J!Ev`QQsJpMkDf)deufNobjugsfjey!<g!j\v$$\vj!g\v!gNjBeYo`fC$P\vY!`<D*M*J1Q/Q2F!S-!e?f!n1s\vp!gwtbosbzsjuo)h5!dwffwd!4+!!wyXjpssumbeNQmpftejpuNjvp)o4<d!f\vw$!f>o!eojpgj\vu!j\vt$pjQge!mesfpgXjwo!f\ve1)!D?M!JSQF`QEQJJSMFDD`UYJPPCO`*Y\vB!Nw!bgsjz$j\vo!h\v!gwjfedo4f!$w\vM!p<d*b*m1Q/p2t!j-uejfpnos<p!g\vt$ofboseuj)g5\vd!fwwp!j+e!!enfbdjoob)u*t!o|J!ywjfsdu4b!Nubs)b4odtfgwp!s>n!feef!n>s!pwgftdo4b)sbuQ!p\vtHjOuJjDpOoB*U<T!O\vJ$`jFgTeVf!g","~v!o<jsgppmspnd!!w>f!ds5p!mdppDmhpbss<G!`\vm$hj!g\v!?NzBeYp`cC/PtYg`/DyMpJcQqQjFmSd!=?!!f1e\vv!mwdbosjz$j\vo!h\v!?wzfedp4c!/wtXgp/sompejQupdtfjsujjEpqoj<m!d\v=$!ffoeevjmgd\vo!j\v$$\vj!g|!!e*f)gojjobfne!)eDjMpJwQ!`\vE?JeSbFfDiU/JtPgO/*y\vp!cwqbjsmzdj=o!hf!ewvfmdd4o!jw$M\vp!d\vb?meQbpftij/utjgp/oo<p!j\vu$dffosejjEgq\vj!m\vd$=j!ofdemv"],ze.shadowMap=["~0!0<!o$pQjSuFjGtJpYQ\vw!nv!o+j!gypjssnu!bnNboup5j!undpfekfpmsWqj!f>x!Nobpujsujjyt<p!Qv`omjhg!p\vsgnj!enobfu$5\v!!q<s*pekffndsupjgptooNbbsuus!j+y!<y!jbsuuubsNjmcfveupfn!)w4fddf4w!!q>p!tojpujjupjot<p!QveomjsgppXswn!!\vc1p!p?m!!SvFVQtQfJJMoDt`uYbPoCd`fY<B!Nb!ugujs$j\vc!v<ueff!nnsbpug5t!obbNsbuu!s+j!yyJjostuubbNoxdffjeW<m!f\ve$pjng!!>N!BoYp`jCuPjYt`pDQMwJnQ!Q5FdSf!w?!!~1!\v<!evfonjsgppgstno!bnsbuu!5+!!nepfedfombNubtuosJjyyj<s!uwbbNsbz!j>o!he!fwnfsdp4g!twoXbpssum!e|Q!p*tfjduojbpuot<o!J\vf$tfVove)j!gg\vj!!\v~$!e<f*g1j/o2f!!-V{TzFy`/T*LeJfOoOoJjOlHt\v!!+\v!$fetfsgfjwoofJ!yCjPsOuFb`NUeFoYjUcV)S)F5\vd!fvwo!j>g!pesfnn!scppgptmo!bvsVut!f<Txl/juoiohjjofhX<o!j\vl$tj!o+d!myvfeufs!f=Wtoljjloto!j+o!hX/uwbtN/fiofpbce!?>\v,!!webfsozojjolht!!w<f{d/4u!iwhMjpfdXbomjQlptt!j+u!jypfou<s!fwWpojjel!tn!b+j!o[)u*b!N|f!owpfcd!5>!,u!sebfootogjplstn!f<ez!/>u!iwhfjdf5X)oqjplttj!u+j!pyof-u!s2f/W1o*j<l!tw!M+p!dZbumbQNpftojpucj!p>o,!!>e!fwofodj4l)tq!p<tyj/uujiphoj*f<X!ojjgl!t)!v+V!tyffTulsjfoWoojjolht*!!+|!!YnubbuN5f!ocppco!f>N,b!ueYf!o>o!jhlftu!C<p*o1f/N1b)u5sdjfyw)!t>l!jeofJoooejflyt/!y5*d<f!wn!b<ue5f!ncsppogftNobbusZu!!>+!!hyfjusCupboNfeNobjucs!j>y!)ytflujsofJWooejflyt/!z5*d<f!wn!b<uy5j!scupboNfeNobjuc[!!+>!!yhjfsuuCbpNoofjNlbtu!s+j!yf)ttslfjwooJJoyejfsyu/b{N*e<o!jncb!u>5!!ycjpsoufbNNboujXl!t>!!<hXfuubCNpfoofpNcb!u+s!jxy/)utilhjjofJXooejflyt/!x>*,<!!ynjbsuu5b!NtoljjlotN!b<u[sujbyN!f>o!pncb!u+5!){1//u1i*h<j!ftXlojjolNtb!u>s,j!yy!j,s>u!btNlojjolXtf!j<hZiuub/Nyf!o+p!cc!p+o!fzN/buuiYh<j!ftXlojjolNtb!u>s,j!y","~0!0<!*${Q/SeFsGpJpYD\vh!b\vs$Ge`fmghj)oBfC!HDSMpJUQi`uEqJfSEFlDdUbJqP!O>\v!!swpbmspzDjhobhs!Gw`fmdh4!!\vw?Mzpedpbcm/Qtpgt/jyupjcpqoj<m!d\v=$!jfoedvmmvdeofj!$=\vq!b\vd?lzjeophc?/\vt!g\v/$ojpojdumdvfesfj!E=qdjmmjdq=E!jfsefvdmudjopjo$/\vg!t|/!i*f)boej?b\vn!!\ve$jjpowd!m\vvgejfe!o=fd$m\vj!q<coppyj/ugjtt/piQfebmes?p\vX!w\v!$4jdgf!wN!BhYo`jCzPsYb`wD!M\vJ1Q!Q?F!S"],ze.reflector=["~b!u<u*s1j/c2v!u-ft!pwqf)d54d!fqwp!t+<!!yvjosjugbpNsmnf!enpbnu!5+!!uyfjysuuvbsNfxNfbjuws!j+y!<y!jvsoujbgNpospnj!undbfuk5p!snqp!e>f!moNpbjuusjjtyp<Q!`vmohj!g<p*s1n/!2n!b-ut5p!qw)j5fdxfNwb!u+s!jyyj<s!uvboNjmgfpespnn!!n+b!uy5j!squsbpNkffsdvuujypfouN!b>u!swjVyw<!!|w!b*s)zojjobhn!!wefjdp5w!!w<Vw","~v!o<j*gbp/sfnt!bwcf!d-4*!sdppmmppds!<-!cvhosj/gfptsbnc!)tzbbnmqsmffwsP3eEo!fumEcj)g5gdvftwf!<>!!wsbpsmzpjDohhb!swGf`dm5h!!w<Vews<b!dgtmjpeb!u*!/c2m!f?o!ezP/wwfVsum!b}z})!g/m2p!b?u!!yc/bwtVfu-!!}g}m!p1b/u!!=c!mzf/oweV*u!!|}!}s!f1u/v!s=o!)yc/bwtVfu!)=!!g1j/!6<!x@/!w)V3w/!10!!+z!yc/bwtVfw!!+>!!cwmVfuo!e3*d!f;w!!)<2*/w1V!w.!!-3f/t1v!g+g!j)E2u/)1k!p.s!QcEb3tffs*v!u+y!f)u2!/>1!!f.t!bccm!f5odef*w*!*|<!!*~)!owjfbdn4!!ecjmpfwo!e~P!w<f*s*mcb/ze)owffmdc4!!-ccb/tfft-b!cw)fzdb4m!scfmwfPoeeo*f!m|c!!s-f*uhv/seoo!fwmfcd!4-)hc/mfftobecP)wzfbsmmsbfzw)Pcebotffm/cs!--!*csm/feo"],ze.envmapCubemap=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbssDGv`cmfh!!f\vogwjNeboqf<$!\v\v!$<jcohdsm/v*e*f*!{=zf/oodppjeujdofhs?j\vE!uwvpqjuev!Pnwb!j-oy)/*o!p|j!uhdmf`sGjsEbuhvDqpumvpPsw!!>)!4wdffdw5!)-1q/b1N-w!o1f/)1f-c!v1D/f1s-v!u2y/f1u*)<s!b\vf$ojjgMepfUgm!fVyTfFU`qMbJNOwFoBfS!\v>!!hcmh`sG/ssbphmDppDmhpbss/Gs`hmch!!>\v!fntbmqfU$f\vy!f<mcUhpsM/j*o*f*b{sz)/uofpyjuuvdsffsDjvEcufv)qfuovwPNwb!q--y!/wofpdj4u)d!fwsPjvEuuqv"],ze.envmapEquirect=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w<N*bzq/<g!!v-onjcg!p-snnu!)wyfjdn3!!>u!fcyhfsm/Tsjp{mfp<D!h\vb$sjGo`dmmhv!e<f*!y=/fgo!d-psecj!o-hm?c\v)!y\vj$ne!f>g!jnocf!!4SdFfDwJ!Q<S*PyD/BgM!`-QsJu!!1-/m4u2)9y4j1n:!9>9!7n2u9!448d:f1w8!\v\v!g\vj$eeoffg$j\vo!f<!cShFsD/J*Q*SwPvD!B-Mq`bQNJw3o!f1)/!2E63:f2s6v5u:y5f4u1):s2b9f:o6j4M6p\vU!mwffydf3U!qfbrNvwjosff!d>u!Vmwc)!j4od!fwwf!d<4y!/efj{sj*T!m|f!ygfmup!b>u.!!vy!/>w!vb!u<bcoh)se/j*s*/w{v-!!-.qebjNsw/oyf*)!!+E!3SfFsDvJuQySfPuD)BsMb`fQoJj3M!p,U!m1f/y6f<U!qgbmNpwbouf!!w>!!>s!c1!/46d!f.w!!b<tzj/of){djmTbmnfqy)feuj!s>/,z!-z!/.w!v2!/<1c-h!s2//*1**w*v!!+-!qSbFNDwJoQfS)P!DEB3Mf`sQvJu<y!fsuf)usvbsfoo!jwMfpdU3m)fvy-f!Uwq*b<N!w~o!fw!p>j!es!un!b4jdof)w*!!<|y!/hfm{`jGTsmbfhyDfpum!p>s,!!>y!/wwfvd!5<)c1h/s1/-*!*1w/v1!--!q1b/N1w-o!f2)/!1E*3<f!swvfudy4f!up)vsubqfvoujEMjpsUfmdfuyjfpUoq!b>N!woopfs!n>b!mmju{!f4)dwfPwv!u\vqfvtumEfj$s\vf!d<ucjhpso/**<*!wwvf!d-3q!bvNww!o>f!)f!rEv3jfssfvduuyVfwu))psvbufqovjuMEpjUsmffdyufjUpqob*n<!!>w!fmdc3!!4gd!f>w!!g<syb/dfu{)jvTwm!f0y!fuuf!y>f.m!Tyj/{wfv!!.<!c1h/s6/**<*!wvvw!!-.q>b!Ngw!o+f!)u!fEy3ffmsTvju{yff<u!)\vs$bjfgoejfMgp!UVmTfFy`fMUJqObFnB!S>\v!!swcf!d44d!fuwm!!<>z!/nfb{qjUTfmyffymfUup!M>j,o!fzb/sw)vu!f<ycuhvss/f*3*Ew!v)!f-oqwbNNbwqo-f!)v!wE*3*f/ssvhucy<f!uv)ws/byf!o,j>M!puUfmyffymfTUjq{bfn/!y><!!swuf!d4"],ze.envmapBlur=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w~N!b<q*<t!jvyobj!g-pbsunf!ijuo)uf!mtqbnnbqTmuffth<!!+v!o^j!gjp!s]nt!ugimhpjbfux!!x>f,j!hcihust/]s!pom!p^D<h!bvsoGj`gmphs!n<!*ctpjpymb!!m-bbuujfuivue!j+o!b1m/<2!.v)ofjmgqpnsbnT!ugfmhp!b+u!!^e!Uji!f]utbu<i!hvjofjxg!p>s,n!!cghmsp/bsup!mnpjDqhJbosuG<`!mvho!j<g*pjs)nu!bwpfmdg4!!+q!pbmuffBiyUjet!<>!!\vb$ujfoidum!vuebfp!m=gf!o~d!p<eljbofhs?c\v!!|\v!$*etffgmjqonfb!tF!O>W?N!BjQ)`!UgZjQ!F|`!D*V,C,Fj`!V<Wo\v!!=\v!$jj!o<d2m!v>e!fj!!=udovjc)f!FsopwgS!f<g*mtfjdyubj!p-o1G/T1?)\vf!mwqfndb4T!uhffhu!T+b!n^q!m1f!)]gtmupibhuj!fuxi!f>u,b!-c!hwsf/ds4p!mbpyDjhtb*s!G|`!mghm!p<b*u1!/d2p!t-U1i/f1u!b-!1>/!1d!p-t1)/u1i)f5udbf*w<!!>w!fsdp4m!ptDbhnbqsmGf`Emjhs!f<d*utjjpyob!)>f!{wjPmvbunqsvpuoE!j>s!ftdjuyjbp!o~!!+<!*dyp/toUpijfuudbf!s,j!Edusvpqtutv)Pbwy!j.t!--!1w/P1v!u-q{v/uoEpjjsufddfusjjpEou*v!q+u!vtPjwo))4udiffwu!b>*!!t,j!ybby!j|t!!*+*!*e*p1u/)1b)y4jdtf-w!!w-Ptvjuyqbv)umEbjvsrffd)umjmpbo)*!!g+j!!)<2*/o1p!j.u!ddfpstjUEiufvuqbu*v<P!ws!f-utvjsyoB!fcmjpmqj)otftbpssDdv!c;f!VtWj)yfBofwmNpbqq!-@!!tmbbnoqjmefvEujjsufbdmu!j>p!ot-j!ynbj!q4Jdofuw*!<|!!~*!)wopjjben!"],ze.oitBackBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b~s!z<jeoshb!dwtfjde3!!|w!V*w1</!1v!o>j>g!pbs/ns!ptmbpnDqhmbfssG3`Em!hv)C!bgdjl!D<p*mwpVsw<!!-wsppjmep!DnlbdjboC)v*)!E|3!fhsmv`uGysfbuh!D>p!msp"],ze.oitFinal=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z!jbo/hs!pwmfpdD3l!dwbVcw!<,!!vbo/jsgppmspnD!utobpnsqgm!f-sc3hEs!/vsGpsmppoDulDdpbmcp!s+<!!svfojjmgqpjsunm!vtNbbniqqmmfbs!3,E!!cvhCsb/dslpDmppmDpuso<p!swgp!j)e5!dnfbwj!o>)!*s!p|m!pwDfhdb5s!Gg`smpho!u<Dbp/msppsm!p>D!uuofpysugv!s.f!31E/)2v!G>s!psofujDmpqmjpusm-v!NwbViwq*m<b!!wufbdp5m!gc!b<d*lwDVpwm!p-ss!p>m!puDflydubvCsvf)3E"],se.common="~$!e<f*gwj!o-fv!)Q3Jd!f4w/!2o5s2v6u:f3s7!6<466/91:!8,:!4J\vQ!`\vM$BeDfPgSjQoJfD!FQSJ!3+!!7*/*319/422!9-614/128!2.8!:-6z9/7s\vj!e\v)$qenfbgmjdo)fo!jQtJb`!I>B!MwG!!u2b/p6m8g1!8<:67/413!7,8!:35J9Q:`7M7B\vD!P\vS$QeJfDgFjSo!f+!!S*FyD/JsQjSeP!D-B{M/`sQjJe!)1o/b4u2b9!4>1!:v9!9u7b2p9m4g8!:|1!8*\vs!j\ve$!e4fdgfjwo!fo!jS)FwDVJuQdSfPsDjBvMr`fQ!J33d!f1w/!2~6!:<216/52:!5.4!1>:>2!9^:!644!6]\v^!!\v3$!e]fng!joosfv!uFfQsT!J|M!P*On!!25fu.b7n\v)!y\vj$sjugboNeffwgj!utdbfuqvtssbfuQft\vj!!\vm$pepfcg!j~o!f<!*tcbhusv/ssbpumfp)db!*-!tdumibhnjqf)xb)-u!p1e/!1o-s!v2u/f1s*!\v<!*\v3$3f8o1e/j1g!\v-!3g6m2p8b/u1!!q-p7x332)3d/p1o)t4ud!fjwo!!>g!mtpubiuh!jyf*x!!|4!dsffwu!v|s!o*!syp+myp<d!!~4!dgfmwp!bouj!!quptxo4p)dd)pfodtoub!ojjon!vgMmfpwbjuu!bym*f!S|p!Ussfbufvosjom!!yu+byp+myg<!!~~!!<gqmnpub!uo!sqvpuxf5s)!d<p*o{t/u^!!j3o!!]gnm!p-b{u/!^y!*2!!|]!ng!m-p{b/u^!!y13!!]>n!)y4+dyf<w!!s>f!u^v!s3o!!]yq3n+uy!3<<*!z~/!^g!m3p!b]un!!n-bzy/4^)!d2p!o]tnu!!-jzo/!^w!f1d!4]!nw)*4!d|f!ws!f>u!v^s!o2!!n]bqyn)un!b<y*)yw//^y!-3!!w]/nz!*--y!/w^/!{2*!<]!n~!!-gym/p^b!u1!!b]wnf)s4bdhffw)!d>p!o^t!u1!!j]oq!nwuf!d<4q!ndup!m4pusb*n!!||!!s*fnu!v4suob!ne!pouj)!duptmoppsd-)!4wufbdN4f)t1p/q4t4o4b4s*u*!<4!u~b!ni!j~h!i<q*!{gzmyp/b*uy!jssbuoben)!d+p!o*t1u/!1j!o-!swjfed)35!dvfww*)!)|f!{djpmobtnus!pioj!hoisqv!ugfmsp!b|u!!*by!j>s!u2b3n/!:59u:b9n-!!ocj!!>-!s8j9e/!344d4f-w!!do!j>)!o5p4j8u6d9f/s6j5E6n4s<p!gitjohbisqU!fgtmspfbwuo!je!u4!d>f!we!p~u!)<v*w{/zyyz/-*!*w1f/d13!)-bs-jce*)*5-d!ftwo!!+>!!ynjpseu)benu)-)!fQ{Jj*m<b!nssfpuov!soos!vgusfbsd!u|)!t*jyoj)stuob*n!!+5!udb*n<!!o~j!!t-ussjved!u4!dJfowd!joejf)ooupMjjuhdifus!j|E!nwsfpdg4t!odbpsmup!s4<d!fwwf!d<4~!!e\vjgsjfedoufj$p\vo!<<!mcbpnpsmp!Owujbtpjdcsmbff<m!d~!<4!dtfuws!v\vdUuB!PSDfSgBmFfMdDu`fFeTMVj!hgifue!g|j!$w\vf!d<4s!jeEjxsffjdwu!E4jdgfgwv!t<fm<b!nwsfpdo4!!4edjfswf!d<uoTpqjfudjvtmpbqs!<4!dwffwd!4|!!juoyefjusofpdDudEjjsgugfvntpff<H!!wufddv4s!ujto!e<j~s!f<dsubTmqvfd",se.packing="~w!f<d*4s!bqgb!d.l!O[pqsjnmbDmwUopjS!H+C!)*dspboftou!!.j!os!bwgf)d)4!!0o!p*ssnbbgm!*+!!|s!bsffou)v!soos!voupfssn!b|m!j*{sfb)go!pusbnpbmmg*!!o+j!!1u/t6o!p,d!!1-/s6b<f!o~!!uwbfpdm4g!!voojq!budtloSpHdC!U-p[OqpjsmnDbwmo)jd!puobtpum!gj!oo!jw!fudt4o!psdh)c[*x!f|j!WspfUuivusqof!E3f/w1j!u+d!fsqhtcs/fyqz!{u!b.p!m2g/!1~<!!<~*![dxpfojtwu!!+g!m*psbbuf!oQ!b.d!lsVbqgt)d)b!m0f!!*>s!b3g6!7+/!!*0[!x3f6j6w/!<,!!dspboftou)!)g!mopsbvuu!fVso!q|b!d*lsEbpgx!outbdpbmmgf!!o>j!!3u6t6o/p!d0!!-3s6b7f/o<!!udbppomtgu!!owjf!du4t!oQpbdd!l-G[bxdfujpws!tu!b>p!mwgf!do4j)!3u6t7o/p!d+)!i3u6q7f/E!f+w!j3u6d7f/q-t!s3f6Q7p/U![+x!f3j6w7!/u-b!p3m6g7!/~*!<<!sdbpfoot!u.!!w*fsdb5g!!V.o!qsbbdfloG)b!d+u!p[sqtj!m>D!sVbofqobjdml!Eopsxvoutfdsb!m|f!!*0s!bwgf!du5b)pQmbgd!loGjb!duutposptd-!!-2s/b*f<o!!dupboptmug!!gomjp!buut!oTpidj!g-u[SqjjhmiDus9b!f>o!j2m/!!u0b!p3m6g7!/o<j!!wuftdo5p!dq)b[dxlfEjfWqpuUiiUupqSfHECdBj)idqpbosthup!ijuos!pg!mupbbpum!gw!*~!!|<!*wsfbdg5!!.s!!s>b!fwof)d!50)!g*ssbbdfuo)!w,!!+[!xQfbjdwl)G!bodsuvpusfts*!-|!!w**s<b!gs!/uzb{pxm!g.!>o!js!/uytzo{p!d+!!-Tsibjfgou!Sujbhpimug9!<o!js!fuutvospod!!s-![+x!fQjbwd!luVbqptmdgb!mofj<!!u~t!ogpmdp)biuu!qvfoEqdbjdilqSbHsChBpUipuEsfPqpuUi[)xdfpjowt!uu!bjpom!gw!f~d!5<!*w**1!/|6!6s3f!u0v!sxo/!we)p!u,)!w{-/!wV!o-q*b1d/l6G6b3d!u0p!szt/*w<)!!~,!!wyf/dw5)!3qdbfdwl!3oIsbvmugfUsp!S|H!C*Bw)!w5fddf3w!)wg*m!b|I!3wpfUdB5C!HsS!l>d!bwqfodv5!)3wd/fyw-!!~g!s<b*dxu/)sw!/-y1!/+6!6336!60/!1x*/-s!!w./!z{-/!sg!s-bzd/us)!w-/1z/!6+6!33!606!/z1/*s*!<.!!syf/usv)s5od!fw",se.bsdfs="~$!j<g*oEe!f+g!!HV)T!F+`!VGC!Po\vs!vvuofjsg!p<s*nI!Ogumppeb!u-!tgtsffotjoofjmiJto)uhfooptijQuozo<j!m\vC$`fEo!e>j!gE\v!!uwbfpdm4g!!C<S*E)Gu`jMdbjnmcqfnsJu`)hdoppoitQuo!ojjom!Cw`fHd!4>!!eHj!gugbvptmfgD!p<m*pIsW*u!p|e!!s-f1u/v2s!o-!sSpFmDpJDQsSbPmDvBdMf`qQtJ)!l+d!jemjigdgTv`tGf!D>p!mGp!s4<d!f~w!!w<f*d*4s!jGE`gTmdbiim!j-dslj)Edxpfojtwu)!ujpoe!)wffudb4s!vgu1b-t!!d>p!oItWuu!pjeo!!ugbmppmbgu!!<g*:*1s-j!Edgpmobtiu!!-jmob!ngsmppob)uu!peep)ufWuIb*s!v|u!bgtm!p>b!uI!Oguspfet!oufbmp!m>g!!f<y*qs3j)E)x.f!j6w/!6,6!5s8j4E!u+i!hejpmu)WfI{!j.m!b7n/s:p9o4!2>7!*s!j+E!gempbuiW!I4*d<f!ws!f|u!v*stot!fgosjfotjoiftm!Juobupfmogt!joujz!!u+t!o)pgd1!!-+s!p)m2p/D1s!b.m!vgdsffqtto!f4md*f!w,!!o)jg!:u1t!o+p!dg!s-fmtbonfsmp*o*!<4!d~f!wg!mopjb!uu!tWo`pHdH!Y-`sTjnEjxufijDwp!s4sdffmwb!uofje!)udtpooptdu!!-jsoj!Egumiphbjum!!b4mdqfiwb!-o!jd!puottoup!dj)oh!ogpmipQbouo!jempCu`OGME-S!Cd!p4odtfuw!!j~o!!<g*mtptbfuo!jeopjuiOtW!*-!I|O!ugpmep)bxup!qb!3+!!>*!1q/p2x!3,)!b6m/q1i!b+*!<t!tgfmopjbouj!ihtw)!!>+!!eJpQu`OMMB!D+P!StQrJsDuF)Sb!3o!s,v!u)f2s/!1|!!.*!IbO3u*p!e+!!uqbppxm3g)!eopju!OuWt*o*p<d!!g-mtptbfuo!jhomj!i>t!!eupbupOmWg!!+o!jt!rustuo)pbd3)!h,o!p)i2Q/o1o!j.m!Cb`3E*!!u+b!pqmpgx!3~)!e<p6u3O/M1*!*o<s!vsuffusv!s|o!!*1)/u6j!d0j!mnqbnyJ)`hhwo!p,i!Qhomo-j!mFCQ`THJ!MuPbOp*m<g!!~~!!g<m*pubmuv!tEf`sH)H4Yd)fdwp!ootsuv!ujfos!!g<m*psbpuu!dbbmGqnisbp-G!sdppuodtfuw!)jsop!ugdmbpGbnus!peGpfusOfIi*q!T|e!fgqmqpjbmuD!`bD3U!M>!!>q!puxm3v)tbfmsq!iubb*p<m!gg!m<p*b^u!!1e!f]otpens!p>p!dq!p-x^3!)4e!p]utOeIs*p!p+d!))sbp3u!d.b!G2n/s1p*G!s,p!u2d/f1W<f!hsefFu`vDsUoM!!S>F,D!JsQpSuPdDbBGMn`sQpJG!s+p!ubd3f!w0!!<q*p^x!34)!e]ftoepsnp*p<d!!~-!^w!f3d!4]!tCeSsEpGp`dH)HsYp)uddpboGtnus!pjGos!pwufddf4W!fmhjehFi`uDEUjMs!->!,d!psoptuud!bjGon!swpfGds4p!uwdjffwx!E<j*s^-!!3d!p]otteus!pjpod!!w-f^d!42!!o]ptsensbpmp-d!)dsppoutdub!Gjnos!pwGfsdp4u!dgf1W-f!hdepFo`tDuU!Mj!o>!,g!msppbuud!bgG:n1s-p!Gdsppoutduf!wj!o<!*g^m!p2b!u]!tsepsvphpido!f-t^t!*1!!|]!tgemsppbpud!)bsmpquidbb!G>n!sqppGxs3p)usdpfvWhfihoefFt`tD*U<M!!w>f,d!4s!piubdmbgGEnjssp!G>s!poupdsfnwb!m<j*{1f/)1m)j4hdifuwE!j>s!!s,p!uwdjbfGxnEsjpsG*s<p!ugdmfpwb!u4!defpwu!O<M*!^>!!4t!b]utvessbpupfd))efp{uj)mobpnssnpbom!->!!m^j!h4i!u]Etjess*p*p<d!!g<m*p^b!u3!!e]ptueOsWp!p>d!)tfb{ujvmsbbnusfp)oe!p>u!)^o!p3s!n]btme-s!pwpjdf!x<E*j^s!*2*!<]!tgemsppbpud!)efp{ujOmIb!n>s!ptob!u>v!s^b!u2f!)]etpeus)poppds!n<b*m^-!!1i!b]mtgeEsjpsp*d*)<f!{gjmmpbbnus!peop!u>W!I^!!>1!!t]btuevsspbpudf!)<e*pQu!).w!j^f!x4E!j]st-e!sipbpmDguEdjfss*)*!<+!!wufbdn4!!>G!!^>!!4G!`]Ttdeismpjpddl!)<g*1Q-!!.g!:^1!-3!!e]ptueWsIp*p<D!ugdmfpsb)u!!+W!!u>b!nW!`>H!H^Y!`3T!n]jtueisDpppsds!f<m*bQu!f.e!)^b!m2q!i]bt-e!sepppuDOuMd-f!se)p!u+O!Wu*b<n!!g>m!p^b!u2!!E]!t>e!sEp`pHdH!Y<)*bQm!q.i!b^-!!1e!p]utOeIs*p<p!Dsufdufvss)o!!+G!!u+b!n)!W>!!+^!!E1*!<]!t~e!swpfpdd3!!<M^U!D5`!V]wt)edsppoptdu!!4jdof!ww!f<d*4*!OO!--!3dUp!o-t2uU!)j4ou!bwnf)d44u!bWN-f!tdppqottoub!sjuo!!+g!mwpobJun!!s>p!vuhbino!f4tutb*n!!|<!*d2pUo!t-uO!)gtmtppbsud!!M.V!U>`!T3JU[!F<!*>*!O7!5-/W1)<u!pdep!o+t!uO!!g.m!pWb)uf!{MjVmUb`nTsDpBoM!F>!!>2!U)!M<V3UU`!T-J2[UF!!4.d!f2w/!1<**!10/!1M)V4Ud`fTwJ![oFs<v!udfpso!t*u1!/g1m!p=b!u*!^M!V1U!`]CtJeBsTp!p>D!u1d/f6s!!0.!!MQV!U-`mTbJn[sFp<O!ugimhpjbmu)!ueppeu)OgWj!!><!*t3bwu!v-s2bwu)ft)teppsud)!O>-!!mWb*n*s<p!Owufidh3j!mv!w4!d>f!ww!f<d^3!)1s!p]vtheisopfptDtu-d!ftsr!s.u!)^2!/41!!].t!eesppupODWu*d*f<s!!v>w!!3>w!!v4wd!f+w!!M<V^U!`1T!D]BtMeFs!p,p!DMuVdUf`sC!J.B!T^<!!2s!f]utvessop!pvDwu<d!f~s!!g>m!p2bwu!!4MdUfDw`!D|m!j*q^q!f5e!T]qtiefsspfpGDpusdnfGsb!d4udpfsw)!dopjo!tuut!ojpod!!w-fwdo4J!ng!*4!u|b!ng!mopjb!uu!tmo!p>d!!m-fQo!h4udif)wg!*o<j!!suftuovpsdo!!-nWb!y4)d)fmw!!+o!jm!!u,t!ogp/d{!*-!O0!!4)dmf!w,!!o2j/!1u*t-o!p1d/)1f*u<b!v~m!bwwfFd`4D!UMMU!D4`dFfewh!f~W!f<dbuupfsiGuposjntG`bbduufpisu)!d+p!o*t3uw!!j-o2!ww)ftdt4p!swd2!-o!sdvpuoftsu!!<jwo!!.w!f*d*48!.wf32*!!-|y!!g+m!pyb!u.!!y1!/>2!)eypbun))wu2s-r!twf3t*s<f!wgomjp!b+u!!6z/!1>!!;b!cwt!)@y!**<1!/g1m!p?b!uy!)b!!>>!!b1u/f9i6u5o4j:t9`6b!u,f!i)u1!/u5b:p7m6g2!6<6c!!,0!!1b/!1>2!5w6!3u1b7p!m+g!!z<*z!!++!!z*<z!!g,m!p5b3u8!7c2!7>2!/45/)5!2,8!61:5",se["ubos.head"]="g$jjegoeff$g\v!!V<T~F!`\vVgCjPe\vo!fv$o\vj!g<pssbnm!vTddffqotf!!4|d!fnwb!u<5p!jvuQbsSpokpfjduudNbbsugsfjsy!<u!bnpbmug5!!<vtWtjffoxjNobjuistj!yu<b!pwmfgd!4\v!fvtDmbfn$f\vs!b<QspptmjpuDjspbom<v!dgfmqptb!u4!dvfUwj!n<fs<p!mgpmDpnbjus!!u4pdoffwN!b<qsqfjxophQFnyjqsp!tuvbspfm<g!!w<fzdu5j!tvoGfpuhoDJpsmbpmsv<d!fgqmtp!buub!pvmGgp!h<Esfpojt!juubzp<m!gg!m<ptbtuf!ovlGdpjhiOuf!busb<p!mggm!p<boup!jvtGtpjhnGtbosb<s!u~!<u!bvpomjgg!p<stnt!fNobmubfusfjnb!mu!b|p!mggm!p<btut!fbopiNhbvqpJso!uufboptmjgu!z\v<S!CgQm!pgbfue!gmjj$h\vi!u<NybjqsJuobuNf3owtVjvu!z4<u!bgnm!p<byuj!seujbtNqwmVbvd!f4nufbonu!T<dzbumjft<o!fgumopJbmuf!oetjftsqgm!budbfpnmfgo!u<CujtbftU<b!iwqfmdb4!!uebjpgmggv!t<fz<u!jwdfbdq4p!!funbjptmtgj!w<ff<m!bwdfTdm3b!nosp",se["physical.vs"]="~b!u<uysfjucsvfuwf!!+w!fydj4s!ubbQNputdjfukjppsoQ<v!!b>u!uospjjcuvjutfp!Qw`fmdh4!!\vb?Ozpespncb/mt<w!/\vq$bjNgxepfmgg!=V!TfFe`vVmWd\vo!jb$u\vu!s\vj?czveupfc!/wtfwd/3q!bbNVxwp<e!b\vi$tj=g!effegv!mVdWo`jD$M\vJ!Q\v\vg!jwebosfz$j\vo!h<!*gomppjbuuj!twpVQwbM)p4ddbfmwV!<>!!\vo$pfjouejjtgp\vQ!mwbbdspzMjwo!h\v!*wOfPdJ3U!DwFVSwJ<E!`\vQ$JjMgDo)eeffgo!jVgTfFe`!VgCjP$\v\v!!v<o*jygfpussnf!wn)b4ud4f!wv!V>w!Nobpujsujjyt<p!Q\vw$Nfwo!e<jygf\vu!s\vf$wf!o+e!jygj\vs!u\vb$Njxgf!jeWfmgfjeopfNev)!V>T!Fy`fMuJsHfIwU!N\vBgQj*e!o}f}$!\ve!f<g*jyoffues)fVwT!F+`!ByPjNsBuQb*N\vm!fbeupuNsvj)c4vduffw!!w>f!do3p!jbuVjwt3p<Q!ewmbsspzXjwo!h\v!*wOfPdJ3T!TwJVNwT3O<B!S\vU$`jFgToVe)fegf!oVjTgFf`eV!C}P}\v!!1v!o?j!gSpFsQnQ!JnMbDu`4Y!PvCV`wY3BNNb!u}s}j!y*<Q!B\vN$WfOoFe`jFgT\vV!)\ve$ffoojegjfge\v!!g\vj$$j\vo!d<m*v1e/f2!!=-vecfpnts/pigftboeb?s\vu!)\v5$djfowd!m>v!eyff!u=sjfowt!u5bdofdwj!o\vhg/jweto/fi$f\vb!e<?m\vb!nvsopjOgwp!s.n!!>n!bmub5n!svpNOpwe!f\vmEWFjEfJxTN`bQuJsMjGy!<g!fveogjjg$p\vs!n\v!gnjbeuo5f!$v\vN!p<e*f*m*N1b/u2s!j-ym<b!nvsopjOgupdsfnk!cnpb)u55d!fvwO!p+s!nybjmsNubbuNsmjbyn<s!p\vO$vj)g4odeffwg)!fV{TjFm`bVnCsPp\vo!!v>o!jmgbpnssnp!Onwb!u\v5f!tvmQfs$p\vk!f<d*u*N1b/u2s!j-ym<b!n\vs$pfOowe!j+g!\vn!)w5bdsfzwj!o+h!!ywjfsdu4b!NwmObpnssnpbOmv<)!4wdbfswz!j>o!hm!bwnfsdp4O!ww!N<w*Q*p^t3j]unj!p-o^<3!]\vn$)jugp!ee!f-g*j^o2f]en)!V-T^F2`]FnO)WuNpBeQ!*-!*}^}1!]NnB!Y-`^C1P]Yn`)DuMpJeQ)Q4FdSf!w?!!01!!m}b}n!sepfOgujdoffkec)pV!T>F!`mUbSnBsOpTONwJ!T<T*JePfOd*o\vb!uwtbosJzyjjoshu!bwNfbd)44!uwbXnp!s>m!enQ!p4tujbunj!p<o*<*!1\v/$2f!o-eejfgn\vs!p\vg$tjogb!seuf)g5jdoffwe!)+D!MeJfQd`oEbJuStFoDJUyJjPsOu*b\vN!bw)b4sdzfjwo!h>!!weffdn4s!pwgMtpodbbsmuQ!p\vtHjOuJjDpOoB<U!T\vO$Jf`oFeTjVg!\vg!f\ve$gjjo$d\vm!v\ve?fz!e=pecj/ttqwm/bqdbfNnufoofunNfbdqb/mwqtt/jief=b!ef?e\vv!m\vd$ojjo$d\vm!v\ve?fz!e=ptcl/jtowo/jhoohj/owotj/litf=b!ef?e\vv!m\vd$ojjo$d\vm!v<e*fm!b=ntsipbOebp)x4Ndbfqw/!w>t!/mibfnbsep?O\vu!d\vf$kjcopd!m4vdeffw!!=<g*moppxjNubjqt/pwQtb/)i4fdbfew?!\v>!!wepfjnes!pngbtjoob)swup!j4ed*f!w|!!\v\vg$jjegoeff$g\v!!V<TzFy`/V*W*\v2!!w-V3ww!V>b!))4vdVfwwN!b+u!syjjys!u+b!Nw3fwdV4v))b!V>w!-3!w2V/w1!*\v**/QyBzN<P!B\v`$FjTgVe)fegf!oVjWg`fDeM!J}Q}\v!!*wQVBwNMUpIdHbJmMV`!F>T!Vb)Vewf/oyj<g!f\ve$!fgoje$j\vg!\v\v!g\vj$efo",se["lightsCommon.fs.head"]="~v!o<jfgdposbnj!ewbfsds4j!!bonscvjuffosu!M<j*huiiuhDjpfmXpfst<v!gvgojjEgjpnsfni!!w-fsdp4m!pmDjzhlitu/QusiphcjfM]j:n^f<i!!w-fsdp4m!ptDieHofvupJsshs/bueijhbjoMdjfnBfui))jyoj!nw!f>d!4f!doopbsjnebbms-s!jj!o4!dwffwd!4<!6t/i1D!p,f!gMgOjudpjef!o+u!t6]/:1^!*>!!|u!ighmjpfbXuf!tyv!g>g!joEpjsnnfbim!/uyb-p!mzg!!><!*ooppsjnubdmf/szj-e!/{u!i>h!joMpjsnnfbim!/-{m<b!nwsfpdo4)!uspfet!v>m!uM!O>u!ptei!Dupbfpgmggj!d|j!f*omubtn]s1p^o!!+4!d1f/w9!9o7j3!3u8t<o!psdf!t-vumiuh!j,M>j!ntfiiD!pufighgjjMdfjsffoiuqtt]j2n^f!I+!!o3j/!1u!t+o!p1d/)6f2d2o7b7j5e!b+s!szJ<u!ishfjtMvfmsuf!i,q>t!jtnifDIpuffghg!j4ddjffwo!u<tu]i3h^j!M+f!s3f/i1q!t+j!n1f/i6!2u2i7h7j5M!f+s!f{i<q!tsjfntfvIm!un!s,p>g!jtoivD!p<f~g!g<jedfjmfcobuotf]!4m^p!p+c!!3</s1p!m+p!D1e/o6v2p2s7h7!54!d+f!wy!<<!sspfmtpvDmzul!t,!>4!dtfiwD!p<fogpgjjuddjffsojuet!]45d^f!w+!!|3!/u1i!h+j!M1f/s5f3i:q1t5j4n!f+I!!yu!d+v!szu<t!!s\vfgtjvemouf!$,\v>!!<t^iTDUpIfHgJgMj`dBjFfSoBu`tU]D6F^S!`+N!V3O/]1t!u+i!h1j/M5b3f:s1B5u4d!f+s!!zu!i+h!j{M<b!fssfBtuvdmfuS!!,n>s!ptgijDopvf!g<g3j`ddjufmo!uEt3]s7f^m!q+n!b)t1!/n8s5p4g2j3o6v!!+<!2{`!d+u!m{!!E.3!s1f/m3q5n8b8t1!9n*s<p!gsjfotvv!m<u~!!,<>s!btmivDdpffqgTgfjmdcjbftojuet!]m8p^p!c+!!<3e/f1m!c+b!o1f/!5m3p:p1c5!4<!u+i!hyj!f+I!g{m<b!is!f4tdvfmwu!!<,i>u!etjiXDgpmfbgig!j4ddjffwo!u<to]p9j^u!j+t!p1q/!543d:f1w5!4<!s+p!m)pyd!!+4!dyf!w.!!|z!!u+i!hzj*M<b!fssfBuuvdsfoS!!sufdtvvsmuut<!!\v~1!!w?f!dT4U!IhHfJuMM`jBhFiSuBQ`sUpDcFfSJ`sNsVbOe!jgbjo$d\vf!)\vdgpjoetouf!$j\vo!!~w!f~d!4<!fmtjmhbigu!Q>s!pfcmfc]j:t^j-w!/dupiohtjum!!j<o*!1w/f1d)44!dofpws!n>b!ms*p!m|p!dw/fudi4h!jxmp!s|m!efOtpmsfn!b~m!!<>*!*j1o/w1f)s4tdffUws!b>oat!gsppsmnpEdj/sufidhujjmp)o!)>o!pfsmncbjmt-j!wv/WujifhxjNmb!u<s*jzyb*d<f!ew/fudi4h!jjMsuspbqetj!b-ofddfo!b>u!ttjieH/fuuiJhsjsMbuepjqbto!d-ffBduo)bxuptsjmEeuOiphsjnmb)mo-p!jmujbhvioufQusupBcffd*o<b!ustfjuEvusfoh!!j>s+s!bsepjmbpodd/fu<i!h~j!mw!f<do4p!jhufbuvBonfcujufBouupMqjth!i+u!Jsspsmbpedj/buoidhfj)Mduppoqttu!!>j!os!pwmfpdd4/!ubinhcjjmf!o<u*MsjphuidufDWpmm)pisu*h!o|f!mw!f>d!4f!djosbsubtejjEbuoidhfj!m>!!ubbnpcmjgf!o|u!M*j1h/i1u!D?p!moppsj<u!bsvfoufvusuoB!ujpsqstb)e!jgbjo!d<f*<t!p~D!fgmmhpobbu!!-htfpuDEbjstcunbvoodffqB/uuuifhojvMbuupjqpto!)-dtppoDtfuo!pjdo/!ugimhpjbMuu!pmqjth)ioupEjjutbuvboofdufu-B!udppqoTtuuf!hj!o>!!gomppjbuub!vdovfuupugBguEpjqttu!buobdpfm-g!!d<p*ootpuj!ujdof!sgjmep/buui!hejfMdubpzqFty!q-poopfjouud*f!s|j!ej/gu!i)hdjvmu)pugpgeE!j>t!utbpoDdffm!h?o!b1!/u1b!p%m%g!!e<f*dsbpzuFdyfqWpmo)ffo{uj!m?b!n1s/p1o*!!>|!!ospfjuuvdsfos!jqep/xu)ithbjumv!s<boupfj)u.j!tmpjqh/izusEujftnupbfohd!f.!!0o!pdjvuujptgpgqE/jutiuhbjoMdufp!q,t!!2>/!1s*p-u!deffWdmb!z4Fdyfqwp!o|f!o*uu*i<h!j~m!!sufiuhvjsMou!o2f/e1j<d!o~J!!gumvppb!u-!zhsfuufTnqppfuhB!uuuyffouvobpuDjdpjos)udfpnoptfuH!!jooj!!gumtpobpud!!d-puoifhDjpMtujpoqft-!!udiphojtMuu!pjqoT!!gomjp!buut!oqpfdo)vpngcosJbuDiphtjjMoufp-q!Tdupfoht!ue!jjpow!!g<m^pTbUuI!HbJoMh`mUfPDQpTt`jNoVfO*]!t|u!ishfjuMvuspoq!tt!nupiphujiMtuupfqqT)!dnpsopfgDjpotvj!o<f~-!!<qeffomvcnbcosfb!Dmpptpjco!f<-t!pbDobhsmcfnDvpotfjqo!fu*b<p!m~g!!\v<$tjpgD!fOoVpNd`!EuJbSp`mMgJ!H<IzUbTd!f?e!!1u\vb!ptmugs!v<dfud!oEbjustfjdeu!jupbopbmmgM!j<hsipum!p|d!!w4fddf4w!!e<jospfjduudjfpsoj<e!!w4fddf4w!!d<pomppjsu<j!tcppqp!m4!dffowb!c|m!fuei<h!j~M<u!pvqoTj!gupdsvns!uEtj!s\vf1d!u?j!pToUbImHMJjMh`iUuP!QeTj`sNfVdOu!jgpjo$b\vm!M\vjghjieuotf]$O\vV!N~`!E<J*S*`1M/J1H)I4UdTf^w<!!>wap!jsep!mhpfdu/Eujishfjdmu)j!p>o!bfmmMcjjhtijuwJ/ougiph)jdmp!o<t*uz!bjdof!eE/jusifhdjuMjupoojbpmqM!j-hfiduo!beujtsjfed/uujiphojbMmuMojjhpiqu!--!fddpoobtuut!jjEou!iHhfjpmn)foupsjjudbDvpoofuufuyBuf!dhofbpuntfjuEsuzf-h!!p>v+u!!sJpomdpjde/fuoiuhMjjmh!i<us!pmmjphdi/uu*i!h|j!Mmujohjipuq/!d>p!msppsm!p>d!/eujishfjdmu!j<p*osbpmuMdjfhWimu)/iduphmopfsm<!!>m!jfhdioub/uetjjsEfudiuhjjpmo!!u>b!pemjgs!f<d*usjppuodbfmWMmj)hfi{uj/mebjnssfpdou!j>p!oo<p!jmujdhfisuj/ew/jutijhcjmmf!!<>o!pujsuvjft<p!q~/!z\vs$uffonepjfgh\v!!.\v!$ojpgj!uOjVtNp`qQ/PuJiOhUj`MMuJoHjIpUqT!!>?!!s1p\vu!dtfuWsmv!d4ud!fQwp!j|o!u*Mujihhijum!!|u!iwhfjdM4u!oqfpetjjduojJp!ou<v!pw!f-dz4s!udfpnmppfsh<!!ugymfpuboup!Dedjjtsuubfondpff<H!!gomjp!buut!oepfdd!b-zu<i!hcjpMpumo!jfpoqb!cumifhej<M!u~o<j!pvQo!jogjp!sunt!oQppdj)opugMojJhuiiuh!jqMpujoojupMQjuhfihu!te]jOpVwN!`<Q^PTJUOIUH`JM",se["lightsCommon.fs.body"]="gHjfeponff$u\vs!j<d*DupiohujfMyeuf!uhdffpmngffuss!z-<m!bhjfspfnufbuns!z-/zqsputfjnupjfpho!!->f!d.o!bwjWejbfSxuQbpptdjsubjfpmod<!!-hffdponbfjuesbzs/soJpmscnjb!m-!f>d!oobpjsenbbsm)<s!bhmfvpdnffquTsuzd/fwsjjfexoEJj`sF!S>!!\vo*pssbnmbvmdjf{qfT)uwdWfjsfjxeQopJt`jFuSj)peof*o<j!g\vf$ej!ggejf$g\v!!V\vTgFj`eDoMfF$B\vS!D<P*BuUi\vh!jhMfepfnufdufsmzg/fdsm!f-bmsbdjpsbfuuObpns!n-bzms!u>f!ndpmffhb!s-dfpdboubOjpesbnsbsmj<)!f\vt$vfgogejjEgu\vd!fJsojdejoeJf`oFuSM!j\vh*ifut!vegjgsjfEduudMfjshjieuo<J!`\vF$Se)fegfjoojfg!fOeV!Ng`jQ$P\vJ!O\vUg`jMeJoHfI$U\v`!T\vIgBjEePoXfT$!\v1!\v<!*\vt$teffogijhovfp!SOuVbNp`dTsQbPfUm`dM/JmHbIjUs`fTuIbBnE!P-XmTb!n1s\vp!O\vu$bepfdgsjboffm!dO/VzNs`uEfJnSp`fMhJ!H-IsUj`ETxIfBjEwP/XzTs!u1f\vn!p\vf$hj)gf!d)oObVjNe`bQSPMJCOJUu`fMhJ!H>I,U!Tf!d?o!b1j*e!b%S%u!bepfdgsjboffmed)!S\vFU`BEPjDsSfBdFuM*D\v`!FQTpVj!ogufMejghji$u\v!!q<p*jtotufMojihhivup<s!/\vm$bjjgs!feufbgnj!o-fmeb)nVsTpFo`/TzIsBuEfPnXpNfBhQ!*-!s%j%E!xOfVjNw`/QzPsJuOfUn`pMfJhH)IfUd`oTbIjBeEbPSXMTC!J?u!f1h\v!!>Q,p!jfoduoMbjjheibusT!i\vb*espbxm!vqdpfjqoTuuMdjfhsijueToiJb`eFpSx)<e!f\vo$jfgofeej!g%\v%!!\v*$QVBONSWPOMFM``FMTPVP)Qe`fToUjBgSfUe\v!!ggjp$s\v!!)\vjgojue!ojf!$>\v!!1\v<g!jje!o=f!$O\vV!N<`*QmPbJnOsUp`oM/JzHsIuUfTn<p!fjh!),f,d*o!b|j!eqbpsjsoJuMMCjJhuifuh!!>>!,q!pfjdooubMjjehbisustJ]m!cjj!!^\v<*!WjVg`!F)CqVpDj`oFuQMZjUh`iQuB/NfWoObFc)meffeo*j!g|f!eh!f%u%Q!p*jEoSuBMEjOhBiUuTJ)oegfpo)jqgpfjeo!u%M%j!h*iQuB-N!WhOfFp`nFfTuVs)ze-f!oejjgsffed!ugMjj$h\vi!u\v*g<j!e\vo$fj$g\v!!e<ffgdjoobfjee)bVsTsFJ`qTbINBuEiPhXjNmB!Q>*,!!%f%d!o)b]jJe^b!s=s!jO!V<Nz`uQjPtJoOfUu`oMJJqHbINUu`iThIjBmE!P+X!Tc*h\vs!/q*pmjfoyufMUjqhbiNuuTiihbjemp)xs!b>f!oqjpMjpoUuCMHjShti!u>T!ifbdeopbxjte]b!sjs!J^q<b!Neujishfjdmu!M4jdhfiwu!/<d*p3mwpVsw!!+->q!bbNmumi)hcjwmf)dE33)fesjvsufydfuuM!j>h!imuf/ywfjUtqjbcNmufi-h!jsmf!d5fdjfwwf!T\viQbBeNpUxI*H*J!M@`!FhTfVu!QgpfjeogujT$i\vb!e\vp*xf)tqvpgjgojuETuidbfespjxeNobJq`]F!Sj)!e^f-o!jqgpfjeo!ugMjj$h\vi!u\vTgijbeeopfx$/\vt!i<b*e1p/x1N)b4qdTfjw{!f>-!!fqdpojbojueMbjShuibupTdisbbefpmxd/!t4idbfewp!x<C*j1b/t1-)!4qdpfjwo!u>M!jfhdioubTjiebbesp!x4/dtfiwb!e\vp*xsSbbmevjdvftq-T!uwdQfpsjjoeuoTJi`bFeSp)xeDfpopjsgef]e!!jg!j^$-\v!!q\vpgjjoeuoMfj$h\vi!u~T!i<b*eupixh/jtMiebfeupdxfDmbgnffss!b-Omfbbjss-f!uqbpnj!o-uzMsjuhfinupTfihb!e-puxi/htjiMbuedpfxsDjben)fusdbfGsbjsE*`!F;S!!2\v/g1j<e!o\vf$$f\vo!e~j!g<\vf!vSmFb`WExjpsefbdiut)!e+j!szfudjutMojfhuiouJ-x!phefbpintf!u.s!z1-/!2n!b>u+f!ssjpbmmp-d!/sufighmjfMduudffesMjjeh!i~u!*<<o!s~v!u~f!s\v!$<VeOsSbPdMtMj`eM!P|P!Q*`1F/O1E!\v>!>\v!$ffvomebjWgx\vp!e\vb$ijtg!!%)%O!VmNm`vTDQxPpUe`bMiJtH)I!UgTj!!?<!*1e*s!p%p%D!xepfegbjiotf!e-)tSvFj`eEbjSsxfpdeub*i\vt!!T-qtpbujMCjxhpieub!ittq!p-ufM{jjhTixup<e!b\vi$tj!g-!qebfNgxjpoefbei)tV)TxFp`eTbIiBTEuPfXhN!B.Q!*1!/%2%!!>O!VfNv`mTbQWPxUp`eMbJiHtI!Uu`bTpImBgE!P|X!T*!f?w!j1f\vd!fTSqxppueMbjihti)u!Tgijb!e\vpQxB!NtXqPpEuBMIjTh`iFuTTVi!bgefpexg<j!$\v\v$!f<ofevjsgu\v!!>\v!$fVmOcSjPtMjMw`/MuPiPhQj`MTuUdBfSsUj\ve!!g<posp!j)ujdofus!jje!/>u!i1h<j!Mjf!s=f!iOqVtNj`nTfQiP!U>`!MoJpHjIuUdTf<s!jje!/,u,i*h!j|M!utdqfpsujMej!h<i<u*!m>b!ntsqppou/Mzjshuifuntp]f!hj!!-^u<i!hjjgM!f)stfqipqutMjjnhfiiu)/ffdoobbcjmefbes*s!J|u!ihhfjuMTfqspfuiMqjthjinufJIougfph)!t,q!psupMmjphDiuui-h!jhMfuponffjucsnzb-!!>e!jsspfmdpudM/juhiihuj*M<u!d\vf$sjjge!!e|f!g*jeoffmec)bVoTfF/`uTiIhBjEMPfXsNfBiQq*t!j%n%f!i))]!Jg^j!!=\v!*OuVdNf`sTjQEP`UF`SM)JeHfIoUj`gTfIeB!EgPjX$T\v*!\v\v!gtjqepoufM$j\vh!i<u*Tmibbnesppxo!/>z!stuqfpnupMfjhh!i-ufTcipbseQpuxith]j!mj)!f^d<o!bejjesbfsdsuJMfjchpisuQ/udiphmjpMsu!f+h>!!>b,m!mf)dcowbfjde3b)sesjjs!f<d*u1M/j1h)i4ud/fwwj!t>j!cfmdfo-b!jsefbdsfsjjw!f4Tdifbwe!p<x**1*/!1@)!4hdffuwT!i>b!efpdxo)btjqepbusTsiJbmecpjx!N4bdqf]w!!j\v!*^f-t!vtgqgpjuEMujdhfisujTeiobJe`pFxS/)teifboejpgxfNeb!qgTjj${\vf!-\v!gtjqepoufM$j\vh!i\vuETOiFb`eQpPxP/Mt`iMbMePpSxOCVj$b\vt!-~!!t~q!p<u*MujihhijuMTeifbuedpfxm/gtfisb!e-pmxbSjbsefjuvbtn-!!-wzTsqupfunTpifbhe!p-xuDiphpjsMeb]f!sjB!u^d*f!s;)!b2f/s1B<u!d\vf$Sf`ouedjfgs\vj!ES`FF`SE!j|s!f*deuf)mecjbsoffd/uuMijhhjiMub-f!shBfupdnffsu)s!zg-j!!n<b^ujf]stjubimh-j!MsbffgsmBfudduffse!M>j!huiiuh*j<M!b~f!s~B!u\vd$fVsO!S|P!M*M,`,MjP!P<QT`UFIOHEJ\vM!`\vB$FfSoBe`jUgD\vF!S\v`$NjVgO!!)=O!VjN!`<E1J!S>`!MjJ!HuIoUjT)!!?s!p1g*!!\v%U%S!BeUfTg`jQoPfPeM)`SMFM`PESjOsVf$d\vu!*<\vu!iEhjjsMfbdfusjBpuodbfmsM!juhiihuj!MebjfssfBduudjfpSo!b\vm*MbjfhsiBuu<d!f\vS$`jugd!fesfjgEj`oFfSe))eVfToFj`gTfIeB!E%P%X!N*B1Q!*?!!%T%U!IOHVJNM``EBJFSS`BM`JUHDIFUS``TNIVBOE)P!XgTj!$?\v!!1\v\vg!jEejosff$d\vu!j\vpEoObFm`MQjPhPiMu`TMiMbPeSpOxV!$e\vj!s~f!d~u!j<p*oubimhMjjMheifuuTdifbmegpfxs<!!-\vm$bfjosefjugb\vn!!\v-$zVsOuSfPnMpMf`hM!P-PuQi`hTjUMBuSdUf\vs!jgep)su!d)fjsojuE!`jF!S>!!\v1g<j!ejo!f=$!\vO!V<N1`/E2J!S;`!M*J^H!IjU!T]<e!sjp!p,D,x*p!e|b!ieTjmsbfodpujjupdofbsmjMEjwh!i-ut!v>j!eebjSsxfpdeubjipto/bxmpMejbhiiTuuti]h!jjM!m^b<o!pjjgu!d)fesjjsef!d-utjbpjoCbxmpMejbhiitu//xfpoebbcimTfuei*h!j|M!mhbfoupEjjusdffdsujjep!o-bfm{MjjThqibuNJxopgepb)ietj/sxfpdeubjipToubimhMjjMhmibuo-p!jhufdpfnsfjues!z--^!!ejj!s]fqdbuNMxjpheibui*T<m!b\vo$pjjgu!deffsgjjeo)fxep)eVbTiFT`uTfIhB!E@P!X*N*BxQp*e!b%i%T!f)w]jJf^d!f=s!!O-VfNm`cEjJtSj`wM/JuHiIhUj`MTuIdBfEsPjXeT)*3\vd!fewjcs)fmdmubj!p>o+b!msMpjmhpidu/TuiibhejpMxu!d>f!sejjes!f<d^u!jjp!o]btmxMpjehbiiuT",se["lightsPBR.fs.head"]="~t!u<s*vodpuj!tQvimzdtdjPdubomfNjbcunfbs!j,b!m1!/|2!!w.f!d*4*!1e/j2g!g.v!ttftDfpomiphsv<p!sg!m+p!b1u/!7s2p!v.h)i3oqfytft!<-!owpfjdt4v!mtdqdfPduvomfbjscDnpbm!p,s!<W!Ogumppeb)ux!ptqq)ffduvbmsbvsuGb:t1!<o!s\vv$ujfgse!f|g!!*VtTtFf`oDiMhFvBpSsD!PuBbUp\vm!gg!mopjb!uu!tdompfdb!s-doppbjut<v!mgdmdpPbuuo!fdjmcfnbbs!dupbbpumSgp!vohji!oufttotp<d!!w-fWdO4u!pdem!fubbspdmpgb!uoGj1!<u!tgomppdb)uo!pdjmtfvbmsdddpPbsubGm:v1d<f!q\vT$ffuoveqjngp\vd!!\vu$bjpgmegf!g\v!mVbTdFj`tTzIiFQF`Os\vb!mwvfddf4q!TtuidfffsojDepomJp`sF<S!!gsmbpmbvud!ftqiTfufdofSspjvehoiJo`fFtSt!<f!o\vj$gffoee$j\vg!\v\v!m\vb$djjgtezfigQ!`JfPtSv\vg!ggjmEpubduf!sjjpeso<J!`\vF$Sf!ofetjvgg\vg!j\vE$ujdgfesfjge!oVJT`FF`SU!SfBoOjTgNfJeT$T\vJ!P\vOm\vb!dgjmtpzbiuQ!`ubsfbsoBtundjftSt`jupdof<s!jgEm`pFbSu!!bufssbBoutdnfjSt`tujdpfosBjmEq`iFbS<!!fgomjpgbfue!$u\vi!j\vdmlbodfjtttz<i!Qg`mupdbfus!jbEu`uFfSo!vubdufjspjoEE`jFtSu!bfoodjfg<f!ew$f\vd!4\v!gbjueuoffo$v\vb!u~j!p<o*Dtpemsppsp<D!u\vd$ffso!e-j*g1\v/!2~)<4!uwbfnd!4-!odpmjfubjstdppqb!u-TsqjfEdxvfmjbws!!->m!bwnfsdp4o))1f/u1b*v<m!bwwfFd`4D!UtMi!f+f!osTpqmfpdDvfmtbvsg!g>j!ew/fmdb4j)s1f/u1b*n<!!+g!msppbmup!DJuCiMhTjimf!f>o,C!SfEtGv)gdgpjoEtuud!fjsoj!ew/fudi4h!joMpesfnubdmf-m!gdfpso!t~u!!<j*ot!ewsfpdp4D!uwdjffsx!E-jwso-J!nd!p-ootpuj!ujjot!pgqm!p-bsuj!Esxpfvjhwi!o-fmtbtn*s!p|o!)gfmupbbvum!bewpFu`ODWU!M>!!+t!bmufvostbfusfg)!e+p!us)pomppsDnubimh-j!mw!j>f,x!Esjbsm*v*d<f!qgTmupdbfus!jse3/!u>i!hsjpMvehfiuodfftmtg!f+s!!s<p*vzh/i3ouf!t+t!<*!sgpmmppbDus!bbm!v>d!fsqptv/hmibojfstftu!b=n!!1./!3*61!/@2!).44d4f:w/)3!!,+!!ys/33!u,!!+2!7s2p/m5p!D+s!bsmpvvdhfiqotf/tmtb!j.s!f3u6b/n:)!!;>!!.m9f/o5t9f!s+g!!s43d!f,w!!2<5*/!4*!x+/!2sup!v-h1i!o-f{t/t2!u.)!4:d/f:w6!<-!*g1m!p-b2u!!-c1!!>)!4sdpfvwh!i-o*fzt/t2!u=!!-11/!3-6y!/@2!u5)54/d1f!w+!!)s43u!b.n!!3>4!/w8o!J+n!!s4puvbhni!o<f*twtv!!,-!34`/d3u7m!);E!32f/s:v8u!y+f!us!3>!!.3!u4!/53d8f!w+!!<s*pwvvh!i-o2f`tdtu!m,)!E13/f8s3v<u!ygfmup!b>u!!2EuH!!5>d!ffwy!q<)*bt!t+f!oeiphuvOpWs!/,m!bcj*s!f,u!b)ns!p-vshjiEoxfftjtw!!=-!m1b/n3s6p!o@)!w1V/`1D!U;M!!1>/!2w!v+!!3)dsfpwv!h|i!o*fstbtm!v.d!f1q/T3f6m*c*b<t!jsef/uuvishoj!MtbbfusvBsubduffs)aE)H!!g+j!!S<FuDiJhQjSfPIDgBmMb`iQ!J,*!<i!u~e!jwXfgdm3b!iE!G,H!BtqpqQsupiyh)jdmp!o>t!u^!!j4o!!]wtfeds4p!poDpusdnfbsm!-<!udiphojtfuI!gjmob!iw!f,d!4i!uwejjfXxgEmjbsi-!!.d!ptoptQuu!ijhoj!mg!m>p!b^u!!3s!p]vtheisopfptDtu*d!f|s!!g<mupibhuj!feIpgumObWi!!>.!!tibuuevjsXbgumfb)ie!p.u!)toppQsunibhmj-m!!w>j!f^x!E2j!s]*t*e<s!pdppDoutduf!sw!f<du5i!hdj1f!I>g!mwbfid!5.)!.i!u2e-j!X.g!m1b/i1!3,8!6t-p!Q.u!i1h/j6m8!3>-!!^1!/11!3]3t*e<s!pdppDoutduf!sw!f<d^5!!5d!2]!t>e!swpfpdD5u)d2f-s!!14/d1f5w3!6<-s!p2m/p1d5/-u!i.h!j1M/b1f5s*B<u!dwffsd!5>!!ss!p>m!psDpuvihhijomf!t4td!f+w!!d<1u!i,h!jdf2I<g!mgbmip/buui!hbj1M1b5f!s>B!undjfos)!s>/!yu!i+h!jsf/Iyg-m!bfiy!q43d)f.w!!:</i3u9e!j+X!gempbuiO/Wu*i*h!j+M!bsf/syB!u,d!fss/!z><!!iwufedj3X!ggmbbci!!>4!dwffwd!3<)o.p!j2u/j1t5p-q!/2u/i1h5j*M!b+f!sbB1u1d5f!s,!!>s!/t{pxQ<u!ishfjumv!s4od!fgwb!c<<o!p~j!uwjftdp4q!/Fzoswujfsnppofnhf!o>u!CoSpEjGu)jdtppoqt!u4!djfow!!w<fsdj4E!xofpjswn/bzms-u!fdnppofthu!!>j!os!jwEfxdf4j!ww!j4fdxfEwj!s<-m!bdnpsoptou/!zjsou!fwnfpdf4h!!t>q!fmdbvnmsbpsoD!p4mdpfsw-!!|d!p*outiuh!jjMoe!fgumdpfbmug!ftsq!fudivhmjbMseGf:u1d-f!mdgpfoSt!uu!vjpoo!jg!m-pmbbuj!ssfpuvbhni!omfbtjts*f!u|b!Nwmfbdd3j!tgzbicQ!!>o!jE!GuHtBoqpqds!p-yz)soupfsnnpbfmh-!!uwyjffuxoEpjDsd-j!ssupfvnhpifoHf!totj*!<u!tsofpudv!s-ou!ithqjfMdbvfmsbBsuDdpfmsp!su!i+h!jgMbbcf/syB!u,d!ftSq!fodjv!mubtsoGp:d1)!m+b!dgjbtcz/izQ<`!b~f!swBpujdef!Sd`pundqfvsujfEN`vFmSu!jetjdpbwu!u\vf1s!j?o!hT)UdIpHoJtMu`!BjFoS!Bw`fUdD4F!So`pNsVnOb!mg-j!$d\vp!o~t!u<!fjdoo!bwjfedb4s!swJjeffxuEijhsj-f!Xdfpoojttup!dj!o+!!wfftdv4g!gtjqef!d>v,m!bfstDvpgmgpjsE-u!ddfpsojteuo!jj/ou!ighmjpMbeuf!utdqffmdgvfmsb!s<Gf:d1o-b!jdepbostsuJ!ejfou!ighmjpfbXuf!osjptvphdi!o+f!thto-j!sjfoupuvbud!Twjfudm4v!nt!j>o,h!msfbTmdvbdufuqfTsu-d!fjsojpevouj!/wufidh4j!MnevfmuudjfTmdgbfusu!f<sh*o!j|s!fwufudb3d!Tgfbmch!o>j!tE!G+H!Bfqdqosbpjye)bosp!s>n,b!ms-b!mwvjdffxqETjusd-f!ssjpevohji/oufithtj*M<e!fwufddf4m!gGftst!F<t*t*!h>o!jtsqffuduvbmdbTsjDupmmvpns!!,+!!hgobjcs/fyu!u,b!dtTqffmdhvomjbts)G!:.1!!1+/!2g)b!c+/!zs<p!mgpmDpfbtuv!gFgtjte!/>m!bgjbscf/uyb!n,!!>g!bfct/vzg<g!jgem!p4bduf!wF!n<t*!h>o!j2s/f1u!u.b!dFTtjtu<m!vwnf!d-4h!oGjbswfhu!u>b!dtTqffmdhvomjbts!D-ptmtpfso!i,h!v)p2s//1m!b.j!stfqufbdnv!m-b1s:DGpsmbpmsv*d!f+q!t1//m1b5j8s7f2u:b<n!!w-fsdp4m!pGDnstb!m>v!dGftqttF/tmtb!j+s!fGubbwnh!!-0s!j)E2x/f1j!w./!zFsnutf!n+p!fGhb!w-hm*b<n!stpjoo/hzmsfuTfdnbpufuhf)sh!o,j>s!fGututbFdtttj<u!mnvvNmfuujvTqdnbpudu!f<sJ!Q,`>M!BGDnPtS!Q+J!DFFnSt!<+!!~f!dwopbjjee!bSsFs`jE!j>s!ffdduo`bQjiezbtsjsdJbemf)udiphojtfuX!fjooj!tJpodd!j4edffowu!M<j*h1i/u1!)e4jdsffwd!u>M!jhhoijus-f!udupbodtTuj!ujmov!nH!f4pdnffwu!s<j*d1D/p1o)u4fdyfuw!!h>f!phnofjussfzu-u!bddpToftmuh!ojjot!!Q4idzftwj!d\vbgmjNebouff$s\vj!b<m*!tntbfuofishjvbpmS-o!fjfoiptv/um!bSjfsgfmufbdnu!f-esMjjEhxifuj!ws/fzgsmuffdnupffehM!j-hmibun*s!p|o!/gzmspubfun!pefphu)OGME!S>C!otfbfuivTsMbCuJf!)+e!psup)mhpfDponfffuistz//mobpjssnfbumb-n!!e+j!sffddoubMjjehbisus/je!j>s,f!dsubjmpvod*f*q<T!owfffdi4t!!j\vsOsFbFeIjTb`oFdTfV!!>g!feepgujO$M\v!!+\v!gejjesoffd$u\vM!j<h*itut/fdopimhpvsp<S!u\vb$pjdgsebffgm!dV/TmFb`jDsMfFuBbSnD!P-B1U:\vG!ugbmppdbsub!fempdu/OmMbdjds!f>u!btnb!u-v1sGbuubfp)despbuf)mhdf/pmnbfjussfzu/bdnm!f-bssjdEpxbfujOwp/sznsbumf-n!pefjhs!f-dmubMnjshpiOuu/bepjdssfbdfumjdp/oz*s*u<f!nwpffdh4)!GdEdSJCsusobfenjobposdjfw!o>F!!e+p!ufOdModbdj!e+b!SeujbspfddsubMfjmhdi!u>/,d!psmbpmsv<d!fdqmTfubbspddpsbbufTmqdf!d\vvUmBbPsD!S,B>F!MdDd`JFsTsVb!egjfbeogdjf$!\v+!!|C!S*EuGi`hHjHMYe)feujdsffmdgufMsj!huiiuh/jeMjesffuddufjmpgof-S!!hufvppnofju!s-zm/bwjjsffxuEbjns!-m!bhjfspfnufbuNsmzb/ddjmtfzbisQd!pobju!Ouptsonpbdm!--!znsbuuffnspjfbhm!/udymffubospdDpdbjusGu1f-n!pnfbHu!fosjj!bumt/odpmdf!b-sfddpobbujGe:b1S-u!bnpbdusfbsfjmbdm!/4ddmffwb!sodjp!buutSoppvdh!i-offdtotb*j<e!b\vs$sfjo!e4jdgf\vw!!\vo$jj!guetfogp!dV!T-Ff`dToIbFjFeOb\vs!!t4idfffwo!Toqjf!duvtmobpsd!),m>b!djjstszbieQj`bsobdmfv!d+f!qCTSuEdGf`sTjiefofJo`)FeSj!sefjdpuwM!j~h!i<u*/sepjmspfDdfutjvpgog-j!eh/fmpbnjfsufsuzb/nw)jufsxfEcjnsb-M!`hGfEpSnCf!u+s!zf/doopbsjnebbms-s!jn!b>u,f!sfjtbvmg/gtjiEfufdofDspjmeposj-/!unibhujfMsejfbumd/ftmigfffso!S|p!v*huiiohfjtMte*f<u!d\vf$mfgofesj!gu\vi!hsjfMgemffudduffmegMfjSh!iuuv/peojjs!f-dmubTjqsffduvbmnb!sm!b,j>s!fjusbsNbmebjdbjotdzfi!Q+!!oCjS!EuGt`oHpHdY!)-ezjssuffdnupMfjhh!iuuy/feujospfDddujjspuof-n!phffHp!nofju!suzt/owpjdf!x-Efjdso-b!jhefbpsnsfju!s4zd/fowp!sonjb!mu-t!onpbdu)fmsbjdbjmt/ztiqQf`dfvtmvbgsgDjpEmupdsf-s!jnebouJf`sFjSb!me/jtpqwf!d~v!m<b*ssGp:m1p-D!fntbvugfgsjjeb/mm/bsjpsvfhuibonf)tuts*f<c!nsbfMg`mGfEdSuCf!e+M!jfhdioub/jeejbssfsdju!E>j,g!gfvt",se["lightsPBR.fs.body"]="gQjiezotfj$d\vb!m\vNgbjuefosfj$b\vm!!<nbb/u*fwsVjwb!m-<q!bnNbtutffsojibhmv/peSjogfgfvittf)DEp3mfpssv!u>y!feuj!g>g+v!ttftDfpomiphsv/psShocf!f+i!t)/2m/b1j!s.f!unbfnu!b\vmQoBfNtTtTGFbOdIuHpVsP*S<O!FwFfIdT4`!FeTyVz!!g>f!engbjy$)\vb!c<t*)1e/G2e!y-)8h1f/p1n!f-utstzfOopishnvbpmS*o*f-f!ibtc)tq)nebGmedz!)>h!ftptnffouishzvOppSsonfbfmi*t*/*m<b!jgsmfpubbun!!h\vfgpjnefoufs$z\vS!p<vchhiso/f*t*tw!V>w!!n-bqyb)Nnsbpym)peDyozf/fyi-t!)eEy3zf/szv*u-y!feuy)zs/b{f*o<j!MnpbUumffsyjfbUmq/bsNpsvphmipoDfotftf!i>t!!n>b+y!)ssppmvphDiooffftittG/bmdbujpssf-u!b1n/!1\v6Q3B6N*S<P!MnPbDuOfFsFjIbTm`/FsTpVv!hgifoefgtjt$!\v,!><!shpfmppnDfoufsfziStp!v>h!isopfmtptD<o!fnfbiutf/smjbbjms/fsupbvnh!i\voOfFtFtI!T>`!FnTjVo!)gnfbeugfjs$j\vb!m\v/gsjpevohfi$o\vf!t<t*-1!/22/!1-*t<t!fnobiuhfvspjSbumb/ptdqsfbdfvmmdb/smDbpjmspfsu!b>n!)nojjyn)!w>f!dt4t)f1o/i1h5v*p-S!uebjpgdgsvbtffmDdp/mmpbsj/ssfhucb-n!!n<ftutbfmooifhtvtpGSbzdsuupfsn*p<f!hn!b>u,f!stjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!/2m/b1j<s!f\vu$bjng!e<f*g6!3J6P1S/\v1!!n-btutffsojibhmv/pjSpusb!p>d!sjbpfsm<d!/\vm$bjjgseffugb!nT)QyFbDnV!M>B!St\vt!fgomiphbvup!StuqbfpddvsmbbfsmJdo/umfbojtsjfuuzbGnb!d<u*pusb!p>d!stbqffmddv/mmbbsjJsofuufbont)jfuuzb<s!vwufbdt4!!>t!qufbdpvdmsbbsfDmpdm/pmsbGjbsdfuupbsn!!>\v!gtjqefodfv$m\vb!s<Dzp/m*pwsV<w!!n-bqubfNstjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!)nEj3yf)stvqufydfvum!b>s+J!otutffootijhuvzpGSbudbuppdss-b!f2m/d1/-m!bnjfsufbumbonf!t\vtQGBbNdTuTpFsO*I<H!V\vP$Sf`mUtBfP\vD!SgBmFpMbDu`!FtTqVf!dgvfmebgsjJ$o\vu!f\vogtjjeuozfG$b\vd!u<pys/!*>w!V2w/!1-<q!bwNfudb4p!dtsqbffdmvdm)bEs3DfpsmvpusyGfbud!u>p+s!!u>b!pwdfsdb4f)m2d//1m*b<j!snfbuubfns!j\vbQmB/NtUqBfPdDvSmBbFsMGD:`1F!T>V!!2g/f1e<g!j\v$$\vf!o<e1j/g2\v!!>n!b1u:fGsujbbpmd/stbqffmddv/mmbbsjDspfmupbsn!!><!*n5j1y/)1n)j4od)fqwp!x>3!)1)Gnubbupfdssjbbfmm/dj/pmsb!j.s!f2u/b1n*!!<0t!t)fnobiuhfvspjSbumb/pjdpssb!f,m!d2!/>1!*t*t!f+o!ithqvfpdSvumbbpsdDspbmfpmsdG/bmdbujpssf-u!bwnf!d<4u)b2p/d1s*b*f!m+d!!t>q!fudbvpmdbssbJfomudf/omtbjjuszfGubbdnu!p\vsU-B!PeDjSgBgFvMtDf`DFpTmVp!sg/fsehgcj-$!\vn!f\vugbjmeoofft$t\vG!b<d1u/p2s!*><!!1\v:$Gfsmbtmfv\vd!fnqbtu/fmsbjjbsmf/utbqnf!d<v*msbpsuDdpbmGptst!f>o!mnbjuyf)nw!f-dc4h)s1//s1p5m*p-D!fetjvgg",se["toneMapping.fs.head"]="g$jjego!fa$e\vf!g~j!o<f*es)pVmTpFd`)VfCuPb*s!v%u%b!t)!eofsgvjuoffse!)<VstpfmMpjdo!f+b!suUbpNoufvNqbuqvqPjToFhD*B!!}>}!!sepfmgpjdo!f<e*)sVptmfpSdf)juojiGbUsEePUepooBfUNSbSq!q>j!oshp*m!p}d}!!<esfpgmjpodf!e+)!VutbfNDujvoqfopJoTUFpDoBf!N>b!qsqpjmophd*!!<}7}/!1e!f0g!jfosfvet)pVqtyfFBhDoFjTqGqjbmNnfjodpUup!o>f+N!bsqpqmjpodh!*<**\v!!*v3o1j7g8p1s/n2!!g-m6p1b7u1!1u/p1o.f!N-b8q7q4j8o1h/F1y.q)p4tdvfswf!<-!*\v7$8f3o8e1j/g1\v.!!\v-$4j2g9!1e2f/g2j!o-f9e1)2V4t6f/M1j.o)f4bdsfUwp!o-f*N8b3q4q1j1o/h1*.\v!!-w9f1d341!2M/j1o.f!b-s6U8p5o1f7N/b2q)q4jdofhw)!w)f4du4b!nd!p>m!pusb*N!u|v!qsufvuPvTsFoD!Bu!p4oufbNnb!quqtjoophdF!y<q*p!t*v8s8f8!4+9!/d1p!m-p7s7<6!2~1!/\v1$!f-o4e3j9g5\v1!/\v1$)j4gd!fewf!g-j*o4f9e4)4V2t/f1S!f-j5o4i9b1s:e/U1p!o-f9N6b5q6q4j/o1h)*4\vd!fwwf!d-4*!1S5f9j3o1i/b1s!e-U1p1o7f8N1b/q1q!j-o:h2)8w:f6d/41!)d4pdmfpws!*)!4|u!bdnp!m>p!su!b+N>u!vuqpooJfTNFbDqBq!j4ouhbFny!qupttovpsdf!<|!!s*fsupvmspod!!t4bdufvws)bhuofj)qdqpbmNpfso!p0U!d)jwnfmdj4G)T2F/D1B*!!4,d!fdwp!m~p!s<*c*!<0!!~b!!\vo$sfvouefjsg!\v<!2\v9$1j9g4!3e/f1g!j,o!f*e1)2V6t:f3D4j5o/f1p!o,U!pwo!f+N!b:q3q8j4o9h:*/\v1!)w!f+d!4w!!P>q!ucj!n4jd{ffwe!D<j8o4f6p1o:U1p1o1f1N/b1q!q.j!o*h7)9w8f6d543!1d/p1m!p,s!*w!)|!!+d!pwm!p>s!!b+!>4!dufpwo!f|N!b*qwq!j4odhfFwy)qupjtGvUsEfP<e!odBpUmSpSs!!4>d!fnwb!y\v)*whfodj4q)q1b/N1f*o-p!Uddpjmnpmsj!G.T!F1D/B1f1t5V*)<e!fsofjugvfseo!!gqjp$x\v)!)\vdgpjmeposf!$+\v!!)~7!/<3*!*+3!/d3p)m4pdsf!w,!!-1*/761*/*1!!0,!!)*d8p/m2p!s,!!+s!p)m7p/d3!!+",se["toneMapping.fs.body"]="g$jjego!fe$f\vg!j<o*fceh)sV/tefJM)jhoofjbqsqUbpNoffoNpbUqdqjjnomhj*G\vT!FJDeB/!s>h!cc!h>s!/MejJo!f\vb*shUopjoqfqNbbNqfqojpoUhd)jJnem/jsGhTcF*D<B!f\vt$Vf)mejfgo!jegffgej!ogfjem)fV$t\vf!S<f*jcohisb/seeJU)phoofjNqbqqbqNjfoohp*U\vo!pJfeo/jsDhecf!{>j!nSjfujqoPi!b>s!ecUhpso/feNJb!q\vq*jhoohj)qJqeb/Nsfhocp*U<o!p\vf$ofjmDjfgt!Ve)fegfjo",se["output.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eUoSfB$O\vT!N<J*TbT/JsPpOm\vp!D\vf$tjvggegfjge!!P-QuBiRhVjFM\vh!owjfpdh5u!vJpe)!5>d!fwwf!d>5!)epJv!u5hdpfjwo!h\vMfjthmifu$-\v!!n<b*u1f/s2j!b-mu/iuhsjbMohtonjjpthtujvppo)B5mdqfiwb!!>,!!e1J/!25*d<f!w\v!$\vfFmVtRfB\vQ!Pw!fgdf5e!gJje$!\v>!!\vwfftdm5f)$p\vv!u\vhgpjjeoohfM$j\vh!i<u*-*!2e/j1g!g,v!tbfiDqpmmBposp/jbt!t+j!n)tnobbusfus/jmb",se["instancing.vs.head"]="g$jjegoeff$g\v!!V~T!F<`*J{OzTyU/B*O*D1J/O1H!\v-!sbjueu)s5jdcfvwu!f+!!nybjus5u!bbnN)b)ufs{jjymJbontsupboo!dofsev<u!fwsf!d|4!!*uysjbsoutbgnp!s5nuEbjns!fodju!j-psoj)ej!o4!dwf",se["envmapPhong.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eFoOfW$N\vB!Q<\vz!uwjftdo4f!udobJnqfbsNbwUopfG!s+b!hi!u>h!oofpssunTbsmbjm{vfd)fwqXtp!s+m!e{Qzpyt/jsupjmppoD!w.o!fv!D>b,n!fusibhQjpMthjoujjpphou*v<p!!w\vf*dE4E!Bx`pHsOmJeEOOpFsMnCb`mQ!B>N!WjOoFw)fesftofjUgsfbeo!tggjpmsfn$E\vj!s<f*dzuujjptoo)fouposJnqbbmN-w!ovfW!j+f!xiNubhuosfjsyu*T<s!b\vm$vjdgfeqftg!!-F{OzWyN/BsQp`mNpPDEwFo`fS!F-GuMiFhDjUMJhPoOj\vp!hwufvdp4)!ysjfng!m>f!duuiWhfjdM!h>o!jspfhgumvfpd!u\v)*dYbJnNf`sHbOUJpEGOsFbMhC-`!QxBpNsWmOeFO)pesfnobjmg*f<e!!\vg$jfmmft$f\v\v!!<w*fzdu4j!tsoffgumofJdqubWNfwdo!f>!!+s!figushbodfus)udTbsnbfmsvbdUfpqGts!b-h{-z!yx/psspmmepODpwsonfb!m+-!!usifhgjsMbhdoujjpphouSvbpu!j-pu*i<h!j\vM$hfoojepjhgu\vv!p\v)$yjjgne!f>g!!uFiOhWjNMBhQo`jUpZhQuFv`pD!V\vCZFM\vQ!JwUfMdV5N!`fHoOwJDEpOmFpMsC!`>Q!BuNfWyOuFv!sgffDevgcjf$)\vf!o\vwgnjbeqo-f!$w\vf!d<4*)1g/m1j)q5FdofwwN!b>q!!s+p!mspfDgwmoffd!u5Wdffdw/!y\v-f!tsmffg$m\vf!d<u*W1f/d1/!z-{d*f*W<u!d\vf$mfgmfjsg!!-eqfbgnjwooffe))WFVOfWcNvBDQf`sUvZuQyFf`uD!V>C!Fs`pVmWp*D\vw!owff!d5",se["lightsPhong.fs.head"]="htoupsivQdouo!jCmmCj`ofotQvigpgojhENubduffssjjebomJ!`|F!Sw!ffdt4v!gegjjgEguvdtffsDjpemopJs`<F!Sw!ffdo4j!gtfqef$d\vv!m\vbhsoDppimQposo<j!mgCm`pubduf!stjqEf`dFvSm!busdTfisjjoEj`oFfSt!tf<o!jggmfpeb$u\v!!t~q!f<d*vsmpbmspTDufstfvoghgujie</!m~b<j!swfpujben!)SuFs`fEcjnsbfMd`uG`ECSmCj!o+o!Qfidpoobhj)edbpsostju!!>j,o!!fJtovdgjgejfEouudMfjshjieuo!je/jusifhdjuMMejfhuiduf-m!gdfpso!t|u!!*juoi!hHjfMpenffuudsfjmdgDfpso!uufiyhuj!Mheffpundffumsgzf-S!!dupvoptouj!!j-om!bCjmsjfouobQni!pmobhjNsbfuufbsNjhbomp!inQbouofjsmjCb!mo-j!!juotpovpud!!S-fzgsmuffdnupffehM!juhyifuu!ospfDgdmjfsduuffnepMfjHh!iouj*!!u|t!ogpmdp!b-uf!deopbujOeMb!s>s!jt!b4udvfswb!uofj)!euptuo)phdf)phnofpuisQzo/oojpmsCn`bfmt-v!gegjjsEfuddufMsjjheiouJ/`eFjSs!fedjupjwp!o~*!*<<i!uwhfodf4s!ujTsssbbmevjdbfoqdtf/!m>b!jespfuuObMn!!++!!e*jtstffdoujMojjhiiTus/bdmpvmdpfsq<t!/smfbgjmsffduubfne!M-jshpimup/DesjbsmfvddufEqjtg/gmvbtjfs!f,u>b!nj!s-smbbenjsbpood/fz!s+u!fCnSpEfGh`!M-bsnjcEfxsfuj)wn/bzusfusfjnbpmf/he!j-gogpvjtufdDfpsmjpes/*u<i!hsjfMgumdffdsujfee)MhjohpiiuQ/oeojjsmfCd`uGTEqSfCd!v+m!bfsd!o,b>j!ejbss",se["lightsPhong.fs.body"]="<CimujhooofQsiupToshbNmbvudffsqjtb!m>!!nibuuhfosfjsbumT<s!bnmbvudffsqjtb/mm/bejjsgfguvbtnf!D<ptmtpfso!j>o!jeijtg!g>v!ttftDfpomjposj/isThscb<m!vndbfuqfts/jmbbmj/stfqufbdnv!m<bssbDmpvmdpfsq!t>!",se["aoMap.fs.body"]="g$jjegoeff$g\v!!V\vTgFj`eBoPfN$B\vQ!\v<!*\vt$tjfgo!iehfvgpjso/fmeb)jBsPfNuBbQn`!S-`o2p*j\vt!vgmmdpdbPuu!obfnjccjnfbo!u-PWdOdumpvet)joppoj!t>v!m)dudfPysubvmsvfd3fEq)TbfpuNvbqqn-p!dw!V>w+*!/ssb!m.v!d2f/q1T*u!d+f!sbjpeNobjq/JuoiuhfjoMtejfuuzd!f,m!g2f/s1!<<!*\v*$sfjmEjxgf!jewf/gzjsouffen)pBfPhN!B-Qm`bSn`s3p*o\v/!zgsmupfbnup!fbhn)cujpfeo)ufPudbdsmvvutbjtp!o>!!>W!O)uupfey!uuvbspfm3gE!)\vb*pSNCbQq)-e!fwoVjwg3f*e/!s%!%.!!*2Q/B1N*W!O+F!`bFpTNVb)qeJfooujfgoftej!ugzj!$,\v!!2</o1p<j!t\vv$mfdmdjPgu!oeffjgcjnobf!e>)+B!PfNtBvQg`gHj`E2u*d\vf!sgjmepobju/!ubinhcjjMfeofuuPddfdmmgvftsj!p\vog!j>e!o)fu$f\vy!u<v1s/f23!E,)!bzpuNjbtqo-f!uwoVJwq*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*q3JwoVuwf!o-tqjbuNzp!b,)!E23/f1s<v!u\vy$ffum)j!g>!!eofpgjjtovfmed)dBPPuNoBfQj`cHn`b3!*u\vb!pgmmgp!b\vu*!3b`nCc`jQfBoNuPPBd)demfvotjjgpfoe!!>g!j)muff$y\vu!v<s1f/32E!),b!pzNubjqt-o!fwuVowJ3q*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*qwJVowu!f-oqtbjNupzb!),E!32f/s1v<u!y\vf$uf)m!j>g!!oepfjgtjvomfded)PBuPoNfBjQc`nCb`!2u*b\vp!mg",se["transmission.fs.head"]="g$jjegoeff$g\v!!V~T!F<`*UbS/BuOiThNjJMTeTfJuPuOj\vn!tvoobjsgup!s-ns!pgmmppDbfut!vbgugujfeo!v+b!usjppmopEDjetfuubbovdoff<u!uvbo!j+g!p*sGn!!.w!f1d/42!)b)u5udffowv!bousjvpuofDsp!m<p*st<t!f\vo$ijhgvepfsg!!-V1T:FG`sUbSmBvOdTfNqJtT!T-JsPpOmNpBDQs\vb!mvvodjfgqpts!n-!wt!b-noq)mGfEsS3CEu!oufsnbooptsnjjwtotFj!p>o!NGb!q4<d!f\vw$!f<o*efjdgo\vb!u\vt$jjEgoepfjgu!bVvToFf`uUuIbJ!D-LsOpFmTpTDNoBpQj\vu!bvvoojfgupusbn!!-t*bznbqSmofpsj3tEt!junitjodblsouf)tituNhboqf<m!!\v-$cfhose/jugi\vh!jvMoejfgupusjnn!twofbds3u!)uospbjoutbnvjotftujupBofTnbvnmqpmWfzsmTqjq{bf!<>!!vsopjmgppDsenf!utbbvnoqfmufusb3!E4!dufswb!o<t*nsjptjt!j-ptotTfboniqhmvfpssN!b-qt<e!svpopjDgoppsjnu!dnbbsug5f!sv)NfpmeqfnmbNTboupsjjtyt<j!n\vt$ojbgsoUeuffgh!!V>T!Fu`iVhCjPM\ve!f\vu$ujjgnetfogb!sJuP!S5\vd!fvwo!j<g1p/s3n!!>g0m!ptbeus!pjppDso<p!j\vu$dfbosegjfgs\v!!<\v1$/j2g!e>f,g!!tTeQsFpDpVDMoBpSj\vu!dvbosjggfpss!n<!xg/mtppbQud!etoq!f0d!vzmyb/stJpoQudfeoot!j>u!zt<e!svpopjDgoppsjnu!dwbfsdg4f!st!q3fddfvwm!b<s*D1p/m2p!s-<u!j\vy$FfzobeSjegf\vu!dvbosjggfpss)n5!dgfmwp!b+u!!yujssbuobtNnxjftjtwj!p+o!<y!jvsoujbgNpkspns!qg!m>p!btup!Qudiejod!l5odfftwt!<<!zvboSjogppjstnt!jnnbtuo5b!svuQ!s,p!kofpdjuuNjbtupsqj!y><!!uvjoyjFgzpbsSne!fwufddb4s!gvfDsb!n4fdsfbwQ!p<t*jyujjspuob<N!m\vf$efpone!j-gs\vp!jw!f-dt4t!fhofludWjpimuv!n-fwU!s-boo)tznbjStotpjjptotSjbnzt)odbpsoUtfun!vjmop!Wwuffdh4!!>o!-z!bdSpooptjut!tjjon!twofbds4u!!w4-d!fdwp!o|t!u*!fjdoo!bgumtpjbEuo!pujiujbdvlooffututb-!!udbppomtgu!!ojjo!!ugtmoppbdu!!-jsppsm-p!Ddoppojtuub!vjoof!unubbu!54!dnfpwe!fomjN!buutsojpyd*!!-|t!twffodl4d!jsifug!subbdpumjgp!ooWjf!duutposp!d>!!-ssfpgjs!budbup)m.g!!wo-j!!ouptsonpbdm!j-{yfj)sou*b-N!k2p/s1q!!05!ujbpns!*o<j!!wuftdo4p!dn!p-eyfjmsTudbbNmxff<j!wn!p5eufbmnT!dobjm!fu/tyo!p>d!!m-fyojhsuuib)Nwmffde4p)nn!p5eufbmnN!boujs!juyt]o!p1d!!^-/oypzj{u*j*t<p!qn!p4edffmwT!dobjm!fu/tzo!p>d!!m-f1o:hGusib)mwvfddf4q)tn!puebfpmmNgb!uosjj!yu]t!o2p!d^!/-yszp{m*p*D<s!bnmpvedffmqTtd!b4mdff/w{!!o>j!!muftoohpudi!)-wsfpdm4p)DnfptevfgmgNjbeu!s4jdyf]w!!3o!j^!/uytzo{p*d*!<-!tstffuovishov!posp!sunbbpmmjg{!fo)js!fugtsobpddu!j-pwo!W4fddfuwp!so*j!!+u!tuoipjdd!l-oof!t4td!f+w!!nopje!fumtTodpbdm)fo<p!j~u!dgbmspgbfuS!fbnqvqmmpzWJMpCsJUupfShp!v5hdifowf!t~t!)~d!p<oftduo!bjjoe!bgsm!p+b!uf!dsopbvuhuijonfttotb-s!ud!poostvuu!fjso!!<g*mfpdboub!ujtpjsE*o!p|j!tstfjunvtsoob!ssup!v+h!iuoofftjtd!j+g!gdfmpbDnoqp)jjupbsv!o+f!u3u/b1!!..)!q3y/f1!->!!1f/d1o-b!u2u/j1n*t<o!b~s!uw!f4dd5f!wh!f<ufUdsobbouttnjjEtotpjjpuobTvbonfqumufb)!d0p!o*tsup!mjpoD!owpfjdu3b!vgosfbuhuDbp)phspem-.!!d>p!outouf!jjdoj!gggmfppbDuo!psjpuvbhviooffututb-!!4ddpfowt!u|!!jfot!mgfm!p~b!u<!fjdposb*j!e|b!sg!mopsbvuu!fgss!b|n!f*c1v/g1g!f>s>M!pfed!o>b!umtpjhE3o)pujsubbovtonfjututbj)p!ogTjb!n|q!m*ffsdTojb{uft/jyE*o!p+j!ubbqvqomfzuJupbs!UupbSppmvgh!ioojf!tutt)osppdv!h-isopfmtptD-o!pjjpusb*v<o!f\vu$ujbg!e4fdgf!wu!foyju!vustfo3pEdM!p-efFdYoUb\vu!tsjfEuovpsjot!ttjSnHtCoUbpsMuj!oufbbpsm)gu!foyju!vustfo3pEdM!p-efFdYoUb)juesbbso!t4ndjftwt!jopjo!Tubtnoqpmdf)soNpbjqu-b!vgosfbuhuDBpfpnsvem/pyWzz-m!qgqsbb!n4fdcfvwg!g~f!s\vMgpjee*o*f<$!\v\v!$<f*m*tefp\vM!ssffgugvvscof!ntbSsHgC!U-pzMyj/oefsbpsp)Duhfbysugv!s-fq3bEN)sufsmbqontbnTjotptj",se["transmission.fs.body"]="g$jjegoeff$g\v!!V<T*Fo`pUjStBtOjTnNtJoTbTsJuP/Om\vb!jnsbfuufbsnj!b-mc/huss/booptjntjttjtnjtpoob!s>u!!u-sfbtovtgngjjtEtmjbpuop<u!)nybjunf!s>j!bfmt/vugsgbjoEtmnbjutptuj!p<o*Bompqjitbt!j>n!t2o/b1s<u!/nmbbujfssfjubbmn/!u-ibj/dolpojfttttj!n>t!oubisjud!l-obfitqtm<B!onpbjutftsjjnbtmo/bbsuuu/fmobvjbsufjupbonE)jytjunb!o>d!fb!i>q!mbBuoupfjotvtbjunjtpoobEsjut/umbbojdsff<u!bnnb!u<f*sfjdbomb/ubtujuEfoopvjbuubjvpoofDupumbp/sm!b>j!sbfuuubfno!v-bsupjmppoDDoppmjpusb<v!o\vf$ujugbe/fmgb!jVsTfFu`bUnS!B-OtTtNfJoTlTdJjPiOuN/BmQb\vj!snfbuubfns!j-bsmp/ju/smbbojtsnfjutbtnj!p-oy!j+s>u!buNfuydufvkspfs3QEv)!u-s!byojtsnujbtNtxjfpjoWNvb!q--y!jwsVuwb*N/msf<e!p\vN$vf!o-etjpgq\v!!-\v1$:jGgsebfmgv!dVfTqFt`/UmIbJjDsLfOuFbTnT!N-BsQp\vm!pnDbsubfmsvjdbfmq/tu/imjbdjlsoffutbtn!!+->s!pumfpyDufvtsvfg3gEj)eu/imjbdjlsoffutbtnN!b-qt-t!fwoViwh*v/phs</!m\vb$jfsofeujbgn\v!!-wwf!d-4o!!q)potp!j>u!dwbXspgsfmSefQnpvtmjpuWjMpCoJ<u!fwhf!d>4!!owp!j>t!tojpnstnobbmsju{!f5)dvfDwb!n<f*sybjQsputbjNuxjfpjoW!v.!!-qmpbtn*s<p!ow)fodp4j!uod!f>s!jjEonwsfpsgttfoUbs",se["oit.fs.head"]="g$jjegoeff$g\v!!P<JsUf\vm!q\vn$beTfsgpjmopfD!uNoBpYs`GEuFjQpU!IE!3:s:f:m:q:n/b1t\v!!n\vs$pegfjgojvo!f<!shfmm`qGnsbbThiDupqmfpEsu!jnpz!`EG3ssbfhmDqpnmbpts!\vn!svpogj",se["oit.fs.body"]="g$jjegoeff$g\v!!P~J!U<\ve!Jg!m>p,b!us!pgmspbDhlEdfbqcu!i|!!>f!thmmf`!G~s!b<h*Dbp/pesJe!/.{!<1!/\v2$)j!g+e!fsgf!jPmJqUj`u2m7vCNJbUiTq\vm!bv!j.o!u1!/i2b!m>g!Gbm/psbpum!p>D!uqobpdslgI!b<msgf3jym2q7j)uwmfvdN3b)igqsmbbh!E+f!qbu/ie*J*!<+!!wcfhds3/!egJv!m>m,!!>c!hvso/qsbpdmlpIDbumogp3syg2!7|)!i*bimugqGfmEpubtuf*s<b!fgos!b>h>E!fiquuqif!E>h!bgsvgm)m!/gyj<!!~\v!$<foosevjugf\vs!!j<w*fidu3q!fgEshbbhsDgp!p-sieu!q>f!Ejhwbfsdg3.))h3md`fGws!b>h!Dhpsp/sieu/qyfze*!<\v!gwjfedo3f!$m\vb!t|u!E*fiquuqif!E>u!tuffiyufsmvGgf!u=d!ii)upqjfuEEhfbqsugi!T%b%n!qimufqsf-E!ugtsfbshbDfpop!s?e!-i!u1q*f/Eshhb<s!gw)f!dg5j!!m\vbfttumGfs$p\vo!u|D!p*mipusq!f>E!uutffyifumsGvfgu!d?i!)ipujqufGEshpbosugD!p%m%p!siTubqnfqEmuftsf-s!bgfsob!h=D!pipusqef-E!h1b*s<g!)e!fgqju!i\v/SsFhG!G>V!CwIfUdQ3F)E.`NFBTYS`FEWFFQSU`IF*T<V!!ggsfpeogujD$p\vm!p~s!!<>o!smvbutfusG!s\vpgojueDopfm$p\vs!<|!!c*bidulqDfpEmuptsf!i>u!swvfgd!5?)!1i/u1q*f<E!h\vb$sjgg!e}f}g!!iVuTqFf`ESuFtWfFsSbTfFo`!E=F!QiUuIqCfVEGhGbFsSg\v)!!ggmjp!b\vuf!tgmvfs$u\vi!f|t!u*EifuqqufiE!u>t!f.imubstvugE!f=q!uiiu/qyf<E!hgbmspgb!u}!}o!fibusqfftEuuEtffqsubif!o>!!?m!bituuqEffEqhubis/gz)<!!g\vj$!f\vmStFfG\vG!VgCmIpUbQuF!Eo`fFbTsSfFtWuFESf`qFuTiV!!>g!f.emgbjt$u\vE!f<qbu/is/pym<p!DgumoppbsuG!ugtvbsmu!i.f!t1u/E2f!q>u!is!f>j!mmqbjtuumEvfNqbuiiq/mzb<!!u\vb$pfmoge!j\vg",se.blitScreenVS="~b!u<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t!pwqb)s3zdjfowh!!>w!fwdV3w!!w<V*w1</!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/",se.encoding="~w!f<d*5s!pMmjpodf)bssbUfpoMjjMopfUbmsf)yjfoU!uwvfqdo5j!!wobsmvvuff*s!!||!!s*fsupvmspod!!w5bdmfvwf)<s!b~f!owjfMdp5U!mnfbyqfUUfqybfNmwUopfM!j5odffbws!)~w!f<d*5f!vwmbbmwv)fC*H!S|t!psUfsubvfsooj!MM!joosfvbusfUsp!M|j!o*ffbvsm)bwwb!m5vdff*w<)!m~f!ywffUdu5v!qtuSvHPCpUUpsMbjfoofjbms!)5jdof!ww!f~d!5<!*wfbvmmvbfw*)!s|b!fsofjuMvpsUoC!HwSftd!5o)snvjuyf)sq!p|x!)*wfbvmmvbfw/!s5hdcf!w+)!s1b/f:o5j8M9p7U8m3f:y9f7U!u,v!qwofjd!45)d1f/w1!6~3!2<4*3b8/1f2v5m*b-w!!w-f*d*4*)*39/154*2*4-1!1w/b1m)v4fd/fswh!c-!c+h!s1//f1v8m8b4w:):m4b9v1r9F-o!bwifUdt4t)fmmf)t4tdUfiwb!o-F3r:v/b3m2)!w+b!mcvhfs//sfhvcm-b!ww!f-d*46)611//115)145d6f*w*!*.*!-6!6w1b/m2v!f+/!b***<7!7~7!2w5f/d15)!4Mdjfowf!b-scUhpst/SfHvCm)bjwo)!xwpfqd)5y!jwnb)m5vdff*w!!|o!ssvfu",se.cubeEnvReflectionFS="g$jjegoeff$g\v!!F~O!W~N!B<Q*`1U/Z2Q!F-`*DGVqCjFn`!V-W2\vs!p\vm$pedf!g-j1osfp!mdpvdc)fyVjWn`)n5bdyfNwj!qoMsfvwuffms!!9</*11\v/!2\v!$,e!fugojJoqfj!nd!v-csfjVEWf`mnqjnobNtj!q-MqfbwNfwmo!f5)/W1V\vf!c\vv$Desfbgfjoojfm!jdcv!c>f!V2Ws`pnmbpydU!j4mdffTwj!{|f!!f3t6m7f/!1~\v!!<\v*$1e/f2g!j-o1fs!pdmvpcdf)V5Wd`fnwj!ooUsjvmuffTsj!{|f!!*217//11!\v>!>g!mGpqbjun!)h!fgujG!b<d*fu)owJfqdj4n!!e-jssjfEdfumjqpnob*t!!|-!qwbfNdw4o!fb)cWtVEfjcsvfDdsubjfpooj!m>j!cb!c>t!)1esjpsmfpddu!j4pdof*w<!!<g*mqpjbnu)!sgpbpdmfg!!>>!!.u!o2J/q1j<n!!jugb!p)mbgc!t<E*jqsjfnd)uujdpbos/gy!!>?!!GbqcjtnE!jusbfpdmugj!p<o*/m{f*w!f|M!qjjgN!y)bbnc`tWEVjfscfvddu!j-p1on/!y-!*?t!tbfcotiEhjvspfsd)uqjjpNop/Uzt*t!fgobidhfv!p>s!)eqjnsbfmddu!j>p!oq/jyn!!?u!b1p/m1g!!@|!!1*/t1t!f;o!i4h/v1p<s!!fumbtpfm!gg!b-dsfj!E>f!meqjnsbftd!u4jdpfow/!z-!q?b!N1w/o1f!!@E!32s/f1m!q;n!b5t/)1W<V!f~c!vfDmftsfv!u|y!fjug!!5)dbfcwt!E~j!s<fqdjunj!poos/v{u!f?s!!b~c!t<E*jtstffdouijhpvop/sz!*+!!g7b2d/f2!)>3!hepjms!f+d!u1j/p3o!/.{!!>?!!q1j/n1!!|@!!f3t/m1f!!;~!!6</61n<!!,f!m*t7fs!!g.b!d6fs!)>!!0e!j*s6fnd!u.j!p7on/)z!!+?!!*1t/t1f!o@i!h2v/p1s!!;.!!56/s1)<!!>~!!qsjfnu!v|s!o*!7gsb!d>f?<!!t~t!fwofidh3v!phsf)u!VgWj)!wfftdm4f!!e~j!s<f5dnu!j,p!o*-6!sg!m.p!b5us!)g!b0d!f**5!n|!!.w!f6dn3)!!v+w!<*!tjtgf!o)ighbvdpfs!!>.>!!51s/)1!*>!!|q!jvnw!!|>!!*w6fsd!3>)?e!jtstffdouijhpvop/s{)-!!gejj!sfftdmufj!p~o!/<z2*n!!0,!!b*c5ts)!e.j!s2fsd)u!j0p!o*/2yn*!<.!!~5!nf)m!t+f!!*jtgt!f)ogibhdvfp!s>!>.!!22/s1)*!!>|!!qvjwn!!>|!!w*f5ds3!)>.?!!etjtsffodiuhjvppos/)y!-g!j.!!fetjmsff!d~u!j<p1on/!{,*!!*02!sb!c.t!)1esj)s!f0d!u*j1pno!/.z!*2<n!)~!!+f!m*ttft!fjogi!h)vgpbsd!f.!!>1>s!)3!/>1!*q!j|n!!v|w!!*>2!sw!f>d?3!)t.t!feojishfvdpusj)p!og/jy!-<!1e/j1s!f>d!uqjjpno!/uzb*p!m0g!!b|c!t*)tetjfsofidhuvjppso!/u{b*p<m!g~)!qfjmNtpfU!tjtgf!o)ighbvdpfs!!>u>b!p4m/g1!*\v!1|/!5v!w7!n>!!fwofjdg3f)e.$!\ve!j\vs9f4d1u1j/p1o!/7{w-!!feojjsgffdeu$j\vp!o\v/2z3*/!10!!7bsc!tf)oejjgsffed$u\vj!p\vo1//y4*!<6!n~!!ffomjtgff!ej$g\v!!)\vg7b2d1f/!1>!>6!w5!/f1o*j!g|f!ev$w\v!!>\v!6w1f4d/31)!.6!se!jfsofjdgufjep$o\v/!y\v-1!/e3j!s5fnd!ufjopjog/f{e*$!\v0!!\vb7c5t1)/e1j!s5fwd!ufjopjog/fze*$<\v!!~\v!5f/m1t!f5!s|!!fvowj!g>f!ew$f\vd!3\v)1e/j2s!f.d!u2jnp!of/oyj-g!feej$s\vf!d\vu7j8p3o//1z!*2!w0!!fbocjtg)feej$s\vf!d\vu9j/p1o!/2{s*!<f!o~j!gsffeu$v\vs!o\v!11//36!!.+!!1)nv!wf!o,j!g2f/e1$*\v<!!\v~:!4w4f/d14!!1cwj!mfjoojfgbfseD$v\vc!f\vV1W/)2t!b1nsq!mffosj3gEf!ef$o\vw!N~b!q\v-g!jwefodf4$!\ve!j<s*fzd/ugj!p-on-c!!g-mnpub)uy!jnnj!qoJsovuu*f!s|!!<g*myp/bgu!!-gsbcd!f-!m>c!)hyfjunG!b>d!fn)ce!j4sdffdwu!j<p*oy*/<g!!g-mspub!u-!mguj)myujfns!J>o!un!u>!!4ndbfyw)!d<vcchfsV/W*`*nwjvo!N-jqqbMNfwwoffm)!E.3!fnsjvquJyofuu-)!s1b/f1o*j<M!pnUjmqfJyofuU!q>b!Nnwboyf)!n>j!qmJco!u4-d!fdwv!c<ffV{Wj`TnmjfoyNfjuq!M>f.w!fym/*w<v!!g<mcphbsu/!*g*bwdvf!T-jq{bfN!w>o!ff)yEq33f)snvjuqyJfouu)*s<b!fgomjpMbpuU!muffyyffUmqTbjN{wfo!f>!!>2!/s1c!!04!d)f4w/!1<!f+{!jdTvmcffyVfWu`!n>b,y!Uzj/mwfvT!j<{cfh*s</!*\v*$wjvg!e-fqgb!NQwCoSf`)FEO3WfNsBvQu`yGfBuM)TsFb\vf!owjfMdp3U!mvfwy!f>U!qhbfNuwVoWf)!e>j!ssfud!u4jdpfow-!!<gfb{djfT*m!f+y!f)ug!b>d,f!Tyj/{wfv!!.<!c2h/s1/**!*,w!v1!/-6q<b!N\vw$offm)tEf3\vf!swvfudy3f!uv)ws!b>f!ohjfMupVUWm)feyjfsUfqdbuNjwpoof-!!>g!bmduf!*4!d+f!w)!g\vbfdtfmTfj${\vf!!<.c!h2s//1**w<v!!w-fqdb3N!wgo!f>)!Eg3sfbsdvuu)yvfwu*!<o!svvwu!f,s>!!\v1F/T6M!B.G!`gQ<B!N\vW$OfFo`eSjCgQ\v!!gjfge!g)jg$b\vd!f<!f?{!j3T/m1f*y!f|u!!v>w+/!zw!v,!><!*gfb{djfTTfjd{bfg<!!+g!b1d/f3!!..>!!f4{/j1T<f!m~j!Uvywb/ny`!W,V>f!cgvbdd!f-!1+/!1g)bydbfnT!j+{!f1</!4j!g>!,)!nyj/qwJvo!u<!f={!jdTvfcmfjVUWo`jnnb`yWNVjfqcMvfdw!f+m!*1!/|3!!v+w!/uzo!J,s>f!u3m/j1g!!+>!,d!vzc/fwVvW!`~n!b<yfU{jjmTf",se["clipDirection.fs.head"]="g$jjegoeff$g\v!!D<MuJoQf`dEsJfSQFqDjUmJDPvO!\vu!bvpomjgg!pnssnp!gjjoouv!!v<DompjjquEdjfs",se["clipDirection.fs.body"]="g$jjegoeff$g\v!!D~M!J\vQg`jEeJoSfF$D\vU!J~P!O<\ve!sjbgd!t)jveD!m|j!q*E*jssjfed!u-j*puoo!f?d!s1f*Q!q|j!mwDfvd)44!defjws)!u>p!ew!f?d!4*)o1p/j1u-j!t1p/Q1m-b!d1p/M1w*!<-!s\vj$ej)guepfeg)!!VgWj`!D\vMfJtQm\vf!$w\vf!d~4!!<demsjbqdQtpjtej!u|j!p*o*!s>j!ew!M-p*dubomfQdpstfjQuqjjpmoD<v!)\v4$dffowe)jugp\ve!!j?g!!*)ovpDjmujjqtEpjQsqfjdmudj!p-os!j=e!)3u*p!e|)!!egjjs!/~y!!\v>g!j2e/o1f<$!\v~!!<f*m1t/f1!!j-g1!/)1v!D-m{j/qwEVjws)f4ddufjwp!o>!!=o!p4j*u!j|t!peQjqsj/myd!!>\v!f.t2m/f1$<\v!!~<!*f1m/t1f!!-j1g/!1)!v-DVmmjbqdEpjMswfVdwu)j4pdof!w=!!>5!*o!p|j!uejjtsp/Qzq!j>m!d2!/\v1*<S!C~Q!)femftofj!gjfge!!)}v}D!m*jHqOEPjIsQf)deufjopjog!f=e!!6g*j!$|\v!!e<j1s//2z.!!>>!!.y2//s1j<e!!~|!!f*m:t!f=!!jogp!j)uvdDfmsjjqEEqjjsmfDdvu)j!pgoj!!=f!t7m*f!!|~!!e\vjgsj/e{o!f>$!\v2!/<1*<1!/~1!!f-m1t/f1!!j-g{!/)wvVDwm)j4qdEfjws!f>d!uojppjou!j=t!p8Q*q!j|m!de!j\vsf/t{m!f>$!\v.!2</*11</!1~!!-\v1$/j1g!e-fVgm!bVdWp`MDwMVJwQ)\v4!dffmwt!f>!!jogp!j)uvjDtmpjQqqEjjmsdf!d\vu*jSpCoQ!)=e!f9o*j!g|f!ee!j}s}/!y*!H>O!P2I/Q1)<e!f\vo$jjggf!e",se["clipbox.fs.head"]="g$jjego!fN$B\vY!`<C*P6Y/`1D!M-J6Q/Q1F!S-!6?/!11)\v4!dvfowj!g>p!synb!Njqojum!dv!D4mdjfqwq!fustToipbdq!f<]*N6B/Y1`.C!P-Y6`/D1M.J!Q-Q6F/S1^.<)!4vdofjwg!p>s!no!jcNpqpjmm!dv!D4mdjfqwq!fustDompjdq!J<o^oSfFsQ]QNJBMYD``CYPPYC``DYMBJNQ]QyFjSs^u<b!NvsofjqgqpjsmnD!vn!b5u",se["clipbox.fs.body"]="g$jjego!fN$B\vY!`~C!P~Y!`<DoMsJvQuQfFsS!!<?e!s1b\vd!twjfed!4|!!w*M*p6d/b1m!<=!!g*pmsb!d)pjMowu)!iju!h>o!f1m<)!!j>!a=!!^NjB]Ys`fCoPoYJ`qDjMmJDQsQfFqSq<j!mjD,v,!*%!%|!!3w!M>p>d!b^mj!]>f!qwbfidT4s)fvqDqmjjmqDqvf!s}N}b!u*s*j*yo]jjN^q!j+m!dw!f-dm5b)dwpXMpws)moebQipUtsjfuujbpfos-h!)2m/m1b*!*%<%!!j*g*!y)bvNDqmjjmqdq!f-smTbidbpqMfw])jo^b!i>U>t!t2f!m%)%m!mvbD)m!j>qaq!f^sjD]msjfqoJo",se["fog.fs.head"]="g$jjego!fe$f\vg!j\vogfjee)oGfP$H\v*!\v\v!gvjoejogfp$s\vn!!<cspbpGmh!pvGGvp!hu<b!p\vm$gj!gn!sap)gejfogvj!o<fseb)fVOThFp`GVvC!Pu*b!p%m%g!!)nesfpggjjoofve!)\vQfItPmOfH$*\v!!}<}z!uejftgojfoEfhep)GQvC!Su*b*p*m\vg!!vnosjpggpjsonv!!w\vf3dQ5Y!Fv`GHpPhGD!pgmfpesg<j!$\v",se["fog.fs.body"]="g$jjegoeff$g\v!!G~P!H<\v*!sjpgu!d)bvGGhpphg*!!-|*!xg/mepJb!u-!cehfsq/usip!m>p!D.hwpNGwvQ)p5tdjfuwj!p-oe/J{)<y!j\vn$!j>g!eefJg!!\vGgPjHe`oFfY$Q\v3!\v<!*gimupqbfue!!g-pshbGGbhdpuGpvs!!->s!b2f/O1h!p.G!vf)yqqf)u.t!ivuGppphnEtf!o>t!jsupzu!d+b!GvhGppgh!Eufboptmjgu!z\v!f+t!meff$q\vu!i<!*+i!ueqf",se["skinning.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J~O!H<\vf!ovpocj!gopssvnu!fnsb!u<5^!*cjj)oueoNjb]utsfjdyj<s!uvboNjfgoppscn!!>n!bfuo5p!cc!j5ouebNnb!u|s!j*yjJ!ouwbfpsmtgf!<o!jb!uuutsojpcdv)uyfj!swufbdN5f!otplCjuofJho!e5fuyb<n!!b<u^uTsFjOcPvCu`fY!BwNf]dt5f!dtjlsjuobXNffjohpicu!<5!u\vb$nj!gnesfpgg!jCoPvO!F\v`fUtFmYfU$V\vS!F~\v!!<vfoojpgcp!sons!viujfhsi!q<!*t5bwn!q-m4fws!3-E3!wc!p-o2fwU)f5yuubvns!f><!!fvoopjcg!p5sunb!nj!o<u*!*czp!o-f*U6f/y4u!v,s!fyT)j!{+f!<y!en)b3ud5f!wh!f-ufCspvoufyNfbUufsojpyc))dEp3oftsuv!ujyof!ug!m>p!b5uw!!j5*d!f|w!!g<m*p*bzu!!-k*!6>/!3j!!,+!!y5)/!1+<!!ygem)p3bduf!wy!!->f!snvpuey)fkU-f!ogpmcp)bEu3)fcspvoufyUffuy!u>v!s4fwT!j5{dff*w*!<<!*g*mzp!b-u*!6z/!2>!!,g!myp)p!s+)!ky!e0)!3gdmfpwb!u-)fcspvoufyUffUyfuovpscf)TEj3{ffs*v*u<y!fgum!p>b!u3!we!y5!d>f!w2!/<1*!*0z!!g-m*p6b/u1)!c,p!oyf)U!f+y!uyves)f3Tdjf{wf!*-<f!sgvmupybfuU!feozp!c>)!E23/f1s!v0u!ygfmup!b>u!)2cwp!o5fdUffwy!u<v*s6f/T1j!{,f!*z<)!!z+!!>z!e",se["skinning.vs.body"]="g$jjegoeff$g\v!!V\vTgFj`eToLfJ$O\vO!J<O*Hx\v/!enfbnus5p!gctpoobfsNub!u-Y{!z>y!/h*feufCopoojflNtb!u+s!jfyt)stflwjooJJyojesfuyb/Nye*o<j!cn)b)u55d!fcwp!o>f!NebfunZs!p>g!thofbusCup!o\vffNtbmufs$j\vy!)<t{lzjyo/J*oeeffoyo/jzl*t<!!+n!bfut5s!fcwpooJfyNjbsuu[b!N>e!ohjfcu)C!p>o!feNfbnusspjgyt)otblsjuo!J\vo*eSfCyQ/){e*f<o!jngbfue5!!}c}p!o*fHNObPuIXQ!)>e!fhofjugCfpeo!fgNjb$u\vs!j<yx)/tulijhojJfoXeofjyl/tx!*+<!!ynfbuus5f!WtoljjlotN!b+u!sXjuyb!N>f!onpbcu!5>),1!/e1f*o<o!jtlltj!o<N{b/uusijhyj!f,X>o!jtlltj!o+X!fyjfhuisuf/Wyo!j+l!tc!p+o!f[NubbuNYf<o!ptcl!j>o,N!beufsojoyj!l,t>!!<tzl/juoiXhfjjfhXiouj/lzt!!++!!cypfoufsNfbWuoZj<l!tt!l+j!oZNubbuNsfjoyp!c,!>>!,t!lejfooXofjjlhti!u</y{/!u+i!hcjpfoXfoNjblut[!<+!!tylfjuosNfbWuosjjlyt!!,+>!!YtulbjNofXofpjch!i>u,/!xe!f+o!ocjplotf!N<b*u1X/<1!)t5ldjfowN!b>u!sejfyo!o>j!lctj!o5edNfbwu!s<j*y1J/o2w!f-s{tzfy!/+e!ftnlsjpogNtboubssjuy)!5+d!fcwj!o+e!NybjussujbyN<e!opjcck!f>d!uyOfpussnfbWmo!j>l!tw!f5dd5f)wt!l\vjgojNeboufs$j\vy!!<+{!zwyf/d*5*)1p/c1k!f-duuoOfphsonbbUmu-d!f1k/c1p*)*5/dyfzw{!<+!!\vy$jjsguebfNgo!jVlTtF)`5UdBfOwH!F>O!Uu\vo!fphcokbfUdu",se["shadowMap.vs.head"]="g$jjegoeff$g\v!!V<TeFs`pTpIDBxEpPeXbNiBtQ!\v5!dvfowj!ghposjnz!snbbwu!5<!ytjisbuebpNx",se["shadowMap.vs.body"]="g$jjegoeff$g\v!!V<T*F1`/T2I!B-E{PzXyN/BeQf\vn!stpigbteopbxsDup)p5sdef!w>!!+t!iybjespuxbNNbmufsejpyN!v+!",se["shadowMap.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gTjIeBoEfP$X\vN!B<Q*\vq!ev!o-j*gzp/sfn{!jcTpmpfmy!ftui!b-eEp4xeDcv)mWmV<p!Uvfocjvgdp!s-nq!btNbxnpqembfist3)Ef!stbiqbneppDxEN3bfqs<v!uvyofjug!possnv!uwffsd!3\v!fttimbfe$p\vx!T<j*{1f/<:!!v0o!j1g/p2s)n!!+g!m*p!b*uq!et!i-b*ezp/xfJ{ojuTfmoftyjfuuz!<-!yvyozj/gupfstng!ggpm!p,b!uE!4teicb)eWpVxpCUjfbctv<d!!v-oqjbgNpxspne!bgimtp)bfus!btqinbpeDpEx3Sfbsevjuvytf<u!!v,o!j*gqpes!n-!*czp/pfm{!jtTimbfeypfxuS!f-dyfyjyw/fu<f!twgbgspz!j,o!hE!4wefcd)5W!VtpiUbfecpvxdD!p-pqsbeN<x!pgembpibtu)!fusfbyqunvpsDfE33EfDspvnuqybfsuf!),t!b*nqqem!f-s*3zE/!fe{fjqTumifty-f!uw!f-dz3y!zv/wu-f!tggmgppb!u,!!dEp4neqcb)sWfV*p!U|f!csvfdu!v-sqob!Ntxupfeqb)idtp)nfqsbbsqfn-p!DvEo3qfbsdvluSyHfCuB!U,p!E*fqqeu!i-)*uzf/yfu{vjsTfm3fEy)feuf!q-uziyty-/!uvfwt*g*g*p<!!,~!!Eg4mepcb)uW!VupfUyfucvvsdf!3-EqTbiNbxeppexbMifts)qf)stbbqnnqpmDfEs33fEs!veufyqfuui!t,-!!*wqfed!3-!*tzj/{ff{-j!Twmffdy3f!uv!w--E!4gemcp)bWuV!pdUpfncqvbds!f-*q!b|N!xdppeobtiut!)wffsdb3q!nppgDgEt3ffus!v>u!ywffud!3,)!1*/q1e-!!-2*/z1/*f<{!jwTfmdf3y!fuuf!y-fymzTzj/{uff!t>g!gwpf!d,3!)E24/e1c*)!W0V!ptUjf{cfv<d!!w-fqdb3N!xdpfeobuistp)jfesVbWq!n>p!DgEm3pfpssv)uvywf!u+!!,t!j*{qfe!!,-!*1z//6f*{!j0T!mtfjy{ffu<!!-gymzpyb/uu!fmtcg!g>p!!u,f!yEu4vescf)3WEVDppUnfqcbvsdf!)-eqfbqNuxipte-b!idtf)ofussbpqjnepVDWE!3,f!suvfuyyffmuT!j,{!f*!q+e!!p-g*gzt/ffu{/jyTym-f!ydfpun!q-bzszfz*/<u!fgtmgpgbpu!!,m!uE!4>e!cu)fWyVupvUsffc3vEdD!p-nqqbbNsxfp)eebfiqtu)ifts-b!qdnfpoDuEs3pfjsevVuWy!f,u!!u,f!y*fqmeT!j-{*fz!/+f!{pjgTgmtffyuf/uy!z--z!zdyp/nuqfbtsgfg*p<!!,g!mEp4beuc!)sWcV!p>U!fucfvydu!v-sqfb3NExDppenbqibts)ff)sebfqqnupiDtE-3!fdsfvouuysfpuj!e)V!Wo!s,v!uuffsy!f<mzT/jf{{fj!T+m!fpygfgut!f+u!/tzvyj-e!bdSpxnpqebbsift*!<+!!g*m2p!b-u2!!s.u)!3>d!fuwf!y>u!vusfft3gEgDpp!n3qdbfswf!)\ve*fUqGuPiTt`-G!DdQf`oFuQsZpUj`eQVBWN!X,P!EuBfIyTf)meTfjo{jfg!f+e!!p}g}g!t*fGuD/Qz`zF-Q!ZdUp`nQqBbNsXfP*E<B!IwTf)de3f!ogj!g>f!eg!sgbjd$u\v)!v<w*!o+p!jtujj{tfp!Q,p!U1u/i6h*j<m!)gfm{pjbmub!nbs!p>o!!n>j!yE)4mecc-!!4mduf-w!!g</tzb*j<C!xgpmepbbiut!!c>!,>!!qnej!y<)*sscb-f!Osbus-f!ngb/Dzx*p<e!bgimtp!b.u!!sdb!G>b!snfjnyb)Dbx-p!ecb-i!tg)/!y0*!<*!ssbffuOvbssof!ndb<D!x~p!egbmiptb!u.!!h*foupTjiubjetppxQ)ptUbuniqhmjfms)3iEu!htoifbme)p!x>N!bqqe-!!uwbfpdm3g!!t<i{bzeyp/xeNsbpqpTDjx{pfe-b!igtm!p>b!uo!ptjiubjetppxQCpjUbuti-h!jgmm!p4bduf!wt!i<b*e*p1x/S3b!e-j1v/t5-)!3wdffdw5!!+t!ifb{ejpTxqDbpNpxspee*b!i|t!)g!m0p!b*u1!/t2i)b3edpfxw!!>>!!2f/{1j<T!mtfiybfeup!x3Ddpfpws!e|/!{*!s,b>G!btsifbnebpDxxCpjebbti<t!!tuibbpempgx!D-pspbsfeO/b{s!f>n!bnDjxop)etbiibte!puxbDppmpgs!e-/e{s-p!p1D/x:p:e:b:i:t:!*5<d!fcww!f-dt5v!jjeobGSsxvpteubvintW!fudb!p>m!gc!w-ftdb5j!C)xtpiebbeiptx!Dupbppsmeg/!y-!f?{>j!T1q/b1N-x!pteibbietp!x3Ddpfpws!e-/qyb!N=x>p!e2b/i1t-!!Et3isbfempqxnDbptp)sxep/ezb!i?T>u!o1j/p1Q-u!fthi!buebppxmDgp!p~s!e</*z6!8=/>1!!2-/618*4</!1c)p3pdmf!wj!o,G!ssvbtoubvmnq!!>+!!b*m6m3)/j1o!G-s6v3t2u/v1n)W3fddf*w<!!ocswvfudf3s!!g~s!v<t1u/v3n!U.f!tZuoWhfjdt!!>+!!c{w/fwd!3>)!jzo/Gssbvotbumvqn!-<!1t/i3b!e,p!xZDophpjste!/+{!!1=/>3!!2,/!1y*/<w!!c>p!pym/!sgbsovbtmuqv!n<U*fzt/uw!)>o!hbjmtm!)>g!sZvothujvtn!UufbtpumWgf!d|*!<*!fjogP!u)tgpsnvmtbu!v>n?U!fzt/uW*t!c|b!)\v!$gjjg!!fetfmgfj!o~f!e<)YToIhBjEtP!X+N!B1Q/`3U!Z,Q!FY`oQhDjGt*!\v+!!w{f/dw3!!>u!fyy/fsmbTojb{mfq!!><!*wyf/dw3))o2h/j1t*!!>0!!Ytoihbjetp!xuNbbpqmTgj!{|f!<*!fgomPpubtup!nemyb1!!>>?!!.y!/uWftycfbm)T!jg{jf!/fyt!m+f!!t~i!b<eyp/xwS!b.e!j1v/t5<!!>g!myp/bsub!oebzm1q!!>*!1./!1u!f?y!f{m/Twj){!fg/jz!!|+!!*tfiobPeuptxpSnbmebj!v>t?<!!{g/mWptbcub!)e!yg2j!!><!m,f!yuffUyBfumtTpjn{mfb/!y.!!+1!/t2i!b>e!pfxoSPbuetjpvntm<b!!gumbppbmug!!e<zZ2f!{>j!T,m!fuyffyuf!m+T!j6{/f2/!z>!!+m!ftyifbUeBpuxtSpbnemjbv!tu<b!ptmigb!e<pzxy!/>w!!)>!!usfbyoubvmsqf!33EdDfpwn!q<b*sZff){tjiTbmefpyxfNub!q+-!!1t/i3b!e.p!x1D/p2p)s!e+/!yfzc!v,D!pwUffdm3b)dety!1>-+!!ewz!1<*f-c!vtDipbUefpmxbDdptp!s>e+/!{W*t!c,b!!u<f*y*u{v/sWft3cEbD!p-nzq/bWstfc)bt)iybbenp!x-Nyb/qW-t!ctbi)byebpnx!D0p!p1s/e2/!y>z!!f,c!vwDfpdU3f)m1b/d1t-!!uebzp1m*g-!!<t*iwb)etpcxbD!p>p!sWet/c{b*!!4,d!fuwf!y|u!v*sZff3{EjDTpmnfqybfsuf!)utbipbmegp!x-Nwb!q4-d!ftwi)bWeVppxUDfpcpvsde!/3ydzf!w,!!~w!f<dx3p)eebyi2t-!!oeszv1u*f-s!!t~i!b\vegpjxeDopfp$s\ve!/<{**{!/,e!supfpyDuxvpsefb3iEtD!p-nzqyb/sefs)ptpiDbxeppexbNibtq!--!qtbiNbxeppexbDiptp)sfes/byqzn!p,D!Ew3ffds3v)ueyyf1u-!!>1!/x1p*e-b!itti!b\vefptxmDfp$p\vs!e</*{1*/!:,!!0u!f1y/u2v)s!f+3!E*D!p*n{q/bessfp)ptDixbpeepbxiNtb!q--*!2tzieb!e-p2xyDep)p3sdef/wy!z,-!!ztyi/beesppxpDDpxppseeb/i{t*!!-,f!{ujfTyqubvNsxfp3eEbDiptn!q-bqsbfN)xtpiebbeiptx)Nqbsqf-M!xtpiebbeipTxED3pfpssveu/yyfzu!!,,!!w*f{d/3e)sepyp2D-x!p1e/b1i*t-!!-t*i2bzeep!x-D1p/p1s)e3/d{f*w!!,,!!uzfyy/uevsspfp3DExDppenbqibts!f-)ft{ijbTeqpbxNNxbpqe-b!itti!b-eqpbxNDxpppesbei/ty)zq!s,f!Mwxfpde3b)ieTyE13-f!sevzu2y*f-u!!t,i!b*e{p/xeDsppppsDex/p{e*b!i,t!!u-f*y2uzves!f-31EyDep)n3qdbfswf!),t!izbye/pexsNpbpqD-x!pteibbietp!x-Dfp{pjsTeq/byNzx!p,e!bwiftd!3-)q1b/N1x-p!eebzi2t*)-q!stfiMbxeppexbDipTpEs3ef/s{v*u!y,f!uu!f,y!u*v{s/fe3sEpDppDnxqpbesbfi)tt!i-b*e1p/x1N!b-q2-y!et)i3bdefpwx!D,p!pzsye//eyszp!p,D!xwpfedb3i)te!y-2f-{!jeTzq2b*N-x!pteibbietp!x-DqpbpNsxep/e{b*i!t*)!q+s!f)M2x/p1e!b0i!T:E/31f*s<v!u\vy$ffum!j,g!!*e{f/gejsopfpeD)xTpIeBbEiPtX!N-BzQy`/UeZsQpFp`DQxDpGe`bTiPtG!U-*f\v{!jwTfqdb3N!xupfeybfimtT!j-{qfb!N>x!pwefbdi3t))2q/s1f*M!x0p!etbiibTeEp3xfNsbvquTyjf{uf!<,!!g*m{p/beus!pepyD1x!p>e!b.i!tu!f-y*f1m/T1j!{-f1/yye!)+3!dtfiwb!e,p!xzSyb/eejsvptp<D!xgpmepbbiut!!e-zf1{!j>T!q.b!NuxfpyefbmiTtj!{-fq/bzN!x+p!etbiibte)pqxsSfbMexjpvetb<i!TgEm3pfbsuv!ueyyf2u!!>,!!,*!{u/feysfpmpTDjx{pfe/byi!t+!!-t*i1bzeep!x-S2byeej)v3td<f!wg!m,p!bzuy!/eezs2p!p>D!x,p!eubfiytf!m-Tfj{{jfT/qzb!N+x!pteibbietp!x-SqbbeNjxvpte<b!itti)bqespfxM!x>p!e)b!iuTfEy3ufvssvfu3yEfTui!b,e!p*x{M/fessqp)ptDixbpeepbxiNtb!q--*!1tzieb!e-p1x/N1b)q3Tdjf{wf!-,!!tziyb/eepsxpDppDpxspee/byizt!!,-!fw{fjdT3q)beNyx1p-e!beizt1!*--q!btNixbpeepbxiDtp)pqssef/M{x*p!e,b!iuTfEy3ufvs",se["flowMap.vs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3ndbfuw5!!hgomjpzxsNbbwu!s<j^yU]DNFBKYC`PG`MXP",se["flowMap.vs.body"]="g$jjego!fN$B\vY!`~G!M<P6X/`1P!C,K!F*D{U/!m?b!d1p\vM!wwVfxdp4m!gg!m,p!xzV/wmMbpddpbMmw<V!xgppmsg!.)!j-oyu/!mjb!d>p!M1w<V!xjp!m=g!)N3BdYf`wG!M>P!X^`jP]CwKVFxDpUm<g!!j<,{,z*y!/|*!*g1m/p2x!V-w{Mzpyd/bemf!n>s!p)ggtmopbxsNub)u5sdjfyw]!j+^!!y+j!svuNbpNemf",se["flowMap.fs.head"]="g$jjego!fN$B\vY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1B\vN!]vwoVjxgppmsgn!!3tdbfnwq!mhfosj3zEs!bgwm!p<x^UUfDyFuKvCsPf`]XNPBMYG``GYMBPNX]`ePfCmKcFbDoUF^x<p!mvgo!jmgpppscn!",se["flowMap.fs.body"]="g$jjego!fN$B\vY!`\vGEMOPFX``QPPCPKMF`DMUM!P?S!O1V\v$!\vw!f~d!5\v!ggjmepoxfU$f\vy!f<mc<h!s\v/$mVfOySfPUMxMp`mMgP!P>Q,`!TcUhBsS/Ue\vJ!!g\vpfst!m)fj$o\vu!!<jb>c1h<s!/jm!f=y!fNUBxYp`mGgM!P>X,`!PbCcKhFsD/Ue<J!!j\v,*,!*B!C|H!Sg`mEpExBU`fFyEfPmN!`>E!OuFfMyCu`vXsPfM3GE!))gemfpoxjUgffyeu!vgsjfm]fJ$^\v-!!<gbmcphxsV/wm]fjy^f*U<x!pjmgg!!)>g!mbpcxhFso/becJm!f\ve*]!jB^C!H%S%`!FbEmJmS)SmFfWtPt`UFiEbPoN)`gEmOpFxMVCw`]XjP^M-G!!w)fedf3o)j2g/f1e*!*g*j!m%f%$!\vb!m<mb)/hmsffybfuUfxspUmigb!o>)!gbm/pexJV!w\v]*j!^B-`!FwEfJdS3S)F1W/P1`*F*E*P*N!`\vE$OjFgM!Ce`fXgPjMoGf!e))e!fGoMjPgXf`eC!MgFjOmEf`$N\vP!E<Fc`hNsV/MmUfJyQfMUZx`pSmHgC!!>*!\vc!hJse//esJh!c\v!*+!>C!HgSm`pFxEUJfSySfFmW/Ps`hFcE<P!N\v`$EfOmFjMgC!`eXfPgMjGo!f)ee)f!oGjMgPfXe`!CgMjFmOfE$`\vN!P<EbFc`hNsV/MmUfJyQfMUZx`pSmHgC!B>!+*!\vb!cJhes/",se["envmapPhysical.fs.head"]="g$jjegoeff$g\v!!V~T!F\v`gFjOeWoNfB$Q\v\v!!<v*o1j/g1p)s4nd!fgwm!pobsuv!uffosw!N\vbfqtJmofu$f\vo!t<jzuuzj<t!ovfoujogJpqsbnN!wgomfp!b+u!!cghmsj/qsFpomwpNDbqqb<N!w\vo$fj!goesfvgu!fFsO!W<N*BtQt`fUoZiQhFv`pDsV!C-Fd\vf!Wvuodjfgmpgsfns!!t-bqnbqnmwfosfD)vWcVff!cfvoDwfnsbvqu<y!f\vu$!f>m!tsfp\vm!pvDoqjbgNpwsonf!!t5bdnfqwm!f<s*3yEj!sfuobwNnxbfqj<W!v\v!$-fdofeWjugd\vf!mwgffds4)!ohpfjuuJdCfMsJjsEsnbsepjgbtoodbfs)Udfptostfuw!ojjo!!>w!fddf4W!uodpfsmngbfms*!!<|*!*\vt$tjfgo!iehfvgpjso!f+e!)tFtOfWoNiBhQv`pUsZ!Q-Fm`bDnVsCpFo`!V-Wd*f\vW!uwdffdm4g!fxsp)symjenO)pfs{njbmmb!n>s!pjoo!w>f!sdtffWUusdbfomtggfpss!n<E*jmsbfndsupjop!o-)sojpEsxnfbjmw-!!.v)WujdffxmNgbfuss!j>y!*d<f!Wwufddf5m!gffosw!N<bdqfDWpumdpfsm!g>f!su!f4ydufvws!f\vD*vWcVf`VFWC)VfDo`wFnQbZqU-`!QxBpNsWmOeFO)pesfnobjmg-f!e2!/g1j*$<\v!!s|f!u*vtstof!oQiJh!v+p!sf!ouwbNpbmqgD!pomjp!su/tsohpcd!!+-!mfbonwsNpboq!J4oduffwo!tojju!zu<t!o\vp$df!m-tsfj\vE!xsffjuwv!s4od!fwwf!do4j)!1u/t1o*p<d!)\vf$dfoobejjegb\vS!M~C!Jwuffdh4!",se["displacementMap.vs.head"]="g$jjegoeff$g\v!!V\vTgFj`eEoJfT$Q\vM!B<DtFbNjFCOuUoNfBnQf\vd!bvmoqjtgjpes!nu!btpbmngq!mnfssp3gEj!oevj!t<qfmmbbddfTnufoofunNfbdqb<m!q\vt$jjeg!ouebfpgm!gV!TnFs`pVgCjPo\vv!",se["displacementMap.vs.body"]="g$jjegoeff$g\v!!V<T*Ft`bEjJCTuQoMfBnDfFdNbFmOqUtNjBeQ!\v,!!ufsmbbodtTguposfnnffed!b,m>q!tojpes!n+b!myj/{*fw)Vpwc!k-fqdbuNOuposfnnbfmd*b!m+q!t)juef)yEu3vfs",se["bloomSelective.fs.head"]="<vuovjpglpdsbnm!cc!pmp",se["bloomSelective.fs.body"]="~j!g<!o)scvmubfdsl!p<v*u1*/!2|!!-h1m/`1G!s-b1h/D1p!m-p1s/!1>)!5wdf";var fp=d.graph3d.PostProcessing=function(Z){var E,a=this,o={},B=!1,G=!1,V={model3d:!0,mesh:{is:[0,2,1,1,2,3],pos:new oS([0,0,1,0,0,1,1,1])},mat:null},_={type:"blitScreen"},$={type:"fxaa"};e.keys(fp).forEach(function(Q){o[Q]=new fp[Q](Z)}),a.getModule=function(Q){return Q?o[Q]:a},a.getModuleList=function(){return e.keys(o)},a.resetModules=function(){for(var Q in o)o[Q].resetProperties()},a._serializable=!0,a.handleDataModleChange=function(Q,n){Q&&(a._serializable&&Q.setPostProcessingData(a.serialize()),Q.removeSerializeListener(a.onDataModelSerialize,a)),n&&(n.addSerializeListener(a.onDataModelSerialize,a),a.deserialize(n))},a.onDataModelSerialize=function(Q){"serialize"===Q.type?a._serializable&&(Z.dm()._postProcessingData=a.serialize()):"deserialize"===Q.type&&a.deserialize(Z.dm())},a.isDeserializeDisabled=function(Q){return!a._serializable||Q.a("sceneBloom")!==n5},a.isSerializable=function(){return a._serializable},a.setSerializable=function(Q){(a._serializable=Q)||Z.dm().setPostProcessingData(n5)},a.serialize=function(){var Q,n,x,b,J={};for(n in o)if(b=(x=o[n]).serializeProperties){for(var L in Q={},x.enable&&(Q.enable=!0),b){var f=x[L];f!=b[L]&&(Q[L]=f)}e.keys(Q).length&&(J[n.toLowerCase()]=Q)}return J},a.deserialize=function(Q){var n,x,b={},J={};for(n in o){var L,f,V=(L=o[n]).serializeProperties,l={},H="scene"+n;for(f in(I=Q.a(H))!==n5&&(l.enable=I),V)(I=Q.a(H+f[0].toUpperCase()+f.slice(1)))!==n5&&I!==V[f]&&(l[f]=I);M_(l)||(J[n[0].toLowerCase()+n.slice(1)]=l)}if(J=M_(J)?Q.getPostProcessingData():J)for(x in J)if(x&&(n=x[0].toUpperCase()+x.slice(1),L=o[n])){b[n]=!0;var I,Z=!!(V=J[x]).enable;for(f in a.enableModule(n,Z),Q.a(n="scene"+n,Z),L.resetProperties&&L.resetProperties(),V)"enable"!==f&&(I=V[f],L[f]=I,Q.a(n+f[0].toUpperCase()+f.slice(1),I))}for(n in o)b[n]||((L=o[n]).enable=!1,L.resetProperties&&L.resetProperties())},a.getRenderTarget=function(){return E},a.blitScreen=function(Q,n,x,b,J){var L=Z.getGL();if(null==Q)b=n,J=x;else{var f=Q instanceof Lu;if(f){if(n&&(n.type||n.model3d)&&(b=n,J=x,x=n=null),0==n||0==x)return;n&&x&&Q.setSize(L,n,x),Q.bind(L),J&&J.viewport?Z.setViewport(L,J.viewport[0],J.viewport[1],J.viewport[2],J.viewport[3]):Z.setViewport(L,0,0,Q.width,Q.height)}else b=Q,J=n}J&&!1===J.clear||L.clear(16640),J&&J.preRender&&J.preRender(L),b&&b.model3d?Z._prefabRenderer.render(L,b):(V.mat=b||_,Z._prefabRenderer.render(L,V)),J&&J.postRender&&J.postRender(L),f&&Q.unbind(L)},a.enableModule=function(Q,n){for(var x,b=Q.split(","),J=0,L=b.length;J<L;J++)x=b[J].trim(),o[x]&&(o[x].enable=n);for(x in B=!1,o)if(o[x].enable){B=!0;break}},a.contextLost=function(){for(var Q in G=!1,o)o[Q].contextLost&&o[Q].contextLost()},a.resetBlendState=function(Q){E5.for(Q).glState.blend.apply({enabled:!0,equation:32774,func:[770,771,1,771]})},a.render=function(Q,n,x,b,J){if((B||J)&&(G||function(){var Q;if(!G)return Q=Z.getGL(),Q&&(E=new oO.RenderTarget(Z,Q,null,null,{samples:o5.renderTextureSamples||1,minFilter:9729,magFilter:9729,depthFormat:Z.isWebGL2()?36012:null}),G=!0)}())){E.setSize(Q,n,x),E.bind(Q);(J=cs(Q,!0))&&0===J[0]&&0===J[1]&&0===J[2]&&0===J[3]?J=null:Fs(Q,[0,0,0,0]),Q.clear(16640),Z.setViewport(Q,0,0,n,x);var L=!1!==(b=b||{}).renderAxis,f=!1!==b.renderEdit;b.renderAxis=b.renderEdit=!1,Z.renderScene(b),E.unbind(Q);for(var V,l=0,H=Z._glCapabilities.maxAttributes;l<H;l++)Q.disableVertexAttribArray(l);var I=E;for(V in o)I=o[V]._42(Q,I)||I;return Z.setViewport(Q,0,0,n,x),J&&Fs(Q,J),b=a.getModule("Fxaa"),J=Z._attributes&&!1===Z._attributes.autoClear?{clear:!1}:null,a.resetBlendState(Q),b&&b.enable?($.resolution=[1/n,1/x],$.image=I.texture,a.blitScreen($,J)):(_.image=I.texture,a.blitScreen(_,J)),(b=a.getModule("Bloom")).blendAtFinal&&b.composeFinalBloom(Q),Q.useProgram(Z._prg),Z._renderAxisAndEditHelper(L,f),!0}}},Vp=(d.graph3d.PostProcessing.HueSaturation=function(b){var J,L=!1,f=!1,V={type:"hueSaturation"},l=[],H=[],I=[];this.serializeProperties={hue:[0,0,0,0,0,0,0],saturation:[0,0,0,0,0,0,0],lightness:[0,0,0,0,0,0,0]},this.resetProperties=function(){var Q,n=this.serializeProperties;for(Q in n)this[Q]=n[Q]},this.resetProperties(),e.defineProperties(this,{enable:{get:function(){return L},set:function(Q){!!L!=!!Q&&(L=Q,b.iv())}},hue:{get:function(){return l.map(function(Q){return t5(180*Q)})},set:function(Q){if(l!==Q&&7===Q.length){for(var n=0;n<7;n++)l[n]=Q[n]/180;b.iv()}}},saturation:{get:function(){return H.map(function(Q){return t5(100*Q)})},set:function(Q){if(H!==Q&&7===Q.length){for(var n=0;n<7;n++)H[n]=Q[n]/100;b.iv()}}},lightness:{get:function(){return I.map(function(Q){return t5(100*Q)})},set:function(Q){if(I!==Q&&7===Q.length){for(var n=0;n<7;n++)I[n]=Q[n]/100;b.iv()}}}}),this.contextLost=function(){f=!1},this._42=function(Q,n){var x;if(L&&(f||(x=b.getGL())&&(J=new oO.RenderTarget(b,x),f=!0)))return V.image=n.texture,V.hue=l,V.saturation=H,V.lightness=I,b._postProcessing.blitScreen(J,n.width,n.height,V),J}},d.graph3d.PostProcessing.Bloom=function(H){var I,Z,E,n,a,o,B,G,_=this,$=!1,W=!1,D=(this.serializeProperties={strength:1.5,threshold:.55,radius:.4,overrideAlpha:!0,blendAtFinal:!1,selective:!1},this.resetProperties=function(){var Q,n=this.serializeProperties;for(Q in n)this[Q]=n[Q]},e.defineProperties(_,{enable:{get:function(){return $},set:function(Q){!!$!=!!Q&&($=Q,H.iv())}},strength:{get:function(){return I},set:function(Q){I!==Q&&(I=Q,H.iv())}},threshold:{get:function(){return Z},set:function(Q){Z!==Q&&(Z=Q,H.iv())}},radius:{get:function(){return E},set:function(Q){E!==Q&&(E=Q,H.iv())}},overrideAlpha:{get:function(){return n},set:function(Q){!!n!=!!Q&&(n=Q,W&&i(),H.iv())}},blendAtFinal:{get:function(){return o},set:function(Q){!!o!=!!Q&&(o=!!Q,H.iv())}},selective:{get:function(){return a},set:function(Q){!!a!=!!Q&&(a=!!Q,H.iv())}}}),this.resetProperties(),[256,256]),A=[],u=[],M=5,x=[3,5,7,9,11],t=[];function i(){for(var Q=0;Q<M;Q++)t[Q]={type:"bloomBlur",defines:{KERNEL_RADIUS:x[Q],SIGMA:x[Q],OVERRIDE_ALPHA:!!n},internalDefines:!1}}_.contextLost=function(){W=!1,B=null},_.composeFinalBloom=function(Q,n){var x;$&&W&&(x=H._postProcessing).blitScreen(n,{type:"blitScreen",image:A[0].texture},{clear:!1,preRender:function(Q){E5.for(Q).glState.blend.apply({enabled:!0,equation:32774,func:[770,1]})},postRender:function(Q){x.resetBlendState(Q)}})},_._42=function(Q,n){if($&&(W||function(){var Q=H.getWidth(),n=H.getHeight();if(Q&&n){var x=H.getGL();if(x){D=[Q,n];var b,J=Math.round(D[0]/2),L=Math.round(D[1]/2);for(G=new oO.RenderTarget(H,x,J,L),A=[],u=[],b=0;b<M;b++)A.push(new oO.RenderTarget(H,x,J,L)),u.push(new oO.RenderTarget(H,x,J,L)),J=Math.round(J/2),L=Math.round(L/2);return i(),W=!0}}}())){var x,b=H._postProcessing;a&&((B=B||new oO.RenderTarget(H,Q)).setSize(Q,n.width,n.height),B.bind(Q),(x=cs(Q,!0))&&0===x[0]&&0===x[1]&&0===x[2]&&1===x[3]?x=null:Fs(Q,[0,0,0,1]),Q.clear(16640),H.setViewport(Q,0,0,n.width,n.height),Q._blooming=!0,H.syncRenderState(),H.renderScene({renderAxis:!1,renderGrid:!1,renderEdit:!1}),Q._blooming=!1,x&&Fs(Q,x),B.unbind(Q)),b.blitScreen(G,{type:"bloomHighPass",smoothWidth:.01,luminosityThreshold:Z,tDiffuse:(a?B:n).texture});for(var J,L=G,f=Math.round(D[0]/2),V=Math.round(D[1]/2),l=0;l<M;l++)(J=t[l]).texSize=[f,V],J.colorTexture=L.texture,J.direction=[1,0],b.blitScreen(A[l],J),J.colorTexture=A[l].texture,J.direction=[0,1],b.blitScreen(u[l],J),f=Math.round(f/2),V=Math.round(V/2),L=u[l];return b.blitScreen(A[0],{type:"bloomComposite",blurTexture1:u[0].texture,blurTexture2:u[1].texture,blurTexture3:u[2].texture,blurTexture4:u[3].texture,blurTexture5:u[4].texture,bloomStrength:I,bloomRadius:E,bloomTintColor:[1,1,1]}),o||_.composeFinalBloom(Q,n),n}}},d.graph3d.PostProcessing.Dof=function(H){var J,I,n,x,b,Z,E,L,a,f=!1,V=!1,o=0,B=!1,l=s.generateUUID();this.serializeProperties={aperture:.025,maxblur:1,overrideAlpha:!0,image:null},this.resetProperties=function(){var Q,n=this.serializeProperties;for(Q in n)this[Q]=n[Q]},e.defineProperties(this,{enable:{get:function(){return f},set:function(Q){!!f!=!!Q&&((f=Q)||(B=!1),H.iv())}},image:{get:function(){return n},set:function(Q){n!==Q&&(n=Q,B=!1,I&&(H.deleteTexture(l),I=null),H.iv())}},maxblur:{get:function(){return x},set:function(Q){x!==Q&&(x=Q,H.iv())}},overrideAlpha:{get:function(){return L},set:function(Q){!!L!=!!Q&&(L=Q,H.iv())}},aperture:{get:function(){return b},set:function(Q){b!==Q&&(b=Q,H.iv())}}}),this.resetProperties(),this.contextLost=function(){V=!1,I&&(H.deleteTexture(l),I=null)},this.setImageFromGraphView=function(Q,n,x){this.image=null,function Q(n,x,b,J){a=null;var L=n.getCanvas(),f=L.width,V=L.height,l=(((b=b||1024)<f||b<V)&&(l=b/Math.max(f,V),f=Math.round(f*l),V=Math.round(V*l),Z=Z||z_(),L=b5.resizeImage(L,f,V,Z)),H.getGL());E=E||l.createTexture(),I=As(H,l,L,E),o=x||.01,B=!0,H.iv(),J--&&(a=a||b5.callLater(function(){Q(n,x,b,J)}))}(Q,n,x,2)},this._42=function(Q,n){if(f&&(V||(x=H.getGL())&&(J=new oO.RenderTarget(H,x),V=!0))){if(!I){var x=g(this.image);if(!x||!x.comps&&!x.tagName)return n;d.Default.setImage(l,x),I=H.getTexture(l)}var x=n.width,b=n.height;if(x&&b)return H._postProcessing.blitScreen(J,x,b,{type:"bokeh",tColor:n.texture,tDepth:I,aspect:x/b,aperture:this.aperture,maxblur:this.maxblur,useG2d:B,threshold:o,defines:{OVERRIDE_ALPHA:!!L}}),J}}},d.graph3d.PostProcessing.Custom=function(V){function n(Q,n){return(Q.priority||0)-(n.priority||0)}var l,H,I=!1,Z=!1;this.serializeProperties={materials:[]},this.resetProperties=function(){var Q,n=this.serializeProperties;for(Q in n)this[Q]=n[Q]},this.resetProperties(),e.defineProperties(this,{enable:{get:function(){return I},set:function(Q){!!I!=!!Q&&(I=Q,V.iv())}},materials:{get:function(){return H},set:function(Q){(H=Q)&&H.sort(n),V.iv()}}}),this.contextLost=function(){Z=!1},this._42=function(Q,n){if(I&&H&&H.length&&(Z||(x=V.getGL())&&(l=new oO.RenderTarget(V,x),Z=!0))){for(var x,b,J=n,L=l,f=0;f<H.length;f++)(b=H[f]).image=J.texture,V._postProcessing.blitScreen(L,J.width,J.height,b),delete b.image,b=J,J=L,L=b;return J}}},d.graph3d.PostProcessing.Blur=function(o){var B,G,_,$,W,J,L=this,f=!1,D=!1,A={type:"blurDownSample"},u={type:"blurH"},M={type:"blurV"},n=(this.serializeProperties={value:0,downSample:!1,iterations:1,layer:"main"},this.resetProperties=function(){var Q,n=this.serializeProperties;for(Q in n)this[Q]=n[Q]},e.defineProperties(L,{enable:{get:function(){return f},set:function(Q){!!f!=!!Q&&((f=Q)?o.addRenderLayerListener(n,this):o.removeRenderLayerListener(n,this),o.iv())}},downSample:{get:function(){return $},set:function(Q){$!==Q&&($=Q,o.iv)}},value:{get:function(){return _},set:function(Q){_!==Q&&(_=Q,o.iv())}},iterations:{get:function(){return W},set:function(Q){W!==Q&&(W=Q,o.iv())}},layer:{get:function(){return J},set:function(Q){J!==Q&&(J=Q,o.iv())}}}),this.resetProperties(),function(Q){if(f&&Q.layer===J&&"post"===Q.phase){var n=o.getGL();if(!o._picking&&!o.isReflecting(n)){(Q=o._postProcessing.getRenderTarget()).unbind(n);for(var x=0,b=o._glCapabilities.maxAttributes;x<b;x++)n.disableVertexAttribArray(x);L.drawImpl(n,Q),Q.bind(n),n.useProgram(o._prg)}}});L._42=function(){},L.contextLost=function(){D=!1,G=null},L.drawImpl=function(Q,n,x,b,J){if(D||(H=o.getGL())&&(B=new oO.RenderTarget(o,H),D=!0)){var L,f=n?(L=n.width,n.height):(L=o._viewport[2],o._viewport[3]);if(L&&f){for(var V,l=o._postProcessing,H=("boolean"!=typeof b&&(b=$),x==x5&&(x=_),J==x5&&(J=W),J=Math.max(1,Math.round(J)),E5.for(Q).glState.depth),I=H.enabled,Z=(H.enabled=!1,b?(x/=2,V=[L,f],L/=2,f/=2,G=G||new oO.RenderTarget(o,Q),A.image=n.texture,A.texelSize=[1/V[0],1/V[1]],l.blitScreen(G,L,f,A),n.setSize(Q,L,f)):G&&G.setSize(0,0),B.setSize(Q,L,f),[]),E=0;E<J;E++)Z.push(x),x=Math.max(1,Math.floor(x/2));for(E=0;E<J;E++){var a=Z[J-E-1];u.image=(b&&0===E?G:n).texture,u.value=a/L,l.blitScreen(B,null,null,u),b&&E===J-1&&n.setSize(Q,V[0],V[1]),M.image=B.texture,M.value=a/f,l.blitScreen(n,null,null,M)}return H.enabled=I,n}}}},d.graph3d.PostProcessing.Glitch=function(V){var l,x,H,I,Z,E,a,b,o,B=!1,G=!1,_=s.randomFloat,$=s.randomInt,J=0,W={type:"glitch"};function D(){if(o&&b){H=Date.now(),x=1e3*_(b[I=0],b[1]),Z=[];for(var Q=1,n=o.length;Q<n;Q+=2)Z.push((1<Q?Z[Z.length-1]:0)+x*o[Q]/J)}}function A(){V.redraw()}this.serializeProperties={onlyReflector:!1,period:[2,3],intensity:[3,.3,1,.1,0,.4]},this.resetProperties=function(){var Q,n=this.serializeProperties;for(Q in n)this[Q]=n[Q]},e.defineProperties(this,{enable:{get:function(){return B},set:function(Q){!!B!=!!Q&&((B=Q)&&D(),V.iv())}},onlyReflector:{get:function(){return a},set:function(Q){!!a!=!!Q&&(a=Q,V.iv())}},period:{get:function(){return b},set:function(Q){b=Q,D(),V.iv()}},intensity:{get:function(){return o},set:function(Q){J=0;for(var n=1,x=(o=Q=Q||[1,1]).length;n<x;n+=2)J+=Q[n];D(),V.iv()}}}),this.resetProperties(),this.contextLost=function(){G=!1},this._42=function(Q,n){if(B&&(G||function(){var Q=V.getGL();if(Q){l=new oO.RenderTarget(V,Q);for(var n=dh(64,64),x=n.getImageData(0,0,64,64),b=x.data,J=0;J<4096;J++)b[3*J+0]=$(256),b[3*J+1]=$(256),b[3*J+2]=$(256),b[3*J+3]=$(256);return n.putImageData(x,0,0),E=As(V,Q,vh),G=!0}}())&&!!V.isReflecting(Q)==!!a){var x,b,J,L=n.width,f=n.height;if(L&&f)return x=V._postProcessing,b=(Q=E5.for(Q).glState.depth).enabled,Q.enabled=!1,Date.now()-H>Z[I]&&++I>=Z.length&&D(),J=o[2*I],W.seed=Math.random(),W.byp=J?0:1,W.tDisp=E,J&&(W.angle=_(-Math.PI,Math.PI),W.distortion_x=_(0,1),W.distortion_y=_(0,1),W.amount=Math.random()/30*J,W.seed_x=_(-1,1)*J,W.seed_y=_(-1,1)*J),W.image=n.texture,x.blitScreen(l,L,f,W),Q.enabled=b,requestAnimationFrame(A),l}}},d.graph3d.PostProcessing.Fxaa=function(n){var x=!1;e.defineProperties(this,{enable:{get:function(){return x},set:function(Q){!!x!=!!Q&&(x=Q,n.iv())}}}),this._42=function(){}},$_(b5,{accordionViewExpandIcon:Cj(c1),accordionViewCollapseIcon:Cj(c1,!0),accordionViewLabelColor:v5,accordionViewLabelFont:H7,accordionViewTitleBackground:P1,accordionViewSelectBackground:O1,accordionViewSelectWidth:3,accordionViewSeparatorColor:n5,splitViewDividerSize:1,splitViewDividerBackground:P1,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:oi,rect:[2,2,12,12],background:c1}]},propertyViewLabelColor:l7,propertyViewLabelSelectColor:v5,propertyViewLabelFont:H7,propertyViewExpandIcon:Cj(q1),propertyViewCollapseIcon:Cj(q1,!0),propertyViewBackground:F1,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:U1,propertyViewColumnLineColor:U1,propertyViewSelectBackground:O1,listViewLabelColor:l7,listViewLabelSelectColor:v5,listViewLabelFont:H7,listViewRowLineVisible:!1,listViewRowLineColor:U1,listViewSelectBackground:O1,treeViewLabelColor:l7,treeViewLabelSelectColor:v5,treeViewLabelFont:H7,treeViewExpandIcon:Cj(K1),treeViewCollapseIcon:Cj(K1,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:U1,treeViewSelectBackground:O1,treeViewDoubleClickToToggle:!0,tableViewLabelColor:l7,tableViewLabelSelectColor:v5,tableViewLabelFont:H7,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:U1,tableViewColumnLineColor:U1,tableViewSelectBackground:O1,treeTableViewLabelColor:l7,treeTableViewLabelSelectColor:v5,treeTableViewLabelFont:H7,treeTableViewExpandIcon:Cj(K1),treeTableViewCollapseIcon:Cj(K1,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:U1,treeTableViewColumnLineColor:U1,treeTableViewSelectBackground:O1,tableHeaderLabelColor:l7,tableHeaderLabelFont:H7,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:y1,tableHeaderBackground:F1,tableHeaderMoveBackground:B,tableHeaderInsertColor:O1,tableHeaderSortDescIcon:Q_(q1,!0),tableHeaderSortAscIcon:Q_(q1),tabViewTabGap:1,tabViewLabelColor:v5,tabViewLabelFont:H7,tabViewTabBackground:P1,tabViewSelectWidth:3,tabViewSelectBackground:O1,tabViewMoveBackground:B,tabViewInsertColor:O1,toolbarLabelColor:l7,toolbarLabelSelectColor:v5,toolbarLabelFont:H7,toolbarBackground:F1,toolbarSelectBackground:O1,toolbarItemGap:8,toolbarSeparatorColor:w1},!0),{translateX:1,sortColumn:1}),lp={sortable:1,sortOrder:1,sortFunc:1},Hp={focusData:1},Ip={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Zp={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Ep=function(Q,n){n.add(Q),Q.hasChildren()&&Q.eachChild(function(Q){Ep(Q,n)})},ap=function(Q,n,x,b,J,L,f,V,l,H,I){var Z,E,a,o,B,G,_=x.getValueType(H),$=x.getAlign(H);if(x.getEnumValues(H))return Z=x.toEnumLabel(n,H),E=I7||0,a=0,o=L,B=b5.getTextSize(b,Z).width,(G=g(x.toEnumIcon(n,H)))&&(a=L+I7/2,"center"===$?a+=(V-(E+B))/2:"right"===$&&(a=a+V-(E+B)),t7(Q,G,a,f+l/2,H,I),o=a+I7/2),void(Z!=x5&&(G?e7(Q,Z,b,J,o,f,V-(o-L),l):e7(Q,Z,b,J,L,f,V,l,$)));if((n=x.formatValue(n))!=x5){if(_!==RZ)return _===XZ||!_&&f_(n)?(G=g(n?ii:ri),void t7(Q,G,L+V/2,f+l/2,H,I)):void e7(Q,n,b,J,L,f,V,l,$);Nh(Q,L,f,V,l,n)}},op=function(x,b){var J=b.view,L=Ih(x),f=b.column||b.property;J.getDataModel().beginTransaction(),(b.editor=x).info=b,J.setCurrentEditor(x),J.getView().insertBefore(L,J._79O),F(x,b.editorRect),x.setFocus?x.setFocus():Hh(x),x.commitValue=function(Q,n){x._17Q&&(x=x._17Q),n||J.setValue(b.data,f,x.getValue?x.getValue():x.value),x.close&&x.close(),JS(L)},f.onEditorCreated&&f.onEditorCreated(b)},Bp=function(Q,n,x,b,J){var L=LS(Q,x),f=n.value,V=n.view,x=J.getValueType(n.data);return L.onblur=L.onchange=function(Q){V.endEditing()},"input"===Q?((f=J.formatValue(f))!=x5&&(L.value=f),L.onkeydown=function(Q){yh(Q)?V.endEditing():Kh(Q)&&V.endEditing(!0)},x!==gZ&&x!==SZ||Q5(L,Jj,b5.numberListener)):Q===ji&&b.forEach(function(Q){var n=E.createElement("option");n.innerHTML=J.toEnumLabel(Q),n.value=Q,J.isEnumEqual(f,Q)&&(n.selected=!0),g_(L,n)}),op(L,n),L},Gp=d.widget={},n=function(Q,n,x){HS("ht.widget."+Q,n,x)},_p=($_(kK,{ms_value:function(Q,n){Q.getValue=function(Q){var n=(Q=this.getItemById(Q)).element;return H5(n)?n:n?n.getValue?n.getValue():n.value:Q.selected},Q.setValue=function(Q,n){var x;(Q=this.getItemById(Q))&&((x=Q.element)&&!H5(x)?x.setValue?x.setValue(n):x.value=n:(f_(n)?Q.selected=n:Q.element=n,this.iv()))},Q.v=function(Q,n){if(2===arguments.length)this.setValue(Q,n);else{if(!V_(Q))return this.getValue(Q);for(var x in Q)this.setValue(x,Q[x])}return this}},_46o:function(Q,n){Q._icon=x5,Q._accessType=x5,Q._valueType=x5,Q._editable=!1,Q._batchEditable=!0,Q._align=Qi,Q._nullable=!0,Q._emptiable=!1,Q.setParent=pj,Q.formatValue=function(Q){var n=this._valueType;return this.getEnumValues()?this.toEnumLabel(Q):n===XZ?!!Q:Q!=x5&&n===gZ?M5(Q):Q},Q.setEnum=function(Q,n,x,b,J,L,f){Q&&!H_(Q)&&Q.values&&(b=Q.editable,x=Q.icons,n=Q.labels,J=Q.strict,L=Q.maxHeight,f=Q.dropDownWidth,Q=Q.values),I_(Q)&&(Q=Q._as),I_(n)&&(n=n._as),I_(x)&&(x=x._as),this._enumValues=Q,this._enumLabels=n,this._enumIcons=x,this._enumEditable=b,this._enumStrict=J==x5||J,this._enumMaxHeight=L,this._enumDropDownWidth=f,Q&&Q.length&&L_(Q[0])&&(this._valueType=SZ),this.fp("enum",!1,!0)},Q.getEnumDropDownWidth=function(){return this._enumDropDownWidth},Q.getEnumMaxHeight=function(){return this._enumMaxHeight},Q.isEnumEditable=function(){return this._enumEditable},Q.getEnumValues=function(){return this._enumValues},Q.getEnumLabels=function(){return this._enumLabels},Q.getEnumIcons=function(){return this._enumIcons},Q.isEnumStrict=function(){return this._enumStrict},Q.isEnumEqual=function(Q,n){return this._enumStrict?Q===n:Q==n},Q.toEnumLabel=function(Q,n){var x=this.getEnumValues(n),b=this.getEnumLabels(n);if(x&&b)for(var J=0;J<x.length;J++)if(this.isEnumEqual(Q,x[J]))return b[J];return Q},Q.toEnumIcon=function(Q,n){var x=this.getEnumValues(n),b=this.getEnumIcons(n);if(x&&b)for(var J=0;J<x.length;J++)if(this.isEnumEqual(Q,x[J]))return b[J];return n5}},_45o:function(Q,n){Q._87o=function(Q,n,x,b,J,L){var f,V;Q&&(f=this._90I,V=p_(1),this._columnLineVisible&&--J,this._rowLineVisible&&--L,J<=0||L<=0||((f=this._90I?f:this._90I={})[n]||(f[n]=new m),F(V,this.tx()+x,this.ty()+b,J,L),g_(V,Q),this._view.insertBefore(V,this._79O),Q.onParentAdded&&Q.onParentAdded(V),f[n].add(V)))},Q._76o=function(){var Q=this._90I;if(Q){for(var n in Q)Q[n].each(function(Q){JS(Q)});delete this._90I}},Q._77o=function(Q){var n;this._90I&&(n=this._90I[Q])&&(n.each(function(Q){JS(Q)}),delete this._90I[Q])}},_47o:function(Q,n){Q.getValue=function(Q,n){return n.getValue?n.getValue(Q,n,this):q_(Q,n.getAccessType(),n.getName())},Q.setValue=function(Q,n,x){var b,J,L,f;n.isEmptiable(Q)||""!==x||(x=n5),!n.isNullable(Q)&&x==x5||(b=this,J=n.getName(Q),L=n.getAccessType(Q),(f=n.getValueType(Q))===gZ&&H5(x)?x=e5(x):f===SZ&&H5(x)?x=parseFloat(x):f===XZ&&H5(x)&&(x="true"===x),b._batchEditable&&n._batchEditable&&b.isSelected(Q)?b.sm().each(function(Q){n.setValue?n.setValue(Q,n,x,b):w_(Q,L,J,x)}):n.setValue?n.setValue(Q,n,x,b):w_(Q,L,J,x))},Q.setCurrentEditor=function(Q){this.endEditing(),this._currentEditor=Q,this.redraw()},Q.isEditing=function(Q,n){var x=this._currentEditor;return!!x&&(!n||!!(x=x.info)&&(x.column||x.property)===n&&x.data===Q)},Q.endEditing=function(Q){var n=this._currentEditor;n&&(delete this._currentEditor,n.commitValue&&n.commitValue(n.info,Q),this.redraw(),this.getDataModel().endTransaction())},Q.beginEditing=function(Q){this.endEditing();var x=this,b=Q.column||Q.property;if(b.beginEditing)b.beginEditing(Q);else{var n,J,L=Q.data,f=Q.value,V=x.getSelectBackground(L),l=b.getEnumValues(L),H=b.getSlider(L),I=b.getColorPicker(L);if(H)return(n=A7(Gp.Slider,H)).setValue(f),n.getView().onblur=function(Q){x.endEditing()},n.isInstant()&&(n.onValueChanged=function(){x.setValue(L,b,n.getValue())}),void op(n,Q);if(I||b.getValueType(L)===RZ)return(H=A7(Gp.ColorPicker,I)).setValue(f),J=H.onClosed,H.onClosed=function(){x.endEditing(),J&&J.call(this)},H.isInstant()&&(H.onValueChanged=function(Q,n){x.setValue(L,b,n)}),op(H,Q),void H.open();if(l)Gp.ComboBox?((I=new Gp.ComboBox).setValue(f),I.setValues(l),I.setLabels(b.getEnumLabels(L)),I.setIcons(b.getEnumIcons(L)),I.setEditable(b.isEnumEditable(L)),I.setStrict(b.isEnumStrict(L)),I.setMaxHeight(b.getEnumMaxHeight(L)),I.setDropDownWidth(b.getEnumDropDownWidth(L)),I.onClosed=function(){x.endEditing()},op(I,Q),I.open()):Bp(ji,Q,V,l,b);else{if(b.getValueType(L)!==XZ&&!f_(f))return b.getItemEditor(L)?(((I=(H=new(w7(b.getItemEditor(L)))(L,b,x,Q)).getView())._17Q=H).setValue(f),X_(I),op(I,Q),void(H.editBeginning&&H.editBeginning())):void Bp("input",Q,V,x5,b);x.setValue(L,b,!f)}}}},_44o:function(Q,n){Q.init=function(Q){var n=this,x=n.th=new wp(Q),b=n._view=h_(1,n);n.tv=n._tableView=Q,g_(b,x.getView()),g_(b,Q.getView()),x.mp(function(Q){Q.property===Mi&&n.iv()}),n.iv()},Q.getTableView=function(){return this.tv},Q.getTableHeader=function(){return this.th},Q.getDataModel=function(){return this.tv.dm()},Q.getColumnModel=function(){return this.tv.getColumnModel()},Q.setColumns=function(Q){this.tv.setColumns(Q)},Q.addColumns=function(Q){this.tv.addColumns(Q)},Q.endEditing=function(){this.tv.endEditing()},Q.validateImpl=function(){var Q=this.th,n=C_(Q),x={x:0,y:0,width:this.getWidth(),height:n};F(Q,x),x.y=n,x.height=J5(0,this.getHeight()-n),F(this.tv,x)}},ms_vs:function(Q,n){Q._41o=function(){return this._29I.height<this._59I},Q._43o=function(){var Q=this;Q._41o()&&(Q._58I||(h5(function(){Q._94O()},a7),Q.iv()),Q._58I=new Date)},Q._94O=function(){var Q=this;Q._58I&&((new Date).getTime()-Q._58I.getTime()>=a7?(delete Q._58I,Q.iv()):h5(function(){Q._94O()},a7))},Q._93I=function(){var Q,n,x,b,J,L,f,V=this,l=V._27I;V._58I||!V._autoHideScrollBar?(l||g_(V._79O,l=V._27I=p_()),Q=(b=V._29I).height,n=V._59I,x=V.getScrollBarSize(),b=b.width-x-2,J=Q*(-V.ty()/n),L=Q*(Q/n),f=l.style,Q<n?(L<o7&&(Q<(J=(J=J+L/2-o7/2)<0?0:J)+o7&&(J=Q-o7),L=o7),f.visibility=Yi,f.background=V.getScrollBarColor(),f.borderRadius=x/2+Zi,F(l,b,J,x,L)):f.visibility=mi):l&&(l.style.visibility=mi)}},ms_hs:function(Q,n){Q._40o=function(){return this._29I.width<this._91I},Q._42o=function(){var Q=this;Q._40o()&&(Q._95O||(h5(function(){Q._94I()},a7),Q.iv()),Q._95O=new Date)},Q._94I=function(){var Q=this;Q._95O&&((new Date).getTime()-Q._95O.getTime()>=a7?(delete Q._95O,Q.iv()):h5(function(){Q._94I()},a7))},Q._92I=function(){var Q,n,x,b,J,L,f,V=this,l=V._28I;V._95O||!V._autoHideScrollBar?(l||g_(V._79O,l=V._28I=p_()),Q=(b=V._29I).width,n=V._91I,x=V.getScrollBarSize(),b=b.height-x-2,J=Q*(-V.tx()/n),L=Q*(Q/n),f=l.style,Q<n?(L<o7&&(Q<(J=(J=J+L/2-o7/2)<0?0:J)+o7&&(J=Q-o7),L=o7),f.visibility=Yi,f.background=V.getScrollBarColor(),f.borderRadius=x/2+Zi,F(l,J,b,L,x)):f.visibility=mi):l&&(l.style.visibility=mi)}}}),S5(ii,Nj(16,16,[{type:h,rect:[1,1,14,14],background:O1},{type:ai,rect:[1,1,14,14],width:1,color:e1},{type:_i,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),S5(ri,Nj(16,16,{type:ai,rect:[1,1,14,14],width:1,color:e1})),S5(Pi,Nj(16,16,[{type:Bi,rect:[2,2,12,12],borderWidth:1,borderColor:e1,background:"#FFF"},{type:Bi,rect:[4,4,8,8],background:O1}])),S5(ci,Nj(16,16,{type:Bi,rect:[2,2,12,12],borderWidth:1,borderColor:e1})),kK._15Q=function(Q,n){Q._29I=sj,Q._59I=0,Q._91I=0,Q._5o=function(Q){var n=this;n._30I=new m,n._rows=new m,n._rowMap={},n._31I=0,n._14I=0,n._view=h_(1,n),n._canvas=z_(n._view),g_(n._view,n._79O=p_()),n.dm(Q||new GG)},Q.getCheckIcon=function(Q){var n=this.sm(),Q=n.co(Q);return n.sg()?g(Q?Pi:ci):g(Q?ii:ri)},Q.checkData=function(Q){var n=this.sm(),x=n.co(Q);n.sg()&&x||(this._32o=1,x?n.rs(Q):n.as(Q),delete this._32o)},Q.getDataAt=function(Q){Q.target&&(Q=this.lp(Q));var Q=t5(Q.y/this._rowHeight),n=this._rows;return Q<0||Q>=n.size()?x5:n.get(Q)},Q.onDataDoubleClicked=function(Q,n){},Q.onDataClicked=function(Q,n){},Q.adjustTranslateX=function(Q){return 0},Q.adjustTranslateY=function(Q){var n=this.getHeight()-this._59I;return 0<(Q=Q<n?n:Q)?0:M5(Q)},Q.onPropertyChanged=function(Q){Q=Q.property,Ip[Q]?this.ivm():Hp[Q]||this.redraw(),Q===MZ?this._42o():Q===tZ&&this._43o()},Q.getLabel=function(Q){return Q.toLabel()},Q.getLabelFont=function(Q){return this._labelFont},Q.getLabelColor=function(Q){if(this.isCheckMode()){if(this._focusData===Q)return this._labelSelectColor}else if(this.isSelected(Q))return this._labelSelectColor;return this._labelColor},Q.getStartRowIndex=function(){return this._31I},Q.getEndRowIndex=function(){return this._14I},Q.getRowDatas=function(){return this._rows},Q.getRowIndex=function(Q){return this._rowMap[Q._id]},Q.getRowSize=function(){return this._rows.size()},Q.getViewRect=function(){return q7(this._29I)},Q.isVisible=function(Q){return!this._visibleFunc||this._visibleFunc(Q)},Q.getCurrentSortFunc=function(){return this._sortFunc},Q.setDataModel=function(Q){var n=this,x=n._dataModel,b=n._selectionModel;x!==Q&&(x&&(x.umm(n.handleDataModelChange,n),x.umd(n.handleDataPropertyChange,n),x.umh(n.handleHierarchyChange,n),b||x.sm().ums(n.handleSelectionChange,n)),(n._dataModel=Q).mm(n.handleDataModelChange,n),Q.md(n.handleDataPropertyChange,n),Q.mh(n.handleHierarchyChange,n),b?b._21I(Q):Q.sm().ms(n.handleSelectionChange,n),n.fp("dataModel",x,Q))},Q.validateModel=function(){var Q=this,n=(Q._rows.clear(),Q._rowMap={},Q.buildChildren(Q._dataModel._roots),Q._rows=Q._rows.toList(Q.isVisible,Q)),x=0,b=Q.getCurrentSortFunc(),J=n.size();for(b&&n.sort(b);x<J;x++)Q._rowMap[n.get(x)._id]=x},Q.buildChildren=function(Q){var n=this;Q.each(function(Q){n._rows.add(Q),n.buildChildren(Q._children)})},Q.handleDataModelChange=function(Q){this.ivm()},Q.handleDataPropertyChange=function(Q){"parent"===Q.property?this.ivm():this.invalidateData(Q.data)},Q.handleHierarchyChange=function(Q){this.ivm()},Q.handleSelectionChange=function(Q){Q.datas.each(this.invalidateData,this),this.onSelectionChanged(Q)},Q.onSelectionChanged=function(Q){var n=this.sm();!this.isAutoMakeVisible()||1!==n.size()||"set"!==Q.kind&&"append"!==Q.kind||this._32o||this.makeVisible(n.ld())},Q.handleBackgroundClick=function(Q){O7(Q)&&!this.isCheckMode()&&this.sm().cs()},Q.makeVisible=function(Q){Q&&(this._23I=Q,this.iv())},Q.scrollToIndex=function(Q){var n=this._29I,x=n.height,b=this._rowHeight,J=b*Q;0<=Q&&Q<this._rows.size()&&0<x&&(J+b>n.y+x?this.ty(-J+x-b):J<n.y&&this.ty(-J))},Q.autoScroll=function(Q,n){var x=this,b=x._rowHeight,J=b,L=b/4,f=x._29I,Q=x.lp(Q),V={x:x.tx(),y:x.ty()};return 0<b&&f&&(Q.x-f.x<J?x.translate(L,0):f.x+f.width-Q.x<J&&x.translate(-L,0),Q.y-f.y<J?x.translate(0,L):f.y+f.height-Q.y<J&&x.translate(0,-L)),V.x=x.tx()-V.x,V.y=x.ty()-V.y,n&&(n.x+=V.x,n.y+=V.y),V},Q.getTopRowOrderSelection=function(){var Q=this.sm().getTopSelection(),n={},x=new m;return Q.each(function(Q){n[Q._id]=Q}),this._rows.each(function(Q){n[Q._id]&&x.add(Q)}),x},Q.getRowOrderSelection=function(){var n=new m;return this._rows.each(function(Q){this.isSelected(Q)&&n.add(Q)},this),n},Q.ivm=function(){this.invalidateModel()},Q.invalidateModel=function(){this._96I||(this._96I=1,this._32I=1,delete this._24I),this.iv()},Q.redraw=function(){this._32I||(this._32I=1,delete this._24I,this.iv())},Q.invalidateData=function(Q){R5?this.redraw():this._32I||(this._24I||(this._24I={}),this._24I[Q._id]=Q,this.iv())},Q.getFocusData=function(){return this._focusData},Q.setFocusDataById=function(Q){this.setFocusData(this.dm().getDataById(Q))},Q.setFocusData=function(Q){var n=this._focusData;n!==Q&&(this._focusData=Q,this.fp("focusData",n,Q),n&&this.invalidateData(n),Q&&(this.invalidateData(Q),this.isAutoMakeVisible()&&this.makeVisible(Q)))},Q.drawRowBackground=function(Q,n,x,b,J,L,f){var V=this.isCheckMode();(n===this._focusData&&V||x&&!V)&&Nh(Q,b,J,L,f,this.getSelectBackground(n))},Q.drawData=function(Q,n,x){var b=this._rowHeight,J=b*x,L=(f=this._29I).x,f=f.width;Q.save(),Q.beginPath(),Q.rect(L,J,f,b),Q.clip(),this._87o(this.drawRow(Q,n,this.isSelected(n),L,J,f,b),x,L,J,f,b),Q.restore(),this._rowLineVisible&&Nh(Q,L,J+b-1,f,1,this._rowLineColor)},Q._12I=function(Q){var n=this._31I,x=(L=this._29I).x,b=L.y,J=L.width,L=L.height;for(Q.beginPath(),Q.rect(x,b,J,L),Q.clip(),Q.clearRect(x,b,J,L),this._76o(),this._93db(Q);n<this._14I;n++)this.drawData(Q,this._rows.get(n),n);this._92db(Q)},Q._13I=function(n){for(var Q,x=this,b=x._rowHeight,J=x._29I,L=J.x,f=J.width,V=x._31I,l=x._30I;V<x._14I;V++)Q=x._rows.get(V),x._24I[Q._id]&&l.add({data:Q,index:V});l.isEmpty()||(n.beginPath(),l.each(function(Q){n.rect(L,Q.index*b,f,b)}),n.clip(),l.each(function(Q){n.clearRect(L,Q.index*b,f,b)}),l.each(function(Q){x._77o(Q.index)}),x._93db(n),l.each(function(Q){x.drawData(n,Q.data,Q.index)}),x._92db(n),l.clear())},Q.preValidateModel=function(){this.endEditing&&this.endEditing()},Q.validateImpl=function(){var Q=this,n=Q._canvas,x=Q.getWidth(),b=Q.getHeight(),J=Q._rowHeight,L=Q._32I,f=(x===n.clientWidth&&b===n.clientHeight||(R_(n,x,b),L=1),Q._96I&&(Q.preValidateModel(),Q.validateModel()),Q._29I),x={x:-Q.tx(),y:-Q.ty(),width:x,height:b},b=Q._rows.size(),n=xh(n),V=Q._23I,f=(L||i_(x,f)||(L=1),Q._29I=x,Q._59I=b*J,Q._31I=t5(x.y/J),Q._14I=i5((x.y+x.height)/J),Q._31I<0&&(Q._31I=0),Q._14I>b&&(Q._14I=b),Q._99I&&L&&Q._99I(),Q.tx()),x=Q.ty();(Q._40o()||Q._41o())&&(Q._59I+=Q.getScrollBarSize(),Q._99I&&L&&(Q._91I+=Q.getScrollBarSize())),bh(n,f,x,1),L?Q._12I(n):Q._24I&&Q._13I(n),Q._93I(),Q._92I(),n.restore(),Q._32I=Q._24I=Q._96I=x5,V&&(Q.scrollToIndex(Q.getRowIndex(V)),delete Q._23I),Q.tx(Q.tx()),Q.ty(Q.ty())},Q.canHandleSelectMode=function(Q,n){return!0},Q.isDraggable=function(Q){return!0}},kK._48o=function(Q,n){Q._rootVisible=!0,Q._rootData=x5,Q._35o=function(){this._expandMap={},this._levelMap={}},Q.validateModel=function(){var Q=this,n=Q._rootData;Q._rows.clear(),Q._levelMap={},Q._rowMap={},Q._currentLevel=0,n?Q._rootVisible?Q.isVisible(n)&&Q.buildData(n):Q.buildChildren(n):Q.buildChildren(),delete Q._currentLevel},Q.buildData=function(Q){var n=Q._id,x=this._rows;this._rowMap[n]=x.size(),x.add(Q),this._levelMap[n]=this._currentLevel,this.isExpanded(Q)&&(this._currentLevel++,this.buildChildren(Q),this._currentLevel--)},Q.buildChildren=function(Q){var n=this,x=Q?Q._children:n._dataModel._roots,b=n.getCurrentSortFunc();b&&n.isChildrenSortable(Q)?x.toList(n.isVisible,n).sort(b).each(n.buildData,n):x.each(function(Q){n.isVisible(Q)&&n.buildData(Q)})},Q.getLevel=function(Q){return this._levelMap[Q._id]},Q.getToggleIcon=function(Q){var n=this._loader,x=this._collapseIcon;return n&&!n.isLoaded(Q)?x:Q.hasChildren()?this.isExpanded(Q)?this._expandIcon:x:x5},Q.isCheckMode=function(){return this._checkMode!=x5},Q.isChildrenSortable=function(Q){return!0},Q.handleDataModelChange=function(Q){Q.kind===Di?delete this._expandMap[Q.data._id]:Q.kind===Ai&&(this._expandMap={}),this.ivm()},Q.toggle=function(Q){this.isExpanded(Q)?this.collapse(Q):this.expand(Q)},Q.isExpanded=function(Q){return 1===this._expandMap[Q._id]},Q.expand=function(Q){var n=this._loader;this.isExpanded(Q)||(n&&!n.isLoaded(Q)&&n.load(Q),this._expandMap[Q._id]=1,this.ivm(),this.onExpanded(Q))},Q.onExpanded=function(Q){},Q.collapse=function(Q){this.isExpanded(Q)&&(delete this._expandMap[Q._id],this.ivm(),this.onCollapsed(Q))},Q.onCollapsed=function(Q){},Q.expandAll=function(Q){var n;Q?(this.expand(Q),Q.eachChild(function(Q){this.expandAll(Q)},this)):((n=this)._dataModel.each(function(Q){Q.hasChildren()&&(n._expandMap[Q._id]=1)}),n.ivm())},Q.collapseAll=function(){this._expandMap={},this.ivm()},Q.makeVisible=function(Q){if(Q&&(!this._rootData||Q.isDescendantOf(this._rootData))){for(var n=Q._parent;n;)this.expand(n),n=n._parent;this._23I=Q,this.iv()}},Q.checkData=function(Q){var n,x=this._checkMode,b=this.sm(),J=b.co(Q);if(!b.sg()||!J){if(this._32o=1,x===T5)J?b.rs(Q):b.as(Q);else if(x===uZ)(n=new m(Q)).addAll(Q._children);else if("descendant"===x)n=new m,Ep(Q,n);else if("all"===x&&(n=new m,Ep(Q,n),!J))for(var L=Q._parent;L;)n.add(L),L=L._parent;n&&(J?b.rs(n):b.as(n)),delete this._32o}},Q.drawTree=function(Q,n,x,b,J,L,f){var V=this,l=V._indent,H=V._levelMap[n._id],I=V.getIconWidth(n),Z=g(V.getToggleIcon(n));Z?(t7(Q,Z,(b+=l*H)+l/2,J+f/2,n,V),b+=l):b+=l*(H+1),V._checkMode&&(t7(Q,V.getCheckIcon(n),b+l/2,J+f/2,n,V),b+=l),V.drawIcon(Q,n,b,J,I,f),V.drawLabel(Q,n,b+I,J,f)}},kK._14Q=function(Q,n){Q.getIcon=function(Q){return Q.getIcon()},Q.getIconWidth=function(Q){return this.getIcon(Q)?this._indent:0},Q.drawIcon=function(Q,n,x,b,J,L){var f,V;J&&(f=this.getBodyColor(n),(V=g(this.getIcon(n),f))&&(L-=this.isRowLineVisible()?1:0,i7(Q,V,dZ,x,b,J,L,n,this,f),f1(Q,this.getBorderColor(n),x,b,J,L)))},Q.drawLabel=function(Q,n,x,b,J){e7(Q,this.getLabel(n),this.getLabelFont(n),this.getLabelColor(n),x,b,0,J)}},kK._50o=function(Q,n){Q._98I=function(){var Q=this._39o=new GG;this._60I=new m,Q.mm(this._17o,this),Q.md(this._18o,this),Q.mh(this._19o,this)},Q.setColumns=function(Q){this._39o.clear(),this.addColumns(Q)},Q.addColumns=function(Q){var x=this._39o;Q.forEach(function(Q){var n;Q instanceof $p||(n=w7(Q.className),Q=A7(n||$p,Q)),x.add(Q)})},Q.onColumnClicked=function(Q){},Q.onCheckColumnClicked=function(Q){},Q._3Q=function(Q){for(var n,x=0,b=this._60I,J=b.size();x<J;x++)if((n=b.get(x)).column===Q)return n;return x5},Q.getColumnAt=function(Q){return(Q=this._4Q(Q))?Q.column:x5},Q._4Q=function(Q){for(var n=(Q.target?this.lp(Q):Q).x,x=this._60I,b=0;b<x.size();b++){var J=x.get(b),L=J.startX;if(L<=n&&n<L+J.column.getWidth())return J}return x5},Q.getToolTip=function(Q){var n=this.getDataAt(Q),Q=this.getColumnAt(Q);return n&&Q?Q.getToolTip(n,this):x5},Q.adjustTranslateX=function(Q){var n=this.getWidth()-this._91I;return 0<(Q=Q<n?n:Q)?0:M5(Q)},Q._99I=function(){var x=this,b=x._29I,J=x._60I;J.clear(),x._91I=0,x._39o._roots.each(function(Q){var n;Q.isVisible()&&(n=x._91I+Q.getWidth(),x._91I<=b.x+b.width&&n>=b.x&&J.add({column:Q,startX:x._91I}),x._91I=n)})},Q.drawData=function(b,J,L){var f=this,V=f._rowHeight,l=V*L,H=f.isSelected(J),Q=(n=f._29I).x,n=n.width;f.drawRowBackground(b,J,H,Q,l,n,V),f._60I.each(function(Q){var n=Q.column,Q=Q.startX,x=n.getWidth();0<x&&!f.isEditing(J,n)&&(b.save(),b.beginPath(),b.rect(Q,l,x,V),b.clip(),f._87o(f.drawCell(b,J,H,n,Q,l,x,V),L,Q,l,x,V),f._columnLineVisible&&Nh(b,Q+x-1,l,1,V,f._columnLineColor),b.restore())}),f._rowLineVisible&&Nh(b,Q,l+V-1,n,1,f._rowLineColor)},Q.drawCell=function(Q,n,x,b,J,L,f,V){if(b.drawCell)return b.drawCell(Q,n,x,b,J,L,f,V,this);x=this.getValue(n,b),ap(Q,x,b,this.getLabelFont(n,b,x),this.getLabelColor(n,b,x),J,L,f,V,n,this)},Q.getColumnModel=function(){return this._39o},Q._17o=function(Q){this.redraw()},Q._18o=function(Q){Q.data===this._sortColumn&&lp[Q.property]?this.ivm():(this._42o(),this.redraw())},Q._19o=function(Q){this.redraw()},Q.getCurrentSortFunc=function(){var x,b,J=this,L=J._sortColumn;return L&&L.isSortable()?(b=L.getSortFunc(),x=$Z===L.getSortOrder()?1:-1,b=b||F7,function(Q,n){return b.call(J,J.getValue(Q,L),J.getValue(n,L),Q,n)*x}):J._sortFunc},Q.isCellEditable=function(Q,n,x){return!(!n.isEditable()||!this.isEditable())&&(!n.isCellEditable||n.isCellEditable(Q,n,x,this))},Q._37O=function(Q,n){if(O7(n))for(var x=this,b=x.lp(n),J=x._60I,L=x._rowHeight,f=x._29I,V=f.x,l=f.y,H=f.width,I=f.height,Z=0;Z<J.size();Z++){var E,a,o=J.get(Z),B=o.startX,G=(o=o.column).getWidth();if(o!==x._31o&&o!==x._4o&&b.x>=B&&b.x<B+G&&x.isCellEditable(Q,o,n))return G={x:(B={x:B,y:x.getRowIndex(Q)*L,width:G,height:L}).x+x.tx(),y:B.y+x.ty(),width:B.width,height:B.height},a=E=0,B.x<V?E=B.x-V:V+H<B.x+B.width&&(E=B.x+B.width-V-H),E&&(x.tx(x.tx()-E),G.x-=E),B.y<l?a=B.y-l:l+I<B.y+L&&(a=B.y+L-l-I),a&&(x.ty(x.ty()-a),G.y-=a),void x.beginEditing({data:Q,column:o,value:x.getValue(Q,o),event:n,rect:B,editorRect:G,view:x})}}},Gp.BaseItemEditor=function(Q,n,x,b){this._data=Q,this._column=n,this._master=x,this._editInfo=b},n("BaseItemEditor",e,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}}),d.Tab=function(){u_(_p,this)}),$p=(p1("Tab",BG,{ms_ac:["view","closable","disabled","visible"],_icon:x5,_closable:!1,_disabled:!1,_visible:!0,setParent:pj}),d.Column=function(){u_($p,this)}),Wp=(p1("Column",BG,{_46o:1,ms_ac:["accessType","valueType",Yi,BZ,GZ,ui,"align",RZ,"sortOrder",oZ,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:$Z,_sortFunc:x5,_sortable:!0,_clickable:!0,setWidth:function(Q){var n=this._width;this._width=Q=Q<16?16:Q,this.fp(ui,n,Q)},getToolTip:function(Q,n){return this.formatValue(n.getValue(Q,this))}}),d.Property=function(){u_(Wp,this)}),Dp=(p1("Property",BG,{_46o:1,ms_ac:["accessType","valueType",BZ,GZ,"categoryName",RZ,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:x5,getToolTip:function(Q,n,x){return n?this.formatValue(x.getValue(Q,this)):x.getPropertyName(this)}}),Gp.AccordionView=function(){this._20o={},this._21o=new m,this._10o=x5,this._9o=x5,this._11o=x5,this._view=h_(0,this),this.iv()},n("AccordionView",e,{ms_v:1,ms_fire:1,ms_ac:[ZZ,EZ,"titleHeight",hi,di,"titleBackground","selectWidth",O5,"orientation","separatorColor"],_expandIcon:b5.accordionViewExpandIcon,_collapseIcon:b5.accordionViewCollapseIcon,_titleHeight:E7,_labelColor:b5.accordionViewLabelColor,_labelFont:b5.accordionViewLabelFont,_titleBackground:b5.accordionViewTitleBackground,_selectBackground:b5.accordionViewSelectBackground,_selectWidth:b5.accordionViewSelectWidth,_orientation:"v",_separatorColor:b5.accordionViewSeparatorColor,onPropertyChanged:function(Q){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(n,Q,x,b){var J=this,L=p_(),Q={content:Q,div:L,canvas:z_(L),icon:b};if(J._20o[n])throw n+" already exists";var f=Q.downEventFunc=function(Q){u7(Q)},V=Q.upEventFunc=function(Q){u7(Q),O7(Q)&&(J._10o===n?J.collapse():J.expand(n))};[nj,NZ].forEach(function(Q){Q5(L,Q,f)}),[bj,CZ].forEach(function(Q){Q5(L,Q,V)}),L.style.cursor=TZ,g_(J._view,L),J._20o[n]=Q,J._21o.add(n),x&&J.expand(n),J.iv()},remove:function(Q){var n,x=this._20o[Q];x&&(n=x.div,JS(n),[nj,NZ].forEach(function(Q){u5(n,Q,x.downEventFunc)}),[bj,CZ].forEach(function(Q){u5(n,Q,x.upEventFunc)}),delete this._20o[Q],this._21o.remove(Q),this.iv())},clear:function(){this._21o.toArray().forEach(this.remove,this),this._20o={},this._21o.clear(),this.iv()},isExpanded:function(Q){return this._10o===Q},expand:function(Q){this._20o[Q]&&this._10o!==Q&&(this._10o=Q,this.onExpanded(Q),this.iv())},onExpanded:function(Q){},collapse:function(){this._10o&&(this.onCollapsed(this._10o),delete this._10o,this.iv())},onCollapsed:function(Q){},initCanvas:function(Q,n,x){return R_(Q,n,x),Q=xh(Q),bh(Q,0,0,1),Q.clearRect(0,0,n,x),Q},drawTitle:function(Q,n,x,b,J){var L=this,J=g(J.icon),f=L.isExpanded(n),V=L._titleHeight,l=L._titleBackground,H=L._selectWidth,I=L._separatorColor,Z=g(f?L._expandIcon:L._collapseIcon),E=H+4;Nh(Q,0,0,x,b,l),f&&H&&Nh(Q,0,0,H,b,L._selectBackground),!f&&L._21o.get(L._21o.size()-1)===n||Nh(Q,0,b-1,x,1,I||K7(l)),J&&(t7(Q,J,E+kS(J)/2,V/2),E+=kS(J)+2),e7(Q,n,L.getLabelFont(n),L.getLabelColor(n),E,0,0,V),Z&&t7(Q,Z,x-kS(Z)/2-4,V/2)},validateImpl:function(){var f=this,Q=f._view,V=0,l=0,H=f.getWidth(),I=f.getHeight(),Z=f._titleHeight,E=f._21o.size()*Z,n=f._11o,x=f._9o,b=(delete f._11o,delete f._9o,f._21o.each(function(Q){var n,x,b=f._20o[Q],J=b.content,L=f._10o===Q;n_(f)?(F(b.div,V,0,Z,I),n=f.initCanvas(b.canvas,Z,I),Jh(n,0,I),Lh(n,-w5),f.drawTitle(n,Q,I,Z,b),n.restore(),L?(x=J5(0,H-E),J&&(f._11o=J,f._9o=Ih(J),F(J,V+Z,0,x,I)),V+=Z+x):V+=Z):(F(b.div,0,l,H,Z),n=f.initCanvas(b.canvas,H,Z),f.drawTitle(n,Q,H,Z,b),n.restore(),L?(x=J5(0,I-E),J&&(f._11o=J,f._9o=Ih(J),F(J,0,l+Z,H,x)),l+=Z+x):l+=Z)}),f._9o);n&&n!==f._11o&&n.endEditing&&n.endEditing(),b&&b!==x&&g_(Q,b),x&&x!==b&&JS(x)}}),Gp.SplitView=function(Q,n,x,b){var J=this,L=J._dividerDiv=p_(),f=J._60O=z_(),V=J._61O=z_(),f=f.style,V=V.style;J._view=h_(1,J),g_(J._view,L),f.msTouchAction=kZ,f.pointerEvents=kZ,f.cursor=TZ,V.msTouchAction=kZ,V.pointerEvents=kZ,V.cursor=TZ,Q&&J.setLeftView(Q),n&&J.setRightView(n),x&&J.setOrientation(x),b!=x5&&J.setPosition(b),J.setStatus(Wi),new Dp(J)},n("SplitView",e,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:b5.splitViewDividerSize,_dividerBackground:b5.splitViewDividerBackground,_dragOpacity:b5.splitViewDragOpacity,_toggleIcon:b5.splitViewToggleIcon,onPropertyChanged:function(Q){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(Q,n){var x=this._position;isNaN(Q)||(n||(this._82O=Q<0?-1:1<Q?1:0),this._position=Q,this.fp(DZ,x,Q))},getLeftView:function(){return this._leftView},setLeftView:function(Q){var n,x=this._leftView,b=this._view;this._leftView!==Q&&(x&&x!==this._rightView&&(n=Ih(x)).parentNode===b&&JS(n),(this._leftView=Q)&&(n=Ih(Q)).parentNode!==b&&b.insertBefore(n,this._dividerDiv),this.fp("leftView",x,Q))},getRightView:function(){return this._rightView},setRightView:function(Q){var n,x=this._rightView,b=this._view;this._rightView!==Q&&(x&&x!==this._leftView&&(n=Ih(x)).parentNode===b&&JS(n),(this._rightView=Q)&&(n=Ih(Q)).parentNode!==b&&b.insertBefore(n,this._dividerDiv),this.fp("rightView",x,Q))},validateImpl:function(){var Q,n,x,b,J=this,L=J._draggable,f=J._position,V=J.getWidth(),l=J.getHeight(),H=J._dividerSize,I=J._dividerBackground,Z=Y5?18:8,E=J._dividerDiv,a=J._82O,o=J._60O,B=J._61O,G=J._toggleIcon,_=J._status,$=E.style,W=null,D=Y5?20:4,A=G.comps[0],u=(Z<=H||0===H?J._coverDiv&&(JS(J._coverDiv),delete J._coverDiv):J._coverDiv||(J._coverDiv=p_(),X5&&(J._coverDiv.style.background=pZ),g_(E,J._coverDiv)),J._togglable?o.parentNode||(g_(E,o),g_(E,B)):(JS(o),JS(B)),J._coverDiv),M=J._leftView,t=J._rightView;n_(J)?(V<H&&(H=V),_===Wi?1===a?(b=L5(f,V),x=J5(0,V-H-b)):-1===a?(x=L5(-f,V),b=J5(0,V-H-x)):(b=M5((V-H)*f),x=J5(0,V-H-b)):"cl"===_?x=J5(b=0,V-H):"cr"===_&&(b=J5(x=0,V-H)),M&&F(M,0,0,b,l),t&&F(t,b+H,0,x,l),F(E,b,0,H,l),J._22o=b,u&&(F(u,H/2-Z/2,0,Z,l),u.style.cursor=L?mZ:""),E.style.cursor=L?mZ:"",x=E.clientHeight/2,b=E.clientWidth,R_(o,b,b),F(o,0,x-b-D,b,b),W=xh(o),bh(W,0,0,1),A.rotation=-w5,jS(W,G,0,0,b,b),W.restore(),R_(B,b,b),F(B,0,x+D,b,b),W=xh(B),bh(W,0,0,1),A.rotation=w5):(l<H&&(H=l),_===Wi?1===a?(Q=L5(f,l),n=J5(0,l-H-Q)):-1===a?(n=L5(-f,l),Q=J5(0,l-H-n)):(Q=M5((l-H)*f),n=J5(0,l-H-Q)):"cl"===_?n=J5(Q=0,l-H):"cr"===_&&(Q=J5(n=0,l-H)),M&&F(M,0,0,V,Q),t&&F(t,0,Q+H,V,n),F(E,0,Q,V,H),J._22o=Q,u&&(F(u,0,H/2-Z/2,V,Z),u.style.cursor=L?YZ:""),$.cursor=L?YZ:"",x=E.clientWidth/2,b=E.clientHeight,R_(o,b,b),F(o,x-b-D,0,b,b),W=xh(o),bh(W,0,0,1),A.rotation=0,jS(W,G,0,0,b,b),W.restore(),R_(B,b,b),F(B,x+D,0,b,b),W=xh(B),bh(W,0,0,1),A.rotation=w),jS(W,G,0,0,b,b),W.restore(),$.background=I}}),function(Q){this.sv=Q,this.addListeners()}),Ap=(HS(Dp,e,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(Q){var n=this.sv,x=n._dividerDiv,b=n._60O,J=n._61O,L=n._status,f=Q.target;f===b?L===Wi?n.setStatus("cl"):"cr"===L&&n.setStatus(Wi):f===J?L===Wi?n.setStatus("cr"):"cl"===L&&n.setStatus(Wi):!Wh(Q)||f!==x&&f!==n._coverDiv||(u7(Q),n.isDraggable()&&(n.getLeftView(),n.getRightView(),(b=this.maskDiv=p_()).style.left=0,b.style.top=0,b.style.width=n.getWidth()+"px",b.style.height=n.getHeight()+"px",n.getView().appendChild(b),n.isContinuousLayout()||((J=this.resizeDiv=p_()).style.left=x.style.left,J.style.top=x.style.top,J.style.width=x.style.width,J.style.height=x.style.height,J.style.opacity=n.getDragOpacity(),J.style.background=n.getDividerBackground(),g_(this.getView(),J)),this._lastAbsPosition=n._22o,this._86o=n_(n)?R7(Q).x:R7(Q).y,bS(this,Q)))},handleWindowTouchMove:function(Q){Wh(Q)&&this.update(Q,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(Q){this.update(Q,!0),this.sv.setStatus(Wi),this.maskDiv&&JS(this.maskDiv),this.resizeDiv&&JS(this.resizeDiv),this.maskDiv=this.resizeDiv=x5},handle_mousedown:function(Q){O7(Q)&&this.handle_touchstart(Q)},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},update:function(Q,n){var x=this.sv,b=n_(x)?x.getWidth():x.getHeight(),J=x._dividerSize,L=this._lastAbsPosition-this._86o;n_(x)?((L=b-J<(L+=R7(Q).x)?b-J:L)<0&&(L=0),this.resizeDiv&&(this.resizeDiv.style.left=L+Zi)):((L=b-J<(L+=R7(Q).y)?b-J:L)<0&&(L=0),this.resizeDiv&&(this.resizeDiv.style.top=L+Zi)),n&&b!==J&&(1===x._82O?x.setPosition(L,1):-1===x._82O?x.setPosition(L-b+J,1):x.setPosition(L/(b-J),1))}}),Gp.TabView=function(){var Q=this,n=Q._view=h_(1,Q),x=Q._91O=p_(1),b=Q._tabModel=new GG,J=b.sm(),L=Q.invalidate;Q._7o=new m,Q._canvas=z_(x),g_(n,x),g_(n,Q._92O=p_(1)),J.setSelectionMode(k5),J.ms(Q.handleSelectionChange,Q),b.mm(L,Q),b.mh(L,Q),b.md(L,Q),Q._interactor=new Ap(Q),Q.iv()},n("TabView",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",hi,di,"tabHPadding","tabBackground","selectWidth",O5,"moveBackground","insertColor"],_tabHPadding:0,_tabPosition:xi,_tabHeight:E7,_tabGap:b5.tabViewTabGap,_labelColor:b5.tabViewLabelColor,_labelFont:b5.tabViewLabelFont,_tabBackground:b5.tabViewTabBackground,_selectWidth:b5.tabViewSelectWidth,_selectBackground:b5.tabViewSelectBackground,_moveBackground:b5.tabViewMoveBackground,_insertColor:b5.tabViewInsertColor,_movable:!0,handleSelectionChange:function(){this._selectionChanged=!0,this.invalidate()},getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(Q,n,x){var b,J=this._tabModel;return Q instanceof _p?(b=Q,n&&b.setView(n)):((b=new _p).setName(Q),b.setView(n)),J.add(b),x&&J.sm().ss(b),b},getLabel:function(Q){return Q.toLabel()},onPropertyChanged:function(Q){this.iv()},_7Q:function(Q){this._23o=Q,this.iv()},get:function(n){var x,b=this,Q=b._tabModel;return L_(n)?Q._roots.get(n):H5(n)?(Q.each(function(Q){n===b.getLabel(Q)&&(x=Q)}),x):n instanceof _p?n:x5},select:function(Q){this._tabModel.sm().ss(this.get(Q))},remove:function(Q){var n;(Q=this.get(Q))&&(n=this._tabModel._roots.indexOf(Q),this._tabModel.remove(Q),this.selectByIndex(--n))},getCurrentTab:function(){return this._8o},hideTabView:function(Q,n){n.parentNode===this._92O&&(B_(n)?(n.style.display=Ii,n._tab_=Q):JS(n),J7())},showTabView:function(Q,n){B_(n)&&(n.style.display="block",n._tab_=Q),n.parentNode!==this._92O&&(g_(this._92O,n),J7())},_24o:function(){var Q,n=this._8o,x=this._9o,b=this._tabModel.sm().ld();(Q=b?Ih(b.getView()):Q)!==x&&(x&&(n.getView()&&n.getView().endEditing&&n.getView().endEditing(),this.hideTabView(n,x)),Q&&this.showTabView(b,Q)),this._8o=b,this._9o=Q,n!==b&&this.onTabChanged(n,b)},onTabClosing:function(Q){return!0},onTabChanged:function(Q,n){},onTabClosed:function(Q,n){this.selectByIndex(--n)},selectByIndex:function(Q){var n=this._tabModel,x=n.size();if(x&&!n.sm().ld()){for(var b=Q=(Q=x<=(Q=Q==x5?0:Q)?x-1:Q)<0?0:Q;0<=b;b--){var J=this.get(b);if(!J.isDisabled())return this.select(J),J}for(b=Q+1;b<x;b++)if(!(J=this.get(b)).isDisabled())return this.select(J),J}},getTabWidth:function(Q){var n=4+2*this.getTabHPadding(),x=g(Q.getIcon());return x&&(n+=kS(x,Q)+4),(x=this.getLabel(Q))&&(n+=v7(this.getLabelFont(Q),x).width+4),Q.isClosable()&&(n+=10),n},drawTab:function(Q,n,x,b,J,L,f){var V,l=this._tabPosition,H=x+4+(W=this.getTabHPadding()),I=this._selectWidth,Z=g(n.getIcon()),E=n.isDisabled(),a=this.getLabelColor(n),o=this.getLabelFont(n),B=this.getLabel(n),G=this._selectBackground,_=l===Qi+"-vertical",$=l===ni+"-vertical",W=((_||$)&&(H=b+4+W),E&&(Q.globalAlpha=jK),Nh(Q,x,b,J,L,f),n===this._8o&&I&&(l===xi?Nh(Q,x,b+L-I,J,I,G):l===Qi?Nh(Q,x+J-I,b,I,L,G):l===ni?Nh(Q,x,b,I,L,G):_?Nh(Q,x+J-I,b,I,L,G):$?Nh(Q,x,b,I,L,G):Nh(Q,x,b,J,I,G)),J/2);return _&&(Jh(Q,W,b+L/2),Lh(Q,w),Jh(Q,-W,-b-L/2)),Z&&(f=NS(Z,n),l=kS(Z,n),_||$?(Jh(Q,I=x+J/2,G=H+f/2),Lh(Q,w5),Jh(Q,-I,-G),t7(Q,Z,x+J/2,H+f/2,n,this),Jh(Q,I,G),Lh(Q,-w5),Jh(Q,-I,-G),H+=f+4):(t7(Q,Z,H+l/2,b+L/2,n,this),H+=l+4)),_||$?(Jh(Q,J/2,H+J/2),Lh(Q,w5),Jh(Q,-J/2,-H-J/2),e7(Q,B,o,a,x,H,L,J),Jh(Q,J/2,H+J/2),Lh(Q,-w5),Jh(Q,-J/2,-H-J/2)):e7(Q,B,o,a,H,b,J,L),_&&(Jh(Q,W,b+L/2),Lh(Q,-w),Jh(Q,-W,-b-L/2)),n.isClosable()&&this.drawCloseIcon(n,Q,a,V=$?{x:x+J-12,y:b+L-12,width:12,height:12}:{x:x+J-12,y:b+2,width:12,height:12}),E&&(Q.globalAlpha=1),V},drawCloseIcon:function(Q,n,x,b){var J=b.x,b=b.y;n.strokeStyle=x,n.lineWidth=1,n.beginPath(),n.moveTo(J+2,b+8),n.lineTo(J+8,b+2),n.moveTo(J+8,b+8),n.lineTo(J+2,b+2),n.stroke()},getTabAt:function(Q){return(Q=this._interactor._8Q(Q))?Q.tab:null},validateImpl:function(){var b=this,Q=(b._24o(),b._canvas),n=b._tabPosition,x=b._91O,J=b._92O,L=b._tabModel,f=b.getWidth(),V=b.getHeight(),l=b._tabHeight,H=b._7o,I=b._tabGap,Z=n===xi,E=n===Qi,a=n===ni,o=n===Qi+"-vertical",n=n===ni+"-vertical",B=b._23o,G=0;if((E||a)&&L._roots.each(function(Q){G=J5(b.getTabWidth(Q),G)}),Z=Z?(F(x,0,0,f,l),{x:0,y:l,width:f,height:J5(0,V-l)}):E?(F(x,0,0,G,V),{x:G,y:0,width:J5(0,f-G),height:V}):a?(F(x,f-G,0,G,V),{x:0,y:0,width:J5(0,f-G),height:V}):o?(F(x,0,0,l,V),{x:l,y:0,width:J5(0,f-l),height:V}):n?(F(x,f-l,0,l,V),{x:0,y:0,width:J5(0,f-l),height:V}):(F(x,0,V-l,f,l),{x:0,y:0,width:f,height:J5(0,V-l)}),F(J,Z),o||n){b._9o&&(Z.x=0,F(b._8o.getView(),Z)),R_(Q,l,V);var _=xh(Q),$=0;if(bh(_,0,b.ty(),1),_.clearRect(0,0,l,V),H.clear(),L._roots.each(function(Q){var n,x;Q.isVisible()&&(n=b.getTabWidth(Q),B&&B.tab===Q||(x=b.getTabBackground(Q),x=b.drawTab(_,Q,0,$,l,n,x)),H.add({_75o:x,tab:Q,startY:$,endY:$+n,height:n}),$+=n+I)}),b._23Q=J5(0,$-I),B&&(A=B.position,b.drawTab(_,B.tab,0,B.startY,l,B.height,b._moveBackground),Nh(_,0,A,l,1,b._insertColor)),_.restore(),b._selectionChanged){b._selectionChanged=!1;for(var W=b.ty(),D=0;D<H.size();D++)if((M=H.get(D)).tab===b._8o){if(M.endY+W<0){b.ty(-M.startY);break}if(M.startY+W>V){b.ty(V-M.endY);break}}}b.ty(b.ty())}else if(E||a){if(b._9o&&(Z.x=0,F(b._8o.getView(),Z)),R_(Q,G,V),_=xh(Q),bh(_,$=0,b.ty(),1),_.clearRect(0,0,G,V),H.clear(),L._roots.each(function(Q){var n;Q.isVisible()&&(B&&B.tab===Q||(n=b.getTabBackground(Q),n=b.drawTab(_,Q,0,$,G,l,n)),H.add({_75o:n,tab:Q,startY:$,endY:$+l,height:l}),$+=l+I)}),b._23Q=J5(0,$-I),B&&(A=B.position,b.drawTab(_,B.tab,0,B.startY,G,B.height,b._moveBackground),Nh(_,0,A,G,1,b._insertColor)),_.restore(),b._selectionChanged)for(b._selectionChanged=!1,W=b.ty(),D=0;D<H.size();D++)if((M=H.get(D)).tab===b._8o){if(M.endY+W<0){b.ty(-M.startY);break}if(M.startY+W>V){b.ty(V-M.endY);break}}b.ty(b.ty())}else{b._9o&&(Z.y=0,F(b._8o.getView(),Z)),R_(Q,f,l);var A,_=xh(Q),u=0;if(bh(_,b.tx(),0,1),_.clearRect(0,0,f,l),H.clear(),L._roots.each(function(Q){var n,x;Q.isVisible()&&(n=b.getTabWidth(Q),B&&B.tab===Q||(x=b.getTabBackground(Q),x=b.drawTab(_,Q,u,0,n,l,x)),H.add({_75o:x,tab:Q,startX:u,endX:u+n,width:n}),u+=n+I)}),b._64I=J5(0,u-I),B&&(A=B.position,b.drawTab(_,B.tab,B.startX,0,B.width,l,b._moveBackground),K_(_,b._insertColor,A,0,l)),_.restore(),b._selectionChanged){b._selectionChanged=!1;for(var M,t=b.tx(),D=0;D<H.size();D++)if((M=H.get(D)).tab===b._8o){if(M.endX+t<0){b.tx(-M.startX);break}if(M.startX+t>f){b.tx(f-M.endX);break}}}b.tx(b.tx())}for(var i=[],r=J.children,D=0;D<r.length;D++){var P=r[D],c=P._tab_;c&&!L.contains(c)&&i.push(P)}i.forEach(function(Q){J.removeChild(Q)})}}),function(Q){this.tv=Q,this.addListeners()}),up=(HS(Ap,e,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta/40*10)},handle_DOMMouseScroll:function(Q){this.handleScroll(Q,10*-Q.detail)},handleScroll:function(Q,n){u7(Q);var x=(Q=this.tv)._tabPosition;!Q._40o()||x!==xi&&x!==bi||Q.tx(this.tv.tx()+n),!Q._41o()||x!==Qi&&x!==ni&&x!==Qi+"-vertical"&&x!==ni+"-vertical"||Q.ty(this.tv.ty()+n)},_8Q:function(Q){var n,x=this.tv,b=x._tabPosition,J=x._7o;if(b===xi||b===bi){for(var L=x.lp(Q).x,f=0;f<J.size();f++)if((n=J.get(f)).startX<=L&&L<=n.endX)return n}else if(b===Qi||b===ni||b===Qi+"-vertical"||b===ni+"-vertical")for(var V=x.lp(Q).y,f=0;f<J.size();f++)if((n=J.get(f)).startY<=V&&V<=n.endY)return n;return x5},isClickable:function(Q){var n=this.tv,x=n._tabPosition,Q=this._73o=this._8Q(Q);return!(!n._40o()||x!==xi&&x!==bi)||!(!n._41o()||x!==Qi&&x!==ni&&x!==Qi+"-vertical"&&x!==ni+"-vertical")||Q&&(!Q.tab.isDisabled()||n.isMovable())},handle_mousemove:function(Q){oh?this._74o=this._8Q(Q):this.getView().style.cursor=this.isClickable(Q)?TZ:""},handle_mousedown:function(Q){this.handle_mousemove(Q),this.handle_touchstart(Q)},handle_touchstart:function(Q){var n=this.tv,x=n._tabPosition;u7(Q),O7(Q)&&this.isClickable(Q)&&(x===xi||x===bi?(this.x=R7(Q).x,this.lp=n.lp(Q),this.tx=n.tx()):(this.y=R7(Q).y,this.lp=n.lp(Q),this.ty=n.ty()),bS(this,Q))},handle_mouseup:function(Q){this.handle_touchend(Q)},handle_touchend:function(Q){var n,x,b;d7(Q)&&(Q=this._73o)&&(n=this.tv,x=n.getTabModel(),!(b=Q.tab).isDisabled()&&b.isClosable()&&n.onTabClosing(b,Q=function(){var Q=x._roots.indexOf(b);x.remove(b),n.onTabClosed(b,Q)})&&Q())},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){var b,J,L,f,n=this,V=n.tv,x=V._tabPosition,l=n._73o;x===xi||x===bi?(J=R7(Q).x-n.x,!n._25o&&!n.moving&&2<P5(J)&&(V._40o()&&!X7(Q)?n._25o=1:l&&V.isMovable()&&(n.moving=1)),n._25o?V.tx(n.tx+J):n.moving&&(b=n.lp.x+J,f=V._tabGap/2,V._7o.each(function(Q){var n=Q.endX,x=b-Q.startX<n-b;b>=Q.startX&&b<=n&&V._7Q({tab:l.tab,startX:l.startX+J,width:l.width,front:x,insertTab:Q.tab,position:x?J5(0,Q.startX-f):L5(V._64I,n+f)})}))):(J=R7(Q).y-n.y,!n._25o&&!n.moving&&2<P5(J)&&(V._41o()&&!X7(Q)?n._25o=1:l&&V.isMovable()&&(n.moving=1)),n._25o?V.ty(n.ty+J):n.moving&&(L=n.lp.y+J,f=V._tabGap/2,V._7o.each(function(Q){var n=Q.endY,x=L-Q.startY<n-L;L>=Q.startY&&L<=n&&V._7Q({tab:l.tab,startY:l.startY+J,height:l.height,front:x,insertTab:Q.tab,position:x?J5(0,Q.startY-f):L5(V._23Q,n+f)})})))},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowTouchEnd:function(Q){var n,x,b,J,L=this,f=L.tv,V=f._tabPosition,l=f.getTabModel(),H=l._roots,I=L._73o;L.moving?((b=f._23o)&&b.insertTab!==b.tab&&(x=b.tab,J=H.remove(x),0<=(n=H.indexOf(b.insertTab))&&(b.front||n++,n<=H.size()&&(H.add(x,n),l._38I(x,J,n)))),f._7Q(x5),delete L.moving):!L._25o&&I&&(x=I.tab,(b=L._74o)&&b.tab!==x||(!x.isDisabled()&&T7(I._75o,L.lp)?f.onTabClosing(x,J=function(){var Q=H.indexOf(x);l.remove(x),f.onTabClosed(x,Q)})&&J():x.isDisabled()||f._8o===x||l.sm().ss(x))),L._25o=L._73o=L._74o=V===xi||V===bi?L.x=L.lp=L.tx=x5:L.y=L.lp=L.ty=x5}}),Gp.PropertyView=function(Q){var n=this,x=(n._view=h_(1,n),n._canvas=z_(n._view),g_(n._view,n._79O=p_()),n._rows=new m,n._28o=new m,n._26o={},n._26Q={},n._propertyModel=new GG),b=n.ivm;x.mm(b,n),x.md(b,n),x.mh(b,n),n.dm(Q||new GG),new up(n)},n("PropertyView",e,{ms_ac:[hi,pi,di,BZ,GZ,"categorizable",JZ,oZ,IZ,ZZ,EZ,xZ,bZ,nZ,"selectRowIndex",O5,"background",LZ,HZ,VZ,lZ,fZ],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:sj,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:I7,_background:b5.propertyViewBackground,_expandIcon:b5.propertyViewExpandIcon,_collapseIcon:b5.propertyViewCollapseIcon,_scrollBarColor:h1,_scrollBarSize:G,_autoHideScrollBar:n7,_selectBackground:b5.propertyViewSelectBackground,_rowHeight:d1,_rowLineVisible:b5.propertyViewRowLineVisible,_rowLineColor:b5.propertyViewRowLineColor,_10I:.5,_columnLineVisible:b5.propertyViewColumnLineVisible,_columnLineColor:b5.propertyViewColumnLineColor,_labelColor:b5.propertyViewLabelColor,_labelSelectColor:b5.propertyViewLabelSelectColor,_labelFont:b5.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(Q){var n=this._10I;this._10I=Q=1<(Q=Q<0?0:Q)?1:Q,this.fp("columnPosition",n,Q)},getPropertyName:function(Q){return Q.toLabel()},getLabelFont:function(Q,n,x){return this._labelFont},getLabelColor:function(Q,n,x){return x===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(Q,n){return this._labelFont},getPropertyColor:function(Q,n){return n===this._selectRowIndex?this._labelSelectColor:Q.getColor()||this._labelColor},getCategoryFont:function(Q){return this._labelFont},getCategoryColor:function(Q){return this._labelColor},adjustTranslateX:function(Q){return 0},adjustTranslateY:function(Q){var n=this.getHeight()-this._59I;return 0<(Q=Q<n?n:Q)?0:M5(Q)},isExpanded:function(Q){if(!Q)return!0;var n=this._26o[Q];return n?n.isExpanded:!(!1===this._26Q[Q])},toggle:function(Q){this.isExpanded(Q)?this.collapse(Q):this.expand(Q)},expandAll:function(){for(var Q in this.validate(),this._26o)this.expand(Q)},expand:function(Q){var n;Q&&Q!==Ii&&(n=this._26o[Q])&&!n.isExpanded&&(n.isExpanded=!0,this.onExpanded(Q),this.ivm())},onExpanded:function(Q){},collapseAll:function(){for(var Q in this.validate(),this._26o)this.collapse(Q)},collapse:function(Q){var n;Q&&Q!==Ii&&(n=this._26o[Q])&&n.isExpanded&&(n.isExpanded=!1,this.onCollapsed(Q),this.ivm())},onCollapsed:function(Q){},getCategoryName:function(Q){return this.isCategorizable()&&(Q=Q.getCategoryName())||Ii},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(Q){var n=this,x=n._dataModel;x!==Q&&(x&&(x.umd(n.handlePropertyChange,n),n._selectionModel||x.sm().ums(n.handleSelectionChange,n)),(n._dataModel=Q).md(n.handlePropertyChange,n),n._selectionModel?n._selectionModel._21I(Q):Q.sm().ms(n.handleSelectionChange,n),n.fp(iZ,x,Q))},isVisible:function(Q){return!this._visibleFunc||this._visibleFunc(Q)},onPropertyChanged:function(Q){Q=Q.property,Zp[Q]?this.ivm():this.iv(),Q===tZ&&this._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:aG},handlePropertyChange:function(Q){this._27o===Q.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){this._96I||(this.setSelectRowIndex(-1),this._96I=1,this.iv())},redraw:function(){this.iv()},validateModel:function(){var Q,b=this,J=b._rows,n=b._28o,L={},f=new m,x=b._27o;for(Q in b.updateCurrentData(),x!==b._27o&&b.endEditing(),J.clear(),n.clear(),b.getRawProperties().each(function(Q){b.isVisible(Q)&&(f.add(Q),Q=b.getCategoryName(Q),L[Q]||(n.add(Q,Q===Ii?0:n5),L[Q]={isExpanded:b.isExpanded(Q),properties:new m}))}),b._sortFunc&&f.sort(b._sortFunc),b._26o)b._26Q[Q]=b.isExpanded(Q);b._26o=L,n.each(function(n){n!==Ii&&J.add(n);var x=L[n];x.isExpanded&&f.each(function(Q){b.getCategoryName(Q)===n&&(x.properties.add(Q),J.add({property:Q,data:b._27o}))},b)})},validateImpl:function(){var Q=this,n=(Q._76o(),Q._96I&&(Q.validateModel(),delete Q._96I),Q._canvas),x=Q.getWidth(),b=Q.getHeight(),J=-Q.ty(),L=Q._rowHeight,f=Q._indent,V=x-f,l=Q._rows,H=l.size(),I=Q._9I=f+V*Q._10I,Z=Q._59I=H*L,E=(R_(n,x,b),Q._29I={x:0,y:J,width:x,height:b},Q._31I=t5(J/L),Q._14I=i5((J+b)/L),Q._31I<0&&(Q._31I=0),Q._14I>H&&(Q._14I=H),xh(n)),a=Q._background;bh(E,0,-J,1),E.beginPath(),E.rect(0,J,x,b),E.clip(),E.clearRect(0,J,x,b),Q._93db(E),a&&Nh(E,0,0,f,Z,a);for(var o=Q._31I;o<Q._14I;o++){var B,G,_,$,W=l.get(o),J=L*o;H5(W)?(a&&Nh(E,f,J,V,L,a),(G=g(Q.isExpanded(W)?Q._expandIcon:Q._collapseIcon))&&i7(E,G,dZ,0,J,f,L),E.save(),E.beginPath(),E.rect(f,J,V,L),E.clip(),Q.drawCategoryName(E,W,o,f,J,V,L),E.restore()):(B=W.property,W=W.data,G=g(B.getIcon()),_=Q._selectRowIndex===o?Q.getSelectBackground():x5,G&&i7(E,G,dZ,0,J,f,L),_&&Nh(E,f,J,V,L,_),E.save(),E.beginPath(),E.rect(f,J,I-f,L),E.clip(),Q.drawPropertyName(E,B,o,f,J,I-f,L),E.restore(),Q.isEditing(W,B)||(_=I+1,$=x-I-1,E.save(),E.beginPath(),E.rect(_,J,$,L),E.clip(),Q._87o(Q.drawPropertyValue(E,B,Q.getValue(W,B),o,_,J,$,L,W),o,_,J,$,L),E.restore())),Q._rowLineVisible&&Nh(E,f,J+L-1,V,1,Q._rowLineColor)}Q._columnLineVisible&&(Nh(E,I,0,1,Z,Q._columnLineColor),Nh(E,x-1,0,1,Z)),Q._92db(E),Q._93I(),E.restore(),Q.ty(Q.ty())},drawCategoryName:function(Q,n,x,b,J,L,f){e7(Q,n,this.getCategoryFont(n),this.getCategoryColor(n),b,J,L,f)},drawPropertyName:function(Q,n,x,b,J,L,f){n.drawPropertyName?n.drawPropertyName(Q,n,x,b,J,L,f,this):e7(Q,this.getPropertyName(n),this.getPropertyFont(n,x),this.getPropertyColor(n,x),b,J,L,f)},drawPropertyValue:function(Q,n,x,b,J,L,f,V,l){if(n.drawPropertyValue)return n.drawPropertyValue(Q,n,x,b,J,L,f,V,l,this);ap(Q,x,n,this.getLabelFont(n,x,b),this.getLabelColor(n,x,b),J,L,f,V,l,this)},isPropertyEditable:function(Q,n){return Q.isEditable()&&this.isEditable()},setProperties:function(Q){this._propertyModel.clear(),this.addProperties(Q)},addProperties:function(Q){var x;Q&&(x=this._propertyModel,Q.forEach(function(Q){var n;Q instanceof Wp||(n=w7(Q.className),Q=A7(n||Wp,Q)),x.add(Q)}))},getRowIndexAt:function(Q){return 0<=(Q=t5(this.lp(Q).y/this._rowHeight))&&Q<this._rows.size()?Q:-1},getPropertyAt:function(Q){return 0<=(Q=this.getRowIndexAt(Q))?this._rows.get(Q).property:x5},getToolTip:function(Q){var n=this.getPropertyAt(Q),x=this._27o;return n&&x?n.getToolTip(x,this._9I<this.lp(Q).x,this):x5}}),function(Q){this.pv=Q,this.addListeners()}),Mp=(HS(up,e,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(Q){this.getView().style.cursor=Q},clear:function(){this._62O=this.cp=this.ty=this.p=x5,this.setCursor(T5)},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_touchstart:function(Q){var n=this.pv;u7(Q),n.setFocus(Q)&&(O7(Q)?(this.cp=R7(Q),this.ty=n.ty(),this.p=n.getColumnPosition(),this.handle_touchmove(Q)):n.setSelectRowIndex(n.getRowIndexAt(Q)))},handleWindowMouseUp:function(Q){this.clear()},handleWindowTouchEnd:function(Q){this.clear()},handle_mouseup:function(Q){this.handle_touchend(Q)},handle_touchend:function(Q){var n,x,b,J,L,f,V,l,H,I;this.cp&&!this._62O&&(H=(l=(n=this.pv).lp(Q)).x,l=l.y,V=n._indent,x=n.getRowIndexAt(Q),b=n._9I,0<=x&&(I=(J=n._rowHeight)*x,f=(L=n._rows.get(x)).property,H5(L)?(g(n.isExpanded(L)?n._expandIcon:n._collapseIcon)&&0<=H&&H<=V&&I<=l&&l<=I+J||z7(Q))&&n.toggle(L):b<H&&n.isPropertyEditable(f,Q)&&(l={x:(V={x:b+1,y:I,width:n.getWidth()-b-1,height:J}).x+n.tx(),y:V.y+n.ty(),width:V.width,height:V.height},H=0,I=n._29I,V.y<I.y?H=V.y-I.y:V.y+J>I.y+I.height&&(H=V.y+J-I.y-I.height),H&&(n.ty(n.ty()-H),l.y-=H),n.beginEditing({data:L.data,property:f,value:n.getValue(L.data,f),event:Q,rect:V,editorRect:l,view:n}))),n.setSelectRowIndex(x)),this.clear()},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){var n,x,b=this.pv,J=this.ty,L=this.cp,Q=R7(Q),f=this._62O;"p"===f?b.setTranslateY(J+Q.y-L.y):"c"===f?16<(x=b.getWidth()-b._indent)&&(n=this.p-(L.x-Q.x)/x,b.setColumnPosition(n=1-(x=16/x)<(n=n<x?x:n)?1-x:n)):"s"===f&&b.setTranslateY(J+(L.y-Q.y)*b._59I/b._29I.height)},handle_mousemove:function(Q){this.handle_touchmove(Q)},handle_touchmove:function(Q){var n,x,b;!oh&&O7(Q)&&(x=(n=this).pv,b=P5(x.lp(Q).x-x._9I)<=(Y5?8:3),n.cp?n._62O||(b?(n._62O="c",bS(n,Q)):2<=P5(R7(Q).y-n.cp.y)&&(n._62O=n.isV(Q)?"s":"p",bS(n,Q))):(b?n.setCursor(mZ):n.setCursor(T5),n.isV(Q)&&x._43o()))},isV:function(Q){var n=this.pv,x=n._29I;return n._41o()&&x.x+x.width-n.lp(Q).x<B7},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta/40)},handle_DOMMouseScroll:function(Q){2===Q.axis&&this.handleScroll(Q,-Q.detail)},handleScroll:function(Q,n){var x=this.pv;u7(Q),x.endEditing(),x.translate(0,n*x.getRowHeight())},handle_keydown:function(Q){var n=this.pv,x=n._rows.size(),b=n._selectRowIndex+(ch(Q)?-1:1);(ch(Q)||qh(Q))&&n.setSelectRowIndex(b=x<=(b=b<0?0:b)?x-1:b)}}),Gp.ListView=function(Q){this._5o(Q),new Mp(this)},n("ListView",e,{ms_ac:[hi,pi,di,LZ,JZ,HZ,VZ,oZ,IZ,xZ,bZ,nZ,QZ,O5],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:I7,_rowHeight:d1,_rowLineVisible:b5.listViewRowLineVisible,_rowLineColor:b5.listViewRowLineColor,_scrollBarColor:h1,_scrollBarSize:G,_autoMakeVisible:s1,_autoHideScrollBar:n7,_selectBackground:b5.listViewSelectBackground,_labelColor:b5.listViewLabelColor,_labelSelectColor:b5.listViewLabelSelectColor,_labelFont:b5.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(Q){var n=this._checkMode;this._checkMode=Q,this.fp(aZ,n,Q)},drawRow:function(Q,n,x,b,J,L,f){var V=0,l=this._indent,H=this.getIconWidth(n);this.drawRowBackground(Q,n,x,b,J,L,f),this._checkMode&&(t7(Q,g(this.getCheckIcon(n)),V+l/2,J+f/2,n,this),V+=l),this.drawIcon(Q,n,V,J,H,f),this.drawLabel(Q,n,V+H,J,f)}}),function(Q){this.list=Q,this.addListeners()}),tp=(HS(Mp,e,{ms_listener:1,getView:function(){return this.list._view},clear:function(Q){var n=this,x=n.list;Q&&"d"===n._62O&&!n.dragCancel&&x.handleDragAndDrop(Q,"end"),x.draggingData&&(x.draggingData=null,x.redraw()),n.dragCancel=n._62O=n._isV=n._isH=n.cp=n.tx=n.ty=x5},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_touchstart:function(Q){var n,x=this.list;u7(Q),x.setFocus(Q)&&(n=x.getDataAt(Q),this.cp=R7(Q),this.tx=x.tx(),this.ty=x.ty(),O7(Q)?n&&x.handleDragAndDrop&&!this.isV(Q)&&!this.isH(Q)&&x.isDraggable(n)&&(x.draggingData=n,x.redraw(),x.handleDragAndDrop(Q,"prepare")):(n?this._33o(Q,n):this._cancelDataDoubleSelect(),this.clear(Q)))},handleWindowMouseUp:function(Q){this.clear(Q)},handleWindowTouchEnd:function(Q){this.clear(Q)},handle_mouseup:function(Q){this.handle_touchend(Q)},handle_touchend:function(Q){var n,x=this.list;this._isV||this._isH||!this.cp||this._62O||((n=x.getDataAt(Q))?(x.isCheckMode()?this._34o(Q,n):this._33o(Q,n),z7(Q)?x.onDataDoubleClicked(n,Q):x.onDataClicked(n,Q)):(this._cancelDataDoubleSelect(),x.handleBackgroundClick(Q))),this.clear(Q)},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){var n=this.list,x=this._62O,b=this.tx,J=this.ty,L=this.cp,f=R7(Q),V=n._29I;"p"===x?n.setTranslate(b+f.x-L.x,J+f.y-L.y):"v"===x?n.ty(J+(L.y-f.y)*n._59I/V.height):"h"===x?n.tx(b+(L.x-f.x)*n._91I/V.width):"d"!==x||this.dragCancel||n.handleDragAndDrop(Q,"between")},handle_mousemove:function(Q){this.handle_touchmove(Q)},handle_touchmove:function(Q){var n,x;!oh&&O7(Q)&&(x=(n=this).list,n._isV=n.isV(Q),n._isH=n.isH(Q),n.cp?n._62O||S7(R7(Q),n.cp)<2||(n._isV?n._62O="v":n._isH?n._62O="h":x.draggingData&&!this.dragCancel?(n._62O="d",x.handleDragAndDrop(Q,"begin")):n._62O="p",n._62O&&"d"!==n._62O&&x.draggingData&&(x.draggingData=null,x.redraw()),bS(n,Q)):(n._isV&&x._43o(),n._isH&&x._42o()))},isV:function(Q){var n=this.list,x=n._29I;return n._41o()&&x.x+x.width-n.lp(Q).x<B7},isH:function(Q){var n=this.list,x=n._29I;return n._40o()&&x.y+x.height-n.lp(Q).y<B7},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta/40,Q.wheelDelta!==Q.wheelDeltaX)},handle_DOMMouseScroll:function(Q){this.handleScroll(Q,-Q.detail,1)},handleScroll:function(Q,n,x){var b=this.list;u7(Q),b.endEditing&&b.endEditing(),x&&b._41o()?b.translate(0,n*b.getRowHeight()):b._40o()&&b.translate(10*n,0)},handle_keydown:function(Q){var n,x,b,J,L,f,V;b5.isInput(Q.target)||(x=(n=this.list).sm(),J=(b=n._rows).size(),Ah(Q)?n.selectAll():uh(Q)?n.handleDelete&&n.handleDelete(Q):Kh(Q)?"d"!==this._62O||this.dragCancel||(n.handleDragAndDrop(Q,"cancel"),this.dragCancel=!0):wh(Q)?n.isCheckMode()&&(V=n.getFocusData())&&n.checkData(V):(ch(Q)||qh(Q))&&((V=(L=n.isCheckMode())?n.getFocusData():x.ld())?0<=(f=n.getRowIndex(V))&&(ch(Q)?0!==f&&(V=b.get(f-1),L?n.setFocusData(V):x.ss(V)):f!==J-1&&(V=b.get(f+1),L?n.setFocusData(V):x.ss(V))):0<J&&(V=b.get(0),L?n.setFocusData(V):x.ss(V))))},_34o:function(Q,n){var x=this.list;0<=(Q=x.lp(Q).x)&&Q<=x._indent?x.checkData(n):x.setFocusData(n)},_33o:function(Q,n){var x=this.list,b=x.sm(),J=b.ld();if(x.canHandleSelectMode(Q,n))if(X7(Q))x.isSelected(n)?b.rs(n):b.as(n);else if(s7(Q))if(J)for(var L=x.getRowIndex(J),f=x.getRowIndex(n);L!==f;)b.as(x._rows.get(L+=L<f?1:-1));else b.ss(n);else O7(Q)?(b.contains(n)?x.handleDataDoubleSelect&&(this._handleDataDoubleSelect(Q,n),z7(Q)&&this._cancelDataDoubleSelect()):this._cancelDataDoubleSelect(),b.ss(n)):b.contains(n)||b.ss(n);else this._cancelDataDoubleSelect()},_handleDataDoubleSelect:function(Q,n){this._cancelDataDoubleSelect(),this._doubleSelectTimer=h5(function(){this.list.handleDataDoubleSelect(Q,n),this._doubleSelectTimer=n5}.bind(this),b5.doubleClickSpeed)},_cancelDataDoubleSelect:function(){this._doubleSelectTimer&&(p5(this._doubleSelectTimer),this._doubleSelectTimer=n5)}}),Gp.TreeView=function(Q){this._35o(),this._5o(Q),new tp(this)},n("TreeView",e,{ms_ac:[hi,pi,di,"rootVisible",aZ,"rootData",oZ,IZ,xZ,bZ,nZ,JZ,LZ,HZ,VZ,ZZ,EZ,QZ,O5,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:x5,_indent:I7,_rowHeight:d1,_rowLineVisible:b5.treeViewRowLineVisible,_rowLineColor:b5.treeViewRowLineColor,_scrollBarColor:h1,_scrollBarSize:G,_autoHideScrollBar:n7,_expandIcon:b5.treeViewExpandIcon,_collapseIcon:b5.treeViewCollapseIcon,_autoMakeVisible:s1,_selectBackground:b5.treeViewSelectBackground,_labelColor:b5.treeViewLabelColor,_labelSelectColor:b5.treeViewLabelSelectColor,_labelFont:b5.treeViewLabelFont,_doubleClickToToggle:b5.treeViewDoubleClickToToggle,drawRow:function(Q,n,x,b,J,L,f){this.drawRowBackground(Q,n,x,b,J,L,f),this.drawTree(Q,n,x,0,J,L,f)},isOnToggleIcon:function(Q){var n=this.getDataAt(Q);if(n){var x=this.getIndent(),Q=this.lp(Q).x;if(g(this.getToggleIcon(n))&&(n=x*this.getLevel(n))<=Q&&Q<=n+x)return!0}return!1}}),function(Q){u_(tp,this,[Q])}),ip=(HS(tp,Mp,{toggle:function(Q,n,x,b){var J=this.list,L=J.lp(Q).x;return g(J.getToggleIcon(n))&&(b*=x)<=L&&L<=b+x?(J.toggle(n),!0):!(!J.isDoubleClickToToggle()||!z7(Q)||(J.toggle(n),0))},_34o:function(Q,n){var x=this.list,b=x.lp(Q).x,J=x._levelMap[n._id],L=x._indent,f=L*(J+1);f<=b&&b<=f+L?x.checkData(n):this.toggle(Q,n,L,J)||x.setFocusData(n)},_33o:function(Q,n){var x=this.list;if(!this.toggle(Q,n,x._indent,x.getLevel(n)))if(s7(Q)){var b=x.sm();if(0<b.size()){for(var J=x._rows,L=null,f=0,V=J.size();f<V;f++)if(x.isSelected(J.get(f))){L=f;break}for(var l=null,f=J.size()-1;0<=f;f--)if(x.isSelected(J.get(f))){l=f;break}for(var H,I=x.getRowIndex(n),Z=I<L?(H=I-1,L):l<I?(H=l,I):(H=L,l);H!==Z;)b.as(x._rows.get(++H))}else b.ss(n)}else tp.superClass._33o.call(this,Q,n)},handle_keydown:function(Q){var n,x,b,J,L;Ph(Q)||Fh(Q)?(x=(n=this.list)._rows,b=n.isCheckMode(),J=n.sm(),(L=b?n.getFocusData():J.ld())?L.hasChildren()&&(Ph(Q)?n.collapse(L):n.expand(L)):0<x.size()&&(L=x.get(0),b?n.setFocusData(L):J.ss(L))):tp.superClass.handle_keydown.call(this,Q)}}),Gp.TableView=function(Q){this._98I(),this._5o(Q),new rp(this)}),rp=(n("TableView",e,{ms_ac:[hi,pi,di,"sortMode",BZ,GZ,LZ,HZ,VZ,lZ,fZ,"sortColumn",oZ,IZ,xZ,bZ,nZ,QZ,O5],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:_Z,_editable:!0,_batchEditable:!1,_rowHeight:d1,_rowLineVisible:b5.tableViewRowLineVisible,_rowLineColor:b5.tableViewRowLineColor,_columnLineVisible:b5.tableViewColumnLineVisible,_columnLineColor:b5.tableViewColumnLineColor,_scrollBarColor:h1,_scrollBarSize:G,_autoHideScrollBar:n7,_autoMakeVisible:s1,_selectBackground:b5.tableViewSelectBackground,_labelColor:b5.tableViewLabelColor,_labelSelectColor:b5.tableViewLabelSelectColor,_labelFont:b5.tableViewLabelFont,getCheckColumn:function(){var Q;return this._31o||((Q=this._31o=new $p).setEditable(!0),Q.setWidth(40),Q.getValue=this.getCheckColumValue,Q.drawCell=this.drawCheckColumnCell),this._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(Q){var n=this._39o,x=this.getCheckColumn();Q!==this.isCheckMode()&&(Q?n.add(x,0):n.remove(x),this.fp(aZ,!Q,Q))},getCheckColumValue:function(Q,n,x){return x.isSelected(Q)},drawCheckColumnCell:function(Q,n,x,b,J,L,f,V,l){t7(Q,l.getCheckIcon(n),J+f/2,L+V/2,n,l)}}),function(Q){u_(rp,this,[Q])}),Pp=(HS(rp,Mp,{_34o:function(Q,n){var x=this.list,b=x._31o;if(x.isCellEditable(n,b,Q)){var J=x._3Q(b),L=x.lp(Q).x;if(J&&L>=J.startX&&L<J.startX+b.getWidth())return void x.checkData(n)}x._37O(n,Q),x.setFocusData(n)},_33o:function(Q,n){this.list._37O(n,Q),rp.superClass._33o.apply(this,arguments)}}),Gp.TreeTableView=function(Q){var n=this._4o=new $p;this._35o(),this._98I(),this._5o(Q),n.setDisplayName("Name"),n.setEditable(!0),n.setWidth(180),n.drawCell=cp,n.getValue=Fp,this._39o.add(n),new qp(this)}),cp=function(Q,n,x,b,J,L,f,V,l){l.drawTree(Q,n,x,J,L,f,V)},Fp=function(Q,n,x){return x.getLabel(Q)},qp=(n("TreeTableView",e,{ms_ac:[hi,pi,di,"sortMode",BZ,GZ,JZ,aZ,"rootData","rootVisible",oZ,IZ,"sortColumn",ZZ,EZ,xZ,bZ,nZ,QZ,VZ,LZ,HZ,lZ,fZ,O5,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:_Z,_checkMode:x5,_editable:!0,_batchEditable:!1,_indent:I7,_rowHeight:d1,_rowLineVisible:b5.treeTableViewRowLineVisible,_rowLineColor:b5.treeTableViewRowLineColor,_columnLineVisible:b5.treeTableViewColumnLineVisible,_columnLineColor:b5.treeTableViewColumnLineColor,_expandIcon:b5.treeTableViewExpandIcon,_collapseIcon:b5.treeTableViewCollapseIcon,_scrollBarColor:h1,_scrollBarSize:G,_autoHideScrollBar:n7,_autoMakeVisible:s1,_selectBackground:b5.treeTableViewSelectBackground,_labelColor:b5.treeTableViewLabelColor,_labelSelectColor:b5.treeTableViewLabelSelectColor,_labelFont:b5.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}}),function(Q){u_(qp,this,[Q])}),wp=(HS(qp,Mp,{_34o:function(Q,n){var x=this.list,b=x._4o,J=x._3Q(b),L=x.lp(Q).x;if(J){var f=x._indent,J=J.startX+f*x.getLevel(n);if(g(x.getToggleIcon(n))&&J<=L&&L<=J+f)return void x.toggle(n);if(x.isCellEditable(n,b)&&(J+=f)<=L&&L<=J+f)return void x.checkData(n)}x._37O(n,Q),x.setFocusData(n)},_33o:function(Q,n){var x=this.list,b=x.lp(Q).x;if(g(x.getToggleIcon(n))&&(J=x._3Q(x._4o))){var J,L=x._indent;if((J=J.startX+L*x.getLevel(n))<=b&&b<=J+L)return void x.toggle(n)}x._37O(n,Q),qp.superClass._33o.apply(this,arguments)}}),Gp.TableHeader=function(Q){var n=this,x=n._view=h_(1,n),b=n._39o=Q.getColumnModel(),J=n.iv;n.tv=n._tableView=Q,n._60I=new m,n._canvas=z_(x),x.style.background=b5.tableHeaderBackground||"",x.style.height=Z7+Zi,b.mm(J,n),b.md(J,n),b.mh(J,n),Q.mp(function(Q){Vp[Q.property]&&n.iv()},n),new yp(n),n.iv()}),yp=(n("TableHeader",e,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",hi,di,JZ,"moveBackground","insertColor",lZ,fZ,"resizable","movable"],_checkIcon:ri,_movable:!0,_resizable:!0,_labelColor:b5.tableHeaderLabelColor,_labelFont:b5.tableHeaderLabelFont,_columnLineColor:b5.tableHeaderColumnLineColor,_columnLineVisible:b5.tableHeaderColumnLineVisible,_sortDescIcon:b5.tableHeaderSortDescIcon,_sortAscIcon:b5.tableHeaderSortAscIcon,_moveBackground:b5.tableHeaderMoveBackground,_insertColor:b5.tableHeaderInsertColor,_indent:I7,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(Q){return Q.toLabel()},getLabelFont:function(Q){return this._labelFont},getLabelColor:function(Q){return Q.getColor()||this._labelColor},getLabelAlign:function(Q){return Q._align},onPropertyChanged:function(Q){this.iv()},_5Q:function(Q){this._61I=Q,this.iv()},getLogicalPoint:function(Q){return nS(Q,this._canvas,this.tv.tx())},validateImpl:function(){var Q,b=this,n=b._canvas,x=b.getWidth(),J=b.getHeight(),L=b.tv,f=b._60I,V=b._61I,l=-L.tx(),H=0,I=(x===n.clientWidth&&J===n.clientHeight||R_(n,x,J),f.clear(),b._39o._roots.each(function(Q){var n;Q.isVisible()&&(n=H+Q.getWidth(),H<=l+x&&l<=n&&f.add({column:Q,startX:H}),H=n)}),xh(n));bh(I,-l,0,1),I.beginPath(),I.rect(l,0,x,J),I.clip(),I.clearRect(l,0,x,J),f.each(function(Q){var n=Q.column,Q=Q.startX,x=n.getWidth();0<x&&(I.save(),I.beginPath(),I.rect(Q,0,x,J),I.clip(),V&&V.column===n||b.drawColumn(I,n,Q,0,x,J),b._columnLineVisible&&Nh(I,Q+x-1,0,1,J,b._columnLineColor),I.restore())}),V&&(L=V.column,H=V.startX,n=V.position,Q=L.getWidth(),I.save(),I.beginPath(),I.rect(H,0,Q,J),I.clip(),I.fillStyle=b._moveBackground,I.fill(),b.drawColumn(I,L,H,0,Q,J),I.restore(),K_(I,b._insertColor,n,0,J)),I.restore()},_6Q:function(Q){var n=this.tv;return n._31o===Q&&n.sm().getSelectionMode()===N5},drawColumn:function(Q,n,x,b,J,L){var f,V,l,H,I,Z=this,E=Z.tv,a=g(n.getIcon()),o=Z.getLabelAlign(n);Z._6Q(n)?(I=g(Z._checkIcon),t7(Q,I,x+J/2,b+L/2,n,Z)):(I=Z.getLabel(n),f=Z.getLabelFont(n),V=Z.getLabelColor(n),l=v7(f,I).width,H=a?Z._indent:0,o===Qi?(a&&i7(Q,a,dZ,x,b,H,L),e7(Q,I,f,V,x+H,b,J,L,Qi)):o===ni?(a&&i7(Q,a,dZ,x+J-l-H,b,H,L),e7(Q,I,f,V,x,b,J,L,ni)):(a&&i7(Q,a,dZ,x+(J-l-H)/2,b,H,L),e7(Q,I,f,V,x+(J-l+H)/2,b,0,L,Qi))),n.isSortable()&&E.getSortColumn()===n&&(a=g(n.getSortOrder()===$Z?Z._sortAscIcon:Z._sortDescIcon))&&(I=kS(a,n)/2+2,t7(Q,a,o===ni?x+I:x+J-I,b+L/2,n,E))}}),function(Q){this.th=Q,this.tv=Q._tableView,this.addListeners()}),Kp=(HS(yp,e,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(Q){this.getView().style.cursor=Q},handle_mousemove:function(Q){if(!oh){delete this._29o,this.setCursor(T5);for(var n=this.th,x=n._60I,b=n.lp(Q).x,J=x.size()-1;0<=J;J--){var L=x.get(J),f=L.column,V=L.startX+f.getWidth();if(n.isResizable()&&P5(V-b)<=(Y5?10:3))return this._29o=L,void this.setCursor(mZ);b>L.startX&&b<V&&(this._29o=L),(f.isClickable()||f.isSortable()||n.isMovable()||this.tv.getCheckColumn&&f===this.tv.getCheckColumn())&&b>L.startX&&b<V&&this.setCursor(TZ)}}},handle_mousedown:function(Q){this.handle_touchstart(Q)},handle_touchstart:function(Q){u7(Q),this.tv.endEditing(),this.handle_mousemove(Q),this._29o&&(this.x=R7(Q).x,this.lx=this.th.lp(Q).x,this.w=this._29o.column.getWidth(),bS(this,Q))},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){var b,n=this,J=n.th,x=n.getView().style.cursor,L=n._29o,f=R7(Q).x-n.x;n.resizing||n.moving||(x===mZ?n.resizing=1:J.isMovable()&&x===TZ&&2<P5(f)&&(n.moving=1)),n.resizing?L.column.setWidth(n.w+f):n.moving&&(b=n.lx+f,J._60I.each(function(Q){var n=Q.startX,x=n+Q.column.getWidth();n<=b&&b<=x&&((Q={column:L.column,startX:L.startX+f,front:b-n<x-b,insertColumn:Q.column}).front?Q.position=n:Q.position=x,J._5Q(Q))}))},_16Q:function(Q,n){var x=this.tv,b=this.th,J=b._checkIcon;if(b._6Q(Q)){var L=g(J),f=this.lx,V=Q.getWidth();if(n+V/2-(L=kS(L,Q))<=f&&f<=n+V/2+L)return b.setCheckIcon(J===ii?ri:ii),f=x.sm(),n=x._rows,J===ii?f.rs(n):f.ss(n),x.onCheckColumnClicked(Q),!0}return!1},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowTouchEnd:function(Q){var n,x,b,J,L,f=this,V=f.tv,l=f.th,H=f._29o;f.moving?((x=l._61I)&&x.insertColumn!==x.column&&(n=x.column,J=(b=V.getColumnModel()._roots).remove(n),0<=(L=b.indexOf(x.insertColumn))&&(x.front||L++,L<=b.size()&&(b.add(n,L),V.getColumnModel()._38I(n,J,L)))),l._5Q(x5),delete f.moving):!f.resizing&&H&&(n=H.column,x=l.lp(Q).x,b=H.startX,J=!0,(J=(!l.onColumnClicked||!1!==l.onColumnClicked(n,Q,b))&&J)&&b<=x&&x<=b+n.getWidth()&&(f._16Q(n,b)||(n.isSortable()&&(L=V.getSortMode(),H=n.getSortOrder(),L===_Z?V.getSortColumn()===n?(H===WZ&&V.setSortColumn(x5),n.setSortOrder(H===$Z?WZ:$Z)):V.setSortColumn(n):"bistate"===L&&(V.getSortColumn()===n?n.setSortOrder(H===$Z?WZ:$Z):V.setSortColumn(n))),V.onColumnClicked(n,Q,b)))),f._29o=f.resizing=f.x=f.lx=f.w=x5}}),Gp.TablePane=function(Q){this.init(new ip(Q))},n("TablePane",e,{ms_v:1,_44o:1}),Gp.TreeTablePane=function(Q){this.init(new Pp(Q))},n("TreeTablePane",e,{ms_v:1,_44o:1}),Gp.Toolbar=function(Q){var b=this,n=b._view=h_(1,b),x=n.style;x.background=b5.toolbarBackground||"",x.height=E7+Zi,b._canvas=z_(n),b._30o=new m,b._90I=new m,b.setItems(Q||[]),n.handleGroupSelectedChanged=function(n){var x;n.isSelected()&&null!=(x=n.getGroupId())&&b._items.forEach(function(Q){(Q=Q.element)&&Q!==n&&Q.setSelected&&Q.getGroupId&&Q.getGroupId()===x&&Q.setSelected(!1)})},new Kp(b)},n("Toolbar",e,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[$i,hi,di,pi,O5,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:b5.toolbarLabelColor,_labelSelectColor:b5.toolbarLabelSelectColor,_labelFont:b5.toolbarLabelFont,_selectBackground:b5.toolbarSelectBackground,_itemGap:b5.toolbarItemGap,_separatorColor:b5.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(Q){return this._64I},getToolTip:function(Q){return(Q=this.getItemInfoAt(Q))?Q.item.toolTip:x5},getLabelColor:function(Q){return Q&&Q.selected&&Q.type!==ii&&"radio"!==Q.type?this._labelSelectColor:this._labelColor},onPropertyChanged:function(Q){this.iv(),Q.property===$i&&this._items.forEach(function(Q){d_(Q)})},redraw:function(){this.iv()},addItem:function(Q,n){var x=this._items;n==x5?x.push(Q):x.splice(n,0,Q),this.fp($i,x5,x)},removeItem:function(Q){if(Q)for(var n=this._items,x=0;x<n.length;x++)Q===n[x]&&(n.splice(x,1),this.fp($i,x5,n))},removeItemById:function(Q){if(Q!=x5)for(var n,x=this._items,b=0;b<x.length;b++)if(Q===x[b].id)return n=x.splice(b,1)[0],this.fp($i,x5,x),n},getItemById:function(Q){if(Q!=x5)for(var n=this._items,x=0;x<n.length;x++){var b=n[x];if(Q===b.id)return b}},setItemVisible:function(Q,n){(Q=this.getItemById(Q))&&(Q.visible=n)},getItemInfos:function(){return this._30o},getItemInfoAt:function(Q){var n=0,x=this._30o,b=(Q=this.lp(Q)).x;if(0<=(Q=Q.y)&&Q<=this.getHeight())for(;n<x.size();n++){var J=x.get(n);if(J.startX<=b&&b<=J.endX)return J}return x5},drawItem:function(Q,n,x,b,J){if(!1===n.visible)return 0;if(l_(n.visible)&&!n.visible())return 0;var L=n.disabled,J=(L&&(Q.globalAlpha=jK),this.drawItemImpl(Q,n,x,b,J)),f=this._itemGap;return L&&(Q.globalAlpha=1),this._currentItem!==n||"separator"===n||!0===n.separator||n.unfocusable||f1(Q,this._separatorColor,x-f/2,0,J+f,b),J},drawItemImpl:function(Q,n,x,b,J){var L,f,V=this,l=V._view,H=V._itemGap,I=b/2,Z=n.type,E=n.element,a=n.label,o=(H5(E)&&(a=E,E=x5),V.getLabelFont(n)),B=V.getLabelColor(n),G=n.selected,_=g(n.icon),$=kS(_,n),W=$+(a?v7(o,a).width:0);return"separator"===n||!0===n.separator?(K_(Q,V._separatorColor,x,b/4,I),1):E?(_&&t7(Q,_,x+$/2,I,n,V),e7(Q,a,o,B,x+$,0,0,b),f=Ih(E),J||V._90I.add(f),f.parentNode!==l&&g_(l,f),E.iv&&E.iv(),E.validate&&E.validate(),l=(J=f.getBoundingClientRect()).width,E=f.style,X_(f),E.left=V.tx()+x+W+Zi,E.top=(b-J.height)/2+Zi,W+l):("radio"===Z?L=g(G?Pi:ci):Z===ii&&(L=g(G?ii:ri)),L?(f=kS(L,n),t7(Q,L,x+f/2,I,n,V),x+=f,W+=f):G&&Nh(Q,x-H/2,0,W+H,b,V.getSelectBackground(n)),_&&t7(Q,_,x+$/2,I,n,V),e7(Q,a,o,B,x+$,0,0,b),W)},validateImpl:function(){var x=this,Q=x._canvas,n=x.getWidth(),b=x.getHeight(),J=x._30o,L=x._items,f=(R_(Q,n,b),xh(Q)),V=x._itemGap,l=V/2,H=(bh(f,x.tx(),0,1),f.clearRect(0,0,n,b),x._90I),H=(x._90I=new m,J.clear(),L.forEach(function(Q){var n=x.drawItem(f,Q,l,b);J.add({item:Q,startX:l,endX:l+n,width:n}),n&&(l+=n+V)}),H.each(function(Q){x._90I.contains(Q)||JS(Q)}),x._64I);x._64I=J5(0,l-V/2),f.restore(),x._stickToRight?(x._65O=0,f=xh(Q),l=n-x._64I+V/2,bh(f,0,0,1),f.clearRect(0,0,n,b),J.clear(),L.forEach(function(Q){var n=x.drawItem(f,Q,l,b,!0);J.add({item:Q,startX:l,endX:l+n,width:n}),n&&(l+=n+V)}),f.restore()):x.tx(x.tx()),H!==x._64I&&x.onSumWidthChanged(H,x._64I)},onSumWidthChanged:function(Q,n){},handleClick:function(n,Q){var x=n.type,b=n.action,J=n.groupId,L=n.selected;n.disabled||(J!=x5?L||(n.selected=!0,this._items.forEach(function(Q){Q.groupId===J&&n!==Q&&(Q.selected=!1)}),b&&n.action(n,this,Q)):(x!==ii&&"toggle"!==x||(n.selected=!L),b&&n.action(n,this,Q))),J7(),this.iv()}}),function(Q){this.tb=Q,this.addListeners()});HS(Kp,e,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta/40*10)},handle_DOMMouseScroll:function(Q){this.handleScroll(Q,10*-Q.detail)},handleScroll:function(Q,n){u7(Q),(Q=this.tb).isScrollable()&&!Q._stickToRight&&(Q.tx(Q.tx()+n),ah())},handle_mousemove:function(Q){oh||this.setItem(Q)},handle_mouseout:function(Q){Q.target===this.getView()?this.tb.setCurrentItem(x5):this.handle_mousemove(Q)},handle_mousedown:function(Q){this.handle_mousemove(Q),this.handle_touchstart(Q)},handle_touchstart:function(Q){var n=this.tb,x=Q.target;!O7(Q)||x!==this.getView()&&x!==n._canvas||(u7(Q),n.setFocus(Q)&&(this.setItem(Q,!0),(n.isScrollable()||this.info&&!this.info.item.disabled)&&(this.x=R7(Q).x,this.tx=n.tx(),bS(this,Q))))},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(Q){var n=this.tb;n._stickToRight||(Q=R7(Q).x-this.x,!this._25o&&2<P5(Q)&&n.isScrollable()&&(this._25o=1),this._25o&&n.tx(this.tx+Q))},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowTouchEnd:function(Q){var n=this.tb,x=this.info,b=this.tb.getItemInfoAt(Q);!this._25o&&x&&(x=x.item,b&&b.item===x&&n.handleClick(x,Q)),this._25o=this.x=this.tx=x5,this.setItem()},setItem:function(Q,n){var x=this.tb,b=(b=this.info=Q?x.getItemInfoAt(Q):x5)?b.item:x5;x.setCurrentItem(b),n&&b&&l_(b.onDown)&&b.onDown(Q)}}),Gp.BorderPane=function(){this._view=h_(1,this),this.iv()},n("BorderPane",e,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(Q,n){this._12o("leftView",Q),n!=x5&&this.setLeftWidth(n)},getRightView:function(){return this._rightView},setRightView:function(Q,n){this._12o("rightView",Q),n!=x5&&this.setRightWidth(n)},getTopView:function(){return this._topView},setTopView:function(Q,n){this._12o("topView",Q),n!=x5&&this.setTopHeight(n)},getBottomView:function(){return this._bottomView},setBottomView:function(Q,n){this._12o("bottomView",Q),n!=x5&&this.setBottomHeight(n)},getCenterView:function(){return this._centerView},setCenterView:function(Q){this._12o("centerView",Q)},_12o:function(Q,n){var x="_"+Q,b=this._view,J=this[x];J!==n&&(J&&(J.getView?JS(J.getView()):JS(J)),(this[x]=n)&&(n.getView?g_(b,n.getView(),1):g_(b,n,1)),this.fp(Q,J,n))},onPropertyChanged:function(Q){this.iv()},validateImpl:function(){var Q=(B=this)._topView,n=B._bottomView,x=B._leftView,b=B._rightView,J=B._centerView,L=B.getWidth(),f=0,V=0,l=L,H=o=B.getHeight(),I=0,Z=0,E=0,a=0,o=(Q&&(V=I=B._topHeight==x5?C_(Q):B._topHeight),n&&(H=o-(Z=B._bottomHeight==x5?C_(n):B._bottomHeight)),x&&(f=E=B._leftWidth==x5?j_(x):B._leftWidth),b&&(l=L-(a=B._rightWidth==x5?j_(b):B._rightWidth)),J5(0,l-f)),B=J5(0,H-V);Q&&F(Q,0,0,L,I),n&&F(n,0,H,L,Z),x&&F(x,0,V,E,B),b&&F(b,l,V,a,B),J&&F(J,f,V,o,B)}})}function Up(Q){u7(Q),Q.stopPropagation()}function ep(Q){u7(Q)}function vp(Q,n){var x=Q.length,b=Q[0];if(H5(Q)||b&&1!==b.length)return Q;for(var J=new Array(x),L=0;L<x;L++)J[L]=Q[L];var f=J[b="L"===J[0]?5:7],V=J[1+b],l=J[2+b],H=J[3+b],I=J[4+b],Z=J[5+b],E=n[0],a=n[1],o=n[2],B=n[3],G=n[4],n=n[5];return J[b]=E*f+o*V,J[1+b]=a*f+B*V,J[2+b]=E*l+o*H,J[3+b]=a*l+B*H,J[4+b]=E*I+o*Z+G,J[5+b]=a*I+B*Z+n,J}function Op(Q,n){return n===Q.substring(0,n.length)}function dp(Q){return parseFloat(Q)||0}function hp(Q,n){n==n5&&(n=new I5),Q=(Q=Q.split(/\s+/)).map(dp),n.set(Q[0]||0,Q[1]||0,Q[2]||0)}function pp(){YK.apply(this,arguments)}function zp(){YK.apply(this,arguments)}function sp(){YK.apply(this,arguments)}function Xp(){YK.apply(this,arguments),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:"ZeroCurvature",endingEnd:"ZeroCurvature"}}function Rp(Q){var n=Q.substr(Q.lastIndexOf(".")+1),x=(Q=b5.convertURL?b5.convertURL(Q):Q,z9[n]||n);return{postfix:n,url:"url("+Q+') format("'+x+'")'}}function gp(Q,n){return s9[Q.postfix]-s9[n.postfix]}function Sp(Q,n,x){Q.x=n.x,Q.y=n.e||x,Q.z=n.y}function mp(Q){Q.duration&&(Q.startTime=kj()),Q.timeId=P7(Q.tick,x5,x5,Q.interval)}function Yp(Q){Q.details=0,Q.timeout=null,Q.lastPoint=null}function Tp(x,b){x.getValue&&x.getValue.compType===b||(x.getValue=function(Q){var n=z(x,Q);return n===n5&&b.properties&&(Q=b.properties[Q])?Q.defaultValue:n},x.getColor=function(Q,n){return kp(!0===n?Q:x.getValue(Q))},x.getValue.compType=b)}function kp(Q,n){return n=n?z(Q,n):Q,p&&p.compGray&&n?b5.toGrayColor(n):oJ&&n?ph(n,oJ,BJ):n}function Np(Q){if(H_(Q)){for(var n=new m,x=Q.length,b=0;b<x;b+=2)n.add({x:Q[b],y:Q[b+1]});Q=n}return Q}function jp(Q,n,x){if(n){var b,J,L,f={x:n.x,y:n.y,width:n.width,height:n.height},V=GJ(Q),l=z(Q,"layoutH"),H=z(Q,"layoutV"),I=1,Z=1,E=0,a=0,o=1,B=1,G=f.x+V.x*f.width,_=f.y+V.y*f.height;switch(l){case"left":break;case"right":G+=x.width-x.rw;break;case"center":G+=.5*(x.width-x.rw);break;default:(b=z(Q,Si)||0)&&(E=Math.abs(a=Math.sin(b)),o=Math.abs(B=Math.cos(b))),"leftright"!==l?(I+=o*(x.widthScale-1),Z+=E*(x.widthScale-1),G*=x.widthScale):(J=z(Q,"scaleX")||1,L=z(Q,"scaleY")||1,I+=f.width?o*(x.width-x.rw)/f.width/J:0,Z+=f.height?E*(x.width-x.rw)/f.height/L:0,G+=(x.rw-x.width)*Math.min(-V.x*B+V.y*a,-V.x*B-(1-V.y)*a,(1-V.x)*B+V.y*a,(1-V.x)*B-(1-V.y)*a))}switch(H){case"top":break;case"bottom":_+=x.height-x.rh;break;case"center":_+=.5*(x.height-x.rh);break;default:b==x5&&(b=z(Q,Si))&&(E=Math.abs(a=Math.sin(b)),o=Math.abs(B=Math.cos(b))),"topbottom"!==H?(I+=E*(x.heightScale-1),Z+=o*(x.heightScale-1),_*=x.heightScale):(J==x5&&(J=z(Q,"scaleX")||1,L=z(Q,"scaleY")||1),I+=f.width?E*(x.height-x.rh)/f.width/J:0,Z+=f.height?o*(x.height-x.rh)/f.height/L:0,_+=(x.rh-x.height)*Math.min(-V.x*a-V.y*B,-V.x*a+(1-V.y)*B,(1-V.x)*a-V.y*B,(1-V.x)*a+(1-V.y)*B))}return 1===I&&1===Z||(f.width*=I,f.height*=Z,f.width<0&&(f.width=0),f.height<0&&(f.height=0)),f.x=G-V.x*f.width,f.y=_-V.y*f.height,f}}function Cp(Q){return H_(Q)?new m(Q):Q}function Qa(Q,n,x,b,J,L,f){var V=p.interactiveInfo,l=Q.transform;if(l)return p.save(),p.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty),V&&V.compInfos.push({comp:Q,rect:n,matrix:l.clone(),prefix:sS,refRect:V.refRect}),!0;if(J===n5&&(J=1),L===n5&&(L=1),l=z(Q,"clipPercentage"),i_(x,n)&&!b&&1===J&&1===L&&l==n5)return V&&V.compInfos.push({comp:Q,rect:n,matrix:V.matrix.clone(),prefix:sS,refRect:V.refRect}),!1;var H=n.x+n.width*(f=f||YS).x,I=n.y+n.height*f.y,Z=x.x+x.width*f.x,f=x.y+x.height*f.y,J=x.width?J*(n.width/x.width):1,L=x.height?L*(n.height/x.height):1;return p.save(),V&&(V.matrix.appendTranslate(H,I).appendRotate(b).appendScale(J,L).appendTranslate(-Z,-f),V.compInfos.push({comp:Q,rect:n,matrix:V.matrix.clone(),prefix:sS,refRect:V.refRect})),Jh(p,H,I),Lh(p,b||0),fh(p,J,L),Jh(p,-Z,-f),l!=n5&&(n=y_(x,z(Q,"clipDirection"),l),p.beginPath(),p.rect(n.x,n.y,n.width,n.height),p.clip()),!0}function na(){p.restore()}function xa(Q,n,x,b){var J,L,f,V,l,H,I,Z,E,a,o,B,G,_,$,W,D,A,u,v,O,M,t,i,r,P,c,F,q=z(Q,Fi,Np),w=z(Q,Si),y=GJ(Q),b=(q&&b.fitSize&&(J=new m,b=jp(Q,K=m7(q),b),L=K.x+y.x*K.width,f=K.y+y.y*K.height,V=b.x+y.x*b.width,l=b.y+y.y*b.height,H=K.width?b.width/K.width:1,I=K.height?b.height/K.height:1,q.each(function(Q){J.add({x:V+(Q.x-L)*H,y:l+(Q.y-f)*I})}),q=J,Q.unionRect=null),z(Q,"scaleX")),K=z(Q,"scaleY"),U=n===_i,e=x5;!x&&U&&((x=Q.unionRect)||(x=m7(q),Q.points.func||(Q.unionRect=x)),e=x),x&&(U?(e=e||Q.unionRect)||(e=m7(q),Q.points.func||(Q.unionRect=e)):e=x,x=Qa(Q,x,e,w,b,K,y),w=z(Q,"borderPattern"),b=US(p,w),K=kp(Q,"background"),y=g(z(Q,"repeatImage"),oJ,BJ),Z=z(Q,"gradientPack"),E=z(Q,"borderGradientPack"),a=kp(Q,"borderColor"),o=z(Q,"borderWidth"),B=g(z(Q,"borderRepeatImage"),oJ,BJ),G=z(Q,"segments",Cp),F=z(Q,"gradient"),_=kp(Q,"gradientColor"),$=z(Q,"border3d"),W=kp(Q,"border3dColor"),D=z(Q,"border3dAccuracy"),A=z(Q,"closePath"),u=z(Q,"fillRule")||"nonzero",v=p.lineJoin,O=p.lineCap,p.lineJoin=z(Q,"borderJoin")||V7,p.lineCap=z(Q,"borderCap")||f7,U?K||y||Z?((P=z(Q,"fillClipPercentage"))!=n5&&(c=y_(e,z(Q,"fillClipDirection"),P),p.save(),p.beginPath(),p.rect(c.x,c.y,c.width,c.height),p.clip()),mh(p,q,G,A),Z?gh(p,Z,kp,!1,e):y?Q1(p,y,oJ,BJ,ZJ,EJ,z(Q,"repeatImageStretch"),e,z(Q,"repeatImageRotation")):Ch(p,K,F,_,e),p.fill(u),Z&&p.restore(),P!=n5&&p.restore(),b!==p&&mh(b,q,G,A)):mh(b,q,G,A):("roundRect"===n?M=z(Q,"cornerRadius"):"polygon"===n?(M=z(Q,"polygonSide"),t=z(Q,"cornerRadius"),i=z(Q,"regular")):"arc"===n&&(M=z(Q,"arcFrom"),t=z(Q,"arcTo"),i=z(Q,"arcClose"),r=z(Q,"arcOval")),K||y||Z?((P=z(Q,"fillClipPercentage"))!=n5&&(c=y_(e,z(Q,"fillClipDirection"),P),p.save(),p.beginPath(),p.rect(c.x,c.y,c.width,c.height),p.clip()),jh(p,n,e,M,t,i,r),Z?gh(p,Z,kp,!1,e):y?Q1(p,y,oJ,BJ,ZJ,EJ,z(Q,"repeatImageStretch"),e,z(Q,"repeatImageRotation")):Ch(p,K,F,_,e),p.fill(u),Z&&p.restore(),P!=n5&&p.restore(),p!==b&&jh(b,n,e,M,t,i,r)):jh(b,n,e,M,t,i,r)),(c=z(Q,"borderWidthAbsolute"))&&(p.save(),p.setTransform(1,0,0,1,0,0)),o&&(a||B||E)&&(p.lineWidth=o,E?gh(p,E,kp,!0,e):B?n1(p,B,oJ,BJ,ZJ,EJ,z(Q,"borderRepeatImageStretch"),e,z(Q,"borderRepeatImageRotation")):p.strokeStyle=a,p.stroke(),E&&p.restore(),$&&Th(p,a,W,o,aJ,D)),eS(p,w),z(Q,"dash")&&0<(y=z(Q,"dashWidth")||o)&&(w=z(Q,"dashPattern")||L7,b=US(p,w,z(Q,"dashOffset")),F=kp(Q,"dashColor")||kp(r1),b!==p&&(U?mh(b,q,G,A):jh(b,n,e,M,t,i,r)),p.strokeStyle=F,p.lineWidth=y,p.stroke(),z(Q,"dash3d")&&Th(p,F,kp(Q,"dash3dColor"),y,aJ,z(Q,"dash3dAccuracy")),eS(p,w)),c&&p.restore(),n===h&&V1(p,K,z(Q,"depth"),e),p.lineJoin=v,p.lineCap=O,x&&na())}function ba(Q){p=Q[0],ZJ=Q[1],EJ=Q[2],aJ=Q[3],oJ=Q[4],BJ=Q[5]}function Ja(Q,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");Q.prototype=e.create(n&&n.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),n&&CS(Q,n)}function La(Q){return"Array]"===(Q=e.prototype.toString.call(Q)).substring(Q.length-6)}function fa(Q,n,x,b,J,L){n=n||[],x=x||[],b=b||[];try{n.push(Q);var f=Function.apply(0,n);return x[x.length]="return "+f,Function.apply(0,x).apply(0,b)}catch(Q){return L&&L(Q),J}}function Va(Q){return Q}function la(Q,n){return n}function Ha(Q,n,x,b){var J=Q?Q.path.slice(0):[];n&&J.push(n),this.desc=x,this.name=n,this.path=nG(J),this.getter=(x=J)&&x.length?new Function("o",["return o['",x.join("']['"),"'];"].join("")):Va,this.setter=(n=J)&&n.length?new Function("o","v",["return o['",n.join("']['"),"'] = v;"].join("")):la,this.isLeaf=b,this.parent=Q,this.children=[],this.childMap={}}function Ia(Q){var n=[];return Q.forEach(function(Q){n.push({x:Q.x,y:Q.y}),n.push({x:Q.x+Q.width,y:Q.y+Q.height}),n.push({x:Q.x+Q.width,y:Q.y}),n.push({x:Q.x,y:Q.y+Q.height})}),n}function Za(Q,n){return 0<Q.dot(n)}function Ea(){this._vertexMap={},this._lineMap={},this._lineList=[]}function aa(Q,n,x,b,J,L,f){x=[x,J],Q[0]===b&&x.reverse(),J=[x[0]._key,x[1]._key].join("|"),(b=Q._triangles[J])||(Q._triangles[J]=b={}),b[x=[L._key,f._key].join("|")]||(b[x]=[L,f])}function oa(Q,n,x){var b=Q._planes[x._key];if(!b)for(var J in Q._planes)if((J=Q._planes[J])._normal.angleTo(x)<.001){b=J;break}b?b._vertices.indexOf(n)<0&&b._vertices.push(n):Q._planes[x._key]={_normal:x,_vertices:[n]}}function Ba(Q,n){return 0===n?"0|0|0":(Math.abs(n)===1/0?[Q.x,Q.y,Q.z]:[Math.round(wJ.angleTo(Q)*n),Math.round(yJ.angleTo(Q)*n),Math.round(KJ.angleTo(Q)*n)]).join("|")}function Ga(Q){for(var n=Q.length,x=0,b=n-1,J=0;J<n;b=J++)x+=Q[b].x*Q[J].y-Q[J].x*Q[b].y;return.5*x}function _a(Q){return(Q%=l5)<0&&(Q+=l5),w<Q?l5-Q:Q}function $a(Q,n){return _a(Q[0]-n[0])+_a(Q[1]-n[1])+_a(Q[2]-n[2])}function Wa(Q,n,x,b,J,L){n=new R(n.get(x)),L=L.apply(n),Q.push({local:n,world:L,type:J,index:x,realIndex:b})}function Da(Q,n){var x=Q.x-n.x;return x*x+(Q=Q.y-n.y)*Q}function Aa(n,x,Q){return{def:n,getter:Q?function(Q){return 1<ee.for(Q).version?Q.getParameter(x):n}:function(Q){return Q.getParameter(x)},setter:Q?function(Q,n){1<ee.for(Q).version&&Q.pixelStorei(x,n)}:function(Q,n){Q.pixelStorei(x,n)}}}function ua(Q){return"string"==typeof Q?sh(Q):Q.r!==n5?(f$[0]=Q.r,f$[1]=Q.g,f$[2]=Q.b,f$[3]=Q.a,f$):Q.red!==n5?(f$[0]=Q.red,f$[1]=Q.green,f$[2]=Q.blue,f$[3]=Q.alpha,f$):Q}function Ma(Q){return La(Q)?Array.prototype.slice.call(Q,0):Q}function ta(Q,n,x){this.gl=n,this._record=x||{},this._branches={},this._leafSync={};for(var b=(this._struct=Q).children,J=b.length;J--;){var L=b[J],f=L.name;L.isLeaf?(this._leafSync[f]=!1,this._record[f]=Ma(L.desc.def)):this._record[f]={}}}function ia(Q){for(var n=1;n<arguments.length;n++){var x=arguments[n];Q.push(x.x,x.y,x.z)}}function ra(Q,n,x,b,J){var L=-b*f5(J),b=b*V5(J);return new I5(Q.x+L*x.x+b*n.x,Q.y+L*x.y+b*n.y,Q.z+L*x.z+b*n.z)}function Pa(Q,n,x,b,J,L,f,V,l){l=l||l5;var H=n?Q.top_vs:Q.bottom_vs;if(H)for(var I,Z,E=n?Q.top_uv:Q.bottom_uv,a=l/f,o=0;o<f;o++)n?(I=o*a+V,Z=(o+1)*a+V):(Z=o*a+V,I=(o+1)*a+V),ia(H,ra(x,b,J,L,I),ra(x,b,J,L,Z),x),E&&E.push(.5-.5*f5(I),.5-.5*V5(I),.5-.5*f5(Z),.5-.5*V5(Z),.5,.5)}function ca(x){var b={};return{get:function(Q){if(b[Q]!==n5)return b[Q];var n;switch(Q){case"WEBGL_depth_texture":n=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=x.getExtension("WEBGL_compressed_texture_etc1");break;default:n=x.getExtension(Q)}return b[Q]=n}}}function Fa(n,x,Q){var b;function J(Q){if("highp"===Q){if(0<n.getShaderPrecisionFormat(35633,36338).precision&&0<n.getShaderPrecisionFormat(35632,36338).precision)return"highp";Q="mediump"}return"mediump"===Q&&0<n.getShaderPrecisionFormat(35633,36337).precision&&0<n.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}Q=Q||{};var L,f="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,V=Q.precision!==n5?Q.precision:"highp",l=((l=J(V))!==V&&(console.warn("WebGL:",V,"not supported, using",l,"instead."),V=l),!0===Q.logarithmicDepthBuffer),Q=n.getParameter(34930),H=n.getParameter(35660),I=n.getParameter(3379),Z=n.getParameter(34076),E=n.getParameter(34921),a=n.getParameter(36347),o=n.getParameter(36348),B=n.getParameter(36349),G=0<H,_=f||!!x.get("OES_texture_float"),$=(f||!!x.get("OES_element_index_uint"))&&"undefined"!=typeof Uint32Array,W=G&&_,D=f?n.getParameter(36183):0,A=f||!!x.get("EXT_shader_texture_lod"),u=!1;return f?u=!0:(L=x.get("ANGLE_instanced_arrays"))&&(u=!0,n.vertexAttribDivisor=function(Q,n){return L.vertexAttribDivisorANGLE(Q,n)},n.drawElementsInstanced=function(Q,n,x,b,J){return L.drawElementsInstancedANGLE(Q,n,x,b,J)},n.drawArraysInstanced=function(Q,n,x,b){return L.drawArraysInstancedANGLE(Q,n,x,b)}),f?x.get("EXT_color_buffer_float"):(x.get("WEBGL_depth_texture"),x.get("OES_texture_half_float"),x.get("OES_texture_half_float_linear"),x.get("OES_standard_derivatives"),x.get("OES_vertex_array_object")),x.get("OES_texture_float_linear"),x.get("EXT_color_buffer_half_float"),x.get("WEBGL_multisampled_render_to_texture"),{isWebGL2:f,getMaxAnisotropy:function(){if(b!==n5)return b;var Q=x.get("EXT_texture_filter_anisotropic");return b=null!==Q?n.getParameter(Q.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:J,precision:V,precisionString:"precision "+V+" float;\nprecision "+V+" int;\n",logarithmicDepthBuffer:l,maxTextures:Q,maxVertexTextures:H,maxTextureSize:I,maxCubemapSize:Z,maxAttributes:E,maxVertexUniforms:a,maxVaryings:o,maxFragmentUniforms:B,vertexTextures:G,floatFragmentTextures:_,elementTypeUint:$,floatVertexTextures:W,maxSamples:D,shaderTextureLod:A,instancedArray:u}}function qa(n,J,Q,x){if(x||!Q.isWebGL2||"undefined"==typeof WeakMap)return{supportsUbo:!1,setCurrentFrameRenderId:W};var b,L={},x=J.getParameter(35375),f=new WeakMap;return(b=L.scene=new s8(J,0,"scene","Scene")).addUniform("uProjectMatrix",16),b.addUniform("uViewMatrix",16),b.addUniform("uCameraPosition",3),b.addUniform("uTime",1),b.addUniform("toneMappingExposure",1),b.addUniform("uFogColor",4),b.addUniform("uFogDensity",1),b.addUniform("uFogNear",1),b.addUniform("uFogFar",1),b.attachSource(),["pbr","phong"].forEach(function(Q){(b=L[Q]=new s8(J,1,Q,"Material")).addUniform("aoMapIntensity",1),b.addUniform("lightMapIntensity",1),b.addUniform("displacementScale",1),b.addUniform("displacementBias",1),b.addUniform("diffuse",3),b.addUniform("emissive",3),b.addUniform("normalScale",2),b.addUniform("opacity",1),b.addUniform("alphaTest",1),b.addUniform("fresnelIntensity",1),b.addUniform("uUvMatrix",12),b.addUniform("uUv2Matrix",12),"pbr"===Q?(b.addUniform("roughness",1),b.addUniform("metalness",1),b.addUniform("transmission",1),b.addUniform("thickness",1),b.addUniform("ior",1),b.addUniform("specularIntensity",1),b.addUniform("rimPower",1),b.addUniform("rimColor",3),b.addUniform("specularColor",3)):(b.addUniform("shininess",1),b.addUniform("refractionRatio",1),b.addUniform("specular",3))}),{supportsUbo:!0,maxBindingPoints:x,setCurrentFrameRenderId:function(Q){(Q=L.scene).attachSource(),Q.uProjectMatrix=n._projectMatrix,Q.uViewMatrix=n._viewMatrix,Q.uCameraPosition=n.getEye(),Q.uTime=n.__uptime,Q.toneMappingExposure=n.getToneMappingExposure(),Q.uFogColor=sh(n._fogColor),Q.uFogDensity=n._fogDensity,Q.uFogNear=n._fogNear,Q.uFogFar=n._fogFar},updateAndBind:function(Q,n){var x,Q=L[Q],b=f.get(n);b===n5&&(b=new WeakMap,f.set(n,b)),b.get(Q)===n5&&(x=J.getUniformBlockIndex(n,Q.name),J.uniformBlockBinding(n,x,Q.bindingPointIndex),b.set(Q,x))},attachUbo:function(Q,n,x){return L[Q].attachSource(n,x)}}}function wa(){return d$.length?d$.pop():new X}function ya(Q){d$.push(Q)}function Ka(Q,n){if(Q)return(Q=Q.s("matDef"))&&Q[n]}function Ua(Q,n){var x,b,J,L=wa();if(H=Q.composedMatrix)return L.copy(H),L;var f,V,l,H=!1,n=(n&&(f=Q.name)&&(n=n._animationId)&&(n=gu.getAnimationMap()[n])&&(V=n.clip)&&(n=gu.getAnimationTracks()[n.animation][0][f])&&(f=V.datas,H=!0,(V=n[0])!==n5&&(x=f[V]),(V=n[1])!==n5&&(J=f[V]),(V=n[2])!==n5&&(b=f[V])),Q.transformData);return H&&n?(L.identity(),f=n.rotationOffset,V=n.rotationPivot,H=n.scalingOffset,l=n.scalingPivot,p$.fromArray(x||n.translation),f&&p$.add(z$.fromArray(f)),V&&p$.add(z$.fromArray(V)),L.makeRotationFromQuaternion(X$.fromArray(J||n.rotation)).setPosition(p$),p$.set(0,0,0),V&&p$.sub(z$.fromArray(V)),H&&p$.add(z$.fromArray(H)),l&&p$.add(z$.fromArray(l)),0===p$.x&&0===p$.y&&0===p$.z||L.translate(p$),1===(b=b||n.scale).x&&1===b.y&&1===b.z||L.scale(s$.fromArray(b)),l&&L.translate(z$.multiplyScalar(-1))):(x=x||Q.position,b=b||Q.scale,J=(J=J||Q.quaternion)||(J=Q.euler)&&s.eulerArrayToQuaternionArray(J,R$),L.composeFromArray(x,J,b)),L}function ea(Q,n){return e$=Q,U$=n instanceof d.Data?(Z5=n,null):(Z5=null,n),[e$,Z5,U$]}function va(Q){e$=Q[0],Z5=Q[1],U$=Q[2]}function Oa(Q){if(Q){var n=(Q="string"==typeof Q?{type:Q}:Q).type;if(n&&"raw"!==n){var x=b5.meshTypeMap[n];if(!(x=x?x(Q):b5.getMesh(n)))return!1}else x=Q;return x.func?x.func(x):x}}function da(Q,n){return[Q[0]*n,Q[1]*n,Q[2]*n]}function ha(Q,n,x){return(n=n[Q])!==n5?n:x?x[Q]:null}function pa(Q,n,x){Q.uUseSkinning=!0,Q.bindMatrix=n.skeleton.bindMatrix,Q.bindMatrixInverse=n.skeleton.bindMatrixInverse,Q.boneTexture=x,Q.boneTextureSize=n.boneTextureSize}function za(Q){var n=((n=Q.s("light.intensity"))==x5?1:n)*Math.PI;return[(Q=sh(Q.s(de)))[0]*n,Q[1]*n,Q[2]*n]}function sa(Q,n,x,b){if(b!==Q._lastHeadlightAmbientIntensity&&(Q.hemisphereLight.skyColor=da(k$.color,1-b),Q.ambientLightColor=da(k$.color,b),Q._lastHeadlightAmbientIntensity=b),x!==Q._lastLightMask&&(Q._lastLightMask=x,b=n._lastLightUploadInfo)){for(var J,L=b.g,f=L.length,V=new Array(f),l=0;l<f;l++)J=L[l],V[l]=!(J<0||32<=J||!(x&1<<J));Q.hemisphereLight.enabled=V[0];var b=n._59O,H=n._spots,I=n._dirs,n=n._87I,Z=1;if(f=b.length)for(l=0;l<f;l++)Q.pointLights[l].enabled=V[Z++];if(f=H.length)for(l=0;l<f;l++)Q.spotLights[l].enabled=V[Z++];if(f=I.length)for(l=0;l<f;l++)Q.directionalLights[l].enabled=V[Z++];if(f=n.length)for(l=0;l<f;l++)Q.rectAreaLights[l].enabled=V[Z++]}}function Xa(Q,v,O,n,x){var b=x?n.cacheShadow:n.cache;if(b.length===n.length&&b.version===(x?n.shadowVersion:n.msVersion)&&b.id===v._id&&O.equals(b.matrix))return b.buffer;var J,L,f,V,l,H,I,Z,E,a,o,B,G,_,$,W,D,A=n.ms,d=x?n.shadow:null,u=(N$.fromArray(Q.getData3dUI(v).mat),j$.copy(O).premultiply(N$.getInverse(N$)),(Q=j$.getElements())[0]),M=Q[4],t=Q[8],i=Q[12],r=Q[1],P=Q[5],c=Q[9],F=Q[13],q=Q[2],w=Q[6],y=Q[10],K=Q[14],U=Q[3],h=Q[7],p=Q[11],z=Q[15],Q=16*n.length;b.buffer&&b.buffer.length===Q?delete(D=b.buffer)._bufId:D=new oS(Q);for(var e=0,s=Q;e<s;e+=16)d&&!d[e>>4]?D[e+0]=D[e+1]=D[e+2]=D[e+3]=D[e+4]=D[e+5]=D[e+6]=D[e+7]=D[e+8]=D[e+9]=D[e+10]=D[e+11]=D[e+12]=D[e+13]=D[e+14]=D[e+15]=0:(J=A[e+0],L=A[e+4],f=A[e+8],V=A[e+12],l=A[e+1],H=A[e+5],I=A[e+9],Z=A[e+13],E=A[e+2],a=A[e+6],o=A[e+10],B=A[e+14],G=A[e+3],_=A[e+7],$=A[e+11],W=A[e+15],D[e+0]=J*u+L*r+f*q+V*U,D[e+4]=J*M+L*P+f*w+V*h,D[e+8]=J*t+L*c+f*y+V*p,D[e+12]=J*i+L*F+f*K+V*z,D[e+1]=l*u+H*r+I*q+Z*U,D[e+5]=l*M+H*P+I*w+Z*h,D[e+9]=l*t+H*c+I*y+Z*p,D[e+13]=l*i+H*F+I*K+Z*z,D[e+2]=E*u+a*r+o*q+B*U,D[e+6]=E*M+a*P+o*w+B*h,D[e+10]=E*t+a*c+o*y+B*p,D[e+14]=E*i+a*F+o*K+B*z,D[e+3]=G*u+_*r+$*q+W*U,D[e+7]=G*M+_*P+$*w+W*h,D[e+11]=G*t+_*c+$*y+W*p,D[e+15]=G*i+_*F+$*K+W*z);return b.length=n.length,b.version=x?n.shadowVersion:n.msVersion,b.id=v._id,b.buffer=D,(Q=(Q=b.matrix)?Q:b.matrix=new X).fromArray(O.getElements()),D}function Ra(Q,n,x){x instanceof d.Node&&(Iv.fromArray(FS(x,n.getMat(x))),n=x.getAnchor3d(),Q.push((new I5).set(0-n.x,0-n.y,0-n.z).applyMatrix4(Iv)),Q.push((new I5).set(0-n.x,0-n.y,1-n.z).applyMatrix4(Iv)),Q.push((new I5).set(0-n.x,1-n.y,0-n.z).applyMatrix4(Iv)),Q.push((new I5).set(0-n.x,1-n.y,1-n.z).applyMatrix4(Iv)),Q.push((new I5).set(1-n.x,0-n.y,0-n.z).applyMatrix4(Iv)),Q.push((new I5).set(1-n.x,0-n.y,1-n.z).applyMatrix4(Iv)),Q.push((new I5).set(1-n.x,1-n.y,0-n.z).applyMatrix4(Iv)),Q.push((new I5).set(1-n.x,1-n.y,1-n.z).applyMatrix4(Iv)))}function ga(Q,n,x){var b=Q[n];b&&b.releaseTexture(),x?Q[n]=x:delete Q[n]}function Sa(Q,n){return Q.z!==n.z?n.z-Q.z:Q.id-n.id}function ma(){var Q=new I5;return Q.subVectors(kv,Tv),Qe.subVectors(Yv,Tv),Q.cross(Qe).normalize(),Q}function Ya(Q,n){var x,b;n=s.roundFloat(n,3),Q.speed=n,"once"===Q.loop&&(x=Q.duration,b=Q.start,Q.end=(n<0?Math.floor((b-1e-8)/x):Math.ceil((b+1e-8)/x))*x)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);